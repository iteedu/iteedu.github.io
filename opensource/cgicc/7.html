<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end -->
<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->

  <h1> Cgicc项目功能模块的实现 </h1>
  <p><strong>站长原创，版权所有<a href="http://www.iteedu.com/index.html">ITEEDU</a>，2011-07-25</strong>
    </p>
  </p>
  在经历了一系列尝试之后，老板要求我将Ocr做成一个服务器，也就说实现：从客户端接收其传过来的图片内容，并对其进行解析，存放成本地临时图片，然后在调用我编写的的imagegick接口函数，将传过来的.jpg图片转换成.bmp图片，然后再调用我编写的ocr接口函数，将.bmp图片上的文字信息提取出来，并且通过web将其发送给客户端。
    本地上测试时，我们安装了apache2服务器，第一次测试用的是CGI来实现的，可是CGI无法对图片的内容进行正确的提取，甚至一提取就会出错。 </p>
  </p>
  <p >我在本地上的测试是通过这样子进行的： </p>
  <p >（1）&nbsp;新建一个html的网页，具体内容如下（html代码），并且将该html取名为index.html，并且将其放置在apache2的数据目录：/var/www/下边。注意：action对象的值为：/cgi-bin/cgicc.cgi。测试该网页：在浏览器的地址栏中输入：http://localhost/cgi.html，其运行结果如图1所示。 </p>
  <pre class="code" >Cgi.html文件： <br />
  &lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0//EN&quot;&nbsp;&quot;http://www.w3.org/TR/REC-html40/strict.dtd&quot;&gt; 
  &lt;html&nbsp;lang=&quot;en&quot;&nbsp;dir=&quot;ltr&quot;&nbsp;&gt; 
  &lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&nbsp;/&gt; 
  &lt;head&gt; 
  &lt;style&gt;&lt;!--&nbsp; 
  body&nbsp;{&nbsp;color:&nbsp;black;&nbsp;background:&nbsp;white;&nbsp;} 
  span.red&nbsp;{&nbsp;color:red;&nbsp;} 
  hr.half&nbsp;{&nbsp;width:&nbsp;60%;&nbsp;margin-left:&nbsp;auto;&nbsp;margin-right:&nbsp;auto;&nbsp;} 
  div.center&nbsp;{&nbsp;text-align:&nbsp;center;&nbsp;} 
  div.notice&nbsp;{&nbsp;border:&nbsp;solid&nbsp;thin;&nbsp;padding:&nbsp;1em;&nbsp;margin:&nbsp;1em&nbsp;0;&nbsp;background:&nbsp;#ddd;&nbsp;text-align:&nbsp;center;&nbsp;}table&nbsp;{&nbsp;width:&nbsp;90%;&nbsp;margin-left:&nbsp;auto;&nbsp;margin-right:&nbsp;auto;&nbsp;} 
  tr.title,&nbsp;td.title&nbsp;{&nbsp;color:&nbsp;white;&nbsp;background:&nbsp;black;&nbsp;font-weight:&nbsp;bold;&nbsp;text-align:&nbsp;center;&nbsp;} 
  tr.data,&nbsp;td.data&nbsp;{&nbsp;background:&nbsp;#ddd;&nbsp;} 
  td.form&nbsp;{&nbsp;background:&nbsp;#ddd;&nbsp;text-align:&nbsp;center;&nbsp;} 
  &nbsp;--&gt;&lt;/style&gt; <br />  &lt;title&gt;GNU&nbsp;cgicc&nbsp;v3.2.9&nbsp;File&nbsp;Upload&nbsp;Test&lt;/title&gt; 
  &lt;/head&gt; 
  &lt;body&gt; 
  &lt;h1&gt;GNU&nbsp;cgi&lt;span&nbsp;class=&quot;red&quot;&nbsp;&gt;cc&lt;/span&gt;&nbsp;v3.2.9&nbsp;File&nbsp;Upload&nbsp;Test&lt;/h1&gt; 
  &lt;!--&nbsp;This&nbsp;page&nbsp;generated&nbsp;by&nbsp;cgicc&nbsp;for&nbsp;&nbsp;--&gt; 
  &lt;h4&gt;Thanks&nbsp;for&nbsp;using&nbsp;cgi&lt;span&nbsp;class=&quot;red&quot;&nbsp;&gt;cc&lt;/span&gt;,&nbsp;(192.168.3.15)!&lt;/h4&gt; 
  &lt;br&nbsp;/&gt; 
  &lt;form&nbsp;method=&quot;post&quot;&nbsp;action=&quot;/cgi-bin/cgicc.cgi&quot;&nbsp;enctype=&quot;multipart/form-data&quot;&gt; 
  &lt;table&gt; <br />  &lt;tr&gt;&lt;td&nbsp;class=&quot;title&quot;&gt;Send&nbsp;a&nbsp;file&lt;/td&gt;&lt;td&nbsp;class=&quot;form&quot;&gt;&lt;input&nbsp;type=&quot;file&quot;&nbsp;name=&quot;userfile&quot;&nbsp;accept=&quot;text/plain&quot;&nbsp;/&gt;&lt;/td&gt;&lt;/tr&gt; <br />  &lt;tr&gt;&lt;td&nbsp;class=&quot;title&quot;&gt;Upload&nbsp;Redirection&lt;/td&gt;&lt;td&nbsp;class=&quot;form&quot;&gt;&lt;input&nbsp;type=&quot;checkbox&quot;&nbsp;name=&quot;redirect&quot;&nbsp;/&gt;Bounce&nbsp;uploaded&nbsp;file&nbsp;back&nbsp;to&nbsp;browser&lt;/td&gt;&lt;/tr&gt; <br />  &lt;/table&gt; 
  &lt;div&nbsp;class=&quot;center&quot;&gt;&lt;p&gt;&lt;input&nbsp;type=&quot;submit&quot;&nbsp;name=&quot;submit&quot;&nbsp;value=&quot;Send&nbsp;the&nbsp;file&quot;&nbsp;/&gt;&lt;input&nbsp;type=&quot;reset&quot;&nbsp;value=&quot;Nevermind&quot;&nbsp;/&gt;&lt;/p&gt;&lt;/div&gt;&lt;/form&gt; <br />  &lt;hr&nbsp;class=&quot;half&quot;&nbsp;&nbsp;/&gt; 
  &lt;div&nbsp;align=&quot;center&quot;&nbsp;class=&quot;smaller&quot;&nbsp;&gt; 
  GNU&nbsp;cgi&lt;span&nbsp;class=&quot;red&quot;&nbsp;&gt;cc&lt;/span&gt;&nbsp;v3.2.9&lt;br&nbsp;/&gt; 
  Compiled&nbsp;at&nbsp;11:58:36&nbsp;on&nbsp;Jul&nbsp;12&nbsp;2011&lt;br&nbsp;/&gt; 
  Configured&nbsp;for&nbsp;x86_64-unknown-linux-gnu.&nbsp;Running&nbsp;on&nbsp;Linux&nbsp;2.6.32-21-server&nbsp;(ubuntuserver). 
  &lt;br&nbsp;/&gt;Total&nbsp;time&nbsp;for&nbsp;request&nbsp;=&nbsp;1008&nbsp;us&nbsp;(0.001008&nbsp;s)&lt;/div&gt; 
  &lt;/body&gt;&lt;/html&gt; </pre>

  <p >（2）&nbsp;编写提取cgi.html发送过来的信息，其代码如下：（代码） </p>
  <p >（3）&nbsp;将其取名为cgicc.cgi，并且放置在apache2服务器的：/usr/lib/cgi-bin/目录下边。 </p>
  <p >（4）&nbsp;测试，在浏览器的地址栏中输入：http://localhost/cgi.html，选择上传的文件，点击&#8221;确定&#8221;，查看返回信息 </p>
  <p >（5）&nbsp;测试结果发现：内容中的字符可以提取，提取的字符也可以转换成相应的类型，但是如果是图片的内容，就会出错，具体错误信息，如图2所示： </p>
  <p><img src="image/7_wps_clip_image-3027.png"/>
    </p>
  </p>
  <p>图1&nbsp;cgi.html显示结果
    </p>
  </p>
  <pre class="code" >  #include&nbsp;&lt;new&gt; 
  #include&nbsp;&lt;string&gt; 
  #include&nbsp;&lt;vector&gt; 
  #include&nbsp;&lt;stdexcept&gt; 
  #include&nbsp;&lt;iostream&gt; 
  #include&nbsp;&lt;cstdlib&gt; 
  #include&nbsp;&lt;string.h&gt; 
   
  #include&nbsp;&quot;cgicc/CgiDefs.h&quot; 
  #include&nbsp;&quot;cgicc/Cgicc.h&quot; 
  #include&nbsp;&quot;cgicc/HTTPHTMLHeader.h&quot; 
  #include&nbsp;&quot;cgicc/HTMLClasses.h&quot; 
   
  #include&nbsp;&quot;styles.h&quot; 
   
  using&nbsp;namespace&nbsp;std; 
  using&nbsp;namespace&nbsp;cgicc; 
   
  //&nbsp;Print&nbsp;the&nbsp;form&nbsp;for&nbsp;this&nbsp;CGI 
   
   
  //&nbsp;Main&nbsp;Street,&nbsp;USA 
  int&nbsp;main(int&nbsp;/*Arc*/,char&nbsp;**&nbsp;/*argv*/) 
  { 
   
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cgicc&nbsp;cgi; 
   
  &nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Output&nbsp;the&nbsp;HTTP&nbsp;headers&nbsp;for&nbsp;an&nbsp;HTML&nbsp;document,&nbsp;and&nbsp;the&nbsp;HTML&nbsp;4.0&nbsp;DTD&nbsp;info 
  &nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;HTTPHTMLHeader()&nbsp;&lt;&lt;&nbsp;HTMLDoctype(HTMLDoctype::eStrict)&nbsp;&lt;&lt;&nbsp;endl; 
  &nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;html().set(&quot;lang&quot;,&nbsp;&quot;en&quot;).set(&quot;dir&quot;,&nbsp;&quot;ltr&quot;)&nbsp;&lt;&lt;&nbsp;endl; 
  &nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Set&nbsp;up&nbsp;the&nbsp;page's&nbsp;header&nbsp;and&nbsp;title. 
  &nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;&quot;&lt;meta&nbsp;http-equiv=\&quot;Content-Type\&quot;&nbsp;content=\&quot;text/html;&nbsp;charset=utf-8\&quot;&nbsp;/&gt;&quot;&nbsp;&lt;&lt;&nbsp;endl; 
  &nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;head()&nbsp;&lt;&lt;&nbsp;endl; 
  &nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;style()&nbsp;&lt;&lt;&nbsp;comment()&nbsp;&lt;&lt;&nbsp;endl; 
  &nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;styles; 
  &nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;comment()&nbsp;&lt;&lt;&nbsp;style()&nbsp;&lt;&lt;&nbsp;endl; 
  &nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;title()&nbsp;&lt;&lt;&nbsp;&quot;GNU&nbsp;cgicc&nbsp;v&quot;&nbsp;&lt;&lt;&nbsp;cgi.getVersion() 
  &#9;&nbsp;&lt;&lt;&nbsp;&quot;&nbsp;File&nbsp;Upload&nbsp;Test&quot;&nbsp;&lt;&lt;&nbsp;title()&nbsp;&lt;&lt;&nbsp;endl; 
  &nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;head()&nbsp;&lt;&lt;&nbsp;endl; 
  &nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;body()&nbsp;&lt;&lt;&nbsp;endl; 
   
  &nbsp;&nbsp;&nbsp;&nbsp;const_file_iterator&nbsp;file; 
  &nbsp;&nbsp;&nbsp;&nbsp;file&nbsp;=&nbsp;cgi.getFile(&quot;userfile&quot;); 
   
  &nbsp;&nbsp;&nbsp;&nbsp;if(file&nbsp;!=&nbsp;cgi.getFiles().end())&nbsp;{ 
  &nbsp;&nbsp;&nbsp;&nbsp;&#9;cout&nbsp;&lt;&lt;&nbsp;&quot;&lt;form&nbsp;method=\&quot;post\&quot;&nbsp;action=\&quot;/cgi-bin/getfile.cgi&quot; 
  &nbsp;&nbsp;&nbsp;&nbsp;&#9;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;cgi.getEnvironment().getScriptName() 
  &nbsp;&nbsp;&nbsp;&nbsp;&#9;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;&quot;\&quot;&nbsp;enctype=\&quot;multipart/form-data\&quot;&gt;&quot;&nbsp;&lt;&lt;&nbsp;endl; 
   
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;table()&nbsp;&lt;&lt;&nbsp;endl; 
   
   
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;tr()&nbsp;&lt;&lt;&nbsp;td(&quot;Filename&quot;).set(&quot;class&quot;,&quot;title&quot;) 
  &nbsp;&nbsp;&nbsp;&nbsp;&#9;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;td(file-&gt;getFilename()).set(&quot;class&quot;,&quot;data&quot;)&nbsp;&lt;&lt;&nbsp;tr()&nbsp;&lt;&lt;&nbsp;endl; 
   
   
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;tr()&nbsp;&lt;&lt;&nbsp;td(&quot;Data&nbsp;Length&quot;).set(&quot;class&quot;,&quot;title&quot;) 
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;td().set(&quot;class&quot;,&quot;data&quot;) 
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;&quot;&lt;input&nbsp;type=\&quot;text\&quot;&nbsp;name=\&quot;length\&quot;&nbsp;&quot; 
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;&quot;&nbsp;value=\&quot;&quot;&nbsp;&lt;&lt;&nbsp;file-&gt;getDataLength()&lt;&lt;&nbsp;&quot;\&quot;&gt;&quot; 
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;td()&nbsp;&lt;&lt;&nbsp;tr()&nbsp;&lt;&lt;&nbsp;endl; 
   
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;tr()&nbsp;&lt;&lt;&nbsp;td(&quot;File&nbsp;Data&quot;).set(&quot;class&quot;,&quot;title&quot;) 
  &nbsp;&nbsp;&nbsp;&nbsp;&#9;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;td().set(&quot;class&quot;,&quot;data&quot;)&nbsp;&lt;&lt;&nbsp;pre() 
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//file-&gt;writeToStream(cout); 
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;&quot;&lt;textarea&nbsp;type=\&quot;textarea\&quot;&nbsp;name=\&quot;data\&quot;&nbsp;rows=\&quot;30\&quot;&nbsp;cols=\&quot;800\&quot;&nbsp;&nbsp;id=\&quot;data\&quot;&quot; 
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;&quot;&nbsp;value=&quot;; 
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file-&gt;writeToStream(cout); 
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;&quot;\&quot;&gt;&quot; 
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9;&nbsp;&lt;&lt;&nbsp;&quot;&lt;/textarea&gt;&quot;&nbsp;&lt;&lt;&nbsp;endl; 
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;td()&nbsp;&lt;&lt;&nbsp;tr()&nbsp;&lt;&lt;&nbsp;endl; 
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;pre()&nbsp;&lt;&lt;&nbsp;td()&nbsp;&lt;&lt;&nbsp;tr()&nbsp;&lt;&lt;&nbsp;endl; 
   
   
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;table()&nbsp;&lt;&lt;&nbsp;endl; 
   
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;&quot;&lt;div&nbsp;class=\&quot;center\&quot;&gt;&lt;p&gt;&quot; 
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;&quot;&lt;input&nbsp;type=\&quot;submit\&quot;&nbsp;name=\&quot;submit\&quot;&nbsp;value=\&quot;Send\&quot;&nbsp;/&gt;&quot; 
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;&quot;&lt;/p&gt;&lt;/div&gt;&lt;/form&gt;&quot;&nbsp;&lt;&lt;&nbsp;endl; 
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} 
  &nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;&quot;get&nbsp;the&nbsp;jpg's&nbsp;stream&nbsp;and&nbsp;its&nbsp;length&nbsp;into&nbsp;the&nbsp;form,the&nbsp;send&nbsp;it&nbsp;to&nbsp;the&nbsp;server&nbsp;hehe&quot;&nbsp;&lt;&lt;endl; 
  &nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;body()&nbsp;&lt;&lt;&nbsp;html()&nbsp;&lt;&lt;&nbsp;endl; 
   
  &nbsp;&nbsp;&nbsp;&nbsp;//已经确定file-&gt;getData.c_str()是上传图片的内容，将其生成本地txt，查看其二进制流，与原图片的二进制流对比，一样。 
  &nbsp;&nbsp;&nbsp;&nbsp;//问题：写入.jpg就变为空；写入txt，就是图片的内容&#8230;&#8230; 
  &nbsp;&nbsp;&nbsp;&nbsp;ofstream&nbsp;output; 
  &nbsp;&nbsp;&nbsp;&nbsp;output.open(&quot;/var/www/data/test.jpg&quot;); 
  &nbsp;&nbsp;&nbsp;&nbsp;output.write(file-&gt;getData().c_str(),file-&gt;getDataLength()); 
  &nbsp;&nbsp;&nbsp;&nbsp;output.close(); 
  &nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;&quot;close&nbsp;the&nbsp;file&quot;&nbsp;&lt;&lt;&nbsp;endl; 
  &nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;EXIT_SUCCESS; 
  &nbsp;&nbsp;//} 
  } </pre>
  <p><img src="image/7_wps_clip_image-5540.png"/>
  </p>
  <p>图2&nbsp;&nbsp;返回信息 
  </p>
  <p >此时，查看/var/www/data/目录，其下边生成了test.jpg临时图片。 &nbsp;</p>
<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->
