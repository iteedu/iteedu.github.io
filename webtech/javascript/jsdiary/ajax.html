<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end -->
<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->
<h2>什么是 AJAX ？</h2>
<p>AJAX 指异步 JavaScript 及 XML（Asynchronous JavaScript And XML）。  </p>
<p>AJAX 是一种在 2005 年由 Google 推广开来的编程模式。  </p>
<p>AJAX 不是一种新的编程语言，而是一种使用现有标准的新方法。</p>
<p>AJAX 是一种在无需重新加载整个网页的情况下，能够更新部分网页的技术。</p>
<p>AJAX 是一种用于创建快速动态网页的技术。  </p>
<p>通过在后台与服务器进行少量数据交换，AJAX 可以使网页实现异步更新。</p>
<p>这意味着可以在不重新加载整个网页的情况下，对网页的某部分进行更新。 </p>
<h2>XMLHttpRequest 对象</h2>
<p>XMLHttpRequest 是 AJAX 的基础。XMLHttpRequest 用于在后台与服务器交换数据。这意味着可以在不重新加载整个网页的情况下，对网页的某部分进行更新。 </p>
<h3>创建 XMLHttpRequest 对象</h3>
<p>创建 XMLHttpRequest 对象的语法： </p>
<pre class="brush:javascript">xmlhttp =new XMLHttpRequest();</pre>
<p>老版本的 Internet Explorer （IE5 和 IE6）使用 ActiveX 对象： </p>
<pre class="brush:javascript">xmlhttp =new ActiveXObject("Microsoft.XMLHTTP");</pre>
<p>为了应对所有的现代浏览器，包括 IE5 和 IE6，请检查浏览器是否支持 XMLHttpRequest 对象。如果支持，则创建 XMLHttpRequest 对象。如果不支持，则创建 ActiveXObject ： </p>
<pre class="brush:javascript">var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }</pre>
<p>改进方法： </p>
<pre class="brush:javascript">function GetXmlHttpObject() {
	var xmlHttp = null;
	try {
		// Firefox, Opera 8.0+,Safari
		xmlHttp = new XMLHttpRequest();
	} catch (e) {
		// Internet Explorer
		try {
			xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
		} catch (e) {
			xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
		}
	}
	return xmlHttp;
}</pre>
<h3> 向服务器发送请求</h3>
<p>如需将请求发送到服务器，我们使用 XMLHttpRequest 对象的 open() 和 send() 方法： </p>
<pre class="brush:javascript">xmlhttp.open("GET","test1.txt",true);
xmlhttp.send();</pre>
<h4> open(method, url, async, username, password)</h4>
<p>初始化 HTTP 请求参数。  </p>
<p>规定请求的类型、URL 以及是否异步处理请求。 </p>
<ol>
  <li>method：请求的类型；GET 或 POST</li>
	<li>url：文件在服务器上的位置。该文件可以是任何类型的文件，比如 .txt 和 .xml，或者服务器脚本文件，比如 .asp 和 .html （在传回响应之前，能够在服务器上执行任务）。</li>
	<li>async：true（异步）或 false（同步）</li>
	<li>username 和 password 参数是可选的，为 url 所需的授权提供认证资格。如果指定了，它们会覆盖 url 自己指定的任何资格。</li>
</ol>
<p>这个方法初始化请求参数以供 send() 方法稍后使用。它把 readyState 设置为 1，删除之前指定的所有请求头部，以及之前接收的所有响应头部，并且把 responseText、responseXML、status 以及 statusText 参数设置为它们的默认值。当 readyState 为 0 的时候（当 XMLHttpRequest 对象刚创建或者 abort() 方法调用后）以及当 readyState 为 4 时（已经接收响应时），调用这个方法是安全的。  </p>
<p>除了保存供 send() 方法使用的请求参数，以及重置 XMLHttpRequest 对象以便复用，open() 方法没有其他的行为。要特别注意，当这个方法调用的时候，通常不会打开一个到 Web 服务器的网络连接。 </p>
<h4>send(string)</h4>
<p>发送一个 HTTP 请求，将请求发送到服务器。  </p>
<p>string：仅用于 POST 请求，指定了请求体，作为一个字符串或者 Document 对象。  </p>
<p>这个方法导致一个 HTTP 请求发送。如果之前没有调用 open()，或者更具体地说，如果 readyState 不是 1，send() 抛出一个异常。否则，它发送一个 HTTP 请求，该请求由以下几部分组成：之前调用 open() 时指定的 HTTP 方法、URL 以及认证资格（如果有的话）。 之前调用 setRequestHeader() 时指定的请求头部（如果有的话）。 传递给这个方法的 body 参数。 </p>
<p>一旦请求发布了，send() 把 readyState 设置为 2，并触发 onreadystatechange 事件句柄。 　　如果之前调用的 open() 参数 async 为 false，这个方法会阻塞并不会返回，直到 readyState 为 4 并且服务器的响应被完全接收。否则，如果 async 参数为 true，或者这个参数省略了，send() 立即返回，并且正如后面所介绍的，服务器响应将在一个后台线程中处理。  </p>
<p>如果服务器响应带有一个 HTTP 重定向，send() 方法或后台线程自动遵从重定向。当所有的 HTTP 响应头部已经接收，send() 或后台线程把 readyState 设置为 3 并触发 onreadystatechange 事件句柄。如果响应较长，send() 或后台线程可能在状态 3 中触发 onreadystatechange 事件句柄：这可以作为一个下载进度指示器。最后，当响应完成，send() 或后台线程把 readyState 设置为 4，并最后一次触发事件句柄。 </p>
<h3>服务器响应</h3>
<p>如需获得来自服务器的响应，请使用 XMLHttpRequest 对象的 responseText 或 responseXML 属性。 </p>
<h4>responseText</h4>
<p>获得字符串形式的响应数据。
  
  responseText 属性返回字符串形式的响应，因此您可以这样使用： </p>
<pre class="brush:javascript">document.getElementById("myDiv").innerHTML=xmlhttp.responseText;</pre>
<h4>responseXML</h4>
<p>获得 XML 形式的响应数据。
  
  请求 books.xml 文件，并解析响应： </p>
<pre class="brush:javascript">xmlDoc=xmlhttp.responseXML;
txt="";
x=xmlDoc.getElementsByTagName("title");
for (i=0;i&lt;x.length;i++)
  {
  txt=txt + x[i].childNodes[0].nodeValue + "&lt;br /&gt;";
  }
document.getElementById("myDiv").innerHTML=txt;</pre>
<strong>books.xml</strong>
<pre class="brush:xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;bookstore&gt;
	&lt;book category="children"&gt;
		&lt;title lang="en"&gt;Harry Potter&lt;/title&gt;
		&lt;author&gt;J K. Rowling&lt;/author&gt;
		&lt;year&gt;2005&lt;/year&gt;
		&lt;price&gt;29.99&lt;/price&gt;
	&lt;/book&gt;
	&lt;book category="cooking"&gt;
		&lt;title lang="en"&gt;Everyday Italian&lt;/title&gt;
		&lt;author&gt;Giada De Laurentiis&lt;/author&gt;
		&lt;year&gt;2005&lt;/year&gt;
		&lt;price&gt;30.00&lt;/price&gt;
	&lt;/book&gt;
	&lt;book category="web" cover="paperback"&gt;
		&lt;title lang="en"&gt;Learning XML&lt;/title&gt;
		&lt;author&gt;Erik T. Ray&lt;/author&gt;
		&lt;year&gt;2003&lt;/year&gt;
		&lt;price&gt;39.95&lt;/price&gt;
	&lt;/book&gt;
	&lt;book category="web"&gt;
		&lt;title lang="en"&gt;XQuery Kick Start&lt;/title&gt;
		&lt;author&gt;James McGovern&lt;/author&gt;
		&lt;author&gt;Per Bothner&lt;/author&gt;
		&lt;author&gt;Kurt Cagle&lt;/author&gt;
		&lt;author&gt;James Linn&lt;/author&gt;
		&lt;author&gt;Vaidyanathan Nagarajan&lt;/author&gt;
		&lt;year&gt;2003&lt;/year&gt;
		&lt;price&gt;49.99&lt;/price&gt;
	&lt;/book&gt;
&lt;/bookstore&gt;</pre>
<h4>onreadystatechange 事件</h4>
<p>每当 readyState 改变时，就会触发 onreadystatechange 事件。  </p>
<p>readyState 属性存有 XMLHttpRequest 的状态信息。  </p>
<p>存储函数（或函数名），每当 readyState 属性改变时，就会调用该函数。 </p>
<h4>readyState</h4>
<p>存有 XMLHttpRequest 的状态。从 0 到 4 发生变化。 </p>
<ul>
  <li>0: 请求未初始化</li>
	<li>1: 服务器连接已建立</li>
	<li>2: 请求已接收</li>
	<li>3: 请求处理中</li>
	<li>4: 请求已完成，且响应已就绪</li>
</ul>
<h4>status</h4>
<ul>
	<li>200: "OK"</li>
	<li>404: 未找到页面</li>
</ul>
<h4>示例</h4>
<p>在 onreadystatechange 事件中，当服务器响应已做好被处理的准备时所执行的任务。  </p>
<p>当 readyState 等于 4 且状态为 200 时，表示响应已就绪： </p>
<pre class="brush:javascript">xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200)
    {
    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    }
  }</pre>
<p>注释：onreadystatechange 事件被触发 4 次，对应着 readyState 的每个变化。 </p>
<h3>其它属性</h3>
<h4>statusText</h4>
<p>这个属性用名称而不是数字指定了请求的 HTTP 的状态代码。也就是说，当状态为 200 的时候它是 "OK"，当状态为 404 的时候它是 "Not Found"。和 status 属性一样，当 readyState 小于 3 的时候读取这一属性会导致一个异常。
</p>
<h4>abort()</h4>
<p>取消当前响应，关闭连接并且结束任何未决的网络活动。  </p>
<p>这个方法把 XMLHttpRequest 对象重置为 readyState 为 0 的状态，并且取消所有未决的网络活动。例如，如果请求用了太长时间，而且响应不再必要的时候，可以调用这个方法。 </p>
<h4>getAllResponseHeaders()</h4>
<p>把 HTTP 响应头部作为未解析的字符串返回。
</p>
<p>如果 readyState 小于 3，这个方法返回 null。否则，它返回服务器发送的所有 HTTP 响应的头部。头部作为单个的字符串返回，一行一个头部。每行用换行符 "\r\n" 隔开。
</p>
<h4>getResponseHeader(key)</h4>
<p>返回指定的 HTTP 响应头部的值。其参数是要返回的 HTTP 响应头部的名称。可以使用任何大小写来制定这个头部名字，和响应头部的比较是不区分大小写的。  </p>
<p>该方法的返回值是指定的 HTTP 响应头部的值，如果没有接收到这个头部或者 readyState 小于 3 则为空字符串。如果接收到多个有指定名称的头部，这个头部的值被连接起来并返回，使用逗号和空格分隔开各个头部的值。 </p>
<h4>setRequestHeader(header,value)</h4>
<p>向请求添加 HTTP 头。</p>
<ol>
	<li>header: 规定头的名称</li>
	<li>value: 规定头的值</li>
</ol>
<p>setRequestHeader() 方法指定了一个 HTTP 请求的头部，它应该包含在通过后续 send() 调用而发布的请求中。这个方法只有当 readyState 为 1 的时候才能调用，例如，在调用了 open() 之后，调用 send() 之前。  </p>
<p>如果带有指定名称的头部已经被指定了，这个头部的新值就是：之前指定的值，加上逗号、空格以及这个调用指定的值。  </p>
<p>如果 open() 调用指定了认证资格，XMLHttpRequest 自动发送一个适当的 Authorization 请求头部。但是，你可以使用 setRequestHeader() 来添加这个头部。类似地，如果 Web 服务器已经保存了和传递给 open() 的 URL 相关联的 cookie，适当的 Cookie 或 Cookie2 头部也自动地包含到请求中。可以通过调用 setRequestHeader() 来把这些 cookie 添加到头部。XMLHttpRequest 也可以为 User-Agent 头部提供一个默认值。如果它这么做，你为该头部指定的任何值都会添加到这个默认值后面。 </p>
<h2>GET 还是 POST？</h2>
<p>与 POST 相比，GET 更简单也更快，并且在大部分情况下都能用。  </p>
<p>然而，在以下情况中，请使用 POST 请求：  </p>
<ul>
  <li>无法使用缓存文件（更新服务器上的文件或数据库）  </li>
  <li>向服务器发送大量数据（POST 没有数据量限制）  </li>
  <li>发送包含未知字符的用户输入时，POST 比 GET 更稳定也更可靠 </li>
</ul>
<h3>GET 请求</h3>
<p>一个简单的 GET 请求： </p>
<pre class="brush:javascript">xmlhttp.open("GET","demo_get.asp",true);
xmlhttp.send();</pre>
<p>在上面的例子中，您可能得到的是缓存的结果。  </p>
<p>为了避免这种情况，请向 URL 添加一个唯一的 ID： </p>
<pre class="brush:javascript">xmlhttp.open("GET","demo_get.asp?t=" + Math.random(),true);
xmlhttp.send();</pre>
<p>如果您希望通过 GET 方法发送信息，请向 URL 添加信息： </p>
<pre class="brush:javascript">xmlhttp.open("GET","demo_get2.asp?fname=Bill&amp;lname=Gates",true);
xmlhttp.send();</pre>
<h3>POST 请求</h3>
<p>一个简单 POST 请求： </p>
<pre class="brush:javascript">xmlhttp.open("POST","demo_post.asp",true);
xmlhttp.send();</pre>
<p>如果需要像 HTML 表单那样 POST 数据，请使用 setRequestHeader() 来添加 HTTP 头。然后在 send() 方法中规定您希望发送的数据： </p>
<pre class="brush:javascript">xmlhttp.open("POST","ajax_test.asp",true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send("fname=Bill&amp;lname=Gates");</pre>
<h2>异步</h2>
<p>AJAX 指的是异步 JavaScript 和 XML（Asynchronous JavaScript and XML）。  </p>
<p>XMLHttpRequest 对象如果要用于 AJAX 的话，其 open() 方法的 async 参数必须设置为 true： </p>
<pre class="brush:javascript">xmlhttp.open("GET","ajax_test.asp",true);</pre>
<p>对于 web 开发人员来说，发送异步请求是一个巨大的进步。很多在服务器执行的任务都相当费时。AJAX 出现之前，这可能会引起应用程序挂起或停止。  </p>
<p>通过 AJAX，JavaScript 无需等待服务器的响应，而是：  </p>
<p>在等待服务器响应时执行其他脚本。  </p>
<p>当响应就绪后对响应进行处理。 </p>
<h3>Async = true</h3>
<p>当使用 async=true 时，返回后会调用 onreadystatechange 事件的函数，可以根据返回状态进行相应操作： </p>
<pre class="brush:javascript">xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200)
    {
    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","test1.txt",true);
xmlhttp.send();</pre>
<h3>Async = false</h3>
<p>如需使用 async=false，请将 open() 方法中的第三个参数改为 false：
</p>
<p>xmlhttp.open("GET","test1.txt",false);
</p>
<p>不推荐使用 async=false，但是对于一些小型的请求，也是可以的。  </p>
<p>JavaScript 会等到服务器响应就绪才继续执行。如果服务器繁忙或缓慢，应用程序会挂起或停止。  </p>
<p>使用 async=false 时，请不要编写 onreadystatechange 函数，把代码放到 send() 语句后面即可： </p>
<pre class="brush:javascript">xmlhttp.open("GET","test1.txt",false);
xmlhttp.send();
document.getElementById("myDiv").innerHTML=xmlhttp.responseText;</pre>


<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->