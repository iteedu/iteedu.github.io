<!--hmt-->
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end --><!--end of htmlheader-->

<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->
<!--end of htmlmiddle-->



<DIV CLASS="NAVHEADER">
<TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0">
<TR>
<TH COLSPAN="3" ALIGN="center">Smarty - the compiling PHP template engine</TH>
</TR>
<TR>
<TD WIDTH="25%" ALIGN="left" VALIGN="bottom">
<A HREF="plugins.outputfilters.html" ACCESSKEY="P">Prev</A>　
</TD>
<TD WIDTH="50%" ALIGN="center" VALIGN="bottom">Chapter 16. Extending Smarty With Plugins<br>利用插件扩展smarty</TD>
<TD WIDTH="25%"  ALIGN="right"  VALIGN="bottom">
<A HREF="plugins.inserts.html"  ACCESSKEY="N">Next</A>
</TD>
</TR>
</TABLE>
<HR ALIGN="LEFT"  WIDTH="100%">
</DIV>
<DIV CLASS="SECT1">
<H1  CLASS="SECT1">
<A NAME="PLUGINS.RESOURCES">
</A>Resources资源</H1>
<P> Resource plugins are meant as a generic way of providing template 
 sources or PHP script components to Smarty. Some examples of resources: 
 databases, LDAP, shared memory, sockets, and so on.<br>资源插件被认为是为Smarty提供模板源或PHP脚本组件的一种普通方式。一些资源例子如:数据库、LDAP、共享内存、sockets（套接字）等等。
 </P>
<P> There are a total of 4 functions that need to be registered for each 
 type of resource. Every function will receive the requested resource as 
 the first parameter and the Smarty object as the last parameter. The 
 rest of parameters depend on the function.<br>需要为每一种类型的资源注册四个函数。每一个函数将接收被请求的资源作为第一个参数，Smarty对象作为最后一个参数。剩余的参数取决于函数的不同。
 </P>
<DIV CLASS="FUNCSYNOPSIS">
<A NAME="AEN4101">
</A>
<P>
</P>
<P>
<CODE>
<CODE CLASS="FUNCDEF">bool <B CLASS="FUNCTION">smarty_resource_<TT CLASS="REPLACEABLE">
<I>name</I>
</TT>_source</B>
</CODE>(string $rsrc_name, string &amp;$source, object &amp;$smarty)</CODE>
</P>
<P>
<CODE>
<CODE CLASS="FUNCDEF">bool <B CLASS="FUNCTION">smarty_resource_<TT CLASS="REPLACEABLE">
<I>name</I>
</TT>_timestamp</B>
</CODE>(string $rsrc_name, int &amp;$timestamp, object &amp;$smarty)</CODE>
</P>
<P>
<CODE>
<CODE CLASS="FUNCDEF">bool <B CLASS="FUNCTION">smarty_resource_<TT CLASS="REPLACEABLE">
<I>name</I>
</TT>_secure</B>
</CODE>(string $rsrc_name, object &amp;$smarty)</CODE>
</P>
<P>
<CODE>
<CODE CLASS="FUNCDEF">bool <B CLASS="FUNCTION">smarty_resource_<TT CLASS="REPLACEABLE">
<I>name</I>
</TT>_trusted</B>
</CODE>(string $rsrc_name, object &amp;$smarty)</CODE>
</P>
<P>
</P>
</DIV>
<P> The first function is supposed to retrieve the resource. Its second 
 parameter is a variable passed by reference where the result should be 
 stored. The function is supposed to return <TT CLASS="LITERAL">true</TT> if 
 it was able to successfully retrieve the resource and 
 <TT CLASS="LITERAL">false</TT> otherwise.<br>第一个函数将会检索资源。它的第二个参数是一个参考引用变量，结果值会存放到该变量里面。如果此函数能成功的检索到资源，将会返回<TT CLASS="LITERAL">true，</TT>否则返回<TT CLASS="LITERAL">false。</TT>
 </P>
<P> The second function is supposed to retrieve the last modification time 
 of the requested resource (as a UNIX timestamp). The second parameter 
 is a variable passed by reference where the timestamp should be stored. 
 The function is supposed to return <TT CLASS="LITERAL">true</TT> if the 
 timestamp could be succesfully determined, and <TT CLASS="LITERAL">false</TT> 
 otherwise.<br>第二个函数将会检索被请求资源的最后修改时间（UNIX时间戳）。它的第二个参数是一个参考引用变量，时间戳值会存放到该变量里面。如果此函数能成功的确定时间戳，将会返回<TT CLASS="LITERAL">true，</TT>否则返回<TT CLASS="LITERAL">false。</TT>
 </P>
<P> The third function is supposed to return <TT CLASS="LITERAL">true</TT> or 
 <TT CLASS="LITERAL">false</TT>, depending on whether the requested resource 
 is secure or not. This function is used only for template resources but 
 should still be defined.<br>第三个函数将会返回<TT CLASS="LITERAL">true</TT>或<TT CLASS="LITERAL">false</TT>，取决于被请求资源是否安全。这个函数仅用于模板资源，但仍应被定义。 
 </P> 
 <P> The fourth function is supposed to return <TT CLASS="LITERAL">true</TT> or <TT CLASS="LITERAL">false</TT>, depending on whether the requested resource is trusted or not. This function 
 is used for only for PHP script components requested by <A HREF="language.function.include.html.html">
<B CLASS="COMMAND">{include_php}</B>
</A> tag or <A HREF="language.function.insert.html">
<B CLASS="COMMAND">{insert}</B>
</A> tag with <TT CLASS="STRUCTFIELD">
<I>src</I>
</TT> attribute. However, it should still be defined even for template resources.<br>第四个函数将会返回<TT CLASS="LITERAL">true</TT>或<TT CLASS="LITERAL">false</TT>，取决于被请求资源是否被信任。这个函数仅用于被<a href="language.function.include.html.html">
<b class="COMMAND">{include_php}</b>
</a>或 <a href="language.function.insert.html">
<b class="COMMAND">{insert}</b>
</a>标记以 <tt class="STRUCTFIELD">
<i>src</i>
</tt> 属性请求的PHP脚本组件。但仍应被定义，甚至用于模板资源也不例外。 </P>
 <P> See also 
 <A HREF="api.register.resource.html">register_resource()</A>, 
 <A HREF="api.unregister.resource.html">unregister_resource()</A>. 
 </P>
<TABLE WIDTH="100%"  BORDER="0"  CELLPADDING="0"  CELLSPACING="0"  CLASS="EXAMPLE">
<TR>
<TD>
<DIV CLASS="EXAMPLE">
<A NAME="AEN4156">
</A> 
 <P>
<B>Example 16-10. resource plugin资源插件</B>
</P> 
 <TABLE BORDER="0"  BGCOLOR="#E0E0E0"  WIDTH="100%">
<TR>
<TD>
<pre class="code">&lt;?php
/*
 * Smarty plugin
 * ------------------------------------------------------------- 
 * File: resource.db.html
 * Type: resource
 * Name: db
 * Purpose: Fetches templates from a database
 * -------------------------------------------------------------
 */
function smarty_resource_db_source($tpl_name, &amp;$tpl_source, &amp;$smarty)
{
 // do database call here to fetch your template,
 // populating $tpl_source
 $sql = new SQL;
 $sql-&gt;query(&quot;select tpl_source
 from my_table
 where tpl_name='$tpl_name'&quot;);
 if ($sql-&gt;num_rows) {
 $tpl_source = $sql-&gt;record['tpl_source'];
 return true;
 } else {
 return false;
 }
}

function smarty_resource_db_timestamp($tpl_name, &amp;$tpl_timestamp, &amp;$smarty)
{
 // do database call here to populate $tpl_timestamp.
 $sql = new SQL;
 $sql-&gt;query(&quot;select tpl_timestamp
 from my_table
 where tpl_name='$tpl_name'&quot;);
 if ($sql-&gt;num_rows) {
 $tpl_timestamp = $sql-&gt;record['tpl_timestamp'];
 return true;
 } else {
 return false;
 }
}

function smarty_resource_db_secure($tpl_name, &amp;$smarty)
{
 // assume all templates are secure
 return true;
}

function smarty_resource_db_trusted($tpl_name, &amp;$smarty)
{
 // not used for templates
}
?&gt;</PRE>
</TD>
</TR>
</TABLE>
</DIV>
</TD>
</TR>
</TABLE>
</DIV>
<DIV CLASS="NAVFOOTER">
<HR ALIGN="LEFT"  WIDTH="100%">
<TABLE SUMMARY="Footer navigation table"  WIDTH="100%"  BORDER="0"  CELLPADDING="0"  CELLSPACING="0">
<TR>
<TD WIDTH="33%"  ALIGN="left"  VALIGN="top">
<A HREF="plugins.functions.html"  ACCESSKEY="P">Prev</A>　
</TD>
<TD WIDTH="34%"  ALIGN="center"  VALIGN="top">
<A HREF="index.html"  ACCESSKEY="H">Home</A>
</TD>
<TD WIDTH="33%"  ALIGN="right"  VALIGN="top">
<A HREF="plugins.inserts.html"  ACCESSKEY="N">Next</A>
</TD>
</TR>
<TR> 
 <TD WIDTH="33%"  ALIGN="left"  VALIGN="top">Output Filters[输出过滤器]</TD> 
 <TD WIDTH="34%"  ALIGN="center"  VALIGN="top">
<A HREF="troubleshooting.html"  ACCESSKEY="U">Up</A>
</TD> 
 <TD WIDTH="33%"  ALIGN="right"  VALIGN="top">[插入]Inserts</TD> 
 </TR>
</TABLE>
</DIV>


<!--start of htmlend-->

<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->