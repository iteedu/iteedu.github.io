
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end -->
<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->
<TABLE BORDER="0" WIDTH="100%" HEIGHT="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD COLSPAN="3"><DIV CLASS="NAVHEADER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR><TD><TABLE  SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TH  COLSPAN="3" ALIGN="center">PHP 手册</TH></TR><TR><TD  WIDTH="10%" ALIGN="left" VALIGN="bottom"><A  HREF="function.stream-socket-server.html" ACCESSKEY="P">后退</A></TD><TD  WIDTH="80%" ALIGN="center" VALIGN="bottom"></TD><TD  WIDTH="10%" ALIGN="right" VALIGN="bottom"><A  HREF="function.stream-wrapper-restore.html" ACCESSKEY="N">前进</A></TD></TR></TABLE></TD></TR><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR></TABLE></DIV></TD></TR><TR><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD><TD HEIGHT="100%" VALIGN="TOP" WIDTH="100%"><BR><H1><A  NAME="function.stream-wrapper-register"></A>stream_register_wrapper</H1><DIV  CLASS="refnamediv"><A  NAME="AEN161577"></A><P>    (PHP 4 &#62;= 4.3.0, PHP 5)</P>stream_register_wrapper&nbsp;--&nbsp;注册一个用 PHP 类实现的 URL 封装协议</DIV><DIV  CLASS="refsect1"><A  NAME="AEN161580"></A><H2>说明</H2>boolean <B  CLASS="methodname">stream_register_wrapper</B> ( string protocol, string classname )<BR></BR><P>&#13;     <B  CLASS="function">stream_register_wrapper()</B>
     允许用户实现自定义的协议处理器和流，用于所有其它的文件系统函数中（例如
     <A  HREF="function.fopen.html"><B  CLASS="function">fopen()</B></A>，<A  HREF="function.fread.html"><B  CLASS="function">fread()</B></A> 等）。
    </P><P>&#13;     要实现一个封装协议，需要按照如下定义声明一个包含有一些函数的类。当有人对你的流使用
     fopen 时，PHP 将创建一个 <VAR  CLASS="parameter">classname</VAR>
     的实例并调用该实例的方法。必须严格按照如下的描述实现方法 - 否则将导致不明确的行为。
    </P><P>&#13;     如果 <VAR  CLASS="parameter">protocol</VAR>
     已经有了处理协议，则 <B  CLASS="function">stream_register_wrapper()</B>
     将返回 <TT  CLASS="constant"><B>FALSE</B></TT>。
    </P>boolean <B  CLASS="methodname">stream_open</B> ( string path, string mode, int options, string opened_path )<BR></BR><P>&#13;     当你的流对象被创建之后立即会调用此方法。<VAR  CLASS="parameter">path</VAR>
     指定了传入 <A  HREF="function.fopen.html"><B  CLASS="function">fopen()</B></A> 以及此对象需要取回的 URL。可以用
     <A  HREF="function.parse-url.html"><B  CLASS="function">parse_url()</B></A> 来将此 URL 分割成几部分。
    </P><P>&#13;     <VAR  CLASS="parameter">mode</VAR> 用来打开文件的模式，和
     <A  HREF="function.fopen.html"><B  CLASS="function">fopen()</B></A> 中的一样。你有责任检查
     <VAR  CLASS="parameter">mode</VAR> 对于所请求的
     <VAR  CLASS="parameter">path</VAR> 是否合法。
    </P><P>&#13;     <VAR  CLASS="parameter">options</VAR> 保存了通过流 API
     设定的附加标志。可以保存以下一个值或者用 OR 合并的多个值。
     <DIV  CLASS="informaltable"><P></P><A  NAME="AEN161627"></A><TABLE  BORDER="1" CLASS="CALSTABLE"><COL><COL><THEAD><TR><TH>标志</TH><TH>说明</TH></TR></THEAD><TBODY><TR><TD>STREAM_USE_PATH</TD><TD>如果 <VAR  CLASS="parameter">path</VAR> 是相对路径，则用
         include_path 搜索资源。
         </TD></TR><TR><TD>STREAM_REPORT_ERRORS</TD><TD>如果设定了本标志，你有责任在打开流时用 <A  HREF="function.trigger-error.html"><B  CLASS="function">trigger_error()</B></A>
         来唤起错误。如果没有设定这个标志，那么你不需要唤起任何错误。
         </TD></TR></TBODY></TABLE><P></P></DIV>
    </P><P>&#13;     如果成功打开了 <VAR  CLASS="parameter">path</VAR>，并且在 <VAR  CLASS="parameter">options</VAR>
     中设定了 STREAM_USE_PATH，你需要将 <VAR  CLASS="parameter">opened_path</VAR>
     设定为实际被打开的文件／资源的完整路径。
    </P><P>&#13;     如果成功打开了所请求的资源，应该返回
     <TT  CLASS="constant"><B>TRUE</B></TT>，否则返回 <TT  CLASS="constant"><B>FALSE</B></TT>。
    </P>void <B  CLASS="methodname">stream_close</B> ( void  )<BR></BR><P>&#13;     本方法在流关闭时被调用，使用
     <A  HREF="function.fclose.html"><B  CLASS="function">fclose()</B></A>。必须释放被流锁定或分配的任何资源。
    </P>string <B  CLASS="methodname">stream_read</B> ( int count )<BR></BR><P>&#13;     当对流进行 <A  HREF="function.fread.html"><B  CLASS="function">fread()</B></A> 和 <A  HREF="function.fgets.html"><B  CLASS="function">fgets()</B></A> 
     操作时本方法被调用。必须从当前读写位置以字符串返回最多
     <VAR  CLASS="parameter">count</VAR> 字节的数据。如果可用数据少于 <VAR  CLASS="parameter">count</VAR>
     字节，则返回尽可能多的数据。如果没有可供返回的数据，返回 <TT  CLASS="constant"><B>FALSE</B></TT>
     或者空字符串。必须用成功读取的字节数去更新流的读写位置。
    </P>int <B  CLASS="methodname">stream_write</B> ( string data )<BR></BR><P>&#13;     当对流进行 <A  HREF="function.fwrite.html"><B  CLASS="function">fwrite()</B></A>
     操作时本方法被调用。必须将 <VAR  CLASS="parameter">data</VAR>
     储存到你的流使用的底层存储空间去。如果没有足够的空间了，则试着保存尽可能多的字节。应该返回成功被保存入流的字节数，或者没有保存时返回
     0。必须用成功写入的字节数去更新流的读写位置。
    </P>boolean <B  CLASS="methodname">stream_eof</B> ( void  )<BR></BR><P>&#13;     当对流进行 <A  HREF="function.feof.html"><B  CLASS="function">feof()</B></A>
     操作时本方法被调用。如果读写位置到了流的尽头或者没有更多数据可读时返回
     <TT  CLASS="constant"><B>TRUE</B></TT>，否则返回 <TT  CLASS="constant"><B>FALSE</B></TT>。
    </P>int <B  CLASS="methodname">stream_tell</B> ( void  )<BR></BR><P>&#13;     当对流进行 <A  HREF="function.ftell.html"><B  CLASS="function">ftell()</B></A>
     操作时本方法被调用。应该返回流的当前读写位置。
    </P>boolean <B  CLASS="methodname">stream_seek</B> ( int offset, int whence )<BR></BR><P>&#13;     当对流进行 <A  HREF="function.fseek.html"><B  CLASS="function">fseek()</B></A>
     操作时本方法被调用。应该根据 <VAR  CLASS="parameter">offset</VAR> 和
     <VAR  CLASS="parameter">whence</VAR> 来更新流的读写位置。这些参数的更多信息见
     <A  HREF="function.fseek.html"><B  CLASS="function">fseek()</B></A>。如果位置成功更新了则返回 <TT  CLASS="constant"><B>TRUE</B></TT>，否则返回 <TT  CLASS="constant"><B>FALSE</B></TT>。
    </P>boolean <B  CLASS="methodname">stream_flush</B> ( void  )<BR></BR><P>&#13;     当对流进行 <A  HREF="function.fflush.html"><B  CLASS="function">fflush()</B></A>
     操作时本方法被调用。如果你在流中缓存了数据还没有写入底层存储空间时，那现在应该做了。如果缓存数据被成功保存（或没有数据可供保存）时返回
     <TT  CLASS="constant"><B>TRUE</B></TT>，当数据无法被保存时返回 <TT  CLASS="constant"><B>FALSE</B></TT>。
    </P><P>&#13;     下面的例子实现了一个 var://
     协议处理器，可以允许使用标准的文件系统流函数来对指定的全局变量进行读写操作，例如
     <A  HREF="function.fread.html"><B  CLASS="function">fread()</B></A>。var:// 协议的实现如下，给出
     url "var://foo" 将可以读写 $GLOBALS["foo"]。

     <TABLE  WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" CLASS="EXAMPLE"><TR><TD><DIV  CLASS="example"><A  NAME="AEN161724"></A><P><B>例子 1. 读写全局变量的流</B></P><TABLE  BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><code><font  color="#000000">
class VariableStream {<br  />&nbsp;&nbsp;&nbsp;&nbsp;var $position;<br  />&nbsp;&nbsp;&nbsp;&nbsp;var $varname;<br  />&nbsp;&nbsp;&nbsp;<br  />&nbsp;&nbsp;&nbsp;&nbsp;function stream_open($path, $mode, $options, &amp;$opened_path)<br  />&nbsp;&nbsp;&nbsp;&nbsp;{<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$url = parse_url($path);<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;varname = $url["host"];<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;position = 0;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return true;<br  />&nbsp;&nbsp;&nbsp;&nbsp;}<br  /><br  />&nbsp;&nbsp;&nbsp;&nbsp;function stream_read($count)<br  />&nbsp;&nbsp;&nbsp;&nbsp;{<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ret = substr($GLOBALS[$this-&gt;varname], $this-&gt;position, $count);<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;position += strlen($ret);<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $ret;<br  />&nbsp;&nbsp;&nbsp;&nbsp;}<br  /><br  />&nbsp;&nbsp;&nbsp;&nbsp;function stream_write($data)<br  />&nbsp;&nbsp;&nbsp;&nbsp;{<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$left = substr($GLOBALS[$this-&gt;varname], 0, $this-&gt;position);<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$right = substr($GLOBALS[$this-&gt;varname], $this-&gt;position + strlen($data));<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$GLOBALS[$this-&gt;varname] = $left . $data . $right;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;position += strlen($data);<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return strlen($data);<br  />&nbsp;&nbsp;&nbsp;&nbsp;}<br  /><br  />&nbsp;&nbsp;&nbsp;&nbsp;function stream_tell()<br  />&nbsp;&nbsp;&nbsp;&nbsp;{<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $this-&gt;position;<br  />&nbsp;&nbsp;&nbsp;&nbsp;}<br  /><br  />&nbsp;&nbsp;&nbsp;&nbsp;function stream_eof()<br  />&nbsp;&nbsp;&nbsp;&nbsp;{<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $this-&gt;position &gt;= strlen($GLOBALS[$this-&gt;varname]);<br  />&nbsp;&nbsp;&nbsp;&nbsp;}<br  /><br  />&nbsp;&nbsp;&nbsp;&nbsp;function stream_seek($offset, $whence)<br  />&nbsp;&nbsp;&nbsp;&nbsp;{<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch($whence) {<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case SEEK_SET:<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($offset &lt; strlen($GLOBALS[$this-&gt;varname]) &amp;&amp; $offset &gt;= 0) {<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;position = $offset;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return true;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return false;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case SEEK_CUR:<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($offset &gt;= 0) {<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;position += $offset;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return true;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return false;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case SEEK_END:<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (strlen($GLOBALS[$this-&gt;varname]) + $offset &gt;= 0) {<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;position = strlen($GLOBALS[$this-&gt;varname]) + $offset;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return true;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return false;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return false;<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br  />&nbsp;&nbsp;&nbsp;&nbsp;}<br  />}<br  /><br  />stream_register_wrapper("var", "VariableStream")<br  />&nbsp;&nbsp;&nbsp;&nbsp;or die("Failed to register protocol");<br  /><br  />$myvar = "";<br  />&nbsp;&nbsp;&nbsp;&nbsp;<br  />$fp = fopen("var://myvar", "r+");<br  /><br  />fwrite($fp, "line1\n");<br  />fwrite($fp, "line2\n");<br  />fwrite($fp, "line3\n");<br  /><br  />rewind($fp);<br  />while(!feof($fp)) {<br  />&nbsp;&nbsp;&nbsp;&nbsp;echo fgets($fp)<br  />}<br  />fclose($fp);<br  />var_dump($myvar);</font>
</code></TD></TR></TABLE></DIV></TD></TR></TABLE>
    </P></DIV><BR></TD><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD></TR><TR><TD COLSPAN="3"><DIV CLASS="NAVFOOTER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR><TR><TD><TABLE  SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TD  WIDTH="33%" ALIGN="left" VALIGN="top"><A  HREF="function.stream-socket-server.html" ACCESSKEY="P">后退</A></TD><TD  WIDTH="34%" ALIGN="center" VALIGN="top"><A  HREF="index.html" ACCESSKEY="H">起点</A></TD><TD  WIDTH="33%" ALIGN="right" VALIGN="top"><A  HREF="function.stream-wrapper-restore.html" ACCESSKEY="N">前进</A></TD></TR><TR><TD  WIDTH="33%" ALIGN="left" VALIGN="top">stream_socket_server</TD><TD  WIDTH="34%" ALIGN="center" VALIGN="top"><A  HREF="ref.stream.html" ACCESSKEY="U">上一级</A></TD><TD  WIDTH="33%" ALIGN="right" VALIGN="top">stream_wrapper_restore</TD></TR></TABLE></TD></TR></TABLE></DIV></TD></TR></TABLE>

<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->
