
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end -->
<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->
<TABLE BORDER="0" WIDTH="100%" HEIGHT="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD COLSPAN="3"><DIV CLASS="NAVHEADER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR><TD><TABLE  SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TH  COLSPAN="3" ALIGN="center">PHP 手册</TH></TR><TR><TD  WIDTH="10%" ALIGN="left" VALIGN="bottom"><A  HREF="function.muscat-setup.html" ACCESSKEY="P">后退</A></TD><TD  WIDTH="80%" ALIGN="center" VALIGN="bottom"></TD><TD  WIDTH="10%" ALIGN="right" VALIGN="bottom"><A  HREF="function.mysql-affected-rows.html" ACCESSKEY="N">前进</A></TD></TR></TABLE></TD></TR><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR></TABLE></DIV></TD></TR><TR><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD><TD HEIGHT="100%" VALIGN="TOP" WIDTH="100%"><BR><DIV  CLASS="reference"><A  NAME="ref.mysql"></A><DIV  CLASS="TITLEPAGE"><H1  CLASS="title">LXXXIV. MySQL 函数</H1><DIV  CLASS="PARTINTRO"><A  NAME="AEN95674"></A><DIV  CLASS="section"><H1  CLASS="section"><A  NAME="mysql.intro">简介</A></H1><P>&#13;    可以使用本类函数访问 MySQL 数据库服务器。有关 MySQL 的详细信息可以到 <A  HREF="http://www.mysql.com/" TARGET="_top">http://www.mysql.com/</A> 查询。
   </P><P>&#13;    MySQL 的文档可以在 <A  HREF="http://dev.mysql.com/doc/" TARGET="_top">http://dev.mysql.com/doc/</A> 找到。
   </P></DIV><DIV  CLASS="section"><H1  CLASS="section"><A  NAME="mysql.requirements">需求</A></H1><P>&#13;    为了能够顺利的使用本类函数，必须在编译 PHP 的时候添加 MySQL 的支持。
   </P></DIV><DIV  CLASS="section"><H1  CLASS="section"><A  NAME="mysql.installation">安装</A></H1><P>&#13;  编译时，只要使用
  <VAR  CLASS="option">--with-mysql[=DIR]</VAR>
  配置选项即可，其中可选的
  <VAR  CLASS="literal">[DIR]</VAR> 指向 MySQL 的安装目录。
 </P><P>&#13;  本 MySQL 扩展库不支持 MySQL 4.1.0 以上版本全部功能。对此，可用
  <A  HREF="ref.mysqli.html">MySQLi</A>。
 </P><P>&#13;  如果要同时安装 mysql 扩展库和 mysqli 扩展库，必须使用同一个客户端库以避免任何冲突。
 </P><DIV  CLASS="section"><H2  CLASS="section"><A  NAME="mysql.installation.linux">在 Linux 系统下安装</A></H2><DIV  CLASS="section"><H3  CLASS="section"><A  NAME="AEN95694">PHP 4</A></H3><P>&#13;    默认开启了 <VAR  CLASS="option">--with-mysql</VAR>
    选项。此默认行为可以用
    <VAR  CLASS="option">--without-mysql</VAR>
    配置选项来禁止。如果启用 MySQL 而不指定安装目录的话，PHP
    将使用绑定的 MySQL 客户端连接库。
   </P><P>&#13;    还有其它应用程序使用 MySQL（例如
    auth-mysql）的用户不要用绑定的库，而要指定 MySQL 的安装目录，如这样：<VAR  CLASS="option">--with-mysql=/path/to/mysql</VAR>。这将强制
    PHP 使用随 MySQL 安装的客户端连接库，就可以避免任何冲突。
   </P></DIV><DIV  CLASS="section"><H3  CLASS="section"><A  NAME="AEN95701">PHP 5+</A></H3><P>&#13;    MySQL 默认未启用，也没有绑定的 MySQL 库。其原因见此
    <A  HREF="faq/faq.databases.html#faq.databases.mysql.html5">FAQ</A>。使用
    <VAR  CLASS="option">--with-mysql[=DIR]</VAR>
    配置选项来加入 MySQL 的支持。可以从
    <A  HREF="http://www.mysql.com/" TARGET="_top">MySQL</A>
    下载<SPAN  CLASS="emphasis"><I  CLASS="emphasis">头文件和库</I></SPAN>。
   </P></DIV></DIV><DIV  CLASS="section"><H2  CLASS="section"><A  NAME="mysql.installation.windows">在 Windows 系统下安装</A></H2><DIV  CLASS="section"><H3  CLASS="section"><A  NAME="AEN95710">PHP 4</A></H3><P>&#13;    PHP MySQL 扩展已经编译入 PHP。
   </P></DIV><DIV  CLASS="section"><H3  CLASS="section"><A  NAME="AEN95713">PHP 5+</A></H3><P>&#13;    MySQL 默认未启用，因此必须在 <TT  CLASS="filename">php.ini</TT> 中激活
    <TT  CLASS="filename">php_mysql.dll</TT> 动态连接库。此外，PHP
    还需要访问 MySQL 客户端连接库。PHP 的 Windows
    发行版包括了一个
    <TT  CLASS="filename">libmysql.dll</TT>，为了让 PHP 能和
    MySQL 对话，此文件必须放在 Windows 的系统路径
    <VAR  CLASS="envar">PATH</VAR> 中。怎样做见 FAQ
    中的“<A  HREF="faq/faq.installation.html#faq.installation.addtopath">怎样把 PHP
    目录加入到 Windows 路径中</A>”。尽管将
    <TT  CLASS="filename">libmysql.dll</TT> 拷贝到 Windows
    系统目录中也可以（因为系统目录默认在系统路径
    <VAR  CLASS="envar">PATH</VAR> 中），但不推荐这样做。
   </P><P>&#13;    要激活任何 PHP 扩展库（例如
    <TT  CLASS="filename">php_mysql.dll</TT>），PHP 指令
    <A  HREF="appendix/ini.core.html#ini.extension-dir">extension_dir</A>
    要被设为 PHP 扩展库所在的目录。参见<A  HREF="phpabc/install.windows.manual.html">手工 Windows
    安装指南</A>。PHP 5 下 extension_dir 取值的一个例子是
    <VAR  CLASS="literal">c:\php\ext</VAR>。
   </P><DIV  CLASS="note"><BLOCKQUOTE  CLASS="note"><P><B>注: </B>
     如果启动 web 服务器时出现类似如下的错误：<VAR  CLASS="literal">"Unable
     to load dynamic library './php_mysql.dll'"</VAR>，这是因为系统找不到
     <TT  CLASS="filename">php_mysql.dll</TT> 和／或
     <TT  CLASS="filename">libmysql.dll</TT>。
    </P></BLOCKQUOTE></DIV></DIV></DIV><DIV  CLASS="section"><H2  CLASS="section"><A  NAME="mysql.installation.notes">MySQL 安装注意事项</A></H2><DIV  CLASS="warning"><P></P><TABLE  CLASS="warning" BORDER="1" WIDTH="100%"><TR><TD  ALIGN="CENTER"><B>警告</B></TD></TR><TR><TD  ALIGN="LEFT"><P>&#13;     当同时加在本扩展库和 recode 扩展库时 PHP 可能会崩溃。更多信息见
     <A  HREF="ref.recode.html">recode</A> 扩展库。
    </P></TD></TR></TABLE></DIV><DIV  CLASS="note"><BLOCKQUOTE  CLASS="note"><P><B>注: </B>
     如果需要不同于
     <SPAN  CLASS="emphasis"><I  CLASS="emphasis">latin</I></SPAN>（默认值）的字符集，必须安装外部的（非绑定的）已编译入所需字符集支持的
     libmysql。
    </P></BLOCKQUOTE></DIV></DIV></DIV><DIV  CLASS="section"><H1  CLASS="section"><A  NAME="mysql.configuration">运行时配置</A></H1><P>这些函数的行为受 <TT  CLASS="filename">php.ini</TT> 的影响。</P><P>&#13;  <DIV  CLASS="table"><A  NAME="AEN95746"></A><P><B>表格 1. MySQL 配置选项</B></P><TABLE  BORDER="1" CLASS="CALSTABLE"><COL><COL><COL><COL><THEAD><TR><TH>选项名称</TH><TH>默认值</TH><TH>可修改范围</TH><TH>更新记录</TH></TR></THEAD><TBODY><TR><TD>mysql.allow_persistent</TD><TD>"1"</TD><TD>PHP_INI_SYSTEM</TD><TD>&nbsp;</TD></TR><TR><TD>mysql.max_persistent</TD><TD>"-1"</TD><TD>PHP_INI_SYSTEM</TD><TD>&nbsp;</TD></TR><TR><TD>mysql.max_links</TD><TD>"-1"</TD><TD>PHP_INI_SYSTEM</TD><TD>&nbsp;</TD></TR><TR><TD>mysql.trace_mode</TD><TD>"0"</TD><TD>PHP_INI_ALL</TD><TD>自 PHP 4.3.0 起可用</TD></TR><TR><TD>mysql.default_port</TD><TD>NULL</TD><TD>PHP_INI_ALL</TD><TD>&nbsp;</TD></TR><TR><TD>mysql.default_socket</TD><TD>NULL</TD><TD>PHP_INI_ALL</TD><TD>自 PHP 4.0.1 起可用</TD></TR><TR><TD>mysql.default_host</TD><TD>NULL</TD><TD>PHP_INI_ALL</TD><TD>&nbsp;</TD></TR><TR><TD>mysql.default_user</TD><TD>NULL</TD><TD>PHP_INI_ALL</TD><TD>&nbsp;</TD></TR><TR><TD>mysql.default_password</TD><TD>NULL</TD><TD>PHP_INI_ALL</TD><TD>&nbsp;</TD></TR><TR><TD>mysql.connect_timeout</TD><TD>"60"</TD><TD>PHP_INI_ALL</TD><TD>自 PHP 4.3.0 起可用。在 PHP &#60;= 4.3.2 时为 PHP_INI_SYSTEM</TD></TR></TBODY></TABLE></DIV>
  有关 PHP_INI_* 常量进一步的细节与定义参见<A  HREF="appendix/ini.html">附录 G</A>。
 </P><P>以下是配置选项的简要解释。</P><P>&#13;  <P></P><DIV  CLASS="variablelist"><DL><DT><A  NAME="ini.mysql.allow-persistent"></A><VAR  CLASS="parameter">mysql.allow_persistent</VAR>
     <A  HREF="language/language.types.boolean.html"><B  CLASS="type">boolean</B></A></DT><DD><P>&#13;      是否允许 MySQL
      的<A  HREF="features/features.persistent-connections.html">持久连接</A>。
     </P></DD><DT><A  NAME="ini.mysql.max-persistent"></A><VAR  CLASS="parameter">mysql.max_persistent</VAR>
     <A  HREF="language/language.types.integer.html"><B  CLASS="type">integer</B></A></DT><DD><P>&#13;      每个进程中最大的持久连接数目。
     </P></DD><DT><A  NAME="ini.mysql.max-links"></A><VAR  CLASS="parameter">mysql.max_links</VAR>
     <A  HREF="language/language.types.integer.html"><B  CLASS="type">integer</B></A></DT><DD><P>&#13;      每个进程中最大的连接数，包括持久连接。
     </P></DD><DT><A  NAME="ini.mysql.trace-mode"></A><VAR  CLASS="parameter">mysql.trace_mode</VAR>
     <A  HREF="language/language.types.boolean.html"><B  CLASS="type">boolean</B></A></DT><DD><P>&#13;      跟踪模式。当激活 <VAR  CLASS="literal">mysql.trace_mode</VAR>
      时，将会显示 table/index
      扫描的警告，未释放的结果集以及
      SQL 错误。（PHP 4.3.0 引进）
     </P></DD><DT><A  NAME="ini.mysql.default-port"></A><VAR  CLASS="parameter">mysql.default_port</VAR>
     <A  HREF="language/language.types.string.html"><B  CLASS="type">string</B></A></DT><DD><P>&#13;      指定默认连接数据库的 TCP 端口号。如果没有指定默认端口号，则按顺序从
      <VAR  CLASS="envar">MYSQL_TCP_PORT</VAR>
      环境变量，<TT  CLASS="filename">/etc/services</TT> 文件中的 <VAR  CLASS="literal">mysql-tcp</VAR>
      项或者编译时指定的 <TT  CLASS="constant"><B>MYSQL_PORT</B></TT> 常量中取得。Win32 环境下只会使用
      <TT  CLASS="constant"><B>MYSQL_PORT</B></TT> 常量。
     </P></DD><DT><A  NAME="ini.mysql.default-socket"></A><VAR  CLASS="parameter">mysql.default_socket</VAR>
     <A  HREF="language/language.types.string.html"><B  CLASS="type">string</B></A></DT><DD><P>&#13;      当使用本地连接的时候，默认的 socket 名称。
     </P></DD><DT><A  NAME="ini.mysql.default-host"></A><VAR  CLASS="parameter">mysql.default_host</VAR>
     <A  HREF="language/language.types.string.html"><B  CLASS="type">string</B></A></DT><DD><P>&#13;      默认连接的数据库服务器地址。不适用于 <A  HREF="appendix/ini.core.html#ini.sql.safe-mode">SQL 安全模式</A>。
     </P></DD><DT><A  NAME="ini.mysql.default-user"></A><VAR  CLASS="parameter">mysql.default_user</VAR>
     <A  HREF="language/language.types.string.html"><B  CLASS="type">string</B></A></DT><DD><P>&#13;      默认连接数据库时使用的用户名。不适用于 <A  HREF="appendix/ini.core.html#ini.sql.safe-mode">SQL 安全模式</A>。
     </P></DD><DT><A  NAME="ini.mysql.default-password"></A><VAR  CLASS="parameter">mysql.default_password</VAR>
     <A  HREF="language/language.types.string.html"><B  CLASS="type">string</B></A></DT><DD><P>&#13;      默认连接数据库时使用的密码。不适用于 <A  HREF="appendix/ini.core.html#ini.sql.safe-mode">SQL 安全模式</A>。
     </P></DD><DT><A  NAME="ini.mysql.connect-timeout"></A><VAR  CLASS="parameter">mysql.connect_timeout</VAR>
     <A  HREF="language/language.types.integer.html"><B  CLASS="type">integer</B></A></DT><DD><P>&#13;      连接超时秒数。在 Linux 中，此参数设定了等候来自服务器的响应的时长。
     </P></DD></DL></DIV>
 </P></DIV><DIV  CLASS="section"><H1  CLASS="section"><A  NAME="mysql.resources">资源类型</A></H1><P>&#13;    在 MySQL 模块中使用了两种资源类型。第一种是数据库的连接句柄，第二种是 SQL 查询返回的结果集。
   </P></DIV><DIV  CLASS="section"><H1  CLASS="section"><A  NAME="mysql.constants">预定义常量</A></H1><P>以下常量由本扩展模块定义，因此只有在本扩展模块被编译到
PHP 中，或者在运行时被动态加载后才有效。</P><P>&#13;  在 PHP 4.3.0 以后的版本中，允许在
  <A  HREF="function.mysql-connect.html"><B  CLASS="function">mysql_connect()</B></A> 函数和 <A  HREF="function.mysql-pconnect.html"><B  CLASS="function">mysql_pconnect()</B></A>
  函数中指定更多的客户端标记。下面列出所定义的常量：
  <DIV  CLASS="table"><A  NAME="AEN95889"></A><P><B>表格 2. MySQL 客户端常量</B></P><TABLE  BORDER="1" CLASS="CALSTABLE"><COL><COL><THEAD><TR><TH>常量</TH><TH>描述</TH></TR></THEAD><TBODY><TR><TD>MYSQL_CLIENT_COMPRESS</TD><TD>使用压缩的通讯协议</TD></TR><TR><TD>MYSQL_CLIENT_IGNORE_SPACE</TD><TD>允许在函数名后留空格位</TD></TR><TR><TD>MYSQL_CLIENT_INTERACTIVE</TD><TD>允许设置断开连接之前所空闲等候的 interactive_timeout 时间（代替 wait_timeout）。</TD></TR><TR><TD>MYSQL_CLIENT_SSL</TD><TD>&#13;        使用 SSL 加密。本标志仅在 MySQL 客户端库版本为
        4.x 或更高版本时可用。在 PHP 4 和 Windows 版的 PHP 5
        安装包中绑定的都是 3.23.x。
       </TD></TR></TBODY></TABLE></DIV>
 </P><P>&#13;  <A  HREF="function.mysql-fetch-array.html"><B  CLASS="function">mysql_fetch_array()</B></A> 函数使用一个常量来表示所返回数组的类型。下面是常量的定义：
  <DIV  CLASS="table"><A  NAME="AEN95911"></A><P><B>表格 3. MySQL fetch 常量</B></P><TABLE  BORDER="1" CLASS="CALSTABLE"><COL><COL><THEAD><TR><TH>常量</TH><TH>描述</TH></TR></THEAD><TBODY><TR><TD>MYSQL_ASSOC</TD><TD>&#13;       返回的数据列使用字段名作为数组的索引名。
      </TD></TR><TR><TD>MYSQL_BOTH</TD><TD>&#13;       返回的数据列使用字段名及数字索引作为数组的索引名。
      </TD></TR><TR><TD>MYSQL_NUM</TD><TD>&#13;       返回的数据列使用数字索引作为数组的索引名。索引从 0 开始，表示返回结果的第一个字段。
      </TD></TR></TBODY></TABLE></DIV>
 </P></DIV><DIV  CLASS="section"><H1  CLASS="section"><A  NAME="mysql.notes">注释</A></H1><DIV  CLASS="note"><BLOCKQUOTE  CLASS="note"><P><B>注: </B>
     大多数 MySQL 函数都接受
     <VAR  CLASS="parameter">link_identifier</VAR>
     作为最后一个可选参数。如果未提供此参数，则使用最后一个打开的连接。如果不存在连接，则会用
     <TT  CLASS="filename">php.ini</TT> 中定义的默认参数去尝试建立连接。如果连接不成功，函数返回 <TT  CLASS="constant"><B>FALSE</B></TT>。
    </P></BLOCKQUOTE></DIV></DIV><DIV  CLASS="section"><H1  CLASS="section"><A  NAME="mysql.examples">范例</A></H1><P>&#13;    下面的简单例子演示如何连接数据库，执行查询语句，打印返回结果集和断开数据库等一系列基本的
    MySQL 操作。
    <TABLE  WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" CLASS="EXAMPLE"><TR><TD><DIV  CLASS="example"><A  NAME="AEN95938"></A><P><B>例子 1. MySQL 例子</B></P><TABLE  BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><code><font  color="#000000">
<font  color="#0000BB">&lt;?php<br  /></font><font  color="#FF8000">// 连接，选择数据库<br  /></font><font  color="#0000BB">$link </font><font  color="#007700">= </font><font  color="#0000BB">mysql_connect</font><font  color="#007700">(</font><font  color="#DD0000">'mysql_host'</font><font  color="#007700">, </font><font  color="#DD0000">'mysql_user'</font><font  color="#007700">, </font><font  color="#DD0000">'mysql_password'</font><font  color="#007700">)<br  />&nbsp;&nbsp;&nbsp;&nbsp;or die(</font><font  color="#DD0000">'Could not connect: ' </font><font  color="#007700">. </font><font  color="#0000BB">mysql_error</font><font  color="#007700">());<br  />echo </font><font  color="#DD0000">'Connected successfully'</font><font  color="#007700">;<br  /></font><font  color="#0000BB">mysql_select_db</font><font  color="#007700">(</font><font  color="#DD0000">'my_database'</font><font  color="#007700">) or die(</font><font  color="#DD0000">'Could not select database'</font><font  color="#007700">);<br  /><br  /></font><font  color="#FF8000">// 执行 SQL 查询<br  /></font><font  color="#0000BB">$query </font><font  color="#007700">= </font><font  color="#DD0000">'SELECT * FROM my_table'</font><font  color="#007700">;<br  /></font><font  color="#0000BB">$result </font><font  color="#007700">= </font><font  color="#0000BB">mysql_query</font><font  color="#007700">(</font><font  color="#0000BB">$query</font><font  color="#007700">) or die(</font><font  color="#DD0000">'Query failed: ' </font><font  color="#007700">. </font><font  color="#0000BB">mysql_error</font><font  color="#007700">());<br  /><br  /></font><font  color="#FF8000">// 用 HTML 显示结果<br  /></font><font  color="#007700">echo </font><font  color="#DD0000">"&lt;table&gt;\n"</font><font  color="#007700">;<br  />while (</font><font  color="#0000BB">$line </font><font  color="#007700">= </font><font  color="#0000BB">mysql_fetch_array</font><font  color="#007700">(</font><font  color="#0000BB">$result</font><font  color="#007700">, </font><font  color="#0000BB">MYSQL_ASSOC</font><font  color="#007700">)) {<br  />&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font  color="#DD0000">"\t&lt;tr&gt;\n"</font><font  color="#007700">;<br  />&nbsp;&nbsp;&nbsp;&nbsp;foreach (</font><font  color="#0000BB">$line </font><font  color="#007700">as </font><font  color="#0000BB">$col_value</font><font  color="#007700">) {<br  />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font  color="#DD0000">"</font><font  color="#007700">\t\t</font><font  color="#DD0000">&lt;td&gt;$col_value&lt;/td&gt;</font><font  color="#007700">\n</font><font  color="#DD0000">"</font><font  color="#007700">;<br  />&nbsp;&nbsp;&nbsp;&nbsp;}<br  />&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font  color="#DD0000">"\t&lt;/tr&gt;\n"</font><font  color="#007700">;<br  />}<br  />echo </font><font  color="#DD0000">"&lt;/table&gt;\n"</font><font  color="#007700">;<br  /><br  /></font><font  color="#FF8000">// 释放结果集<br  /></font><font  color="#0000BB">mysql_free_result</font><font  color="#007700">(</font><font  color="#0000BB">$result</font><font  color="#007700">);<br  /><br  /></font><font  color="#FF8000">// 关闭连接<br  /></font><font  color="#0000BB">mysql_close</font><font  color="#007700">(</font><font  color="#0000BB">$link</font><font  color="#007700">);<br  /></font><font  color="#0000BB">?&gt;</font>
</font>
</code></TD></TR></TABLE></DIV></TD></TR></TABLE>
   </P></DIV></DIV><DIV  CLASS="TOC"><DL><DT><B>目录</B></DT><DT><A  HREF="function.mysql-affected-rows.html">mysql_affected_rows</A>&nbsp;--&nbsp;取得前一次 MySQL 操作所影响的记录行数</DT><DT><A  HREF="function.mysql-change-user.html">mysql_change_user</A>&nbsp;--&nbsp;
     改变活动连接中登录的用户
    </DT><DT><A  HREF="function.mysql-client-encoding.html">mysql_client_encoding</A>&nbsp;--&nbsp;返回字符集的名称</DT><DT><A  HREF="function.mysql-close.html">mysql_close</A>&nbsp;--&nbsp;关闭 MySQL 连接</DT><DT><A  HREF="function.mysql-connect.html">mysql_connect</A>&nbsp;--&nbsp;打开一个到 MySQL 服务器的连接</DT><DT><A  HREF="function.mysql-create-db.html">mysql_create_db</A>&nbsp;--&nbsp;新建一个 MySQL 数据库</DT><DT><A  HREF="function.mysql-data-seek.html">mysql_data_seek</A>&nbsp;--&nbsp;移动内部结果的指针</DT><DT><A  HREF="function.mysql-db-name.html">mysql_db_name</A>&nbsp;--&nbsp;取得结果数据</DT><DT><A  HREF="function.mysql-db-query.html">mysql_db_query</A>&nbsp;--&nbsp;发送一条 MySQL 查询</DT><DT><A  HREF="function.mysql-drop-db.html">mysql_drop_db</A>&nbsp;--&nbsp;丢弃（删除）一个 MySQL 数据库</DT><DT><A  HREF="function.mysql-errno.html">mysql_errno</A>&nbsp;--&nbsp;
     返回上一个 MySQL 操作中的错误信息的数字编码
    </DT><DT><A  HREF="function.mysql-error.html">mysql_error</A>&nbsp;--&nbsp;
     返回上一个 MySQL 操作产生的文本错误信息
    </DT><DT><A  HREF="function.mysql-escape-string.html">mysql_escape_string</A>&nbsp;--&nbsp;
     转义一个字符串用于 mysql_query
    </DT><DT><A  HREF="function.mysql-fetch-array.html">mysql_fetch_array</A>&nbsp;--&nbsp;
     从结果集中取得一行作为关联数组，或数字数组，或二者兼有
    </DT><DT><A  HREF="function.mysql-fetch-assoc.html">mysql_fetch_assoc</A>&nbsp;--&nbsp;
     从结果集中取得一行作为关联数组
    </DT><DT><A  HREF="function.mysql-fetch-field.html">mysql_fetch_field</A>&nbsp;--&nbsp;
     从结果集中取得列信息并作为对象返回
    </DT><DT><A  HREF="function.mysql-fetch-lengths.html">mysql_fetch_lengths</A>&nbsp;--&nbsp;
     取得结果集中每个输出的长度
    </DT><DT><A  HREF="function.mysql-fetch-object.html">mysql_fetch_object</A>&nbsp;--&nbsp;从结果集中取得一行作为对象</DT><DT><A  HREF="function.mysql-fetch-row.html">mysql_fetch_row</A>&nbsp;--&nbsp;从结果集中取得一行作为枚举数组</DT><DT><A  HREF="function.mysql-field-flags.html">mysql_field_flags</A>&nbsp;--&nbsp;
     从结果中取得和指定字段关联的标志
    </DT><DT><A  HREF="function.mysql-field-len.html">mysql_field_len</A>&nbsp;--&nbsp;
     返回指定字段的长度
    </DT><DT><A  HREF="function.mysql-field-name.html">mysql_field_name</A>&nbsp;--&nbsp;
     取得结果中指定字段的字段名
    </DT><DT><A  HREF="function.mysql-field-seek.html">mysql_field_seek</A>&nbsp;--&nbsp;
     将结果集中的指针设定为制定的字段偏移量
    </DT><DT><A  HREF="function.mysql-field-table.html">mysql_field_table</A>&nbsp;--&nbsp;
     取得指定字段所在的表名
    </DT><DT><A  HREF="function.mysql-field-type.html">mysql_field_type</A>&nbsp;--&nbsp;
     取得结果集中指定字段的类型
    </DT><DT><A  HREF="function.mysql-free-result.html">mysql_free_result</A>&nbsp;--&nbsp;释放结果内存</DT><DT><A  HREF="function.mysql-get-client-info.html">mysql_get_client_info</A>&nbsp;--&nbsp;取得 MySQL 客户端信息</DT><DT><A  HREF="function.mysql-get-host-info.html">mysql_get_host_info</A>&nbsp;--&nbsp;取得 MySQL 主机信息</DT><DT><A  HREF="function.mysql-get-proto-info.html">mysql_get_proto_info</A>&nbsp;--&nbsp;取得 MySQL 协议信息</DT><DT><A  HREF="function.mysql-get-server-info.html">mysql_get_server_info</A>&nbsp;--&nbsp;取得 MySQL 服务器信息</DT><DT><A  HREF="function.mysql-info.html">mysql_info</A>&nbsp;--&nbsp;
     取得最近一条查询的信息
    </DT><DT><A  HREF="function.mysql-insert-id.html">mysql_insert_id</A>&nbsp;--&nbsp;
     取得上一步 INSERT 操作产生的 ID
    </DT><DT><A  HREF="function.mysql-list-dbs.html">mysql_list_dbs</A>&nbsp;--&nbsp;
     列出 MySQL 服务器中所有的数据库
    </DT><DT><A  HREF="function.mysql-list-fields.html">mysql_list_fields</A>&nbsp;--&nbsp;列出 MySQL 结果中的字段</DT><DT><A  HREF="function.mysql-list-processes.html">mysql_list_processes</A>&nbsp;--&nbsp;列出 MySQL 进程</DT><DT><A  HREF="function.mysql-list-tables.html">mysql_list_tables</A>&nbsp;--&nbsp;列出 MySQL 数据库中的表</DT><DT><A  HREF="function.mysql-num-fields.html">mysql_num_fields</A>&nbsp;--&nbsp;取得结果集中字段的数目</DT><DT><A  HREF="function.mysql-num-rows.html">mysql_num_rows</A>&nbsp;--&nbsp;取得结果集中行的数目</DT><DT><A  HREF="function.mysql-pconnect.html">mysql_pconnect</A>&nbsp;--&nbsp;
     打开一个到 MySQL 服务器的持久连接
    </DT><DT><A  HREF="function.mysql-ping.html">mysql_ping</A>&nbsp;--&nbsp;Ping 一个服务器连接，如果没有连接则重新连接</DT><DT><A  HREF="function.mysql-query.html">mysql_query</A>&nbsp;--&nbsp;发送一条 MySQL 查询</DT><DT><A  HREF="function.mysql-real-escape-string.html">mysql_real_escape_string</A>&nbsp;--&nbsp;
     转义 SQL 语句中使用的字符串中的特殊字符，并考虑到连接的当前字符集
    </DT><DT><A  HREF="function.mysql-result.html">mysql_result</A>&nbsp;--&nbsp;取得结果数据</DT><DT><A  HREF="function.mysql-select-db.html">mysql_select_db</A>&nbsp;--&nbsp;选择 MySQL 数据库</DT><DT><A  HREF="function.mysql-stat.html">mysql_stat</A>&nbsp;--&nbsp;取得当前系统状态</DT><DT><A  HREF="function.mysql-tablename.html">mysql_tablename</A>&nbsp;--&nbsp;取得表名</DT><DT><A  HREF="function.mysql-thread-id.html">mysql_thread_id</A>&nbsp;--&nbsp;返回当前线程的 ID</DT><DT><A  HREF="function.mysql-unbuffered-query.html">mysql_unbuffered_query</A>&nbsp;--&nbsp;
     向 MySQL 发送一条 SQL 查询，并不获取和缓存结果的行
    </DT></DL></DIV></DIV></DIV><BR></TD><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD></TR><TR><TD COLSPAN="3"><DIV CLASS="NAVFOOTER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR><TR><TD><TABLE  SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TD  WIDTH="33%" ALIGN="left" VALIGN="top"><A  HREF="function.muscat-setup.html" ACCESSKEY="P">后退</A></TD><TD  WIDTH="34%" ALIGN="center" VALIGN="top"><A  HREF="index.html" ACCESSKEY="H">起点</A></TD><TD  WIDTH="33%" ALIGN="right" VALIGN="top"><A  HREF="function.mysql-affected-rows.html" ACCESSKEY="N">前进</A></TD></TR><TR><TD  WIDTH="33%" ALIGN="left" VALIGN="top">muscat_setup</TD><TD  WIDTH="34%" ALIGN="center" VALIGN="top"><A  HREF="funcref.html" ACCESSKEY="U">上一级</A></TD><TD  WIDTH="33%" ALIGN="right" VALIGN="top">mysql_affected_rows</TD></TR></TABLE></TD></TR></TABLE></DIV></TD></TR></TABLE>

<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->
3%" ALIGN="right" VALIGN="top">mysql_affected_rows</TD></TR></TABLE></TD></TR></TABLE></DIV></TD></TR></TABLE>

<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->
