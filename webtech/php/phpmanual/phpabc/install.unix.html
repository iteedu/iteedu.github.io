
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end -->
<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->
<TABLE BORDER="0" WIDTH="100%" HEIGHT="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD COLSPAN="3"><DIV CLASS="NAVHEADER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR><TD><TABLE  SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TH  COLSPAN="3" ALIGN="center">PHP 手册</TH></TR><TR><TD  WIDTH="10%" ALIGN="left" VALIGN="bottom"><A  HREF="install.general.html" ACCESSKEY="P">后退</A></TD><TD  WIDTH="80%" ALIGN="center" VALIGN="bottom"></TD><TD  WIDTH="10%" ALIGN="right" VALIGN="bottom"><A  HREF="install.unix.apache2.html" ACCESSKEY="N">前进</A></TD></TR></TABLE></TD></TR><TR BGCOLOR="#333366"><TD><IMG SRC="../spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR></TABLE></DIV></TD></TR><TR><TD><IMG SRC="../spacer.gif" WIDTH="10" HEIGHT="1"></TD><TD HEIGHT="100%" VALIGN="TOP" WIDTH="100%"><BR><DIV  CLASS="chapter"><H1><A  NAME="install.unix">章 4. Unix 系统下的安装</A></H1><DIV  CLASS="TOC"><DL><DT><B>目录</B></DT><DT><A  HREF="install.unix.html#install.unix.apache">Unix 系统下的 Apache 1.3.x</A></DT><DT><A  HREF="install.unix.apache2.html">Unix 系统下的 Apache 2.0</A></DT><DT><A  HREF="install.caudium.html">Caudium 服务器</A></DT><DT><A  HREF="install.fhttpd.html">fhttpd 服务器</A></DT><DT><A  HREF="install.unix.sun.html">Sun Solaris 上的 Sun、iPlanet 和 Netscape 服务器</A></DT><DT><A  HREF="install.unix.commandline.html">CGI 和命令行设置</A></DT><DT><A  HREF="install.unix.hpux.html">在 HP-UX 系统下的安装</A></DT><DT><A  HREF="install.openbsd.html">在 OpenBSD 系统下的安装</A></DT><DT><A  HREF="install.solaris.html">在 Solaris 下的安装</A></DT><DT><A  HREF="install.unix.gentoo.html">在 Gentoo 系统下的安装</A></DT><DT><A  HREF="install.unix.debian.html">Debian GNU/Linux 安装说明</A></DT></DL></DIV><P>&#13;    本节将指导如何在 Unix 系统下安装和配置 PHP。在开始安装之前，请务必研究自己使用的系统和
    web 服务器的相关章节。
   </P><P>&#13;    在<A  HREF="install.general.html">安装前需要考虑的事项</A>一节提到，在本节主要以
    web 为中心介绍 PHP 的设置。不过本节也会覆盖一些 PHP 命令行用法的设置方法。
   </P><P>&#13;    在 Unix 平台下安装 PHP 有几种方法：使用配置和编译过程，或是使用各种预编译的包。本文主要针对配置和编译
    PHP 的过程。很多 Unix 类系统都有包安装系统，可以用它来设置一个有着标准配置的
    PHP。但是若需要与标准配置不同的功能（例如一个安全服务器，或者不同的数据库驱动扩展模块），可能需要编译
    PHP 和／或 web 服务器。如果不熟悉编译软件，可以考虑搜索一下是否有人已经编译了包含所需要功能的预编译包。
   </P><P>&#13;    编译所需的知识和软件：
    <P></P><UL><LI><P>&#13;       基础的 Unix 技能（有能力操作“make”和一种 C 语言编译器）
      </P></LI><LI><P>&#13;       一个 ANSI C 语言编译器
      </P></LI><LI><P>&#13;       flex：版本 2.5.4
      </P></LI><LI><P>&#13;       bison：版本 1.28（推荐）、1.35 或 1.75
      </P></LI><LI><P>&#13;       一个 web 服务器
      </P></LI><LI><P>&#13;       模块特别需要的组件（例如 gd、pdf 库等)
      </P></LI></UL>
   <P>&#13;    PHP 初始的配置和安装过程被 <B  CLASS="command">configure</B> 脚本中一系列命令行选项控制。可以通过
    <B  CLASS="command">./configure --help</B> 命令了解 PHP
    所有可用的编译选项及简短解释。本手册是分开对这些选项编写文档的。可在附录中找到<A  HREF="../appendix/configure.html">核心配置选项</A>，而扩展模块特定的配置选项分别在其函数参考页面中描述。
   </P><P>&#13;    配置好 PHP 后，便可以开始编译模块和／或可执行文件。<B  CLASS="command">make</B>
    命令用来做这一工作。如果该命令执行失败而找不到原因，请参考<A  HREF="install.problems.html">安装问题</A>一节。
   </P><DIV  CLASS="sect1"><H1  CLASS="sect1"><A  NAME="install.unix.apache">Unix 系统下的 Apache 1.3.x</A></H1><P>&#13;     本节包括在 Unix 平台的 Apache 下安装 PHP 的说明和提示。我们在另外的页面也有
     <A  HREF="install.unix.apache2.html">Apache 2 的安装和说明</A>。
    </P><P>&#13;     可以从<A  HREF="../appendix/configure.html">核心配置选项列表</A>以及位于手册对应部分的特定扩展配置选项中选择参数并在安装步骤第
     10 步将它们添加到 <B  CLASS="command">configure</B>
     命令中。版本号在这里被省略了以保证此说明的正确性。需要将这里的“xxx”替换为自己使用的文件的正确值。
    </P><TABLE  WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" CLASS="EXAMPLE"><TR><TD><DIV  CLASS="example"><A  NAME="install.unix.apache.example"></A><P><B>例子 4-1. 
      PHP 的 Apache 共享模块版本安装说明
     </B></P><TABLE  BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><PRE  CLASS="screen">1.  gunzip apache_xxx.tar.gz
2.  tar -xvf apache_xxx.tar
3.  gunzip php-xxx.tar.gz
4.  tar -xvf php-xxx.tar
5.  cd apache_xxx
6.  ./configure --prefix=/www --enable-module=so
7.  make
8.  make install
9.  cd ../php-xxx
10. 现在，配置 PHP。这是定制 PHP 的不同选项的时候，例如要加载哪些扩展库。使用
      ./configure --help
    来列出可用的选项。在下面的示例中只是简单地配置 Apache 1 和 MySQL 支持。
    用户的 apxs 的路径可能和此示例中的不同。
      ./configure --with-mysql --with-apxs=/www/bin/apxs
11. make
12. make install
    如果在安装之后决定修改配置选项，那么只需重复以上最后三步。只须重新启动
    Apache 就可以使新模块生效。不需要重新编译 Apache。注意除非特别指出，
    “make install”总是会安装 PEAR，各种 PHP 工具例如 phpize，PHP CLI 以及其它。
13. 建立 php.ini 文件。
      cp php.ini-dist /usr/local/lib/php.ini
    可以编辑 php.ini 来设置 PHP 选项。如果想把 php.ini 放在其它目录，在第
    10 步加上以下选项：
      --with-config-file-path=/path
    如果选择了 php.ini-recommended，确保阅读一下其中的变更说明，因为这些会
    影响到 PHP 的行为。
14. 编辑 httpd.conf 来加载 PHP 模块。在 LoadModule 语句右边的路径必须指向系统中
    PHP 模块所在的路径。上面的 make install 步骤可能已经添加了，但还是检查确认一下。
    对 PHP 4：
      LoadModule php4_module        libexec/libphp4.so
    对 PHP 5：
      LoadModule php5_module        libexec/libphp5.so
15. 在 httpd.conf 中加入 AddModule 部分，在 ClearModuleList 下面的某处，加上这一句：
    对 PHP 4：
      AddModule mod_php4.c
    对 PHP 5：
      AddModule mod_php5.c
16. 告诉 Apache 将哪些后缀作为 PHP 解析。例如，让 Apache 把 .html 后缀的文件解析为
    PHP。可以将任何后缀的文件解析为 PHP，只要在以下语句中加入并用空格分开。这里以
    添加一个 .phtml 来示例。
      AddType application/x-httpd-php .html .phtml
    为了将 .htmls 作为 PHP 的源文件进行语法高亮显示，还可以加上：
      AddType application/x-httpd-php-source .htmls
17. 用通常的过程启动 Apache（必须完全停止 Apache 再重新启动，而不是用 HUP 或者
    USR1 信号使 Apache 重新加载）。</PRE></TD></TR></TABLE></DIV></TD></TR></TABLE><P>&#13;     也可以将 PHP 作为静态对象来安装：
    </P><TABLE  WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" CLASS="EXAMPLE"><TR><TD><DIV  CLASS="example"><A  NAME="install.unix.apache.example-static"></A><P><B>例子 4-2. 
      PHP 的 Apache 静态模块版本安装说明
     </B></P><TABLE  BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><PRE  CLASS="screen">1.  gunzip -c apache_1.3.x.tar.gz | tar xf -
2.  cd apache_1.3.x
3.  ./configure
4.  cd ..

5.  gunzip -c php-4.x.y.tar.gz | tar xf -
6.  cd php-4.x.y
7.  ./configure --with-mysql --with-apache=../apache_1.3.x
8.  make
9.  make install

10. cd ../apache_1.3.x

11. ./configure --prefix=/www --activate-module=src/modules/php4/libphp4.a
    （上面一行是正确的！是的，我们知道 libphp4.a 在目前不存在。它是不应该存在的，
    它将被创建。）

12. make
    （现在应该有一个 httpd 二进制文件，可以将它复制到 Apache bin 目录。如果这是
    第一次安装，还要“make install”。)

13. cd ../php-4.x.y
14. cp php.ini-dist /usr/local/lib/php.ini

15. 可以编辑 /usr/local/lib/php.ini 文件以设置 PHP 选项。编辑 httpd.conf 或
    srm.conf 文件，添加：
    AddType application/x-httpd-php .html</PRE></TD></TR></TABLE></DIV></TD></TR></TABLE><P>&#13;      根据 Unix 系统和 Apache 安装方法的不同，有很多方法停止和重启动
      Apache。以下是一些不同的 Apache／UNIX 下重启动 Apache 的典型命令。需要把
      <VAR  CLASS="literal">/path/to/</VAR> 替换成自己系统上的确切路径。
     </P><P>&#13;      <TABLE  WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" CLASS="EXAMPLE"><TR><TD><DIV  CLASS="example"><A  NAME="AEN433"></A><P><B>例子 4-3. 重启动 Apache 的示例命令</B></P><TABLE  BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><PRE  CLASS="shell">1. 在一些 Linux 和 SysV 的变种下：
/etc/rc.d/init.d/httpd restart

2. 使用 apachectl 脚本：
/path/to/apachectl stop
/path/to/apachectl start

3. httpdctl 和 httpsdctl（使用了 OpenSSL），类似 apachectl：
/path/to/httpsdctl stop
/path/to/httpsdctl start

4. 使用了 mod_ssl，或其他 SSL 服务器，可能需要手工重启动：
/path/to/apachectl stop
/path/to/apachectl startssl</PRE></TD></TR></TABLE></DIV></TD></TR></TABLE>
     <P>&#13;      apachectl 和 http(s)dctl 程序所在的路径在不同系统中通常不一样。如果系统中有
      <VAR  CLASS="literal">locate</VAR> 或者 <VAR  CLASS="literal">whereis</VAR> 或者
      <VAR  CLASS="literal">which</VAR> 命令，那么可以帮助找到这些控制程序。
     </P><P>&#13;      编译 PHP 和 Apache 的不同例子还有：
      <DIV  CLASS="informalexample"><P></P><A  NAME="AEN441"></A><TABLE  BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><PRE  CLASS="shell">./configure --with-apxs --with-pgsql</PRE></TD></TR></TABLE><P></P></DIV>
     <P>&#13;      此配置将生成在 Apache 的 httpd.conf 文件中用 LoadModule
      加载的 <TT  CLASS="filename">libphp4.so</TT> 共享库。而 PostgreSQL
      支持将嵌入到 <TT  CLASS="filename">libphp4.so</TT> 库中。
     </P><P>&#13;      <DIV  CLASS="informalexample"><P></P><A  NAME="AEN447"></A><TABLE  BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><PRE  CLASS="shell">./configure --with-apxs --with-pgsql=shared</PRE></TD></TR></TABLE><P></P></DIV>
     <P>&#13;      此配置将生成 Apache 的 <TT  CLASS="filename">libphp4.so</TT>
      共享库，并且还生成 <TT  CLASS="filename">pgsql.so</TT> 共享库，可以在
      <TT  CLASS="filename">php.ini</TT> 文件中用 extension 指令加载，或者在 PHP 脚本中用
      <A  HREF="../function.dl.html"><B  CLASS="function">dl()</B></A> 函数明确地加载。
     </P><P>&#13;      <DIV  CLASS="informalexample"><P></P><A  NAME="AEN455"></A><TABLE  BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><PRE  CLASS="shell">./configure --with-apache=/path/to/apache_source --with-pgsql</PRE></TD></TR></TABLE><P></P></DIV>
     <P>&#13;      此配置将生成 <TT  CLASS="filename">libmodphp4.a</TT> 库，<TT  CLASS="filename">mod_php4.c</TT>
      和一些相关的文件并且拷贝到 Apache 源程序目录中的 <VAR  CLASS="literal">src/modules/php4</VAR>
      目录下。然后用 <VAR  CLASS="literal">--activate-module=src/modules/php4/libphp4.a</VAR>
      编译 Apache，Apache 编译系统会生成 <TT  CLASS="filename">libphp4.a</TT>
      并且将其静态地连接到 <TT  CLASS="filename">httpd</TT> 程序中。PostgreSQL
      支持也直接包括在这个 <TT  CLASS="filename">httpd</TT>
      程序中了，因此最终结果是单一的一个包括了所有 Apache 和 PHP
      支持的 <TT  CLASS="filename">httpd</TT> 可执行文件。
     </P><P>&#13;      <DIV  CLASS="informalexample"><P></P><A  NAME="AEN467"></A><TABLE  BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><PRE  CLASS="shell">./configure --with-apache=/path/to/apache_source --with-pgsql=shared</PRE></TD></TR></TABLE><P></P></DIV>
     <P>&#13;      此配置和上面一样――除了没有在最后的 <TT  CLASS="filename">httpd</TT>
      可执行文件中包括 PostgreSQL 的支持以及生成了一个
      <TT  CLASS="filename">pgsql.so</TT>  共享库以外。该共享库可以在
      <TT  CLASS="filename">php.ini</TT> 文件中或者用 <A  HREF="../function.dl.html"><B  CLASS="function">dl()</B></A> 函数加载。
     </P><P>&#13;      当选择不同的方法编译 PHP 时，需要考虑每种方法的优势和缺点。用共享对象方式编译
      PHP 意味着可以单独编译 Apache，并且不用在添加或修改了 PHP
      的时候重新编译所有程序。用内置方法编译 PHP（静态方式）意味着 PHP
      可以加载和运行得更快。更多信息见 Apache 的
      <A  HREF="http://httpd.apache.org/docs/1.3/dso.html" TARGET="_top">DSO 支持页面</A>。
     </P><DIV  CLASS="note"><BLOCKQUOTE  CLASS="note"><P><B>注: </B>
      Apache 默认的 httpd.conf 文件中目前包括类似如下的内容：
      <DIV  CLASS="informalexample"><P></P><A  NAME="AEN478"></A><TABLE  BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><PRE  CLASS="apache-conf">User nobody
Group "#-1"</PRE></TD></TR></TABLE><P></P></DIV>
      除非把它修改成“Group nogroup”或者其它类似的（“Group
      daemon”也很通用），PHP 将不能打开文件。
     </BLOCKQUOTE></DIV><DIV  CLASS="note"><BLOCKQUOTE  CLASS="note"><P><B>注: </B>
      确认在使用 <VAR  CLASS="option">--with-apxs=/path/to/apxs</VAR>
      时指向 Apache 安装后的目录中的 apxs。绝对不能用 Apache 源程序中的
      apxs 而要用安装后的 apxs。
     </P></BLOCKQUOTE></DIV></DIV></DIV><BR></TD><TD><IMG SRC="../spacer.gif" WIDTH="10" HEIGHT="1"></TD></TR><TR><TD COLSPAN="3"><DIV CLASS="NAVFOOTER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR BGCOLOR="#333366"><TD><IMG SRC="../spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR><TR><TD><TABLE  SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0"><TR><TD  WIDTH="33%" ALIGN="left" VALIGN="top"><A  HREF="install.general.html" ACCESSKEY="P">后退</A></TD><TD  WIDTH="34%" ALIGN="center" VALIGN="top"><A  HREF="../index.html" ACCESSKEY="H">起点</A></TD><TD  WIDTH="33%" ALIGN="right" VALIGN="top"><A  HREF="install.unix.apache2.html" ACCESSKEY="N">前进</A></TD></TR><TR><TD  WIDTH="33%" ALIGN="left" VALIGN="top">安装前需要考虑的事项</TD><TD  WIDTH="34%" ALIGN="center" VALIGN="top"><A  HREF="install.html" ACCESSKEY="U">上一级</A></TD><TD  WIDTH="33%" ALIGN="right" VALIGN="top">Unix 系统下的 Apache 2.0</TD></TR></TABLE></TD></TR></TABLE></DIV></TD></TR></TABLE>

<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->
