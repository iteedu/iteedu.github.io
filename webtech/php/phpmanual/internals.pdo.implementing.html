
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end -->
<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->
<TABLE BORDER="0" WIDTH="100%" HEIGHT="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD COLSPAN="3"><DIV CLASS="NAVHEADER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR><TD><TABLE   SUMMARY="Header navigation table"  WIDTH="100%"  BORDER="0"  CELLPADDING="3"  CELLSPACING="0"><TR><TH   COLSPAN="3"  ALIGN="center">PHP 手册</TH></TR><TR><TD   WIDTH="10%"  ALIGN="left"  VALIGN="bottom"><A   HREF="internals.pdo.preparation.html"  ACCESSKEY="P">后退</A></TD><TD   WIDTH="80%"  ALIGN="center"  VALIGN="bottom">章 45. PDO Driver How-To</TD><TD   WIDTH="10%"  ALIGN="right"  VALIGN="bottom"><A   HREF="internals.pdo.building.html"  ACCESSKEY="N">前进</A></TD></TR></TABLE></TD></TR><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR></TABLE></DIV></TD></TR><TR><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD><TD HEIGHT="100%" VALIGN="TOP" WIDTH="100%"><BR><DIV   CLASS="sect1"><H1   CLASS="sect1"><A   NAME="internals.pdo.implementing">Fleshing out your skeleton</A></H1><DIV   CLASS="sect2"><H2   CLASS="sect2"><A   NAME="AEN191786">Major Structures and Attributes</A></H2><P>&#13;   The major structures, pdo_dbh_t and pdo_stmt_t are defined and explained in
   Appendix A and B respectively. Database and Statement attributes are
   defined in Appendix C. Error handling is explained in Appendix D.
  </P></DIV><DIV   CLASS="sect2"><H2   CLASS="sect2"><A   NAME="AEN191789">pdo_SKEL.c: PHP extension glue</A></H2><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN191791">function entries</A></H3><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">static function_entry pdo_SKEL_functions[] = {
  { NULL, NULL, NULL }
};</PRE></TD></TR></TABLE><P>&#13;    This structure is used to register functions into the global php function
    namespace.  PDO drivers should try to avoid doing this, so it is
    recommended that you leave this structure initialized to NULL, as shown in
    the synopsis above.
   </P></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN191795">Module entry</A></H3><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">/* {{{ pdo_SKEL_module_entry */
#if ZEND_EXTENSION_API_NO &#62;= 220050617
static zend_module_dep pdo_SKEL_deps[] = {
    ZEND_MOD_REQUIRED("pdo")
    {NULL, NULL, NULL}
};
#endif
/* }}} */

zend_module_entry pdo_SKEL_module_entry = {
#if ZEND_EXTENSION_API_NO &#62;= 220050617
    STANDARD_MODULE_HEADER_EX, NULL,
    pdo_SKEL_deps,
#else
    STANDARD_MODULE_HEADER,
#endif
    "pdo_SKEL",
    pdo_SKEL_functions,
    PHP_MINIT(pdo_SKEL),
    PHP_MSHUTDOWN(pdo_SKEL),
    NULL,
    NULL,
    PHP_MINFO(pdo_SKEL),
    PHP_PDO_&#60;DB&#62;_MODULE_VERSION,
    STANDARD_MODULE_PROPERTIES
};
/* }}} */

#ifdef COMPILE_DL_PDO_&#60;DB&#62;
ZEND_GET_MODULE(pdo_db)
#endif</PRE></TD></TR></TABLE><P>&#13;    A structure of type zend_module_entry called
    pdo_SKEL_module_entry must be declared and should include reference to
    the pdo_SKEL_functions table defined previously.
   </P></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN191799">Standard PHP Module Extension Functions</A></H3><DIV   CLASS="sect4"><H4   CLASS="sect4"><A   NAME="AEN191801">PHP_MINIT_FUNCTION</A></H4><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">/* {{{ PHP_MINIT_FUNCTION */
PHP_MINIT_FUNCTION(pdo_SKEL)
{
    return php_pdo_register_driver(&#38;pdo_SKEL_driver);
}
/* }}} */</PRE></TD></TR></TABLE><P>&#13;     This standard PHP extension function should be used to register your
     driver with the PDO layer. This is done by calling the
     <B   CLASS="function">php_pdo_register_driver()</B> function passing a pointer to
     a structure of type pdo_driver_t typically named
     <VAR   CLASS="literal">pdo_SKEL_driver</VAR>.  A pdo_driver_t
     contains a header that is generated using the
     <VAR   CLASS="literal">PDO_DRIVER_HEADER(SKEL)</VAR> macro and
     <B   CLASS="function">pdo_SKEL_handle_factory()</B> function pointer. The
     actual function is described during the discussion of the
     <TT   CLASS="filename">SKEL_dbh.c</TT> unit.
    </P></DIV><DIV   CLASS="sect4"><H4   CLASS="sect4"><A   NAME="AEN191812">PHP_MSHUTDOWN_FUNCTION</A></H4><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">/* {{{ PHP_MSHUTDOWN_FUNCTION */
PHP_MSHUTDOWN_FUNCTION(pdo_SKEL)
{
    php_pdo_unregister_driver(&#38;pdo_SKEL_driver);
    return SUCCESS;
}
/* }}} */</PRE></TD></TR></TABLE><P>&#13;     This standard PHP extension function is used to unregister your driver
     from the PDO layer. This is done by calling the
     <B   CLASS="function">php_pdo_unregister_driver()</B> function, passing the same
     <VAR   CLASS="literal">pdo_SKEL_driver</VAR> structure that was passed in the
     init function above.
    </P></DIV><DIV   CLASS="sect4"><H4   CLASS="sect4"><A   NAME="AEN191818">PHP_MINFO_FUNCTION</A></H4><P>&#13;     This is again a standard PHP extension function. Its purpose is to
     display information regarding the module when the
     <A   HREF="function.htmlinfo.html"><B   CLASS="function">phpinfo()</B></A> is called from a script.  The convention is
     to display the version
     of the module and also what version of the db you are dependent on, along
     with any other configuration style information that might be relevant.
    </P></DIV></DIV></DIV><DIV   CLASS="sect2"><H2   CLASS="sect2"><A   NAME="AEN191822">SKEL_driver.c: Driver implementation</A></H2><P>&#13;   This unit implements all of the database handling methods that support the
   PDO database handle object. It also contains the error fetching routines.
   All of these functions will typically need to access the global variable
   pool. Therefore, it is necessary to use the Zend macro TSRMLS_DC macro at
   the end of each of these statements. Consult the Zend programmer
   documentation for more information on this macro.
  </P><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN191825">pdo_SKEL_error</A></H3><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">static int pdo_SKEL_error(pdo_dbh_t *dbh,
  pdo_stmt_t *stmt, const char *file, int line TSRMLS_DC)</PRE></TD></TR></TABLE><P>&#13;    The purpose of this function is to be used as a generic error handling
    function within the driver. It is called by the driver when an error occurs
    within the driver. If an error occurs that is not related to SQLSTATE, the
    driver should set either <VAR   CLASS="literal">dbh-&#62;error_code</VAR> or
    <VAR   CLASS="literal">stmt-&#62;error_code</VAR> to an
    SQLSTATE that most closely matches the error or the generic SQLSTATE error
    <SPAN   CLASS="QUOTE">"HY000"</SPAN>. The file pdo_sqlstate.c in the PDO source contains a table
    of commonly used SQLSTATE codes that the PDO code explicitly recognizes.
    This setting of the error code should be done prior to calling this
    function.; This function should set the global
    <VAR   CLASS="parameter">pdo_err</VAR> variable to the error found in either the
    dbh or the stmt (if the variable stmt is not NULL).
   </P><P></P><DIV   CLASS="variablelist"><DL><DT>dbh</DT><DD><P>Pointer to the database handle initialized by the handle factory</P></DD><DT>stmt</DT><DD><P>Pointer to the current statement or NULL. If NULL, the error is derived by error code found in the dbh.</P></DD><DT>file</DT><DD><P>The source file where the error occurred or NULL if not available.</P></DD><DT>line</DT><DD><P>The line number within the source file if available.</P></DD></DL></DIV><P>&#13;    If the dbh member methods is NULL (which implies that the error is being
    raised from within the PDO constructor), this function should call the
    zend_throw_exception_ex() function otherwise it should return the error
    code.  This function is usually called using a helper macro that customizes
    the calling sequence for either database handling errors or statement
    handling errors.
   </P><TABLE   WIDTH="100%"  BORDER="0"  CELLPADDING="0"  CELLSPACING="0"  CLASS="EXAMPLE"><TR><TD><DIV   CLASS="example"><A   NAME="AEN191851"></A><P><B>例子 45-1. Example macros for invoking pdo_SKEL_error</B></P><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="c">#define pdo_SKEL_drv_error(what) \
    pdo_SKEL_error(dbh, NULL, what, __FILE__, __LINE__ TSRMLS_CC)
#define pdo_SKEL_drv_error(what) \
    pdo_SKEL_error(dbh, NULL, what, __FILE__, __LINE__ TSRMLS_CC)</PRE></TD></TR></TABLE></DIV></TD></TR></TABLE><P>&#13;    For more info on error handling, see <A   HREF="internals.pdo.error-handling.html">the 节 called <I>Error handling</I></A>.
   </P><DIV   CLASS="note"><BLOCKQUOTE   CLASS="note"><P><B>注: </B>
     Despite being documented here, the PDO driver interface does not specify
     that his function be present; it is merely a convenient way to handle
     errors, and it just happens to be equally convenient for the majority of
     database client library APIs to structure your driver implementation in
     this way.
    </P></BLOCKQUOTE></DIV></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN191858">pdo_SKEL_fetch_error_func</A></H3><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">static int pdo_SKEL_fetch_error_func(pdo_dbh_t *dbh, pdo_stmt_t *stmt,
    zval *info TSRMLS_DC)</PRE></TD></TR></TABLE><P>&#13;    The purpose of this function is to obtain additional information about the
    last error that was triggered.  This includes the driver specific error
    code and a human readable string.  It may also include additional
    information if appropriate.  This function is called as a result of the PHP
    script calling the <B   CLASS="function">PDO::errorInfo()</B> method.
   </P><P></P><DIV   CLASS="variablelist"><DL><DT>dbh</DT><DD><P>Pointer to the database handle initialized by the handle factory</P></DD><DT>stmt</DT><DD><P>&#13;       Pointer to the most current statement or NULL. If NULL, the error
       translated is derived by error code found in the dbh.
      </P></DD><DT>info</DT><DD><P>A hash table containing error codes and messages.</P></DD></DL></DIV><P>&#13;    The error_func should return two pieces of information as successive array
    elements. The first item is expected to be a numeric error code, the second
    item is a descriptive string. The best way to set this item is by using
    add_next_index.  Note that the type of the first argument need not be
    long; use whichever type most closely matches the error code
    returned by the underlying database API.
   </P><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="c">/* now add the error information. */
/* These need to be added in a specific order */
add_next_index_long(info, error_code);   /* driver specific error code */
add_next_index_string(info, message, 0); /* readable error message */</PRE></TD></TR></TABLE><P>&#13;    This function should return 1 if information is available, 0 if the driver
    does not have additional info.
   </P></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN191880">SKEL_handle_closer</A></H3><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">static int SKEL_handle_closer(pdo_dbh_t *dbh TSRMLS_DC)</PRE></TD></TR></TABLE><P>&#13;    This function will be called by PDO to close an open
    database.
   </P><P></P><DIV   CLASS="variablelist"><DL><DT>dbh</DT><DD><P>Pointer to the database handle initialized by the handle factory</P></DD></DL></DIV><P>&#13;    This should do whatever database specific activity that needs to be
    accomplished to close the open database. PDO ignores the return
    value from this function.
   </P></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="internals.pdo.preparer">SKEL_handle_preparer</A></H3><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">static int SKEL_handle_preparer(pdo_dbh_t *dbh, const char *sql,
long sql_len, pdo_stmt_t *stmt, zval *driver_options TSRMLS_DC)</PRE></TD></TR></TABLE><P>&#13;    This function will be called by PDO in response to
    <B   CLASS="function">PDO::query()</B> and <B   CLASS="function">PDO::prepare()</B>
    calls from the PHP script.  The purpose of the function is to prepare
    raw SQL for execution, storing whatever state is appropriate into the
    <VAR   CLASS="parameter">stmt</VAR> that is passed in.
   </P><P></P><DIV   CLASS="variablelist"><DL><DT>dbh</DT><DD><P>Pointer to the database handle initialized by the handle factory</P></DD><DT>sql</DT><DD><P>Pointer to a character string containing the SQL statement to be prepared.</P></DD><DT>sql_len</DT><DD><P>The length of the SQL statement.</P></DD><DT>Stmt</DT><DD><P>Pointer to the returned statement or NULL if an error occurs.</P></DD><DT>driver_options</DT><DD><P>Any driver specific/defined options.</P></DD></DL></DIV><P>&#13;    This function is essentially the constructor for a stmt object. This
    function is responsible for processing statement options, and setting
    driver-specific option fields in the pdo_stmt_t structure.
   </P><P>&#13;    PDO does not process any statement options on the driver's
    behalf before calling the preparer function.  It is your responsibility to
    process them before you return, raising an error for any unknown options that
    are passed.
   </P><P>&#13;    One very important responsibility of this function is the processing of SQL
    statement parameters. At the time of this call, PDO does not if your driver
    supports binding parameters into prepared statements, nor does it know if
    it supports named or positional parameter naming conventions.
   </P><P>&#13;    Your driver is responsible for setting
    <VAR   CLASS="literal">stmt-&#62;supports_placeholders</VAR> as appropriate for the
    underlying database.  This may involved some run-time determination on the
    part of your driver, if this setting depends on the version of the database
    server to which it is connected.  If your driver doesn't directly support
    both named and positional parameter conventions, you should use the
    <B   CLASS="function">pdo_parse_params()</B> API to have PDO rewrite the query to
    take advantage of the support provided by your database.
   </P><TABLE   WIDTH="100%"  BORDER="0"  CELLPADDING="0"  CELLSPACING="0"  CLASS="EXAMPLE"><TR><TD><DIV   CLASS="example"><A   NAME="AEN191924"></A><P><B>例子 45-2. Using pdo_parse_params</B></P><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="c">int ret;
    char *nsql = NULL;
    int nsql_len = 0;

    /* before we prepare, we need to peek at the query; if it uses named parameters,
     * we want PDO to rewrite them for us */
    stmt-&#62;supports_placeholders = PDO_PLACEHOLDER_POSITIONAL;
    ret = pdo_parse_params(stmt, (char*)sql, sql_len, &#38;nsql, &#38;nsql_len TSRMLS_CC);

    if (ret == 1) {
        /* query was re-written */
        sql = nsql;
    } else if (ret == -1) {
        /* couldn't grok it */
        strcpy(dbh-&#62;error_code, stmt-&#62;error_code);
        return 0;
    }

    /* now proceed to prepare the query in "sql" */</PRE></TD></TR></TABLE></DIV></TD></TR></TABLE><P>&#13;    Possible values for <VAR   CLASS="literal">supports_placeholders</VAR> are:
    <TT   CLASS="constant"><B>PDO_PLACEHOLDER_NAMED</B></TT>,
    <TT   CLASS="constant"><B>PDO_PLACEHOLDER_POSITIONAL</B></TT> and
    <TT   CLASS="constant"><B>PDO_PLACEHOLDER_NONE</B></TT>.  If the driver doesn't support prepare statements at all, then this function should simply allocate any state that it might need, and then return:
   </P><TABLE   WIDTH="100%"  BORDER="0"  CELLPADDING="0"  CELLSPACING="0"  CLASS="EXAMPLE"><TR><TD><DIV   CLASS="example"><A   NAME="AEN191932"></A><P><B>例子 45-3. implementing preparer for drivers that don't support native prepared statements</B></P><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="c">static int SKEL_handle_preparer(pdo_dbh_t *dbh, const char *sql,
    long sql_len, pdo_stmt_t *stmt, zval *driver_options TSRMLS_DC)
{
    pdo_SKEL_db_handle *H = (pdo_SKEL_db_handle *)dbh-&#62;driver_data;
    pdo_SKEL_stmt *S = ecalloc(1, sizeof(pdo_SKEL_stmt));

    S-&#62;H = H;
    stmt-&#62;driver_data = S;
    stmt-&#62;methods = &#38;SKEL_stmt_methods;
    stmt-&#62;supports_placeholders = PDO_PLACEHOLDER_NONE;

    return 1;
}</PRE></TD></TR></TABLE></DIV></TD></TR></TABLE><P>This function returns 1 on success or 0 on failure.</P></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN191936">SKEL_handle_doer</A></H3><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">static long SKEL_handle_doer(pdo_dbh_t *dbh, const char *sql, long sql_len TSRMLS_DC)</PRE></TD></TR></TABLE><P>&#13;    This function will be called by PDO to execute a raw SQL
    statement. No pdo_stmt_t is created.
   </P><P></P><DIV   CLASS="variablelist"><DL><DT>dbh</DT><DD><P>Pointer to the database handle initialized by the handle factory</P></DD><DT>sql</DT><DD><P>Pointer to a character string containing the SQL statement to be prepared.</P></DD><DT>sql_len</DT><DD><P>The length of the SQL statement.</P></DD></DL></DIV><P>&#13;    This function returns 1 on success or 0 on failure.
   </P></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN191954">SKEL_handle_quoter</A></H3><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">static int SKEL_handle_quoter(pdo_dbh_t *dbh, const char *unquoted,
  int unquoted_len, char **quoted, int quoted_len, enum pdo_param_type param_type TSRMLS_DC)</PRE></TD></TR></TABLE><P>&#13;    This function will be called by PDO to turn an unquoted
    string into a quoted string for use in a query.
   </P><P></P><DIV   CLASS="variablelist"><DL><DT>dbh</DT><DD><P>Pointer to the database handle initialized by the handle factory</P></DD><DT>unquoted</DT><DD><P>Pointer to a character string containing the string to be quoted.</P></DD><DT>unquoted_len</DT><DD><P>The length of the string to be quoted.</P></DD><DT>quoted</DT><DD><P>Pointer to the address where a pointer to the newly quoted string will be returned.</P></DD><DT>quoted_len</DT><DD><P>The length of the new string.</P></DD><DT>param_type</DT><DD><P>A driver specific hint for driver that have alternate quoting styles</P></DD></DL></DIV><P>&#13;    This function is called in response to a call to
    <B   CLASS="function">PDO::quote()</B> or when the driver has set
    <VAR   CLASS="literal">supports_placeholder</VAR> to
    <TT   CLASS="constant"><B>PDO_PLACEHOLDER_NONE</B></TT>. The purpose is to quote a
    parameter when building SQL statements.
   </P><P>&#13;    If your driver does not support native prepared statements, implementation
    of this function is required.
   </P><P>&#13;    This function returns 1 if the quoting process reformatted the string, and
    0 if it was not necessary to change the string. The original string will be
    used unchanged with a 0 return.
   </P></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN191989">SKEL_handle_begin</A></H3><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">static int SKEL_handle_begin(pdo_dbh_t *dbh TSRMLS_DC)</PRE></TD></TR></TABLE><P>&#13;    This function will be called by PDO to begin a database transaction.
   </P><P></P><DIV   CLASS="variablelist"><DL><DT>dbh</DT><DD><P>Pointer to the database handle initialized by the handle factory</P></DD></DL></DIV><P>&#13;    This should do whatever database specific activity that needs to be
    accomplished to begin a transaction. This function returns 1 for success or
    0 if an error occurred.
   </P></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN191999">SKEL_handle_commit</A></H3><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">static int SKEL_handle_commit(pdo_dbh_t *dbh TSRMLS_DC)</PRE></TD></TR></TABLE><P>&#13;    This function will be called by PDO to end a database
    transaction.
   </P><P></P><DIV   CLASS="variablelist"><DL><DT>dbh</DT><DD><P>Pointer to the database handle initialized by the handle factory</P></DD></DL></DIV><P>&#13;    This should do whatever database specific activity that needs to be
    accomplished to commit a transaction. This function returns 1 for success or 0 if an error occurred.
   </P></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN192009">SKEL_handle_rollback</A></H3><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">static int SKEL_handle_rollback( pdo_dbh_t *dbh TSRMLS_DC)</PRE></TD></TR></TABLE><P>This function will be called by PDO to rollback a database transaction.</P><P></P><DIV   CLASS="variablelist"><DL><DT>dbh</DT><DD><P>Pointer to the database handle initialized by the handle factory</P></DD></DL></DIV><P>&#13;    This should do whatever database specific activity that needs to be
    accomplished to rollback a transaction. This function returns 1 for
    success or 0 if an error occurred.
   </P></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN192019">SKEL_handle_get_attribute</A></H3><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">static int SKEL_handle_get_attribute(pdo_dbh_t *dbh, long attr, zval *return_value TSRMLS_DC)</PRE></TD></TR></TABLE><P>This function will be called by PDO to retrieve a database attribute.</P><P></P><DIV   CLASS="variablelist"><DL><DT>dbh</DT><DD><P>Pointer to the database handle initialized by the handle factory</P></DD><DT>attr</DT><DD><P>&#13;       long value of one of the PDO_ATTR_xxxx types.  See <A   HREF="internals.pdo.constants.html#internals.pdo.table.attributes">表格 45-1</A> for valid attributes.
      </P></DD><DT>return_value</DT><DD><P>The returned value for the attribute.</P></DD></DL></DIV><P>&#13;    It is up to the driver to decide which attributes will be supported for a
    particular implementation. It is not necessary for a driver to supply this
    function. PDO driver handles the PDO_ATTR_PERSISTENT, PDO_ATTR_CASE,
    PDO_ATTR_ORACLE_NULLS, and PDO_ATTR_ERRMODE attributes directly. 
   </P><P>&#13;    This function returns 1 on success or 0 on failure.
   </P></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN192040">SKEL_handle_set_attribute</A></H3><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">static int SKEL_handle_set_attribute(pdo_dbh_t *dbh, long attr, zval *val TSRMLS_DC)</PRE></TD></TR></TABLE><P>&#13;    This function will be called by PDO to set a database attribute, usually in
    response to a script calling <B   CLASS="function">PDO::setAttribute()</B>.
   </P><P></P><DIV   CLASS="variablelist"><DL><DT>dbh</DT><DD><P>Pointer to the database handle initialized by the handle factory</P></DD><DT>attr</DT><DD><P>&#13;       long value of one of the PDO_ATTR_xxxx types.  See <A   HREF="internals.pdo.constants.html#internals.pdo.table.attributes">表格 45-1</A> for valid attributes.
      </P></DD><DT>val</DT><DD><P>The new value for the attribute.</P></DD></DL></DIV><P>&#13;    It is up to the driver to decide which attributes will be supported for a
    particular implementation. It is not necessary for a driver to provide this
    function if it does not need to support additional attributes. The PDO
    driver handles the PDO_ATTR_CASE, PDO_ATTR_ORACLE_NULLS, and
    PDO_ATTR_ERRMODE attributes directly. 
   </P><P>&#13;    This function returns 1 on success or 0 on failure.
   </P></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN192062">SKEL_handle_last_id</A></H3><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">static char * SKEL_handle_last_id(pdo_dbh_t *dbh, const char *name, unsigned int len TSRMLS_DC)</PRE></TD></TR></TABLE><P>&#13;    This function will be called by PDO to retrieve the ID of the last inserted
    row.
   </P><P></P><DIV   CLASS="variablelist"><DL><DT>dbh</DT><DD><P>Pointer to the database handle initialized by the handle factory</P></DD><DT>name</DT><DD><P>&#13;       string representing a table or sequence name.
      </P></DD><DT>len</DT><DD><P>the length of the <VAR   CLASS="parameter">name</VAR> parameter.</P></DD></DL></DIV><P>&#13;    This function returns a character string containing the id of the last
    inserted row on success or NULL on failure. This is an optional function. 
   </P></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN192081">SKEL_check_liveness</A></H3><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">static int SKEL_check_liveness(pdo_dbh_t *dbh TSRMLS_DC)</PRE></TD></TR></TABLE><P>&#13;    This function will be called by PDO to test whether or not a persistent
    connection to a database is alive and ready for use.
   </P><P></P><DIV   CLASS="variablelist"><DL><DT>dbh</DT><DD><P>Pointer to the database handle initialized by the handle factory</P></DD></DL></DIV><P>&#13;    This function returns 1 if the database connection is alive and ready
    for use, otherwise it should return 0 to indicate failure or lack
    of support.
   </P><DIV   CLASS="note"><BLOCKQUOTE   CLASS="note"><P><B>注: </B>
     This is an optional function.
    </P></BLOCKQUOTE></DIV></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN192093">SKEL_get_driver_methods</A></H3><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">static function_entry *SKEL_get_driver_methods(pdo_dbh_t *dbh, int kind TSRMLS_DC)</PRE></TD></TR></TABLE><P>&#13;    This function will be called by PDO in response to a call to any method
    that is not a part of either the <B   CLASS="classname">PDO</B> or
    <B   CLASS="classname">PDOStatement</B> classes.  It's purpose is to allow the
    driver to provide additional driver specific methods to those classes.
   </P><P></P><DIV   CLASS="variablelist"><DL><DT>dbh</DT><DD><P>Pointer to the database handle initialized by the handle factory</P></DD><DT>kind</DT><DD><P>One of the following:</P><P></P><DIV   CLASS="variablelist"><DL><DT>PDO_DBH_DRIVER_METHOD_KIND_DBH</DT><DD><P>&#13;          Set when the method call was attempted on an instance of the
          <B   CLASS="classname">PDO</B> class.  The driver should return a pointer
          a function_entry table for any methods it wants to add to that class,
          or NULL if there are none.
         </P></DD><DT>PDO_DBH_DRIVER_METHOD_KIND_STMT</DT><DD><P>&#13;          Set when the method call was attempted on an instance of the
          <B   CLASS="classname">PDOStatement</B> class.  The driver should return
          a pointer to a function_entry table for any methods it wants to add
          to that class, or NULL if there are none.
         </P></DD></DL></DIV></DD></DL></DIV><P>&#13;    This function returns a pointer to the function_entry table requested,
    or NULL there are no driver specific methods.
   </P></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN192120">SKEL_handle_factory</A></H3><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">static int SKEL_handle_factory(pdo_dbh_t *dbh, zval *driver_options TSRMLS_DC)</PRE></TD></TR></TABLE><P>&#13;    This function will be called by PDO to create a database handle. For most
    databases this involves establishing a connection to the database. In some
    cases, a persistent connection may be requested, in other cases connection
    pooling may be requested. All of these are database/driver dependent.
   </P><P></P><DIV   CLASS="variablelist"><DL><DT>dbh</DT><DD><P>Pointer to the database handle initialized by the handle factory</P></DD><DT>driver_options</DT><DD><P>&#13;       An array of driver options, keyed by integer option number. See <A   HREF="internals.pdo.constants.html#internals.pdo.table.attributes">表格 45-1</A> for a list of possible attributes.
      </P></DD></DL></DIV><P>&#13;    This function should fill in the passed database handle structure with its
    driver specific information on success and return 1, otherwise it should
    return 0 to indicate failure.
   </P><P>&#13;    PDO processes the AUTOCOMMIT and PERSISTENT driver options
    before calling the handle_factory. It is the handle factory's
    responsibility to process other options.
   </P></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN192136">Driver method table</A></H3><P>&#13;    A static structure of type pdo_dbh_methods named SKEL_methods must be
    declared and initialized to the function pointers for each defined
    function. If a function is not supported or not implemented the value for
    that function pointer should be set to NULL.
   </P></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN192139">pdo_SKEL_driver</A></H3><P>&#13;    A structure of type pdo_driver_t named pdo_SKEL_driver should be declared.
    The PDO_DRIVER_HEADER(SKEL) macro should be used to declare the header and
    the function pointer to the handle factory function should set.
   </P></DIV></DIV><DIV   CLASS="sect2"><H2   CLASS="sect2"><A   NAME="AEN192142">SKEL_statement.c: Statement implementation</A></H2><P>&#13;   This unit implements all of the database statement handling methods that
   support the PDO statement object.
  </P><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN192145">SKEL_stmt_dtor</A></H3><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">static int SKEL_stmt_dtor(pdo_stmt_t *stmt TSRMLS_DC)</PRE></TD></TR></TABLE><P>&#13;    This function will be called by PDO to destroy a previously constructed statement object.
   </P><P></P><DIV   CLASS="variablelist"><DL><DT>stmt</DT><DD><P>Pointer to the statement structure initialized by SKEL_handle_preparer.</P></DD></DL></DIV><P>&#13;    This should do whatever is necessary to free up any driver specific storage
    allocated for the statement. The return value from this function is
    ignored.
   </P></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN192155">SKEL_stmt_execute</A></H3><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">static int SKEL_stmt_execute(pdo_stmt_t *stmt TSRMLS_DC)</PRE></TD></TR></TABLE><P>&#13;    This function will be called by PDO to execute the prepared SQL statement
    in the passed statement object.
   </P><P></P><DIV   CLASS="variablelist"><DL><DT>stmt</DT><DD><P>Pointer to the statement structure initialized by SKEL_handle_preparer.</P></DD></DL></DIV><P>&#13;    This function returns 1 for success or 0 in the event of failure.
   </P></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN192165">SKEL_stmt_fetch</A></H3><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">static int SKEL_stmt_fetch(pdo_stmt_t *stmt, enum pdo_fetch_orientation ori,
   long offset TSRMLS_DC)</PRE></TD></TR></TABLE><P>&#13;    This function will be called by PDO to fetch a row from a previously
    executed statement object.
   </P><P></P><DIV   CLASS="variablelist"><DL><DT>stmt</DT><DD><P>Pointer to the statement structure initialized by SKEL_handle_preparer.</P></DD><DT>ori</DT><DD><P>One of PDO_FETCH_ORI_xxx which will determine which row will be fetched.</P></DD><DT>offset</DT><DD><P>&#13;       If ori is set to PDO_FETCH_ORI_ABS or PDO_FETCH_ORI_REL, offset
       represents the row desired or the row relative to the current position,
       respectively. Otherwise, this value is ignored.
      </P></DD></DL></DIV><P>&#13;    The results of this fetch are driver dependent and the data is usually
    stored in the driver_data member of pdo_stmt_t object. The ori and offset
    parameters are only meaningful if the statement represents a scrollable
    cursor. This function returns 1 for success or 0 in the event of failure.
   </P></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN192183">SKEL_stmt_param_hook</A></H3><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">static int SKEL_stmt_param_hook(pdo_stmt_t *stmt,
  struct pdo_bound_param_data *param, enum pdo_param_event event_type TSRMLS_DC)</PRE></TD></TR></TABLE><P>&#13;    This function will be called by PDO for handling of both bound parameters and bound columns.
   </P><P></P><DIV   CLASS="variablelist"><DL><DT>stmt</DT><DD><P>Pointer to the statement structure initialized by SKEL_handle_preparer.</P></DD><DT>param</DT><DD><P>&#13;       The structure describing either a statement parameter or a bound column.
      </P></DD><DT>event_type</DT><DD><P>The type of event to occur for this parameter, one of the following:</P><P></P><DIV   CLASS="variablelist"><DL><DT>PDO_PARAM_EVT_ALLOC</DT><DD><P>Called when PDO allocates the binding.  Occurs as part of
         <B   CLASS="function">PDOStatement::bindParam()</B>,
         <B   CLASS="function">PDOStatement::bindValue()</B> or as part of an implicit bind
         when calling <B   CLASS="function">PDOStatement::execute()</B>.  This is your
         opportunity to take some action at this point; drivers that implement
         native prepared statements will typically want to query the parameter
         information, reconcile the type with that requested by the script,
         allocate an appropriately sized buffer and then bind the parameter to
         that buffer.  You should not rely on the type or value of the zval at
         <VAR   CLASS="literal">param-&#62;parameter</VAR> at this point in time.
         </P></DD><DT>PDO_PARAM_EVT_FREE</DT><DD><P>Called once per parameter as part of cleanup.  You should
         release any resources associated with that parameter now.</P></DD><DT>PDO_PARAM_EXEC_PRE</DT><DD><P>Called once for each parameter immediately before calling
         SKEL_stmt_execute; take this opportunity to make any final adjustments
         ready for execution.  In particular, you should note that variables
         bound via <B   CLASS="function">PDOStatement::bindParam()</B> are only legal
         to touch now, and not any sooner.
         </P></DD><DT>PDO_PARAM_EXEC_POST</DT><DD><P>Called once for each parameter immediately after calling
         SKEL_stmt_execute; take this opportunity to make any post-execution
         actions that might be required by your driver.</P></DD><DT>PDO_PARAM_FETCH_PRE</DT><DD><P>Called once for each parameter immediately prior to calling
         SKEL_stmt_fetch.</P></DD><DT>PDO_PARAM_FETCH_POST</DT><DD><P>Called once for each parameter immediately after calling
          SKEL_stmt_fetch.</P></DD></DL></DIV></DD></DL></DIV><P>&#13;    This hook will be called for each bound parameter and bound column in the
    statement. For ALLOC and FREE events, a single call will be made for each
    parameter or column. The param structure contains a driver_data field that
    the driver can use to store implementation specific information about each
    of the parameters.
   </P><P>&#13;    For all other events, PDO may call you multple times as the script issues
    <B   CLASS="function">PDOStatement::execute()</B> and
    <B   CLASS="function">PDOStatement::fetch()</B> calls.
   </P><P>&#13;    If this is a bound parameter, the is_param flag in the param structure,
    otherwise, the param structure refers to a bound column.
   </P><P>&#13;    This function returns 1 for success or 0 in the event of failure.
   </P></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN192236">SKEL_stmt_describe_col</A></H3><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">static int SKEL_stmt_describe_col(pdo_stmt_t *stmt, int colno TSRMLS_DC)</PRE></TD></TR></TABLE><P>&#13;    This function will be called by PDO to query information about a particular
    column.
   </P><P></P><DIV   CLASS="variablelist"><DL><DT>stmt</DT><DD><P>Pointer to the statement structure initialized by SKEL_handle_preparer.</P></DD><DT>colno</DT><DD><P>The column number to be queried.</P></DD></DL></DIV><P>&#13;    The driver should populate the pdo_stmt_t member columns(colno) with the
    appropriate information. This function returns 1 for success or 0 in the
    event of failure.
   </P></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN192250">SKEL_stmt_get_col_data</A></H3><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">static int SKEL_stmt_get_col_data(pdo_stmt_t *stmt, int colno,
  char **ptr, unsigned long *len, int *caller_frees TSRMLS_DC)</PRE></TD></TR></TABLE><P>&#13;    This function will be called by PDO to retrieve data from the specified column.
   </P><P></P><DIV   CLASS="variablelist"><DL><DT>stmt</DT><DD><P>Pointer to the statement structure initialized by SKEL_handle_preparer.</P></DD><DT>colno</DT><DD><P>The column number to be queried.</P></DD><DT>ptr</DT><DD><P>Pointer to the retrieved data.</P></DD><DT>len</DT><DD><P>The length of the data pointed to by ptr.</P></DD><DT>caller_frees</DT><DD><P>If set, ptr should point to emalloc'd memory and the main PDO driver will free it as soon as it is done with it. Otherwise, it will be the responsibility of the driver to free any allocated memory as a result of this call.</P></DD></DL></DIV><P>&#13;    The driver should return the resultant data and length of that data in the
    ptr and len variables respectively. It should be noted that the main PDO
    driver expects the driver to manage the lifetime of the data. This function
    returns 1 for success or 0 in the event of failure.
   </P></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN192276">SKEL_stmt_set_attr</A></H3><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">static int SKEL_stmt_set_attr(pdo_stmt_t *stmt, long attr, zval *val TSRMLS_DC)</PRE></TD></TR></TABLE><P>&#13;   This function will be called by PDO to allow the setting of driver specific
   attributes for a statement object.
  </P><P></P><DIV   CLASS="variablelist"><DL><DT>stmt</DT><DD><P>Pointer to the statement structure initialized by SKEL_handle_preparer.</P></DD><DT>attr</DT><DD><P>&#13;      long value of one of the PDO_ATTR_xxxx types.  See <A   HREF="internals.pdo.constants.html#internals.pdo.table.attributes">表格 45-1</A> for valid attributes.
     </P></DD><DT>val</DT><DD><P>The new value for the attribute.</P></DD></DL></DIV><P>&#13;   This function is driver dependent and allows the driver the capability to
   set database specific attributes for a statement. This function returns 1
   for success or 0 in the event of failure. This is an optional function. If
   the driver does not support additional settable attributes, it can be
   NULLed in the method table. The PDO driver does not handle any settable
   attributes on the database driver's behalf.
  </P></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN192296">SKEL_stmt_get_attr</A></H3><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">static int SKEL_stmt_get_attr(pdo_stmt_t *stmt, long attr, zval
   *return_value TSRMLS_DC)</PRE></TD></TR></TABLE><P>&#13;    This function will be called by PDO to allow the retrieval of driver
    specific attributes for a statement object.
   </P><P></P><DIV   CLASS="variablelist"><DL><DT>stmt</DT><DD><P>Pointer to the statement structure initialized by SKEL_handle_preparer.</P></DD><DT>attr</DT><DD><P>&#13;       long value of one of the PDO_ATTR_xxxx types.  See <A   HREF="internals.pdo.constants.html#internals.pdo.table.attributes">表格 45-1</A> for valid attributes.
      </P></DD><DT>return_value</DT><DD><P>The returned value for the attribute.</P></DD></DL></DIV><P>&#13;    This function is driver dependent and allows the driver the capability to
    retrieve a previously set database specific attribute for a statement. This
    function returns 1 for success or 0 in the event of failure. This is an
    optional function. If the driver does not support additional gettable
    attributes, it can be NULLed in the method table. The PDO driver does not
    handle any settable attributes on the database driver's behalf.
   </P></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN192316">SKEL_stmt_get_col_meta</A></H3><TABLE   BORDER="0"  BGCOLOR="#E0E0E0"  CELLPADDING="5"><TR><TD><PRE   CLASS="synopsis">static int SKEL_stmt_get_col_meta(pdo_stmt_t *stmt, int colno,
   zval *return_value TSRMLS_DC)</PRE></TD></TR></TABLE><DIV   CLASS="warning"><P></P><TABLE   CLASS="warning"  BORDER="1"  WIDTH="100%"><TR><TD   ALIGN="CENTER"><B>警告</B></TD></TR><TR><TD   ALIGN="LEFT"><P>&#13;     This function is not well defined and is subject to change.
    </P></TD></TR></TABLE></DIV><P>&#13;    This function will be called by PDO to retrieve meta-data from the
    specified column.
   </P><P></P><DIV   CLASS="variablelist"><DL><DT>stmt</DT><DD><P>Pointer to the statement structure initialized by SKEL_handle_preparer.</P></DD><DT>colno</DT><DD><P>The column number for which data is to be retrieved.</P></DD><DT>return_value</DT><DD><P>Holds the returned meta data.</P></DD></DL></DIV><P>&#13;    The driver author should consult the documentation for this function that can be
    found in the php_pdo_driver.h header as this will be the most current. This
    function returns 1 for success or 0 in the event of failure. The database
    driver does not need to provide this function.
   </P></DIV><DIV   CLASS="sect3"><H3   CLASS="sect3"><A   NAME="AEN192336">Statement handling method table</A></H3><P>&#13;    A static structure of type pdo_stmt_methods named SKEL_stmt_methods should
    be declared and initialized to the function pointers for each defined
    function. If a function is not supported or not implemented the value for
    that function pointer should be set to NULL.
   </P></DIV></DIV></DIV><BR></TD><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD></TR><TR><TD COLSPAN="3"><DIV CLASS="NAVFOOTER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR><TR><TD><TABLE   SUMMARY="Footer navigation table"  WIDTH="100%"  BORDER="0"  CELLPADDING="3"  CELLSPACING="0"><TR><TD   WIDTH="33%"  ALIGN="left"  VALIGN="top"><A   HREF="internals.pdo.preparation.html"  ACCESSKEY="P">后退</A></TD><TD   WIDTH="34%"  ALIGN="center"  VALIGN="top"><A   HREF="index.html"  ACCESSKEY="H">起点</A></TD><TD   WIDTH="33%"  ALIGN="right"  VALIGN="top"><A   HREF="internals.pdo.building.html"  ACCESSKEY="N">前进</A></TD></TR><TR><TD   WIDTH="33%"  ALIGN="left"  VALIGN="top">Preparation and Housekeeping</TD><TD   WIDTH="34%"  ALIGN="center"  VALIGN="top"><A   HREF="internals.pdo.html"  ACCESSKEY="U">上一级</A></TD><TD   WIDTH="33%"  ALIGN="right"  VALIGN="top">Building</TD></TR></TABLE></TD></TR></TABLE></DIV></TD></TR></TABLE>

<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->
