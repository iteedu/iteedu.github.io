
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end -->
<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->
<table border="0" width="100%" height="100%" cellspacing="0" cellpadding="0">
  <tr>
  <td colspan="3"><div class="NAVHEADER">
<table bgcolor="#CCCCFF" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td><table  summary="Header navigation table" width="100%" border="0" cellpadding="3" cellspacing="0">
<tr>
  <th  colspan="3" align="center">PHP 手册</th></tr>
<tr>
  <td  width="10%" align="left" valign="bottom"><a  href="function.pdf-translate.html" accesskey="P">后退</a></td>
  <td  width="80%" align="center" valign="bottom"></td>
  <td  width="10%" align="right" valign="bottom"><a  href="function.pdo-begintransaction.html" accesskey="N">前进</a></td></tr></table></td></tr>
<tr bgcolor="#333366">
<td><img src="spacer.gif" border="0" width="1" height="1" /><br /></td></tr></table></div></td></tr>
  <tr>
<td><img src="spacer.gif" width="10" height="1" /></td>
<td height="100%" valign="top" width="100%"><br />
<div  class="reference"><a  name="ref.pdo" id="ref.pdo"></a>
<div  class="TITLEPAGE">
<h1  class="title">CVI. PDO Functions</h1>
<div  class="PARTINTRO"><a  name="AEN122839" id="AEN122839"></a>
  <div  class="section">
<h1  class="section"><a  name="pdo.intro" id="pdo.intro">简介</a></h1>
<p>&#13;The PHP Data Objects (PDO) extension defines a lightweight, consistent interface
for accessing databases in PHP. Each database driver that
implements the PDO interface can expose database-specific
features as regular extension functions. Note that you cannot
perform any database functions using the PDO extension by
itself; you must use a <a  href="ref.pdo.html#pdo.drivers">database-specific
PDO driver</a> to access a database server. </p>
<p>&#13;PDO provides a <span  class="emphasis"><i  class="emphasis">data-access</i></span> abstraction layer, which
means that, regardless of which database you're using, you use the same
functions to issue queries and fetch data.  PDO does
<span  class="emphasis"><i  class="emphasis">not</i></span> provide a <span  class="emphasis"><i  class="emphasis">database</i></span>
abstraction; it doesn't rewrite SQL or emulate missing features.  You
should use a full-blown abstraction layer if you need that facility. </p>
<p>&#13;PDO ships with PHP 5.1, and is available as a PECL extension for PHP 5.0;
PDO requires the new OO features in the core of PHP 5, and so will not
run with earlier versions of PHP. </p></div>
  <div  class="section">
<h1  class="section"><a  name="pdo.installation" id="pdo.installation">安装</a></h1>
<div  class="procedure">
<p><b><a  name="pdo.install.unix51up" id="pdo.install.unix51up"></a>PHP 5.1 and up on Unix systems</b></p>
<ol  type="1">
<li>
<p>&#13;  If you're running a PHP 5.1 release, PDO is included in the distribution;
  it will be automatically enabled when you run configure.  It is
  recommended that you build PDO as a shared extension, as this will allow
  you to take advantage of updates that are made available via PECL.  The
  recommended configure line for building PHP with PDO support should
  enable zlib support (for the pear installer) as well.  You may also need
  to enable the PDO driver for your database of choice; consult the
  documentation for  <a  href="ref.pdo.html#pdo.drivers">database-specific
  PDO drivers</a> to find out more about that.  </p>
<table  border="0" bgcolor="#E0E0E0" cellpadding="5">
<tr>
<td><pre  class="screen">./configure --with-zlib --enable-pdo=shared</pre></td></tr></table>
 </P></li>
<li>
<p>&#13;  After installing PDO as a shared module, you must edit your php.ini file
  so that the PDO extension will be loaded automatically when PHP runs.
  You will also need to enable any database specific drivers there too;
  make sure that they are listed after the pdo.so line, as PDO must be
  initialized before the database specific extensions can be loaded.
  If you built the extensions statically, you can skip this step.  </p>
<table  border="0" bgcolor="#E0E0E0" cellpadding="5">
<tr>
<td><pre  class="screen">extension=pdo.so</pre></td></tr></table>
 </P></li>
<li>
<p>&#13;  Having PDO as a shared module will allow you to run <b  class="command">pear
  upgrade pdo</b> as new versions of PDO are published, without
  forcing you to rebuild the whole of PHP.  Note that if you do this, you
  also need to upgrade your database specific PDO drivers at the same
  time. </p></li></ol></div>
<div  class="procedure">
<p><b><a  name="pdo.install.pecl" id="pdo.install.pecl"></a>PHP 5.0 and up on Unix systems</b></p>
<ol  type="1">
<li>
<p>&#13;  PDO is available as a PECL extension from
  <a  href="http://pecl.html.net/package/pdo" target="_top">http://pecl.html.net/package/pdo</a>.
  Installation can be performed via the <b  class="command">pear</b> tool; this
  is enabled by default when you configure PHP.  You should ensure that
  PHP was configured --with-zlib in order for
  <b  class="command">pear</b> to be able to handle the compressed package
  files. </p></li>
<li>
<p>&#13;  Run the following command to download, build, and install the
  latest stable version of PDO:  </p>
<table  border="0" bgcolor="#E0E0E0" cellpadding="5">
<tr>
<td><pre  class="screen">pear install pdo</pre></td></tr></table>
 </P></li>
<li>
<p>&#13;  If PDO is still in beta (and at the time of writing, it is), you will
  need to tell the pear tool that it's ok to fetch the beta package.
  Instead of running the command above, run the following:  </p>
<table  border="0" bgcolor="#E0E0E0" cellpadding="5">
<tr>
<td><pre  class="screen">pear install pdo-beta</pre></td></tr></table>
 </P></li>
<li>
<p>&#13;  The <b  class="command">pear</b> command automatically installs the
  PDO module into your PHP extensions directory. To enable the
  PDO extension on Linux or Unix operating systems, you must add
  the following line to <tt  class="filename">php.ini</tt>:  </p>
<table  border="0" bgcolor="#E0E0E0" cellpadding="5">
<tr>
<td><pre  class="screen">extension=pdo.so</pre></td></tr></table>
 </P><p>&#13;  For more information about building PECL packages, consult the
  <a  href="phpabc/install.pecl.html">PECL installation</a> section of the manual.
 </p></li></ol></div>
<div  class="procedure">
<p><b><a  name="pdo.install.win32php51" id="pdo.install.win32php51"></a>Windows users running PHP 5.1 and up</b></p>
<ol  type="1">
<li>
<p>&#13;  PDO and all the major drivers ship with PHP as shared extensions, and
  simply need to be activated by editing the <tt  class="filename">php.ini</tt> file:  </p>
<table  border="0" bgcolor="#E0E0E0" cellpadding="5">
<tr>
<td><pre  class="screen">extension=php_pdo.dll</pre></td></tr></table>
 </P></li>
<li>
<p>&#13;  Next, choose the other DB specific DLL files and either use 
  <a  href="function.dl.html"><b  class="function">dl()</b></a> to load them at runtime, or enable them in
  <tt  class="filename">php.ini</tt> below <tt  class="filename">php_pdo.dll</tt>. For example:  </p>
<table  border="0" bgcolor="#E0E0E0" cellpadding="5">
<tr>
<td><pre  class="screen">extension=php_pdo.dll
extension=php_pdo_firebird.dll
extension=php_pdo_mssql.dll
extension=php_pdo_mysql.dll
extension=php_pdo_oci.dll
extension=php_pdo_oci8.dll
extension=php_pdo_odbc.dll
extension=php_pdo_pgsql.dll
extension=php_pdo_sqlite.dll</pre></td></tr></table>
 </P><p>&#13;  These DLLs should exist in the system's 
  <a  href="appendix/ini.core.html#ini.extension-dir">extension_dir</a>.
 </p></li></ol></div></div>
  <div  class="section">
<h1  class="section"><a  name="pdo.configuration" id="pdo.configuration">运行时配置</a></h1>
<p>这些函数的行为受 <tt  class="filename">php.ini</tt> 的影响。</p>
<p>&#13;  </p>
<div  class="table"><a  name="AEN122902" id="AEN122902"></a>
<p><b>表格 1. PDO Configuration Options</b></p>
<table  border="1" class="CALSTABLE">
<col />
<col />
<col />
<col />
<thead>
<tr>
<th>Name</th>
<th>Default</th>
<th>Changeable</th>
<th>Changelog</th></tr></thead>
<tbody>
<tr>
<td>pdo.dsn.*</td>
<td>&nbsp;</td>
<td><tt  class="filename">php.ini</tt> only</td>
<td>&nbsp;</td></tr></tbody></table></div>
  有关 PHP_INI_* 常量进一步的细节与定义参见<a  href="appendix/ini.html">附录 G</a>。
</P>
<p>以下是配置选项的简要解释。</p>
<p>&#13; </p>
<p></p>
<div  class="variablelist">
  <dl>
<dt><a  name="ini.pdo.dsn" id="ini.pdo.dsn"></a><var  class="parameter">pdo.dsn.*</var>
 <a  href="language/language.types.string.html"><b  class="type">string</b></a></dt>
<dd>
<p>&#13;Defines DSN alias. See <a  href="function.pdo-construct.html">PDO::__construct</a> for
thorough explanation. </p></dd></dl></div>
 </P></div>
  <div  class="section">
<h1  class="section"><a  name="pdo.drivers" id="pdo.drivers">PDO Drivers</a></h1>
<p>&#13;The following drivers currently implement the PDO interface:</p>
<div  class="informaltable">
<p></p>
<a  name="AEN122932" id="AEN122932"></a>
<table  border="1" class="CALSTABLE">
<col />
<col />
<thead>
<tr>
<th>Driver name</th>
<th>Supported databases</th></tr></thead>
<tbody>
<tr>
<td><a  href="ref.pdo-dblib.html">PDO_DBLIB</a></td>
<td>FreeTDS / Microsoft SQL Server / Sybase</td></tr>
<tr>
<td><a  href="ref.pdo-firebird.html">PDO_FIREBIRD</a></td>
<td>Firebird/Interbase 6</td></tr>
<tr>
<td><a  href="ref.pdo-mysql.html">PDO_MYSQL</a></td>
<td>MySQL 3.x/4.x</td></tr>
<tr>
<td><a  href="ref.pdo-oci.html">PDO_OCI</a></td>
<td>Oracle Call Interface</td></tr>
<tr>
<td><a  href="ref.pdo-odbc.html">PDO_ODBC</a></td>
<td>ODBC v3 (IBM DB2, unixODBC and win32 ODBC)</td></tr>
<tr>
<td><a  href="ref.pdo-pgsql.html">PDO_PGSQL</a></td>
<td>PostgreSQL</td></tr>
<tr>
<td><a  href="ref.pdo-sqlite.html">PDO_SQLITE</a></td>
<td>SQLite 3 and SQLite 2</td></tr></tbody></table>
<p></p></div>
 </P></div>
  <div  class="section">
<h1  class="section"><a  name="pdo.connections" id="pdo.connections">Connections and Connection management</a></h1>
<p>&#13;Connections are established by creating instances of the PDO base class.
It doesn't matter which driver you want to use; you always use the PDO
class name. The constructor accepts parameters for specifying the
database source (known as the DSN) and optionally for the username and
password (if any). </p>
<p>&#13;</p>
<table  width="100%" border="0" cellpadding="0" cellspacing="0" class="EXAMPLE">
<tr>
<td><div  class="example"><a  name="AEN122971" id="AEN122971"></a>
<p><b>例子 1. Connecting to mysql</b></p>
<table  border="0" bgcolor="#E0E0E0" cellpadding="5">
  <tr>
<td><code><font  color="#000000">
<font  color="#0000BB">&lt;?php<br>
$dbh </font><font  color="#007700">= new </font><font  color="#0000BB">PDO</font><font  color="#007700">(</font><font  color="#DD0000">'mysql:host=localhost;dbname=test'</font><font  color="#007700">, </font><font  color="#0000BB">$user</font><font  color="#007700">, </font><font  color="#0000BB">$pass</font><font  color="#007700">);<br></font><font  color="#0000BB">?&gt;</font>
</font>
</code></td></tr></table></div></td></tr></table>
 </P><p>&#13;If there are any connection errors, a <var  class="literal">PDOException</var>
object will be thrown.  You may catch the exception if you want to handle
the error condition, or you may opt to leave it for an application
global exception handler that you set up via
<a  href="function.set-exception-handler.html"><b  class="function">set_exception_handler()</b></a>.
 </p>
 <p>&#13;</p>
 <table  width="100%" border="0" cellpadding="0" cellspacing="0" class="EXAMPLE">
   <tr>
 <td><div  class="example"><a  name="AEN122978" id="AEN122978"></a>
 <p><b>例子 2. Handling connection errors</b></p>
 <table  border="0" bgcolor="#E0E0E0" cellpadding="5">
 <tr>
 <td><code><font  color="#000000">
<font  color="#0000BB">&lt;?php<br>
try </font><font  color="#007700">{<br>
&nbsp;&nbsp;&nbsp;</font><font  color="#0000BB">$dbh </font><font  color="#007700">= new </font><font  color="#0000BB">PDO</font><font  color="#007700">(</font><font  color="#DD0000">'mysql:host=localhost;dbname=test'</font><font  color="#007700">, </font><font  color="#0000BB">$user</font><font  color="#007700">, </font><font  color="#0000BB">$pass</font><font  color="#007700">);<br>
&nbsp;&nbsp;&nbsp;foreach (</font><font  color="#0000BB">$dbh</font><font  color="#007700">-&gt;</font><font  color="#0000BB">query</font><font  color="#007700">(</font><font  color="#DD0000">'SELECT * from FOO'</font><font  color="#007700">) as </font><font  color="#0000BB">$row</font><font  color="#007700">) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font  color="#0000BB">print_r</font><font  color="#007700">(</font><font  color="#0000BB">$row</font><font  color="#007700">);<br>
&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;</font><font  color="#0000BB">$dbh </font><font  color="#007700">= </font><font  color="#0000BB">null</font><font  color="#007700">;<br>
} </font><font  color="#0000BB">catch </font><font  color="#007700">(</font><font  color="#0000BB">PDOException $e</font><font  color="#007700">) {<br>
&nbsp;&nbsp;&nbsp;print </font><font  color="#DD0000">&quot;Error!: &quot; </font><font  color="#007700">. </font><font  color="#0000BB">$e</font><font  color="#007700">-&gt;</font><font  color="#0000BB">getMessage</font><font  color="#007700">() . </font><font  color="#DD0000">&quot;&lt;br/&gt;&quot;</font><font  color="#007700">;<br>
&nbsp;&nbsp;&nbsp;die();<br>
}<br></font><font  color="#0000BB">?&gt;</font>
</font>
</code></td></tr></table></div></td></tr></table>
 </P><p>&#13;Upon successful connection to the database, an instance of the PDO class
is returned to your script.  The connection remains active for the
lifetime of that PDO object.  To close the connection, you need to
destroy the object by ensuring that all remaining references to it are
deleted--you do this by assigning <tt  class="constant"><b>NULL</b></tt> to the variable that holds the
object.  If you don't do this explicitly, PHP will automatically close
the connection when your script ends.
 </p>
 <p>&#13;</p>
 <table  width="100%" border="0" cellpadding="0" cellspacing="0" class="EXAMPLE">
   <tr>
 <td><div  class="example"><a  name="AEN122984" id="AEN122984"></a>
 <p><b>例子 3. Closing a connection</b></p>
 <table  border="0" bgcolor="#E0E0E0" cellpadding="5">
 <tr>
 <td><code><font  color="#000000">
<font  color="#0000BB">&lt;?php<br>
$dbh </font><font  color="#007700">= new </font><font  color="#0000BB">PDO</font><font  color="#007700">(</font><font  color="#DD0000">'mysql:host=localhost;dbname=test'</font><font  color="#007700">, </font><font  color="#0000BB">$user</font><font  color="#007700">, </font><font  color="#0000BB">$pass</font><font  color="#007700">);<br>
</font><font  color="#FF8000">// use the connection here<br>
<br>
<br>
// and now we're done; close it<br>
</font><font  color="#0000BB">$dbh </font><font  color="#007700">= </font><font  color="#0000BB">null</font><font  color="#007700">;<br></font><font  color="#0000BB">?&gt;</font>
</font>
</code></td></tr></table></div></td></tr></table>
</P><p>&#13; Many web applications will benefit from making persistent connections to
 database servers.  Persistent connections are not closed at the end of the
 script, but are cached and re-used when another script requests a
 connection using the same credentials.  The persistent connection cache
 allows you to avoid the overhead of establishing a new connection every
 time a script needs to talk to a database, resulting in a faster web
 application.
</p>
<p>&#13; </p>
<table  width="100%" border="0" cellpadding="0" cellspacing="0" class="EXAMPLE">
  <tr>
<td><div  class="example"><a  name="AEN122989" id="AEN122989"></a>
<p><b>例子 4. Persistent connections</b></p>
<table  border="0" bgcolor="#E0E0E0" cellpadding="5">
<tr>
<td><code><font  color="#000000">
<font  color="#0000BB">&lt;?php<br>
$dbh </font><font  color="#007700">= new </font><font  color="#0000BB">PDO</font><font  color="#007700">(</font><font  color="#DD0000">'mysql:host=localhost;dbname=test'</font><font  color="#007700">, </font><font  color="#0000BB">$user</font><font  color="#007700">, </font><font  color="#0000BB">$pass</font><font  color="#007700">, array(<br>
&nbsp;&nbsp;</font><font  color="#0000BB">PDO_ATTR_PERSISTENT </font><font  color="#007700">=&gt; </font><font  color="#0000BB">true<br></font><font  color="#007700">));</font>
</font>
</code></td></tr></table></div></td></tr></table>
 </P><div  class="note">
   <blockquote  class="note">
 <p><b>注: </b>
 If you're using the PDO ODBC driver and your ODBC libraries support ODBC
 Connection Pooling (unixODBC and Windows are two that do; there may be
 more), then it's recommended that you don't use persistent PDO
 connections, and instead leave the connection caching to the ODBC
 Connection Pooling layer.  The ODBC Connection Pool is shared with other
 modules in the process; if PDO is told to cache the connection, then
 that connection would never be returned to the ODBC connection pool,
 resulting in additional connections being created to service those other
 modules.</p></blockquote></div></div>
  <div  class="section">
<h1  class="section"><a  name="pdo.transactions" id="pdo.transactions">Transactions and auto-commit</a></h1>
<p>&#13;Now that you're connected via PDO, you should to understand how PDO
manages transactions before you start issuing queries. If you've never
encountered transactions before, they offer 4 major features: Atomicity,
Consistency, Isolation and Durability (ACID). In layman's terms, any work
carried out in a transaction, even if it is carried out in stages, is
guaranteed to be applied to the database safely, and without interference
from other connections, when it is committed. Transactional work can also
be automatically undone at your request (provided you haven't already
committed it), which makes error handling in your scripts easier. </p>
<p>&#13;Transactions are typically implemented by &quot;saving-up&quot; your batch of
changes to be applied all at once; this has the nice side effect of
drastically improving the efficiency of those updates. In other words,
transactions can make your scripts faster and potentially more robust
(you still need to use them correctly to reap that benefit). </p>
<p>&#13;Unfortunately, not every database supports transactions, so PDO needs to
run in what is known as &quot;auto-commit&quot; mode when you first open the
connection.  Auto-commit mode means that every query that you run has its
own implicit transaction, if the database supports it, or no transaction
if the database doesn't support transactions. If you need a transaction,
you must use the <b  class="function">PDO::beginTransaction()</b> method to
initiate one. If the underlying driver does not support transactions, a
PDOException will be thrown (regardless of your error handling settings:
this is always a serious error condition). Once you are in a transaction,
you may use <b  class="function">PDO::commit()</b> or
<b  class="function">PDO::rollBack()</b> to finish it, depending on the success
of the code you run during the transaction. </p>
<p>&#13;When the script ends or when a connection is about to be closed, if you
have an outstanding transaction, PDO will automatically roll it back.
This is a safety measure to help avoid inconsistency in the cases where
the script terminates unexpectedly--if you didn't explicitly commit the
transaction, then it is assumed that something went awry, so the rollback
is performed for the safety of your data. </p>
<div  class="warning">
<p></p>
<table  class="warning" border="1" width="100%">
<tr>
<td  align="center"><b>警告</b></td></tr>
<tr>
<td  align="left"><p>&#13; The automatic rollback only happens if you initiate the transaction via
 <b  class="function">PDO::beginTransaction()</b>. If you manually issue a
 query that begins a transaction PDO has no way of knowing about it and
 thus cannot roll it back if something bad happens.
</p></td></tr></table></div>
<p>&#13;</p>
<table  width="100%" border="0" cellpadding="0" cellspacing="0" class="EXAMPLE">
<tr>
<td><div  class="example"><a  name="AEN123007" id="AEN123007"></a>
<p><b>例子 5. Executing a batch in a transaction</b></p>
<p>&#13;  In the following sample, let's assume that we are creating a set of
  entries for a new employee, who has been assigned an ID number of 23.
  In addition to entering the basic data for that person, we also need to
  record their salary. It's pretty simple to make two separate updates,
  but by enclosing them within the
  <b  class="function">PDO::beginTransaction()</b> and
  <b  class="function">PDO::commit()</b> calls, we are guaranteeing that no one
  else will be able to see those changes until they are complete. If
  something goes wrong, the catch block rolls back all changes made
  since the transaction was started, and then prints out an error
  message. </p>
<table  border="0" bgcolor="#E0E0E0" cellpadding="5">
  <tr>
<td><code><font  color="#000000">
<font  color="#0000BB">&lt;?php<br>
try </font><font  color="#007700">{<br>
&nbsp;&nbsp;</font><font  color="#0000BB">$dbh </font><font  color="#007700">= new </font><font  color="#0000BB">PDO</font><font  color="#007700">(</font><font  color="#DD0000">'odbc:SAMPLE'</font><font  color="#007700">, </font><font  color="#DD0000">'db2inst1'</font><font  color="#007700">, </font><font  color="#DD0000">'ibmdb2'</font><font  color="#007700">, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(</font><font  color="#0000BB">PDO_ATTR_PERSISTENT </font><font  color="#007700">=&gt; </font><font  color="#0000BB">true</font><font  color="#007700">));<br>
&nbsp;&nbsp;echo </font><font  color="#DD0000">&quot;Connected\n&quot;</font><font  color="#007700">;<br>
&nbsp;&nbsp;</font><font  color="#0000BB">$dbh</font><font  color="#007700">-&gt;</font><font  color="#0000BB">setAttribute</font><font  color="#007700">(</font><font  color="#0000BB">PDO_ATTR_ERRMODE</font><font  color="#007700">, </font><font  color="#0000BB">PDO_ERRMODE_EXCEPTION</font><font  color="#007700">);<br>
<br>
&nbsp;&nbsp;</font><font  color="#0000BB">$dbh</font><font  color="#007700">-&gt;</font><font  color="#0000BB">beginTransaction</font><font  color="#007700">();<br>
&nbsp;&nbsp;</font><font  color="#0000BB">$dbh</font><font  color="#007700">-&gt;</font><font  color="#0000BB">exec</font><font  color="#007700">(</font><font  color="#DD0000">&quot;insert into staff (id, first, last) values (23, 'Joe', 'Bloggs')&quot;</font><font  color="#007700">);<br>
&nbsp;&nbsp;</font><font  color="#0000BB">$dbh</font><font  color="#007700">-&gt;</font><font  color="#0000BB">exec</font><font  color="#007700">(</font><font  color="#DD0000">&quot;insert into salarychange (id, amount, changedate) <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;values (23, 50000, NOW())&quot;</font><font  color="#007700">);<br>
&nbsp;&nbsp;</font><font  color="#0000BB">$dbh</font><font  color="#007700">-&gt;</font><font  color="#0000BB">commit</font><font  color="#007700">();<br>
&nbsp;&nbsp;<br>
} </font><font  color="#0000BB">catch </font><font  color="#007700">(</font><font  color="#0000BB">Exception $e</font><font  color="#007700">) {<br>
&nbsp;&nbsp;</font><font  color="#0000BB">$dbh</font><font  color="#007700">-&gt;</font><font  color="#0000BB">rollBack</font><font  color="#007700">();<br>
&nbsp;&nbsp;echo </font><font  color="#DD0000">&quot;Failed: &quot; </font><font  color="#007700">. </font><font  color="#0000BB">$e</font><font  color="#007700">-&gt;</font><font  color="#0000BB">getMessage</font><font  color="#007700">();<br>
}<br></font><font  color="#0000BB">?&gt;</font>
</font>
</code></td></tr></table></div></td></tr></table>
 </P><p>&#13;You're not limited to making updates in a transaction; you can also issue
complex queries to extract data, and possibly use that information to
build up more updates and queries; while the transaction is active, you
are guaranteed that no one else can make changes while you are in the
middle of your work. In truth, this isn't 100% correct, but it is a
good-enough introduction, if you've never heard of transactions before.
 </p></div>
  <div  class="section">
<h1  class="section"><a  name="pdo.prepared-statements" id="pdo.prepared-statements">Prepared statements and stored procedures</a></h1>
<p>&#13;Many of the more mature databases support the concept of prepared
statements.  What are they? You can think of them as a kind of compiled
template for the SQL that you want to run, that can be customized using
variable parameters.  Prepared statements offer two major benefits: </p>
<p></p>
<ul>
<li>
<p>&#13;  The query only needs to be parsed (or prepared) once, but can be
  executed multiple times with the same or different parameters. When the
  query is prepared, the database will analyze, compile and optimize it's
  plan for executing the query. For complex queries this process can take
  up enough time that it will noticably slow down your application if you
  need to repeat the same query many times with different parameters. By
  using a prepared statement you avoid repeating the
  analyze/compile/optimize cycle. In short, prepared statements use fewer
  resources and thus run faster. </p></li>
<li>
<p>&#13;  The parameters to prepared statements don't need to be quoted; the
  driver handles it for you. If your application exclusively uses
  prepared statements, you can be sure that no SQL injection will occur.
  (However, if you're still building up other parts of the query based on
  untrusted input, you're still at risk). </p></li></ul>
<p>&#13;Prepared statements are so useful that they are the only feature that PDO
will emulate for drivers that don't support them.  This ensures that you
will be able to use the same data access paradigm regardless of the
capabilities of the database. </p>
<p>&#13;</p>
<table  width="100%" border="0" cellpadding="0" cellspacing="0" class="EXAMPLE">
<tr>
<td><div  class="example"><a  name="AEN123024" id="AEN123024"></a>
<p><b>例子 6. Repeated inserts using prepared statements</b></p>
<p>&#13; This example performs an INSERT query by substituting a <var  class="literal">name</var>
 and a <var  class="literal">value</var> for the named placeholders.</p>
<table  border="0" bgcolor="#E0E0E0" cellpadding="5">
  <tr>
<td><code><font  color="#000000">
<font  color="#0000BB">&lt;?php<br>
$stmt </font><font  color="#007700">= </font><font  color="#0000BB">$dbh</font><font  color="#007700">-&gt;</font><font  color="#0000BB">prepare</font><font  color="#007700">(</font><font  color="#DD0000">&quot;INSERT INTO REGISTRY (name, value) VALUES (:name, :value)&quot;</font><font  color="#007700">);<br>
</font><font  color="#0000BB">$stmt</font><font  color="#007700">-&gt;</font><font  color="#0000BB">bindParam</font><font  color="#007700">(</font><font  color="#DD0000">':name'</font><font  color="#007700">, </font><font  color="#0000BB">$name</font><font  color="#007700">);<br>
</font><font  color="#0000BB">$stmt</font><font  color="#007700">-&gt;</font><font  color="#0000BB">bindParam</font><font  color="#007700">(</font><font  color="#DD0000">':value'</font><font  color="#007700">, </font><font  color="#0000BB">$value</font><font  color="#007700">);<br>
<br>
</font><font  color="#FF8000">// insert one row<br>
</font><font  color="#0000BB">$name </font><font  color="#007700">= </font><font  color="#DD0000">'one'</font><font  color="#007700">;<br>
</font><font  color="#0000BB">$value </font><font  color="#007700">= </font><font  color="#0000BB">1</font><font  color="#007700">;<br>
</font><font  color="#0000BB">$stmt</font><font  color="#007700">-&gt;</font><font  color="#0000BB">execute</font><font  color="#007700">();<br>
<br>
</font><font  color="#FF8000">// insert another row with different values<br>
</font><font  color="#0000BB">$name </font><font  color="#007700">= </font><font  color="#DD0000">'two'</font><font  color="#007700">;<br>
</font><font  color="#0000BB">$value </font><font  color="#007700">= </font><font  color="#0000BB">2</font><font  color="#007700">;<br>
</font><font  color="#0000BB">$stmt</font><font  color="#007700">-&gt;</font><font  color="#0000BB">execute</font><font  color="#007700">();<br></font><font  color="#0000BB">?&gt;</font>
</font>
</code></td></tr></table></div></td></tr></table>
</P><p>&#13;</p>
<table  width="100%" border="0" cellpadding="0" cellspacing="0" class="EXAMPLE">
  <tr>
<td><div  class="example"><a  name="AEN123031" id="AEN123031"></a>
<p><b>例子 7. Repeated inserts using prepared statements</b></p>
<p>&#13; This example performs an INSERT query by substituting a <var  class="literal">name</var>
 and a <var  class="literal">value</var> for the positional <var  class="literal">?</var> placeholders.</p>
<table  border="0" bgcolor="#E0E0E0" cellpadding="5">
<tr>
<td><code><font  color="#000000">
<font  color="#0000BB">&lt;?php<br>
$stmt </font><font  color="#007700">= </font><font  color="#0000BB">$dbh</font><font  color="#007700">-&gt;</font><font  color="#0000BB">prepare</font><font  color="#007700">(</font><font  color="#DD0000">&quot;INSERT INTO REGISTRY (name, value) VALUES (?, ?)&quot;</font><font  color="#007700">);<br>
</font><font  color="#0000BB">$stmt</font><font  color="#007700">-&gt;</font><font  color="#0000BB">bindParam</font><font  color="#007700">(</font><font  color="#0000BB">1</font><font  color="#007700">, </font><font  color="#0000BB">$name</font><font  color="#007700">);<br>
</font><font  color="#0000BB">$stmt</font><font  color="#007700">-&gt;</font><font  color="#0000BB">bindParam</font><font  color="#007700">(</font><font  color="#0000BB">2</font><font  color="#007700">, </font><font  color="#0000BB">$value</font><font  color="#007700">);<br>
<br>
</font><font  color="#FF8000">// insert one row<br>
</font><font  color="#0000BB">$name </font><font  color="#007700">= </font><font  color="#DD0000">'one'</font><font  color="#007700">;<br>
</font><font  color="#0000BB">$value </font><font  color="#007700">= </font><font  color="#0000BB">1</font><font  color="#007700">;<br>
</font><font  color="#0000BB">$stmt</font><font  color="#007700">-&gt;</font><font  color="#0000BB">execute</font><font  color="#007700">();<br>
<br>
</font><font  color="#FF8000">// insert another row with different values<br>
</font><font  color="#0000BB">$name </font><font  color="#007700">= </font><font  color="#DD0000">'two'</font><font  color="#007700">;<br>
</font><font  color="#0000BB">$value </font><font  color="#007700">= </font><font  color="#0000BB">2</font><font  color="#007700">;<br>
</font><font  color="#0000BB">$stmt</font><font  color="#007700">-&gt;</font><font  color="#0000BB">execute</font><font  color="#007700">();<br></font><font  color="#0000BB">?&gt;</font>
</font>
</code></td></tr></table></div></td></tr></table>
</P><p>&#13;</p>
<table  width="100%" border="0" cellpadding="0" cellspacing="0" class="EXAMPLE">
  <tr>
<td><div  class="example"><a  name="AEN123039" id="AEN123039"></a>
<p><b>例子 8. Fetching data using prepared statements</b></p>
<p>&#13; This example fetches data based on a key value supplied by a form.
 The user input is automatically quoted, so there is no risk of a
 SQL injection attack.</p>
<table  border="0" bgcolor="#E0E0E0" cellpadding="5">
<tr>
<td><code><font  color="#000000">
<font  color="#0000BB">&lt;?php<br>
$stmt </font><font  color="#007700">= </font><font  color="#0000BB">$dbh</font><font  color="#007700">-&gt;</font><font  color="#0000BB">prepare</font><font  color="#007700">(</font><font  color="#DD0000">&quot;SELECT * FROM REGISTRY where name = ?&quot;</font><font  color="#007700">);<br>
if (</font><font  color="#0000BB">$stmt</font><font  color="#007700">-&gt;</font><font  color="#0000BB">execute</font><font  color="#007700">(array(</font><font  color="#0000BB">$_GET</font><font  color="#007700">[</font><font  color="#DD0000">'name'</font><font  color="#007700">]))) {<br>
&nbsp;&nbsp;while (</font><font  color="#0000BB">$row </font><font  color="#007700">= </font><font  color="#0000BB">$stmt</font><font  color="#007700">-&gt;</font><font  color="#0000BB">fetch</font><font  color="#007700">()) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;</font><font  color="#0000BB">print_r</font><font  color="#007700">(</font><font  color="#0000BB">$row</font><font  color="#007700">);<br>
&nbsp;&nbsp;}<br>
}<br></font><font  color="#0000BB">?&gt;</font>
</font>
</code></td></tr></table></div></td></tr></table>
</P><p>&#13; If the database driver supports it, you may also bind parameters for
 output as well as input. Output parameters are typically used to retrieve
 values from stored procedures. Output parameters are slightly more complex
 to use than input parameters, in that you must know how large a given
 parameter might be when you bind it. If the value turns out to be larger
 than the size you suggested, an error is raised.
</p>
<p>&#13; </p>
<table  width="100%" border="0" cellpadding="0" cellspacing="0" class="EXAMPLE">
  <tr>
<td><div  class="example"><a  name="AEN123045" id="AEN123045"></a>
<p><b>例子 9. Calling a stored procedure with an output parameter</b></p>
<table  border="0" bgcolor="#E0E0E0" cellpadding="5">
<tr>
<td><code><font  color="#000000">
<font  color="#0000BB">&lt;?php<br>
$stmt </font><font  color="#007700">= </font><font  color="#0000BB">$dbh</font><font  color="#007700">-&gt;</font><font  color="#0000BB">prepare</font><font  color="#007700">(</font><font  color="#DD0000">&quot;CALL sp_returns_string(?)&quot;</font><font  color="#007700">);<br>
</font><font  color="#0000BB">$stmt</font><font  color="#007700">-&gt;</font><font  color="#0000BB">bindParam</font><font  color="#007700">(</font><font  color="#0000BB">1</font><font  color="#007700">, </font><font  color="#0000BB">$return_value</font><font  color="#007700">, </font><font  color="#0000BB">PDO_PARAM_STR</font><font  color="#007700">, </font><font  color="#0000BB">4000</font><font  color="#007700">); <br>
<br>
</font><font  color="#FF8000">// call the stored procedure<br>
</font><font  color="#0000BB">$stmt</font><font  color="#007700">-&gt;</font><font  color="#0000BB">execute</font><font  color="#007700">();<br>
<br>
print </font><font  color="#DD0000">&quot;procedure returned $return_value</font><font  color="#007700">\n</font><font  color="#DD0000">&quot;</font><font  color="#007700">;<br></font><font  color="#0000BB">?&gt;</font>
</font>
</code></td></tr></table></div></td></tr></table>
</P><p>&#13; You may also specify parameters that hold values both input and output;
 the syntax is similar to output parameters. In this next example, the
 string 'hello' is passed into the stored procedure, and when it returns,
 hello is replaced with the return value of the procedure.
</p>
<p>&#13; </p>
<table  width="100%" border="0" cellpadding="0" cellspacing="0" class="EXAMPLE">
  <tr>
<td><div  class="example"><a  name="AEN123050" id="AEN123050"></a>
<p><b>例子 10. Calling a stored procedure with an input/output parameter</b></p>
<table  border="0" bgcolor="#E0E0E0" cellpadding="5">
<tr>
<td><code><font  color="#000000">
<font  color="#0000BB">&lt;?php<br>
$stmt </font><font  color="#007700">= </font><font  color="#0000BB">$dbh</font><font  color="#007700">-&gt;</font><font  color="#0000BB">prepare</font><font  color="#007700">(</font><font  color="#DD0000">&quot;CALL sp_takes_string_returns_string(?)&quot;</font><font  color="#007700">);<br>
</font><font  color="#0000BB">$value </font><font  color="#007700">= </font><font  color="#DD0000">'hello'</font><font  color="#007700">;<br>
</font><font  color="#0000BB">$stmt</font><font  color="#007700">-&gt;</font><font  color="#0000BB">bindParam</font><font  color="#007700">(</font><font  color="#0000BB">1</font><font  color="#007700">, </font><font  color="#0000BB">$value</font><font  color="#007700">, </font><font  color="#0000BB">PDO_PARAM_STR</font><font  color="#007700">|</font><font  color="#0000BB">PDO_PARAM_INPUT_OUTPUT</font><font  color="#007700">, </font><font  color="#0000BB">4000</font><font  color="#007700">); <br>
<br>
</font><font  color="#FF8000">// call the stored procedure<br>
</font><font  color="#0000BB">$stmt</font><font  color="#007700">-&gt;</font><font  color="#0000BB">execute</font><font  color="#007700">();<br>
<br>
print </font><font  color="#DD0000">&quot;procedure returned $value</font><font  color="#007700">\n</font><font  color="#DD0000">&quot;</font><font  color="#007700">;<br></font><font  color="#0000BB">?&gt;</font>
</font>
</code></td></tr></table></div></td></tr></table>
</P></div>
  <div  class="section">
<h1  class="section"><a  name="pdo.error-handling" id="pdo.error-handling">Errors and error handling</a></h1>
<p>&#13;PDO offers you a choice of 3 different error handling strategies, to fit
your style of application development. </p>
<p></p>
<ul>
<li>
<p>&#13;  PDO_ERRMODE_SILENT </p>
<p>&#13;This is the default mode. PDO will simply set the error code for you
to inspect using the <b  class="function">PDO::errorCode()</b> and
<b  class="function">PDO::errorInfo()</b> methods on both the
statement and database objects; if the error resulted from a call on a
statement object, you would invoke the
<b  class="function">PDOStatement::errorCode()</b> or
<b  class="function">PDOStatement::errorInfo()</b>
method on that object. If the error resulted from a call on the
database object, you would invoke those methods on the database object
instead.  </p></li>
<li>
<p>&#13;  PDO_ERRMODE_WARNING </p>
<p>&#13;In addition to setting the error code, PDO will emit a traditional
E_WARNING message. This setting is useful during debugging/testing, if
you just want to see what problems occurred without interrupting the
flow of the application.  </p></li>
<li>
<p>&#13;PDO_ERRMODE_EXCEPTION  </p>
<p>&#13;In addition to setting the error code, PDO will throw a PDOException
and set its properties to reflect the error code and error
information. This setting is also useful during debugging, as it will
effectively &quot;blow up&quot; the script at the point of the error, very
quickly pointing a finger at potential problem areas in your code
(remember: transactions are automatically rolled back if the exception
causes the script to terminate). </p>
<p>&#13;Exception mode is also useful because you can structure your error
handling more clearly than with traditional PHP-style warnings, and
with less code/nesting than by running in silent mode and explicitly
checking the return value of each database call.  </p></li></ul>
<p>&#13;PDO standardizes on using SQL-92 SQLSTATE error code strings; individual
PDO drivers are responsible for mapping their native codes to the
appropriate SQLSTATE codes.The <b  class="function">PDO::errorCode()</b>
method returns a single SQLSTATE code. If you need more specific
information about an error, PDO also offers an
<b  class="function">PDO::errorInfo()</b> method which returns an array
containing the SQLSTATE code, the driver specific error code and driver
specific error string. </p></div>
  <div  class="section">
<h1  class="section"><a  name="pdo.lobs" id="pdo.lobs">Large Objects (LOBs)</a></h1>
<p>&#13; At some point in your application, you might find that you need to store
 &quot;large&quot; data in your database. Large typically means &quot;around 4kb or
 more&quot;, although some databases can happily handle up to 32kb before data becomes
 &quot;large&quot;. Large objects can be either textual or binary in nature. PDO
 allows you to work with this large data type by using the PDO_PARAM_LOB
 type code in your <b  class="function">PDOStatement::bindParam()</b> or
 <b  class="function">PDOStatement::bindColumn()</b> calls. PDO_PARAM_LOB tells
 PDO to map the data as a stream, so that you can manipulate it using the
 <a  href="ref.stream.html">PHP Streams API</a>. </p>
<p>&#13; </p>
<p>&#13;</p>
<table  width="100%" border="0" cellpadding="0" cellspacing="0" class="EXAMPLE">
<tr>
<td><div  class="example"><a  name="AEN123082" id="AEN123082"></a>
<p><b>例子 11. Displaying an image from a database</b></p>
<p>&#13; This example binds the LOB into the variable named $lob and then sends
 it to the browser using <a  href="function.fpassthru.html"><b  class="function">fpassthru()</b></a>.  Since the LOB
 is represented as a stream, functions such as
 <a  href="function.fgets.html"><b  class="function">fgets()</b></a>, <a  href="function.fread.html"><b  class="function">fread()</b></a> and
 <a  href="function.stream-get-contents.html"><b  class="function">stream_get_contents()</b></a> can be used on it.</p>
<table  border="0" bgcolor="#E0E0E0" cellpadding="5">
  <tr>
<td><code><font  color="#000000">
<font  color="#0000BB">&lt;?php<br>
$db </font><font  color="#007700">= new </font><font  color="#0000BB">PDO</font><font  color="#007700">(</font><font  color="#DD0000">'odbc:SAMPLE'</font><font  color="#007700">, </font><font  color="#DD0000">'db2inst1'</font><font  color="#007700">, </font><font  color="#DD0000">'ibmdb2'</font><font  color="#007700">);<br>
</font><font  color="#0000BB">$stmt </font><font  color="#007700">= </font><font  color="#0000BB">$db</font><font  color="#007700">-&gt;</font><font  color="#0000BB">prepare</font><font  color="#007700">(</font><font  color="#DD0000">&quot;select contenttype, imagedata from images where id=?&quot;</font><font  color="#007700">);<br>
</font><font  color="#0000BB">$stmt</font><font  color="#007700">-&gt;</font><font  color="#0000BB">execute</font><font  color="#007700">(array(</font><font  color="#0000BB">$_GET</font><font  color="#007700">[</font><font  color="#DD0000">'id'</font><font  color="#007700">]));<br>
</font><font  color="#0000BB">$stmt</font><font  color="#007700">-&gt;</font><font  color="#0000BB">bindColumn</font><font  color="#007700">(</font><font  color="#0000BB">1</font><font  color="#007700">, </font><font  color="#0000BB">$type</font><font  color="#007700">, </font><font  color="#0000BB">PDO_PARAM_STR</font><font  color="#007700">, </font><font  color="#0000BB">256</font><font  color="#007700">);<br>
</font><font  color="#0000BB">$stmt</font><font  color="#007700">-&gt;</font><font  color="#0000BB">bindColumn</font><font  color="#007700">(</font><font  color="#0000BB">2</font><font  color="#007700">, </font><font  color="#0000BB">$lob</font><font  color="#007700">, </font><font  color="#0000BB">PDO_PARAM_LOB</font><font  color="#007700">);<br>
</font><font  color="#0000BB">$stmt</font><font  color="#007700">-&gt;</font><font  color="#0000BB">fetch</font><font  color="#007700">(</font><font  color="#0000BB">PDO_FETCH_BOUND</font><font  color="#007700">);<br>
<br>
</font><font  color="#0000BB">header</font><font  color="#007700">(</font><font  color="#DD0000">&quot;Content-Type: $type&quot;</font><font  color="#007700">);<br>
</font><font  color="#0000BB">fpassthru</font><font  color="#007700">(</font><font  color="#0000BB">$lob</font><font  color="#007700">);<br></font><font  color="#0000BB">?&gt;</font>
</font>
</code></td></tr></table></div></td></tr></table>
</P><p>&#13; </p>
<table  width="100%" border="0" cellpadding="0" cellspacing="0" class="EXAMPLE">
  <tr>
<td><div  class="example"><a  name="AEN123091" id="AEN123091"></a>
<p><b>例子 12. Inserting an image into a database</b></p>
<p>&#13; This example opens up a file and passes the file handle to PDO to insert
 it as a LOB.  PDO will do its best to get the contents of the file up
 to the database in the most efficient manner possible.</p>
<table  border="0" bgcolor="#E0E0E0" cellpadding="5">
<tr>
<td><code><font  color="#000000">
<font  color="#0000BB">&lt;?php<br>
$db </font><font  color="#007700">= new </font><font  color="#0000BB">PDO</font><font  color="#007700">(</font><font  color="#DD0000">'odbc:SAMPLE'</font><font  color="#007700">, </font><font  color="#DD0000">'db2inst1'</font><font  color="#007700">, </font><font  color="#DD0000">'ibmdb2'</font><font  color="#007700">);<br>
</font><font  color="#0000BB">$stmt </font><font  color="#007700">= </font><font  color="#0000BB">$db</font><font  color="#007700">-&gt;</font><font  color="#0000BB">prepare</font><font  color="#007700">(</font><font  color="#DD0000">&quot;insert into images (id, contenttype, imagedata) values (?, ?, ?)&quot;</font><font  color="#007700">);<br>
</font><font  color="#0000BB">$id </font><font  color="#007700">= </font><font  color="#0000BB">get_new_id</font><font  color="#007700">(); </font><font  color="#FF8000">// some function to allocate a new ID<br>
<br>
// assume that we are running as part of a file upload form<br>
// You can find more information in the PHP documentation<br>
<br>
</font><font  color="#0000BB">$fp </font><font  color="#007700">= </font><font  color="#0000BB">fopen</font><font  color="#007700">(</font><font  color="#0000BB">$_FILES</font><font  color="#007700">[</font><font  color="#DD0000">'file'</font><font  color="#007700">][</font><font  color="#DD0000">'tmp_name'</font><font  color="#007700">], </font><font  color="#DD0000">'rb'</font><font  color="#007700">);<br>
<br>
</font><font  color="#0000BB">$stmt</font><font  color="#007700">-&gt;</font><font  color="#0000BB">bindParam</font><font  color="#007700">(</font><font  color="#0000BB">1</font><font  color="#007700">, </font><font  color="#0000BB">$id</font><font  color="#007700">);<br>
</font><font  color="#0000BB">$stmt</font><font  color="#007700">-&gt;</font><font  color="#0000BB">bindParam</font><font  color="#007700">(</font><font  color="#0000BB">2</font><font  color="#007700">, </font><font  color="#0000BB">$_FILES</font><font  color="#007700">[</font><font  color="#DD0000">'file'</font><font  color="#007700">][</font><font  color="#DD0000">'type'</font><font  color="#007700">]);<br>
</font><font  color="#0000BB">$stmt</font><font  color="#007700">-&gt;</font><font  color="#0000BB">bindParam</font><font  color="#007700">(</font><font  color="#0000BB">3</font><font  color="#007700">, </font><font  color="#0000BB">$fp</font><font  color="#007700">, </font><font  color="#0000BB">PDO_PARAM_LOB</font><font  color="#007700">);<br>
<br>
</font><font  color="#0000BB">$stmt</font><font  color="#007700">-&gt;</font><font  color="#0000BB">execute</font><font  color="#007700">();<br></font><font  color="#0000BB">?&gt;</font>
</font>
</code></td></tr></table></div></td></tr></table>
 </P></div>
  <div  class="section">
<h1  class="section"><a  name="pdo.classes" id="pdo.classes">预定义类</a></h1>
<div  class="section">
<h2  class="section"><a  name="pdo.class.PDO" id="pdo.class.PDO"><b  class="classname">PDO</b></a></h2>
<p>&#13; Represents a connection between PHP and a database server.</p>
<div  class="section">
<h3  class="section"><a  name="pdo.class.PDO.constructor" id="pdo.class.PDO.constructor">构造函数</a></h3>
<p></p>
<ul>
<li>
  <p>&#13; <a  href="function.pdo-construct.html">PDO</a> - constructs a new 
 PDO object</p></li></ul></div>
<div  class="section">
<h3  class="section"><a  name="pdo.class.PDO.methods" id="pdo.class.PDO.methods">方法</a></h3>
<p></p>
<ul>
<li>
  <p>&#13; <a  href="function.pdo-begintransaction.html">beginTransaction</a> 
 - begins a transaction</p></li>
<li>
  <p>&#13; <a  href="function.pdo-commit.html">commit</a> 
 - commits a transaction</p></li>
<li>
  <p>&#13; <a  href="function.pdo-errorcode.html">errorCode</a> 
 - retrieves an error code, if any, from the database</p></li>
<li>
  <p>&#13; <a  href="function.pdo-errorinfo.html">errorInfo</a> 
 - retrieves an array of error information, if any, from the
 database</p></li>
<li>
  <p>&#13; <a  href="function.pdo-exec.html">exec</a> 
 - issues an SQL statement and returns the number of affected rows</p></li>
<li>
  <p>&#13; <a  href="function.pdo-getattribute.html">getAttribute</a> 
 - retrieves a database connection attribute</p></li>
<li>
  <p>&#13; <a  href="function.pdo-lastinsertid.html">lastInsertId</a> 
 - retrieves the value of the last row that was inserted into a table</p></li>
<li>
  <p>&#13; <a  href="function.pdo-prepare.html">prepare</a> 
 - prepares an SQL statement for execution</p></li>
<li>
  <p>&#13; <a  href="function.pdo-query.html">query</a> 
 - issues an SQL statement and returns a result set</p></li>
<li>
  <p>&#13; <a  href="function.pdo-quote.html">quote</a> 
 - returns a quoted version of a string for use in SQL statements</p></li>
<li>
  <p>&#13; <a  href="function.pdo-rollback.html">rollBack</a> 
 - roll back a transaction</p></li>
<li>
  <p>&#13; <a  href="function.pdo-setattribute.html">setAttribute</a> 
 - sets a database connection attribute</p></li></ul></div></div>
<div  class="section">
<h2  class="section"><a  name="pdo.class.PDOStatement" id="pdo.class.PDOStatement"><b  class="classname">PDOStatement</b></a></h2>
<p>&#13; Represents a prepared statement and, after the statement is executed, an 
 associated result set.</p>
<div  class="section">
<h3  class="section"><a  name="pdo.class.Statement.methods" id="pdo.class.Statement.methods">方法</a></h3>
<p></p>
<ul>
<li>
  <p>&#13; <a  href="function.pdostatement-bindcolumn.html">bindColumn</a> 
 - binds a PHP variable to an output column in a result set</p></li>
<li>
  <p>&#13; <a  href="function.pdostatement-bindparam.html">bindParam</a> 
 - binds a PHP variable to a parameter in the prepared statement</p></li>
<li>
  <p>&#13; <a  href="function.pdostatement-bindvalue.html">bindValue</a> 
 - binds a value to a parameter in the prepared statement</p></li>
<li>
  <p>&#13; <a  href="function.pdostatement-closecursor.html">closeCursor</a> 
 - closes the cursor, allowing the statement to be executed again</p></li>
<li>
  <p>&#13; <a  href="function.pdostatement-columncount.html">columnCount</a> 
 - returns the number of columns in the result set</p></li>
<li>
  <p>&#13; <a  href="function.pdostatement-errorcode.html">errorCode</a> 
 - retrieves an error code, if any, from the statement</p></li>
<li>
  <p>&#13; <a  href="function.pdostatement-errorinfo.html">errorInfo</a> 
 - retrieves an array of error information, if any, from the statement</p></li>
<li>
  <p>&#13; <a  href="function.pdostatement-execute.html">execute</a> 
 - executes a prepared statement</p></li>
<li>
  <p>&#13; <a  href="function.pdostatement-fetch.html">fetch</a> 
 - fetches a row from a result set</p></li>
<li>
  <p>&#13; <a  href="function.pdostatement-fetchall.html">fetchAll</a> 
 - fetches an array containing all of the rows from a result set</p></li>
<li>
  <p>&#13; <a  href="function.pdostatement-fetchcolumn.html">fetchColumn</a> 
 - returns the data from a single column in a result set</p></li>
<li>
  <p>&#13; <a  href="function.pdostatement-getattribute.html">getAttribute</a> 
 - retrieves a PDOStatement attribute</p></li>
<li>
  <p>&#13; <a  href="function.pdostatement-getcolumnmeta.html">getColumnMeta</a> 
 - retrieves metadata for a column in the result set</p></li>
<li>
  <p>&#13; <a  href="function.pdostatement-nextrowset.html">nextRowset</a> 
 - retrieves the next rowset (result set)</p></li>
<li>
  <p>&#13; <a  href="function.pdostatement-rowcount.html">rowCount</a> 
 - returns the number of rows that were affected by the execution of 
 an SQL statement</p></li>
<li>
  <p>&#13; <a  href="function.pdostatement-setattribute.html">setAttribute</a> 
 - sets a PDOStatement attribute</p></li>
<li>
  <p>&#13; <a  href="function.pdostatement-setfetchmode.html">setFetchMode</a> 
 - sets the fetch mode for a PDOStatement</p></li></ul></div></div></div>
  <div  class="section">
<h1  class="section"><a  name="pdo.constants" id="pdo.constants">预定义常量</a></h1>
<p>以下常量由本扩展模块定义，因此只有在本扩展模块被编译到
PHP 中，或者在运行时被动态加载后才有效。</p>
<p></p>
<div  class="variablelist">
<dl>
<dt><tt  class="constant"><b>PDO_PARAM_BOOL</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Represents a boolean data type. </p></dd>
<dt><tt  class="constant"><b>PDO_PARAM_NULL</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Represents the SQL NULL data type. </p></dd>
<dt><tt  class="constant"><b>PDO_PARAM_INT</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Represents the SQL INTEGER data type. </p></dd>
<dt><tt  class="constant"><b>PDO_PARAM_STR</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Represents the SQL CHAR, VARCHAR, or other string data type. </p></dd>
<dt><tt  class="constant"><b>PDO_PARAM_LOB</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Represents the SQL large object data type. </p></dd>
<dt><tt  class="constant"><b>PDO_PARAM_STMT</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13; </p></dd>
<dt><tt  class="constant"><b>PDO_PARAM_INPUT_OUTPUT</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Specifies that the parameter is an INOUT parameter for a stored
procedure. You must bitwise-OR this value with an explicit
PDO_PARAM_* data type. </p></dd>
<dt><tt  class="constant"><b>PDO_FETCH_LAZY</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Specifies that the fetch method shall return each row as an object with
variable names that correspond to the column names returned in the result
set. PDO_FETCH_LAZY creates the object variable names as they are accessed. </p></dd>
<dt><tt  class="constant"><b>PDO_FETCH_ASSOC</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Specifies that the fetch method shall return each row as an array indexed
by column name as returned in the corresponding result set. If the result
set contains multiple columns with the same name, PDO_FETCH_ASSOC returns
only a single value per column name. </p></dd>
<dt><tt  class="constant"><b>PDO_FETCH_NAMED</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Specifies that the fetch method shall return each row as an array indexed
by column name as returned in the corresponding result set. If the result
set contains multiple columns with the same name, PDO_FETCH_NAMED returns
an array of values per column name. </p></dd>
<dt><tt  class="constant"><b>PDO_FETCH_NUM</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Specifies that the fetch method shall return each row as an array indexed
by column number as returned in the corresponding result set, starting at
column 0. </p></dd>
<dt><tt  class="constant"><b>PDO_FETCH_BOTH</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Specifies that the fetch method shall return each row as an array indexed
by both column name and number as returned in the corresponding result set,
starting at column 0. </p></dd>
<dt><tt  class="constant"><b>PDO_FETCH_OBJ</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Specifies that the fetch method shall return each row as an object with
property names that correspond to the column names returned in the result
set. </p></dd>
<dt><tt  class="constant"><b>PDO_FETCH_BOUND</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Specifies that the fetch method shall return TRUE and assign the values of
the columns in the result set to the PHP variables to which they were
bound with the <b  class="function">PDOStatement::bindParam()</b> or
<b  class="function">PDOStatement::bindColumn()</b> methods. </p></dd>
<dt><tt  class="constant"><b>PDO_FETCH_COLUMN</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Specifies that the fetch method shall return only a single requested
column from the next row in the result set. </p></dd>
<dt><tt  class="constant"><b>PDO_FETCH_CLASS</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Specifies that the fetch method shall return a new instance of the
requested class, mapping the columns to named properties in the class. </p></dd>
<dt><tt  class="constant"><b>PDO_FETCH_INTO</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Specifies that the fetch method shall update an existing instance of the
requested class, mapping the columns to named properties in the class. </p></dd>
<dt><tt  class="constant"><b>PDO_FETCH_FUNC</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13; </p></dd>
<dt><tt  class="constant"><b>PDO_FETCH_GROUP</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13; </p></dd>
<dt><tt  class="constant"><b>PDO_FETCH_UNIQUE</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13; </p></dd>
<dt><tt  class="constant"><b>PDO_FETCH_CLASSTYPE</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13; </p></dd>
<dt><tt  class="constant"><b>PDO_ATTR_AUTOCOMMIT</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;If this value is <tt  class="constant"><b>FALSE</b></tt>, PDO attempts to disable autocommit so that the
connection begins a transaction. </p></dd>
<dt><tt  class="constant"><b>PDO_ATTR_PREFETCH</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Setting the prefetch size allows you to balance speed against memory
usage for your application.  Not all database/driver combinations support
setting of the prefetch size. </p></dd>
<dt><tt  class="constant"><b>PDO_ATTR_TIMEOUT</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Sets the timeout value in seconds for communications with the database. </p></dd>
<dt><tt  class="constant"><b>PDO_ATTR_ERRMODE</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13; </p></dd>
<dt><tt  class="constant"><b>PDO_ATTR_SERVER_VERSION</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13; </p></dd>
<dt><tt  class="constant"><b>PDO_ATTR_CLIENT_VERSION</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13; </p></dd>
<dt><tt  class="constant"><b>PDO_ATTR_SERVER_INFO</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13; </p></dd>
<dt><tt  class="constant"><b>PDO_ATTR_CONNECTION_STATUS</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13; </p></dd>
<dt><tt  class="constant"><b>PDO_ATTR_CASE</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Force column names to a specific case specified by the PDO_CASE_*
constants. </p></dd>
<dt><tt  class="constant"><b>PDO_ATTR_CURSOR_NAME</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13; </p></dd>
<dt><tt  class="constant"><b>PDO_ATTR_CURSOR</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13; </p></dd>
<dt><tt  class="constant"><b>PDO_ATTR_DRIVER_NAME</b></tt>
(<a  href="language/language.types.string.html"><b  class="type">string</b></a>)</dt>
<dd>
<p>&#13;Returns the name of the driver. </p></dd>
<dt><tt  class="constant"><b>PDO_ATTR_ORACLE_NULLS</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Convert empty strings to SQL NULL values. </p></dd>
<dt><tt  class="constant"><b>PDO_ATTR_PERSISTENT</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p> 
Request a persistent connection, rather than creating a new connection. </p></dd>
<dt><tt  class="constant"><b>PDO_ATTR_FETCH_CATALOG_NAMES</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p> 
Prepend the containing catalog name to each column name returned in the
result set. The catalog name and column name are separated by a decimal
(.) character. </p></dd>
<dt><tt  class="constant"><b>PDO_ATTR_FETCH_TABLE_NAMES</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p> 
Prepend the containing table name to each column name returned in the
result set. The table name and column name are separated by a decimal (.)
character. </p></dd>
<dt><tt  class="constant"><b>PDO_ERRMODE_SILENT</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Do not raise an error or exception if an error occurs. The developer is
expected to explicitly check for errors.  This is the default mode. </p></dd>
<dt><tt  class="constant"><b>PDO_ERRMODE_WARNING</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Issue a PHP E_WARNING message if an error occurs. </p></dd>
<dt><tt  class="constant"><b>PDO_ERRMODE_EXCEPTION</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Throw a PDOException if an error occurs. </p></dd>
<dt><tt  class="constant"><b>PDO_CASE_NATURAL</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Leave column names as returned by the database driver. </p></dd>
<dt><tt  class="constant"><b>PDO_CASE_LOWER</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p> 
Force column names to lower case. </p></dd>
<dt><tt  class="constant"><b>PDO_CASE_UPPER</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Force column names to upper case. </p></dd>
<dt><tt  class="constant"><b>PDO_FETCH_ORI_NEXT</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Fetch the next row in the result set. Valid only for scrollable cursors. </p></dd>
<dt><tt  class="constant"><b>PDO_FETCH_ORI_PRIOR</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Fetch the previous row in the result set. Valid only for scrollable
cursors. </p></dd>
<dt><tt  class="constant"><b>PDO_FETCH_ORI_FIRST</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Fetch the first row in the result set. Valid only for scrollable cursors. </p></dd>
<dt><tt  class="constant"><b>PDO_FETCH_ORI_LAST</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Fetch the last row in the result set. Valid only for scrollable cursors. </p></dd>
<dt><tt  class="constant"><b>PDO_FETCH_ORI_ABS</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Fetch the requested row by row number from the result set. Valid only
for scrollable cursors. </p></dd>
<dt><tt  class="constant"><b>PDO_FETCH_ORI_REL</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Fetch the requested row by relative position from the current position
of the cursor in the result set. Valid only for scrollable cursors. </p></dd>
<dt><tt  class="constant"><b>PDO_CURSOR_FWDONLY</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Create a PDOStatement object with a forward-only cursor. This may improve 
the performance of your application but restricts your PDOStatement object
to fetching one row at a time from the result set in a forward direction. </p></dd>
<dt><tt  class="constant"><b>PDO_CURSOR_SCROLL</b></tt>
(<a  href="language/language.types.integer.html"><b  class="type">integer</b></a>)</dt>
<dd>
<p>&#13;Create a PDOStatement object with a scrollable cursor. Pass the
PDO_FETCH_ORI_* constants to control the rows fetched from the result set. </p></dd>
<dt><tt  class="constant"><b>PDO_ERR_NONE</b></tt>
(<a  href="language/language.types.string.html"><b  class="type">string</b></a>)</dt>
<dd>
<p> 
Corresponds to SQLSTATE '00000', meaning that the SQL statement was
successfully issued with no errors or warnings. </p></dd></dl></div></div></div>
<div  class="TOC">
  <dl>
<dt><b>目录</b></dt>
<dt><a  href="function.pdo-begintransaction.html">PDO::beginTransaction</a>&nbsp;--&nbsp;
Initiates a transaction </dt>
<dt><a  href="function.pdo-commit.html">PDO::commit</a>&nbsp;--&nbsp;
Commits a transaction </dt>
<dt><a  href="function.pdo-construct.html">PDO::__construct</a>&nbsp;--&nbsp;
Creates a PDO instance representing a connection to a database </dt>
<dt><a  href="function.pdo-errorcode.html">PDO::errorCode</a>&nbsp;--&nbsp;
Fetch the SQLSTATE associated with the last operation on the database handle </dt>
<dt><a  href="function.pdo-errorinfo.html">PDO::errorInfo</a>&nbsp;--&nbsp;
Fetch extended error information associated with the last operation on the database handle </dt>
<dt><a  href="function.pdo-exec.html">PDO::exec</a>&nbsp;--&nbsp;
Execute an SQL statement and return the number of affected rows  </dt>
<dt><a  href="function.pdo-getattribute.html">PDO::getAttribute</a>&nbsp;--&nbsp;
Retrieve a database connection attribute  </dt>
<dt><a  href="function.pdo-lastinsertid.html">PDO::lastInsertId</a>&nbsp;--&nbsp;
Returns the ID of the last inserted row or sequence value </dt>
<dt><a  href="function.pdo-prepare.html">PDO::prepare</a>&nbsp;--&nbsp;
Prepares a statement for execution and returns a statement object </dt>
<dt><a  href="function.pdo-query.html">PDO::query</a>&nbsp;--&nbsp;
Executes an SQL statement, returning a result set as a PDOStatement object  </dt>
<dt><a  href="function.pdo-quote.html">PDO::quote</a>&nbsp;--&nbsp;
Quotes a string for use in a query.  </dt>
<dt><a  href="function.pdo-rollback.html">PDO::rollBack</a>&nbsp;--&nbsp;
Rolls back a transaction </dt>
<dt><a  href="function.pdo-setattribute.html">PDO::setAttribute</a>&nbsp;--&nbsp;
Set an attribute </dt>
<dt><a  href="function.pdostatement-bindcolumn.html">PDOStatement::bindColumn</a>&nbsp;--&nbsp;
Bind a column to a PHP variable </dt>
<dt><a  href="function.pdostatement-bindparam.html">PDOStatement::bindParam</a>&nbsp;--&nbsp;
Binds a parameter to the specified variable name </dt>
<dt><a  href="function.pdostatement-bindvalue.html">PDOStatement::bindValue</a>&nbsp;--&nbsp;
Binds a value to a parameter </dt>
<dt><a  href="function.pdostatement-closecursor.html">PDOStatement::closeCursor</a>&nbsp;--&nbsp;
Closes the cursor, enabling the statement to be executed again.  </dt>
<dt><a  href="function.pdostatement-columncount.html">PDOStatement::columnCount</a>&nbsp;--&nbsp;
Returns the number of columns in the result set  </dt>
<dt><a  href="function.pdostatement-errorcode.html">PDOStatement::errorCode</a>&nbsp;--&nbsp;
Fetch the SQLSTATE associated with the last operation on the statement handle </dt>
<dt><a  href="function.pdostatement-errorinfo.html">PDOStatement::errorInfo</a>&nbsp;--&nbsp;
Fetch extended error information associated with the last operation on the statement handle </dt>
<dt><a  href="function.pdostatement-execute.html">PDOStatement::execute</a>&nbsp;--&nbsp;
Executes a prepared statement </dt>
<dt><a  href="function.pdostatement-fetch.html">PDOStatement::fetch</a>&nbsp;--&nbsp;
Fetches the next row from a result set </dt>
<dt><a  href="function.pdostatement-fetchall.html">PDOStatement::fetchAll</a>&nbsp;--&nbsp;
Returns an array containing all of the result set rows </dt>
<dt><a  href="function.pdostatement-fetchcolumn.html">PDOStatement::fetchColumn</a>&nbsp;--&nbsp;
Returns a single column from the next row of a result set  </dt>
<dt><a  href="function.pdostatement-getattribute.html">PDOStatement::getAttribute</a>&nbsp;--&nbsp;
Retrieve a statement attribute  </dt>
<dt><a  href="function.pdostatement-getcolumnmeta.html">PDOStatement::getColumnMeta</a>&nbsp;--&nbsp;
Returns metadata for a column in a result set  </dt>
<dt><a  href="function.pdostatement-nextrowset.html">PDOStatement::nextRowset</a>&nbsp;--&nbsp;
Advances to the next rowset in a multi-rowset statement handle  </dt>
<dt><a  href="function.pdostatement-rowcount.html">PDOStatement::rowCount</a>&nbsp;--&nbsp;
Returns the number of rows affected by the last SQL statement </dt>
<dt><a  href="function.pdostatement-setattribute.html">PDOStatement::setAttribute</a>&nbsp;--&nbsp;
Set a statement attribute  </dt>
<dt><a  href="function.pdostatement-setfetchmode.html">PDOStatement::setFetchMode</a>&nbsp;--&nbsp;
Set the default fetch mode for this statement  </dt>
<dt><a  href="function.pdo-drivers.html">pdo_drivers</a>&nbsp;--&nbsp;
Return an array of available PDO drivers</dt></dl></div></div></div>
<br /></td>
  <td><img src="spacer.gif" width="10" height="1" /></td></tr>
  <tr>
<td colspan="3"><div class="NAVFOOTER">
  <table bgcolor="#CCCCFF" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr bgcolor="#333366">
<td><img src="spacer.gif" border="0" width="1" height="1" /><br /></td></tr>
<tr>
<td><table  summary="Footer navigation table" width="100%" border="0" cellpadding="3" cellspacing="0">
<tr>
<td  width="33%" align="left" valign="top"><a  href="function.pdf-translate.html" accesskey="P">后退</a></td>
<td  width="34%" align="center" valign="top"><a  href="index.html" accesskey="H">起点</a></td>
<td  width="33%" align="right" valign="top"><a  href="function.pdo-begintransaction.html" accesskey="N">前进</a></td></tr>
<tr>
<td  width="33%" align="left" valign="top">pdf_translate</td>
<td  width="34%" align="center" valign="top"><a  href="funcref.html" accesskey="U">上一级</a></td>
<td  width="33%" align="right" valign="top">PDO::beginTransaction</td></tr></table></td></tr></table></div></td></tr></table>

<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->
