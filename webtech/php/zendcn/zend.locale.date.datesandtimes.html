<!--hmt-->
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end --><!--end of htmlheader-->

<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->
<!--end of htmlmiddle-->



<div class="sect1" title="31.4. Working with Dates and Times">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.locale.date.datesandtimes"></a>31.4. Working with Dates and Times</h2></div></div></div>
<p>
        <code class="classname">Zend_Locale_Format</code> provides several methods for working with dates and times to help convert and
        normalize between different formats for different locales. Use <code class="classname">Zend_Date</code> for manipulating dates,
        and working with date strings that already conform to
        <a class="link" href="zend.date.constants.html" title="14.6.  一般日期函数的常量">one of the many internationally recognized standard formats, or one of the localized date formats supported by <code class="classname">Zend_Date</code>
        </a>
        . Using an existing, pre-defined format offers advantages, including the use of well-tested code, and the
        assurance of some degree of portability and interoperability (depending on the standard used). The examples
        below do not follow these recommendations, since using non-standard date formats would needlessly increase the
        difficulty of understanding these examples.
    </p>
<div class="sect2" title="31.4.1. Normalizing Dates and Times">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.locale.date.normalize"></a>31.4.1. Normalizing Dates and Times</h3></div></div></div>
<p>
            The <code>getDate()</code> method parses strings containing dates in localized formats. The results are
            returned in a structured array, with well-defined keys for each part of the date. In addition, the array
            will contain a key 'date_format' showing the format string used to parse the input date string. Since a
            localized date string may not contain all parts of a date/time, the key-value pairs are optional. For
            example, if only the year, month, and day is given, then all time values are suppressed from the returned
            array, and vice-versa if only hour, minute, and second were given as input. If no date or time can be found
            within the given input, an exception will be thrown.
        </p>
<p>
            If <code>setOption(array('fix_date' =&gt; true))</code> is set the <code>getDate()</code> method adds a key 'fixed'
            with a whole number value indicating if the input date string required "fixing" by rearranging the day,
            month, or year in the input to fit the format used.
        </p>
<div class="table">
<a name="zend.locale.date.normalize.table-1"></a><p class="title"><b>表 31.5. Key values for getDate() with option 'fix_date'</b></p>
<div class="table-contents"><table summary="Key values for getDate() with option 'fix_date'" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>value</th>
<th>meaning</th>
</tr></thead>
<tbody>
<tr>
<td>0</td>
<td>nothing to fix</td>
</tr>
<tr>
<td>1</td>
<td>fixed false month</td>
</tr>
<tr>
<td>2</td>
<td>swapped day and year</td>
</tr>
<tr>
<td>3</td>
<td>swapped month and year</td>
</tr>
<tr>
<td>4</td>
<td>swapped month and day</td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><p>
            For those needing to specify explicitly the format of the date string, the following format token specifiers
            are supported. If an invalid format specifier is used, such as the PHP 'i' specifier when in ISO format
            mode, then an error will be thrown by the methods in <code class="classname">Zend_Locale_Format</code> that support user-defined formats.
        </p>
<p>
            These specifiers (below) are a small subset of the full "ISO" set supported by <code class="classname">Zend_Date</code>'s
            <code>toString()</code>. If you need to use PHP <code>date()</code> compatible format specifiers, then first
            call <code>setOptions(array('format_type' =&gt; 'php'))</code>. And if you want to convert only one special format
            string from PHP <code>date()</code> compatible format to "ISO" format use <code>convertPhpToIsoFormat()</code>.
            Currently, the only practical difference relates to the specifier for minutes ('m' using the ISO default,
            and 'i' using the PHP date format).
        </p>
<div class="table">
<a name="zend.locale.date.normalize.table-2"></a><p class="title"><b>表 31.6. Return values</b></p>
<div class="table-contents"><table summary="Return values" border="1">
<colgroup>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>getDate() format character</th>
<th>Array key</th>
<th>Returned value</th>
<th>Minimum</th>
<th>Maximum</th>
</tr></thead>
<tbody>
<tr>
<td>d</td>
<td>day</td>
<td>integer</td>
<td>1</td>
<td>31</td>
</tr>
<tr>
<td>M</td>
<td>month</td>
<td>integer</td>
<td>1</td>
<td>12</td>
</tr>
<tr>
<td>y</td>
<td>year</td>
<td>integer</td>
<td>no limit</td>
<td>PHP integer's maximum</td>
</tr>
<tr>
<td>h</td>
<td>hour</td>
<td>integer</td>
<td>0</td>
<td>PHP integer's maximum</td>
</tr>
<tr>
<td>m</td>
<td>minute</td>
<td>integer</td>
<td>0</td>
<td>PHP integer's maximum</td>
</tr>
<tr>
<td>s</td>
<td>second</td>
<td>integer</td>
<td>0</td>
<td>PHP integer's maximum</td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><div class="example">
<a name="zend.locale.date.normalize.example-1"></a><p class="title"><b>例 31.42. Normalizing a date</b></p>
<div class="example-contents"><pre class="code">
$dateString = Zend_Locale_Format::getDate('13.04.2006',
                                          array('date_format' =&gt;
                                                    'dd.MM.yyyy')
                                         );

// creates a Zend_Date object for this date
$dateObject = Zend_Date('13.04.2006',
                         array('date_format' =&gt; 'dd.MM.yyyy'));

print_r($dateString); // outputs:

Array
(
    [format] =&gt; dd.MM.yyyy
    [day] =&gt; 13
    [month] =&gt; 4
    [year] =&gt; 2006
)

// alternatively, some types of problems with input data can be
// automatically corrected
$date = Zend_Locale_Format::getDate('04.13.2006',
                                    array('date_format' =&gt; 'dd.MM.yyyy',
                                          'fix_date' =&gt; true)
                                   );

print_r($date); // outputs:

Array
(
    [format] =&gt; dd.MM.yyyy
    [day] =&gt; 13
    [month] =&gt; 4
    [year] =&gt; 2006
    [fixed] =&gt; 4
)
</pre></div>
</div>
<br class="example-break"><p>
            Since <code>getDate()</code> is "locale-aware", specifying the <code>$locale</code> is sufficient for date
            strings adhering to that locale's format. The option '<code>fix_date</code>' uses simple tests to
            determine if the day or month is not valid, and then applies heuristics to try and correct any detected
            problems. Note the use of '<code class="classname">Zend_Locale_Format::STANDARD</code>' as the value for
            '<code>date_format</code>' to prevent the use of a class-wide default date format set using
            <code>setOptions()</code>. This forces getDate to use the default date format for <code>$locale</code>.
        </p>
<div class="example">
<a name="zend.locale.date.normalize.example-2"></a><p class="title"><b>例 31.43. Normalizing a date by locale</b></p>
<div class="example-contents"><pre class="code">
$locale = new Zend_Locale('de_AT');
$date = Zend_Locale_Format::getDate('13.04.2006',
                                    array('date_format' =&gt;
                                              Zend_Locale_Format::STANDARD,
                                          'locale' =&gt; $locale)
                                   );

print_r ($date);
</pre></div>
</div>
<br class="example-break"><p>
            A complete date and time is returned when the input contains both a date and time in the expected format.
        </p>
<div class="example">
<a name="zend.locale.date.normalize.example-3"></a><p class="title"><b>例 31.44. Normalizing a date with time</b></p>
<div class="example-contents"><pre class="code">
$locale = new Zend_Locale('de_AT');
$date = Zend_Locale_Format::getDate('13.04.2005 22:14:55',
                                    array('date_format' =&gt;
                                                Zend_Locale_Format::STANDARD,
                                          'locale' =&gt; $locale)
                                    );

print_r ($date);
</pre></div>
</div>
<br class="example-break"><p>
            If a specific format is desired, specify the <code>$format</code> argument, without giving a
            <code>$locale</code>. Only single-letter codes (H, m, s, y, M, d), and MMMM and EEEE are supported in the
            <code>$format</code>.
        </p>
<div class="example">
<a name="zend.locale.date.normalize.example-4"></a><p class="title"><b>例 31.45. Normalizing a userdefined date</b></p>
<div class="example-contents"><pre class="code">
$date = Zend_Locale_Format::getDate('13200504T551422',
                                    array('date_format' =&gt;
                                              'ddyyyyMM ssmmHH')
                                   );

print_r ($date);
</pre></div>
</div>
<br class="example-break"><p>
            The format can include the following signs :
        </p>
<div class="table">
<a name="zend.locale.date.normalize.table-3"></a><p class="title"><b>表 31.7. Format definition</b></p>
<div class="table-contents"><table summary="Format definition" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>Format Letter</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td>d or dd</td>
<td>1 or 2 digit day</td>
</tr>
<tr>
<td>M or MM</td>
<td>1 or 2 digit month</td>
</tr>
<tr>
<td>y or yy</td>
<td>1 or 2 digit year</td>
</tr>
<tr>
<td>yyyy</td>
<td>4 digit year</td>
</tr>
<tr>
<td>h</td>
<td>1 or 2 digit hour</td>
</tr>
<tr>
<td>m</td>
<td>1 or 2 digit minute</td>
</tr>
<tr>
<td>s</td>
<td>1 or 2 digit second</td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><p>
            Examples for proper formats are
        </p>
<div class="table">
<a name="zend.locale.date.normalize.table-4"></a><p class="title"><b>表 31.8. Example formats</b></p>
<div class="table-contents"><table summary="Example formats" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>Formats</th>
<th>Input</th>
<th>Output</th>
</tr></thead>
<tbody>
<tr>
<td>dd.MM.yy</td>
<td>1.4.6</td>
<td>['day'] =&gt; 1,
                                   ['month'] =&gt; 4,
                                   ['year'] =&gt; 6</td>
</tr>
<tr>
<td>dd.MM.yy</td>
<td>01.04.2006</td>
<td>['day'] =&gt; 1, ['month'] =&gt; 4, ['year'] =&gt; 2006</td>
</tr>
<tr>
<td>yyyyMMdd</td>
<td>1.4.6</td>
<td>['day'] =&gt; 6, ['month'] =&gt; 4, ['year'] =&gt; 1</td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><div class="note" title="Database date format"><table border="0" summary="Note: Database date format">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[注意]" src="images/note.png"></td>
<th align="left">Database date format</th>
</tr>
<tr><td align="left" valign="top"><p>
                To parse a database date value (f.e. MySql or MsSql), use <code class="classname">Zend_Date</code>'s ISO_8601 format instead of
                getDate().
            </p></td></tr>
</table></div>
<p>
            The option '<code>fix_date</code>' uses simple tests to determine if the day or month is not
            valid, and then applies heuristics to try and correct any detected problems. <code>getDate()</code>
            automatically detects and corrects some kinds of problems with input, such as misplacing the year:
        </p>
<div class="example">
<a name="zend.locale.date.normalize.example-5"></a><p class="title"><b>例 31.46. Automatic correction of input dates</b></p>
<div class="example-contents"><pre class="code">
$date = Zend_Locale_Format::getDate('41.10.20',
                                    array('date_format' =&gt; 'ddMMyy',
                                          'fix_date' =&gt; true)
                                   );

// instead of 41 for the day, the 41 will be returned as year value
print_r ($date);
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect2" title="31.4.2. Testing Dates">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.locale.date.test"></a>31.4.2. Testing Dates</h3></div></div></div>
<p>
            Use <code>checkDateFormat($inputString, array('date_format' =&gt; $format, $locale))</code> to check if a given string
            contains all expected date parts. The <code>checkDateFormat()</code> method uses <code>getDate()</code>, but without
            the option <code>'fixdate'</code> to avoid returning true when the input fails to conform to the date
            format. If errors are detected in the input, such as swapped values for months and days, the
            option <code>'fixdate'</code> method will apply heuristics to "correct" dates before determining their
            validity.
        </p>
<div class="example">
<a name="zend.locale.date.test.example-1"></a><p class="title"><b>例 31.47. Date testing</b></p>
<div class="example-contents"><pre class="code">
$locale = new Zend_Locale('de_AT');
// using the default date format for 'de_AT', is this a valid date?
if (Zend_Locale_Format::checkDateFormat('13.Apr.2006',
                                        array('date_format' =&gt;
                                                  Zend_Locale_Format::STANDARD,
                                              $locale)
                                       ) {
    print "date";
} else {
    print "not a date";
}
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect2" title="31.4.3. Normalizing a Time">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.locale.time.normalizing"></a>31.4.3. Normalizing a Time</h3></div></div></div>
<p>
            Normally, a time will be returned with a date, if the input contains both. If the proper format is not
            known, but the locale relevant to the user input is known, then <code>getTime()</code> should be used,
            because it uses the default time format for the selected locale.
        </p>
<div class="example">
<a name="zend.locale.time.normalizing.example-1"></a><p class="title"><b>例 31.48. Normalize an unknown time</b></p>
<div class="example-contents"><pre class="code">
$locale = new Zend_Locale('de_AT');
if (Zend_Locale_Format::getTime('13:44:42',
                                array('date_format' =&gt;
                                          Zend_Locale_Format::STANDARD,
                                      'locale' =&gt; $locale)) {
    print "time";
} else {
    print "not a time";
}
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect2" title="31.4.4. Testing Times">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.locale.time.test"></a>31.4.4. Testing Times</h3></div></div></div>
<p>
            Use <code>checkDateFormat()</code> to check if a given string contains a proper time.
            The usage is exact the same as with checking Dates, only <code>date_format</code>
            should contain the parts which you expect to have.
        </p>
<div class="example">
<a name="zend.locale.time.test.example-1"></a><p class="title"><b>例 31.49. Testing a time</b></p>
<div class="example-contents"><pre class="code">
$locale = new Zend_Locale('de_AT');
if (Zend_Locale_Format::checkDateFormat('13:44:42',
                                        array('date_format' =&gt; 'HH:mm:ss',
                                              'locale' =&gt; $locale)) {
    print "time";
} else {
    print "not a time";
}
</pre></div>
</div>
<br class="example-break">
</div>
</div>
<div class="revinfo"></div>


<!--start of htmlend-->

<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->