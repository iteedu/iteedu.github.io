<!--hmt-->
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end --><!--end of htmlheader-->

<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->
<!--end of htmlmiddle-->



<div class="sect1" title="40.5. Drawing">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.pdf.drawing"></a>40.5. Drawing</h2></div></div></div>
<div class="sect2" title="40.5.1. Geometry">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.geometry"></a>40.5.1. Geometry</h3></div></div></div>
<p>
        PDF uses the same geometry as PostScript. It starts from bottom-left corner of page
        and by default is measured in points (1/72 of an inch).
        </p>
<p>
        Page size can be retrieved from a page object:
        </p>
<p>
            </p>
<pre class="code">
$width  = $pdfPage-&gt;getWidth();
$height = $pdfPage-&gt;getHeight();
</pre>
<p>
        </p>
</div>
<div class="sect2" title="40.5.2. Colors">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.color"></a>40.5.2. Colors</h3></div></div></div>
<p>
        PDF has a powerful capabilities for colors representation. <code class="classname">Zend_Pdf</code> module supports Gray Scale,
        RGB and CMYK color spaces. Any of them can be used in any place, where <code class="classname">Zend_Pdf_Color</code>
        object is required. <code class="classname">Zend_Pdf_Color_GrayScale</code>, <code class="classname">Zend_Pdf_Color_Rgb</code> and
        <code class="classname">Zend_Pdf_Color_Cmyk</code> classes provide this functionality:
        </p>
<pre class="code">
// $grayLevel (float number). 0.0 (black) - 1.0 (white)
$color1 = new Zend_Pdf_Color_GrayScale($grayLevel);

// $r, $g, $b (float numbers). 0.0 (min intensity) - 1.0 (max intensity)
$color2 = new Zend_Pdf_Color_Rgb($r, $g, $b);

// $c, $m, $y, $k (float numbers). 0.0 (min intensity) - 1.0 (max intensity)
$color3 = new Zend_Pdf_Color_Cmyk($c, $m, $y, $k);
</pre>
<p>
        HTML style colors are also provided with <code class="classname">Zend_Pdf_Color_Html</code> class:
        </p>
<pre class="code">
$color1 = new Zend_Pdf_Color_Html('#3366FF');
$color2 = new Zend_Pdf_Color_Html('silver');
$color3 = new Zend_Pdf_Color_Html('forestgreen');
</pre>
</div>
<div class="sect2" title="40.5.3. Shape Drawing">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.shape-drawing"></a>40.5.3. Shape Drawing</h3></div></div></div>
<p>
        All drawing operations can be done in a context of PDF page.
        </p>
<p>
        <code class="classname">Zend_Pdf_Page</code> class provides a set of drawing primitives:
        </p>
<pre class="code">
/**
 * Draw a line from x1,y1 to x2,y2.
 *
 * @param float $x1
 * @param float $y1
 * @param float $x2
 * @param float $y2
 * @return Zend_Pdf_Page
 */
public function drawLine($x1, $y1, $x2, $y2);
</pre>
<pre class="code">
/**
 * Draw a rectangle.
 *
 * Fill types:
 * Zend_Pdf_Page::SHAPE_DRAW_FILL_AND_STROKE - fill rectangle
 *                                             and stroke (default)
 * Zend_Pdf_Page::SHAPE_DRAW_STROKE          - stroke rectangle
 * Zend_Pdf_Page::SHAPE_DRAW_FILL            - fill rectangle
 *
 * @param float $x1
 * @param float $y1
 * @param float $x2
 * @param float $y2
 * @param integer $fillType
 * @return Zend_Pdf_Page
 */
public function drawRectangle($x1, $y1, $x2, $y2,
                    $fillType = Zend_Pdf_Page::SHAPE_DRAW_FILL_AND_STROKE);
</pre>
<pre class="code">
/**
 * Draw a polygon.
 *
 * If $fillType is Zend_Pdf_Page::SHAPE_DRAW_FILL_AND_STROKE or
 * Zend_Pdf_Page::SHAPE_DRAW_FILL, then polygon is automatically closed.
 * See detailed description of these methods in a PDF documentation
 * (section 4.4.2 Path painting Operators, Filling)
 *
 * @param array $x  - array of float (the X co-ordinates of the vertices)
 * @param array $y  - array of float (the Y co-ordinates of the vertices)
 * @param integer $fillType
 * @param integer $fillMethod
 * @return Zend_Pdf_Page
 */
public function drawPolygon($x, $y,
                            $fillType =
                                Zend_Pdf_Page::SHAPE_DRAW_FILL_AND_STROKE,
                            $fillMethod =
                                Zend_Pdf_Page::FILL_METHOD_NON_ZERO_WINDING);
</pre>
<pre class="code">
/**
 * Draw a circle centered on x, y with a radius of radius.
 *
 * Angles are specified in radians
 *
 * Method signatures:
 * drawCircle($x, $y, $radius);
 * drawCircle($x, $y, $radius, $fillType);
 * drawCircle($x, $y, $radius, $startAngle, $endAngle);
 * drawCircle($x, $y, $radius, $startAngle, $endAngle, $fillType);
 *
 *
 * It's not a really circle, because PDF supports only cubic Bezier
 * curves. But very good approximation.
 * It differs from a real circle on a maximum 0.00026 radiuses (at PI/8,
 * 3*PI/8, 5*PI/8, 7*PI/8, 9*PI/8, 11*PI/8, 13*PI/8 and 15*PI/8 angles).
 * At 0, PI/4, PI/2, 3*PI/4, PI, 5*PI/4, 3*PI/2 and 7*PI/4 it's exactly
 * a tangent to a circle.
 *
 * @param float $x
 * @param float $y
 * @param float $radius
 * @param mixed $param4
 * @param mixed $param5
 * @param mixed $param6
 * @return Zend_Pdf_Page
 */
public function  drawCircle($x,
                            $y,
                            $radius,
                            $param4 = null,
                            $param5 = null,
                            $param6 = null);
</pre>
<pre class="code">
/**
 * Draw an ellipse inside the specified rectangle.
 *
 * Method signatures:
 * drawEllipse($x1, $y1, $x2, $y2);
 * drawEllipse($x1, $y1, $x2, $y2, $fillType);
 * drawEllipse($x1, $y1, $x2, $y2, $startAngle, $endAngle);
 * drawEllipse($x1, $y1, $x2, $y2, $startAngle, $endAngle, $fillType);
 *
 * Angles are specified in radians
 *
 * @param float $x1
 * @param float $y1
 * @param float $x2
 * @param float $y2
 * @param mixed $param5
 * @param mixed $param6
 * @param mixed $param7
 * @return Zend_Pdf_Page
 */
public function drawEllipse($x1,
                            $y1,
                            $x2,
                            $y2,
                            $param5 = null,
                            $param6 = null,
                            $param7 = null);
</pre>
</div>
<div class="sect2" title="40.5.4. Text Drawing">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.text-drawing"></a>40.5.4. Text Drawing</h3></div></div></div>
<p>
        Text drawing operations also exist in the context of a PDF page. You can draw a single line of text
        at any position on the page by supplying the x and y coordinates of the baseline. Current font and
        current font size are used for text drawing operations (see detailed description below).
        </p>
<pre class="code">
/**
 * Draw a line of text at the specified position.
 *
 * @param string $text
 * @param float $x
 * @param float $y
 * @param string $charEncoding (optional) Character encoding of source
 *               text.Defaults to current locale.
 * @throws Zend_Pdf_Exception
 * @return Zend_Pdf_Page
 */
public function drawText($text, $x, $y, $charEncoding = '');
</pre>
<div class="example">
<a name="zend.pdf.drawing.text-drawing.example-1"></a><p class="title"><b>例 40.6. Draw a string on the page</b></p>
<div class="example-contents"><pre class="code">
...
$pdfPage-&gt;drawText('Hello world!', 72, 720);
...
</pre></div>
</div>
<br class="example-break"><p>
        By default, text strings are interpreted using the character encoding method of the current locale. If
        you have a string that uses a different encoding method (such as a UTF-8 string read from a file on disk,
        or a MacRoman string obtained from a legacy database), you can indicate the character encoding at draw
        time and <code class="classname">Zend_Pdf</code> will handle the conversion for you. You can supply source strings in any encoding
        method supported by PHP's <code>iconv()</code> function:
        </p>
<div class="example">
<a name="zend.pdf.drawing.text-drawing.example-2"></a><p class="title"><b>例 40.7. Draw a UTF-8-encoded string on the page</b></p>
<div class="example-contents"><pre class="code">
...
// Read a UTF-8-encoded string from disk
$unicodeString = fread($fp, 1024);

// Draw the string on the page
$pdfPage-&gt;drawText($unicodeString, 72, 720, 'UTF-8');
...
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect2" title="40.5.5. Using fonts">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.using-fonts"></a>40.5.5. Using fonts</h3></div></div></div>
<p>
        <code class="classname">Zend_Pdf_Page::drawText()</code> uses the page's current font and font size, which is set with
        the <code class="classname">Zend_Pdf_Page::setFont()</code> method:
        </p>
<pre class="code">
/**
 * Set current font.
 *
 * @param Zend_Pdf_Resource_Font $font
 * @param float $fontSize
 * @return Zend_Pdf_Page
 */
public function setFont(Zend_Pdf_Resource_Font $font, $fontSize);
</pre>
<p>
        PDF documents support PostScript Type 1 and TrueType fonts, as well as two specialized PDF types, Type 3
        and composite fonts. There are also 14 standard Type 1 fonts built-in to every PDF viewer: Courier (4
        styles), Helvetica (4 styles), Times (4 styles), Symbol, and Zapf Dingbats.
        </p>
<p>
        <code class="classname">Zend_Pdf</code> currently supports the standard 14 PDF fonts as well as your own custom TrueType fonts. Font
        objects are obtained via one of two factory methods: <code class="classname">Zend_Pdf_Font::fontWithName($fontName)</code>
        for the standard 14 PDF fonts or <code class="classname">Zend_Pdf_Font::fontWithPath($filePath)</code> for custom fonts.
        </p>
<div class="example">
<a name="zend.pdf.drawing.using-fonts.example-1"></a><p class="title"><b>例 40.8. Create a standard font</b></p>
<div class="example-contents"><pre class="code">
...
// Create new font
$font = Zend_Pdf_Font::fontWithName(Zend_Pdf_Font::FONT_HELVETICA);

// Apply font
$pdfPage-&gt;setFont($font, 36);
...
</pre></div>
</div>
<br class="example-break"><p>
        Constants for the standard 14 PDF font names are defined in the <code class="classname">Zend_Pdf_Font</code> class:
        </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>Zend_Pdf_Font::FONT_COURIER</p></li>
<li class="listitem"><p>Zend_Pdf_Font::FONT_COURIER_BOLD</p></li>
<li class="listitem"><p>Zend_Pdf_Font::FONT_COURIER_ITALIC</p></li>
<li class="listitem"><p>Zend_Pdf_Font::FONT_COURIER_BOLD_ITALIC</p></li>
<li class="listitem"><p>Zend_Pdf_Font::FONT_TIMES</p></li>
<li class="listitem"><p>Zend_Pdf_Font::FONT_TIMES_BOLD</p></li>
<li class="listitem"><p>Zend_Pdf_Font::FONT_TIMES_ITALIC</p></li>
<li class="listitem"><p>Zend_Pdf_Font::FONT_TIMES_BOLD_ITALIC</p></li>
<li class="listitem"><p>Zend_Pdf_Font::FONT_HELVETICA</p></li>
<li class="listitem"><p>Zend_Pdf_Font::FONT_HELVETICA_BOLD</p></li>
<li class="listitem"><p>Zend_Pdf_Font::FONT_HELVETICA_ITALIC</p></li>
<li class="listitem"><p>Zend_Pdf_Font::FONT_HELVETICA_BOLD_ITALIC</p></li>
<li class="listitem"><p>Zend_Pdf_Font::FONT_SYMBOL</p></li>
<li class="listitem"><p>Zend_Pdf_Font::FONT_ZAPFDINGBATS</p></li>
</ul></div>
<p>
        </p>
<p>
        You can also use any individual TrueType font (which usually has a '.ttf' extension) or an
        OpenType font ('.otf' extension) if it contains TrueType outlines. Currently unsupported,
        but planned for a future release are Mac OS X .dfont files and Microsoft TrueType Collection
        ('.ttc' extension) files.
        </p>
<p>
        To use a TrueType font, you must provide the full file path to the font program. If the font
        cannot be read for some reason, or if it is not a TrueType font, the factory method will throw
        an exception:
        </p>
<div class="example">
<a name="zend.pdf.drawing.using-fonts.example-2"></a><p class="title"><b>例 40.9. Create a TrueType font</b></p>
<div class="example-contents"><pre class="code">
...
// Create new font
$goodDogCoolFont = Zend_Pdf_Font::fontWithPath('/path/to/GOODDC__.TTF');

// Apply font
$pdfPage-&gt;setFont($goodDogCoolFont, 36);
...
</pre></div>
</div>
<br class="example-break"><p>
        By default, custom fonts will be embedded in the resulting PDF document. This allows recipients
        to view the page as intended, even if they don't have the proper fonts installed on their system.
        If you are concerned about file size, you can request that the font program not be embedded by
        passing a 'do not embed' option to the factory method:
        </p>
<div class="example">
<a name="zend.pdf.drawing.using-fonts.example-3"></a><p class="title"><b>例 40.10. Create a TrueType font, but do not embed it in the PDF document</b></p>
<div class="example-contents"><pre class="code">
...
// Create new font
$goodDogCoolFont = Zend_Pdf_Font::fontWithPath('/path/to/GOODDC__.TTF',
                                               Zend_Pdf_Font::EMBED_DONT_EMBED);

// Apply font
$pdfPage-&gt;setFont($goodDogCoolFont, 36);
...
</pre></div>
</div>
<br class="example-break"><p>
        If the font program is not embedded but the recipient of the PDF file has the font installed on
        their system, they will see the document as intended. If they do not have the correct font
        installed, the PDF viewer application will do its best to synthesize a replacement.
        </p>
<p>
        Some fonts have very specific licensing rules which prevent them from being embedded in PDF
        documents. So you are not caught off-guard by this, if you try to use a font that cannot be
        embedded, the factory method will throw an exception.
        </p>
<p>
        You can still use these fonts, but you must either pass the do not embed flag as described above,
        or you can simply suppress the exception:
        </p>
<div class="example">
<a name="zend.pdf.drawing.using-fonts.example-4"></a><p class="title"><b>例 40.11. Do not throw an exception for fonts that cannot be embedded</b></p>
<div class="example-contents"><pre class="code">
...
$font = Zend_Pdf_Font::fontWithPath(
           '/path/to/unEmbeddableFont.ttf',
           Zend_Pdf_Font::EMBED_SUPPRESS_EMBED_EXCEPTION
        );
...
</pre></div>
</div>
<br class="example-break"><p>
        This suppression technique is preferred if you allow an end-user to choose their own fonts. Fonts
        which can be embedded in the PDF document will be; those that cannot, won't.
        </p>
<p>
        Font programs can be rather large, some reaching into the tens of megabytes. By default, all embedded
        fonts are compressed using the Flate compression scheme, resulting in a space savings of 50% on average.
        If, for some reason, you do not want to compress the font program, you can disable it with an option:
        </p>
<div class="example">
<a name="zend.pdf.drawing.using-fonts.example-5"></a><p class="title"><b>例 40.12. Do not compress an embedded font</b></p>
<div class="example-contents"><pre class="code">
...
$font = Zend_Pdf_Font::fontWithPath('/path/to/someReallyBigFont.ttf',
                                    Zend_Pdf_Font::EMBED_DONT_COMPRESS);
...
</pre></div>
</div>
<br class="example-break"><p>
        Finally, when necessary, you can combine the embedding options by using the bitwise OR operator:
        </p>
<div class="example">
<a name="zend.pdf.drawing.using-fonts.example-6"></a><p class="title"><b>例 40.13. Combining font embedding options</b></p>
<div class="example-contents"><pre class="code">
...
$font = Zend_Pdf_Font::fontWithPath(
            $someUserSelectedFontPath,
            (Zend_Pdf_Font::EMBED_SUPPRESS_EMBED_EXCEPTION |
            Zend_Pdf_Font::EMBED_DONT_COMPRESS));
...
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect2" title="40.5.6. Standard PDF fonts limitations">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.standard-fonts-limitations"></a>40.5.6. Standard PDF fonts limitations</h3></div></div></div>
<p>
            Standard PDF fonts use several single byte encodings internally
            (see PDF Reference, Sixth Edition, version 1.7
             Appendix D for details). They are generally equal to Latin1 character set (except Symbol and ZapfDingbats fonts).
        </p>
<p>
            <code class="classname">Zend_Pdf</code> uses CP1252 (WinLatin1) for drawing text with standard fonts.
        </p>
<p>
            Text still can be provided in any other encoding, which must be specified if it differs from a current locale.
            Only WinLatin1 characters will be actually drawn.
        </p>
<div class="example">
<a name="zend.pdf.drawing.using-fonts.example-7"></a><p class="title"><b>例 40.14. Combining font embedding options</b></p>
<div class="example-contents"><pre class="code">
...
$font = Zend_Pdf_Font::fontWithName(Zend_Pdf_Font::FONT_COURIER);
$pdfPage-&gt;setFont($font, 36)
        -&gt;drawText('Euro sign - €', 72, 720, 'UTF-8')
        -&gt;drawText('Text with umlauts - à è ì', 72, 650, 'UTF-8');
...
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect2" title="40.5.7. Extracting fonts">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.extracting-fonts"></a>40.5.7. Extracting fonts</h3></div></div></div>
<p>
            <code class="classname">Zend_Pdf</code> module provides a possibility to extract fonts from loaded documents.
        </p>
<p>
            It may be useful for incremental document updates. Without this functionality you have to attach and possibly embed
            font into a document each time you want to update it.
        </p>
<p>
            <code class="classname">Zend_Pdf</code> and <code class="classname">Zend_Pdf_Page</code> objects provide special methods to extract all fonts mentioned within
            a document or a page:
        </p>
<div class="example">
<a name="zend.pdf.drawing.extracting-fonts.example-1"></a><p class="title"><b>例 40.15. Extracting fonts from a loaded document</b></p>
<div class="example-contents"><pre class="code">
...
$pdf = Zend_Pdf::load($documentPath);
...
// Get all document fonts
$fontList = $pdf-&gt;extractFonts();
$pdf-&gt;pages[] = ($page = $pdf-&gt;newPage(Zend_Pdf_Page::SIZE_A4));
$yPosition = 700;
foreach ($fontList as $font) {
    $page-&gt;setFont($font, 15);
    $fontName = $font-&gt;getFontName(Zend_Pdf_Font::NAME_POSTSCRIPT,
                                   'en',
                                   'UTF-8');
    $page-&gt;drawText($fontName . ': The quick brown fox jumps over the lazy dog',
                    100,
                    $yPosition,
                    'UTF-8');
    $yPosition -= 30;
}
...
// Get fonts referenced within the first document page
$firstPage = reset($pdf-&gt;pages);
$firstPageFonts = $firstPage-&gt;extractFonts();
...
</pre></div>
</div>
<br class="example-break"><div class="example">
<a name="zend.pdf.drawing.extracting-fonts.example-2"></a><p class="title"><b>例 40.16. Extracting font from a loaded document by specifying font name</b></p>
<div class="example-contents">
<pre class="code">
...
$pdf = new Zend_Pdf();
...
$pdf-&gt;pages[] = ($page = $pdf-&gt;newPage(Zend_Pdf_Page::SIZE_A4));

$font = Zend_Pdf_Font::fontWithPath($fontPath);
$page-&gt;setFont($font, $fontSize);
$page-&gt;drawText($text, $x, $y);
...
// This font name should be stored somewhere...
$fontName = $font-&gt;getFontName(Zend_Pdf_Font::NAME_POSTSCRIPT,
                               'en',
                               'UTF-8');
...
$pdf-&gt;save($docPath);
...
</pre>
<pre class="code">
...
$pdf = Zend_Pdf::load($docPath);
...
$pdf-&gt;pages[] = ($page = $pdf-&gt;newPage(Zend_Pdf_Page::SIZE_A4));

/* $srcPage-&gt;extractFont($fontName) can also be used here */
$font = $pdf-&gt;extractFont($fontName);

$page-&gt;setFont($font, $fontSize);
$page-&gt;drawText($text, $x, $y);
...
$pdf-&gt;save($docPath, true /* incremental update mode */);
...
</pre>
</div>
</div>
<br class="example-break"><p>
            Extracted fonts can be used in the place of any other font with the following limitations:
            </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>Extracted font can be used only in the context of the document from which it was extracted.</p></li>
<li class="listitem">
<p>
                        Possibly embedded font program is actually not extracted. So extracted font can't provide
                        correct font metrics and original font has to be used for text width calculations:
            </p>
<pre class="code">
...
$font = $pdf-&gt;extractFont($fontName);
$originalFont = Zend_Pdf_Font::fontWithPath($fontPath);

$page-&gt;setFont($font /* use extracted font for drawing */, $fontSize);
$xPosition = $x;
for ($charIndex = 0; $charIndex &lt; strlen($text); $charIndex++) {
    $page-&gt;drawText($text[$charIndex], xPosition, $y);

    // Use original font for text width calculation
    $width = $originalFont-&gt;widthForGlyph(
                 $originalFont-&gt;glyphNumberForCharacter($text[$charIndex])
             );
    $xPosition += $width/$originalFont-&gt;getUnitsPerEm()*$fontSize;
}
...
</pre>
<p>
                    </p>
</li>
</ul></div>
<p>
        </p>
</div>
<div class="sect2" title="40.5.8. Image Drawing">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.image-drawing"></a>40.5.8. Image Drawing</h3></div></div></div>
<p>
        <code class="classname">Zend_Pdf_Page</code> class provides drawImage() method to draw image:
        </p>
<pre class="code">
/**
 * Draw an image at the specified position on the page.
 *
 * @param Zend_Pdf_Resource_Image $image
 * @param float $x1
 * @param float $y1
 * @param float $x2
 * @param float $y2
 * @return Zend_Pdf_Page
 */
public function drawImage(Zend_Pdf_Resource_Image $image, $x1, $y1, $x2, $y2);
</pre>
<p>
        Image objects should be created with <code class="classname">Zend_Pdf_Image::imageWithPath($filePath)</code> method
        (JPG, PNG and TIFF images are supported now):
        </p>
<div class="example">
<a name="zend.pdf.drawing.image-drawing.example-1"></a><p class="title"><b>例 40.17. Image drawing</b></p>
<div class="example-contents"><pre class="code">
...
// load image
$image = Zend_Pdf_Image::imageWithPath('my_image.jpg');

$pdfPage-&gt;drawImage($image, 100, 100, 400, 300);
...
</pre></div>
</div>
<br class="example-break"><p>
            <span class="emphasis"><em>Important! JPEG support requires PHP GD extension to be configured.</em></span>
            <span class="emphasis"><em>Important! PNG support requires ZLIB extension to be configured to work with Alpha channel images.</em></span>
        </p>
<p>
            Refer to the PHP documentation for detailed information
            (http://www.html.net/manual/en/ref.image.html).
            (http://www.html.net/manual/en/ref.zlib.html).
        </p>
</div>
<div class="sect2" title="40.5.9. Line drawing style">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.line-drawing-style"></a>40.5.9. Line drawing style</h3></div></div></div>
<p>
        Line drawing style is defined by line width, line color and line dashing pattern.
        All of this parameters can be assigned by <code class="classname">Zend_Pdf_Page</code>
        class methods:
        </p>
<pre class="code">
/** Set line color. */
public function setLineColor(Zend_Pdf_Color $color);

/** Set line width. */
public function setLineWidth(float $width);

/**
 * Set line dashing pattern.
 *
 * Pattern is an array of floats:
 *     array(on_length, off_length, on_length, off_length, ...)
 * Phase is shift from the beginning of line.
 *
 * @param array $pattern
 * @param array $phase
 * @return Zend_Pdf_Page
 */
public function setLineDashingPattern($pattern, $phase = 0);
</pre>
</div>
<div class="sect2" title="40.5.10. Fill style">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.fill-style"></a>40.5.10. Fill style</h3></div></div></div>
<p>
        <code class="classname">Zend_Pdf_Page::drawRectangle()</code>, <code class="classname">Zend_Pdf_Page::drawPolygon()</code>,
        <code class="classname">Zend_Pdf_Page::drawCircle()</code> and <code class="classname">Zend_Pdf_Page::drawEllipse()</code> methods take
        <code>$fillType</code> argument as an optional parameter. It can be:
        </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>Zend_Pdf_Page::SHAPE_DRAW_STROKE - stroke shape</p></li>
<li class="listitem"><p>Zend_Pdf_Page::SHAPE_DRAW_FILL - only fill shape</p></li>
<li class="listitem"><p>Zend_Pdf_Page::SHAPE_DRAW_FILL_AND_STROKE - fill and stroke (default behavior)</p></li>
</ul></div>
<p>
        <code class="classname">Zend_Pdf_Page::drawPolygon()</code> methods also takes an additional parameter
        <code>$fillMethod</code>:
        </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<p>Zend_Pdf_Page::FILL_METHOD_NON_ZERO_WINDING (default behavior)</p>
<p>
                <em class="citetitle">PDF reference</em> describes this rule as follows:
                </p>
<div class="blockquote"><blockquote class="blockquote"><p>
                        The nonzero winding number rule determines whether a given point is inside a
                        path by conceptually drawing a ray from that point to infinity in any direction
                        and then examining the places where a segment of the path crosses the ray. Starting
                        with a count of 0, the rule adds 1 each time a path segment crosses the ray
                        from left to right and subtracts 1 each time a segment crosses from right to left.
                        After counting all the crossings, if the result is 0 then the point is outside the path;
                        otherwise it is inside.

                        Note: The method just described does not specify what to do if a path segment coincides
                        with or is tangent to the chosen ray. Since the direction of the ray is arbitrary,
                        the rule simply chooses a ray that does not encounter such problem intersections.
                        For simple convex paths, the nonzero winding number rule defines the inside
                        and outside as one would intuitively expect. The more interesting cases are those
                        involving complex or self-intersecting paths like the ones shown in Figure 4.10
                        (in a PDF Reference).

                        For a path consisting of a five-pointed star, drawn with five connected straight
                        line segments intersecting each other, the rule considers the inside to be the entire
                        area enclosed by the star, including the pentagon in the center. For a path composed
                        of two concentric circles, the areas enclosed by both circles are considered
                        to be inside, provided that both are drawn in the same direction. If the circles are
                        drawn in opposite directions, only the "doughnut" shape between them is inside,
                        according to the rule; the "doughnut hole" is outside.
                    </p></blockquote></div>
<p>
                </p>
</li>
<li class="listitem">
<p>Zend_Pdf_Page::FILL_METHOD_EVEN_ODD</p>
<p>
                <em class="citetitle">PDF reference</em> describes this rule as follows:
                </p>
<div class="blockquote"><blockquote class="blockquote"><p>
                        An alternative to the nonzero winding number rule is the even-odd rule. This rule
                        determines the "insideness" of a point by drawing a ray from that point in any
                        direction and simply counting the number of path segments that cross the ray,
                        regardless of direction. If this number is odd, the point is inside; if even, the point
                        is outside. This yields the same results as the nonzero winding number rule for
                        paths with simple shapes, but produces different results for more complex
                        shapes.

                        Figure 4.11 (in a PDF Reference) shows the effects of applying the even-odd rule
                        to complex paths. For the five-pointed star, the rule considers the triangular
                        points to be inside the path, but not the pentagon in the center. For the two
                        concentric circles, only the "doughnut" shape between the two circles is considered inside,
                        regardless of the directions in which the circles are drawn.
                    </p></blockquote></div>
<p>
            </p>
</li>
</ul></div>
</div>
<div class="sect2" title="40.5.11. Linear Transformations">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.linear-transformations"></a>40.5.11. Linear Transformations</h3></div></div></div>
<div class="sect3" title="40.5.11.1. Rotations">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.pdf.drawing.linear-transformations.rotations"></a>40.5.11.1. Rotations</h4></div></div></div>
<p>
            PDF page can be rotated before applying any draw operation.
            It can be done by <code class="classname">Zend_Pdf_Page::rotate()</code> method:
            </p>
<pre class="code">
/**
 * Rotate the page.
 *
 * @param float $x  - the X co-ordinate of rotation point
 * @param float $y  - the Y co-ordinate of rotation point
 * @param float $angle - rotation angle
 * @return Zend_Pdf_Page
 */
public function rotate($x, $y, $angle);
</pre>
</div>
<div class="sect3" title="40.5.11.2. Starting from ZF 1.8, scaling">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.pdf.drawing.linear-transformations.scale"></a>40.5.11.2. Starting from ZF 1.8, scaling</h4></div></div></div>
<p>
            Scaling transformation is provided by <code class="classname">Zend_Pdf_Page::scale()</code> method:
            </p>
<pre class="code">
/**
 * Scale coordination system.
 *
 * @param float $xScale - X dimention scale factor
 * @param float $yScale - Y dimention scale factor
 * @return Zend_Pdf_Page
 */
public function scale($xScale, $yScale);
</pre>
</div>
<div class="sect3" title="40.5.11.3. Starting from ZF 1.8, translating">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.pdf.drawing.linear-transformations.translate"></a>40.5.11.3. Starting from ZF 1.8, translating</h4></div></div></div>
<p>
                Coordinate system shifting is performed by <code class="classname">Zend_Pdf_Page::translate()</code> method:
            </p>
<pre class="code">
/**
 * Translate coordination system.
 *
 * @param float $xShift - X coordinate shift
 * @param float $yShift - Y coordinate shift
 * @return Zend_Pdf_Page
 */
public function translate($xShift, $yShift);
</pre>
</div>
<div class="sect3" title="40.5.11.4. Starting from ZF 1.8, skewing">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.pdf.drawing.linear-transformations.skew"></a>40.5.11.4. Starting from ZF 1.8, skewing</h4></div></div></div>
<p>
                Page skewing can be done using <code class="classname">Zend_Pdf_Page::skew()</code> method:
            </p>
<pre class="code">
/**
 * Translate coordination system.
 *
 * @param float $x  - the X co-ordinate of axis skew point
 * @param float $y  - the Y co-ordinate of axis skew point
 * @param float $xAngle - X axis skew angle
 * @param float $yAngle - Y axis skew angle
 * @return Zend_Pdf_Page
 */
public function skew($x, $y, $xAngle, $yAngle);
</pre>
</div>
</div>
<div class="sect2" title="40.5.12. Save/restore graphics state">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.save-restore"></a>40.5.12. Save/restore graphics state</h3></div></div></div>
<p>
        At any time page graphics state (current font, font size, line color, fill color,
        line style, page rotation, clip area) can be saved and then restored. Save operation puts
        data to a graphics state stack, restore operation retrieves it from there.
        </p>
<p>
        There are two methods in <code class="classname">Zend_Pdf_Page</code> class for these operations:
        </p>
<pre class="code">
/**
 * Save the graphics state of this page.
 * This takes a snapshot of the currently applied style, position,
 * clipping area and any rotation/translation/scaling that has been
 * applied.
 *
 * @return Zend_Pdf_Page
 */
public function saveGS();

/**
 * Restore the graphics state that was saved with the last call to
 * saveGS().
 *
 * @return Zend_Pdf_Page
 */
public function restoreGS();
</pre>
</div>
<div class="sect2" title="40.5.13. Clipping draw area">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.clipping"></a>40.5.13. Clipping draw area</h3></div></div></div>
<p>
        PDF and <code class="classname">Zend_Pdf</code> module support clipping of draw area.
        Current clip area limits the regions of the page affected by painting operators. It's a whole page initially.
        </p>
<p>
        <code class="classname">Zend_Pdf_Page</code> class provides a set of methods for clipping operations.
        </p>
<pre class="code">
/**
 * Intersect current clipping area with a rectangle.
 *
 * @param float $x1
 * @param float $y1
 * @param float $x2
 * @param float $y2
 * @return Zend_Pdf_Page
 */
public function clipRectangle($x1, $y1, $x2, $y2);
</pre>
<pre class="code">
/**
 * Intersect current clipping area with a polygon.
 *
 * @param array $x  - array of float (the X co-ordinates of the vertices)
 * @param array $y  - array of float (the Y co-ordinates of the vertices)
 * @param integer $fillMethod
 * @return Zend_Pdf_Page
 */
public function clipPolygon($x,
                            $y,
                            $fillMethod =
                                Zend_Pdf_Page::FILL_METHOD_NON_ZERO_WINDING);
</pre>
<pre class="code">
/**
 * Intersect current clipping area with a circle.
 *
 * @param float $x
 * @param float $y
 * @param float $radius
 * @param float $startAngle
 * @param float $endAngle
 * @return Zend_Pdf_Page
 */
public function clipCircle($x,
                           $y,
                           $radius,
                           $startAngle = null,
                           $endAngle = null);
</pre>
<pre class="code">
/**
 * Intersect current clipping area with an ellipse.
 *
 * Method signatures:
 * drawEllipse($x1, $y1, $x2, $y2);
 * drawEllipse($x1, $y1, $x2, $y2, $startAngle, $endAngle);
 *
 * @todo process special cases with $x2-$x1 == 0 or $y2-$y1 == 0
 *
 * @param float $x1
 * @param float $y1
 * @param float $x2
 * @param float $y2
 * @param float $startAngle
 * @param float $endAngle
 * @return Zend_Pdf_Page
 */
public function clipEllipse($x1,
                            $y1,
                            $x2,
                            $y2,
                            $startAngle = null,
                            $endAngle = null);
</pre>
</div>
<div class="sect2" title="40.5.14. Styles">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.styles"></a>40.5.14. Styles</h3></div></div></div>
<p>
        <code class="classname">Zend_Pdf_Style</code> class provides styles functionality.
        </p>
<p>
        Styles can be used to store a set of graphic state parameters and apply it to a PDF page by one operation:
        </p>
<pre class="code">
/**
 * Set the style to use for future drawing operations on this page
 *
 * @param Zend_Pdf_Style $style
 * @return Zend_Pdf_Page
 */
public function setStyle(Zend_Pdf_Style $style);

/**
 * Return the style, applied to the page.
 *
 * @return Zend_Pdf_Style|null
 */
public function getStyle();
</pre>
<p>
        <code class="classname">Zend_Pdf_Style</code> class provides a set of methods to set or get different graphics state parameters:
        </p>
<pre class="code">
/**
 * Set line color.
 *
 * @param Zend_Pdf_Color $color
 * @return Zend_Pdf_Page
 */
public function setLineColor(Zend_Pdf_Color $color);
</pre>
<pre class="code">
/**
 * Get line color.
 *
 * @return Zend_Pdf_Color|null
 */
public function getLineColor();
</pre>
<pre class="code">
/**
 * Set line width.
 *
 * @param float $width
 * @return Zend_Pdf_Page
 */
public function setLineWidth($width);
</pre>
<pre class="code">
/**
 * Get line width.
 *
 * @return float
 */
public function getLineWidth();
</pre>
<pre class="code">
/**
 * Set line dashing pattern
 *
 * @param array $pattern
 * @param float $phase
 * @return Zend_Pdf_Page
 */
public function setLineDashingPattern($pattern, $phase = 0);
</pre>
<pre class="code">
/**
 * Get line dashing pattern
 *
 * @return array
 */
public function getLineDashingPattern();
</pre>
<pre class="code">
/**
 * Get line dashing phase
 *
 * @return float
 */
public function getLineDashingPhase();
</pre>
<pre class="code">
/**
 * Set fill color.
 *
 * @param Zend_Pdf_Color $color
 * @return Zend_Pdf_Page
 */
public function setFillColor(Zend_Pdf_Color $color);
</pre>
<pre class="code">
/**
 * Get fill color.
 *
 * @return Zend_Pdf_Color|null
 */
public function getFillColor();
</pre>
<pre class="code">
/**
 * Set current font.
 *
 * @param Zend_Pdf_Resource_Font $font
 * @param float $fontSize
 * @return Zend_Pdf_Page
 */
public function setFont(Zend_Pdf_Resource_Font $font, $fontSize);
</pre>
<pre class="code">
/**
 * Modify current font size
 *
 * @param float $fontSize
 * @return Zend_Pdf_Page
 */
public function setFontSize($fontSize);
</pre>
<pre class="code">
/**
 * Get current font.
 *
 * @return Zend_Pdf_Resource_Font $font
 */
public function getFont();
</pre>
<pre class="code">
/**
 * Get current font size
 *
 * @return float $fontSize
 */
public function getFontSize();
</pre>
</div>
<div class="sect2" title="40.5.15. Transparency">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.alpha"></a>40.5.15. Transparency</h3></div></div></div>
<p>
        <code class="classname">Zend_Pdf</code> module supports transparency handling.
        </p>
<p>
        Transparency may be set using <code class="classname">Zend_Pdf_Page::setAlpha()</code> method:
        </p>
<pre class="code">
/**
 * Set the transparency
 *
 * $alpha == 0  - transparent
 * $alpha == 1  - opaque
 *
 * Transparency modes, supported by PDF:
 * Normal (default), Multiply, Screen, Overlay, Darken, Lighten,
 * ColorDodge, ColorBurn, HardLight, SoftLight, Difference, Exclusion
 *
 * @param float $alpha
 * @param string $mode
 * @throws Zend_Pdf_Exception
 * @return Zend_Pdf_Page
 */
public function setAlpha($alpha, $mode = 'Normal');
</pre>
<p>
        </p>
</div>
</div>
<div class="revinfo"></div>


<!--start of htmlend-->

<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->