<!--hmt-->
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end --><!--end of htmlheader-->

<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->
<!--end of htmlmiddle-->



<div class="sect1" title="24.12. Using the YouTube Data API">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.gdata.youtube"></a>24.12. Using the YouTube Data API</h2></div></div></div>
<p>
        The YouTube Data API offers read and write access to YouTube's content.
        Users can perform unauthenticated requests to Google Data feeds to
        retrieve feeds of popular videos, comments, public information about
        YouTube user profiles, user playlists, favorites, subscriptions and so on.
    </p>
<p>
      For more information on the YouTube Data API, please refer
      to the official 
        PHP Developer's Guide on code.google.com.
    </p>
<div class="sect2" title="24.12.1. Authentication">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.gdata.youtube.authentication"></a>24.12.1. Authentication</h3></div></div></div>
<p>
          The YouTube Data API allows read-only access to public data, which
          does not require authentication. For any write requests, a user
          needs to authenticate either using ClientLogin or AuthSub authentication. Please refer to the Authentication section in the PHP Developer's Guide for more detail.
        </p>
</div>
<div class="sect2" title="24.12.2. Developer Keys and Client ID">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.gdata.youtube.developer_key"></a>24.12.2. Developer Keys and Client ID</h3></div></div></div>
<p>
            A developer key identifies the YouTube developer that is submitting
            an API request. A client ID identifies your application for logging
            and debugging purposes. Please visit http://code.google.com/apis/youtube/dashboard/ to obtain a developer key and client ID. The example below demonstrates how to pass the developer key and client ID to the <a class="ulink" href="zend.gdata.youtube.html" target="_top">Zend_Gdata_YouTube</a> service object.
        </p>
<div class="example">
<a name="zend.gdata.youtube.developer_key.example"></a><p class="title"><b>例 24.1. Passing a Developer Key and ClientID to Zend_Gdata_YouTube</b></p>
<div class="example-contents"><pre class="code">
$yt = new Zend_Gdata_YouTube($httpClient,
                             $applicationId,
                             $clientId,
                             $developerKey);
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect2" title="24.12.3. Retrieving public video feeds">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.gdata.youtube.videos"></a>24.12.3. Retrieving public video feeds</h3></div></div></div>
<p>
          The YouTube Data API provides numerous feeds that return a list of
            videos, such as standard feeds, related videos, video responses,
            user's uploads, and user's favorites. For example, the
            user's uploads feed returns all videos uploaded by a specific user.
            See the 
            YouTube API reference guide for a detailed list of available feeds.
        </p>
<div class="sect3" title="24.12.3.1. Searching for videos by metadata">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.gdata.youtube.videos.searching"></a>24.12.3.1. Searching for videos by metadata</h4></div></div></div>
<p>
                You can retrieve a list of videos that match specified
                search criteria, using the YouTubeQuery class. The following query
                looks for videos which contain the word "cat" in their
                metadata, starting with the 10th video and displaying 20
                videos per page, ordered by the view count.
            </p>
<div class="example">
<a name="zend.gdata.youtube.videos.searching.example"></a><p class="title"><b>例 24.2. Searching for videos</b></p>
<div class="example-contents"><pre class="code">
$yt = new Zend_Gdata_YouTube();
$query = $yt-&gt;newVideoQuery();
$query-&gt;videoQuery = 'cat';
$query-&gt;startIndex = 10;
$query-&gt;maxResults = 20;
$query-&gt;orderBy = 'viewCount';

echo $query-&gt;queryUrl . "\n";
$videoFeed = $yt-&gt;getVideoFeed($query);

foreach ($videoFeed as $videoEntry) {
    echo "---------VIDEO----------\n";
    echo "Title: " . $videoEntry-&gt;getVideoTitle() . "\n";
    echo "\nDescription:\n";
    echo $videoEntry-&gt;getVideoDescription();
    echo "\n\n\n";
}
</pre></div>
</div>
<br class="example-break"><p>
                For more details on the different query parameters, please
                refer to the 
                Reference Guide. The available helper functions in
              
                <code class="classname">Zend_Gdata_YouTube_VideoQuery</code> for each of these parameters are
                described in more detail in the PHP Developer's Guide.
            </p>
</div>
<div class="sect3" title="24.12.3.2. Searching for videos by categories and tags/keywords">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.gdata.youtube.videos.searchingcategories"></a>24.12.3.2. Searching for videos by categories and tags/keywords</h4></div></div></div>
<p>
                Searching for videos in specific categories is done by
                generating a 
                specially formatted URL. For example, to search for
                comedy videos which contain the keyword dog:
            </p>
<div class="example">
<a name="zend.gdata.youtube.videos.searchingcategories.example"></a><p class="title"><b>例 24.3. Searching for videos in specific categories</b></p>
<div class="example-contents"><pre class="code">
$yt = new Zend_Gdata_YouTube();
$query = $yt-&gt;newVideoQuery();
$query-&gt;category = 'Comedy/dog';

echo $query-&gt;queryUrl . "\n";
$videoFeed = $yt-&gt;getVideoFeed($query);
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect3" title="24.12.3.3. Retrieving standard feeds">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.gdata.youtube.videos.standard"></a>24.12.3.3. Retrieving standard feeds</h4></div></div></div>
<p>
              The YouTube Data API has a number of
                
                standard feeds. These standard feeds can be retrieved
                as <a class="ulink" href="" target="_top">Zend_Gdata_YouTube_VideoFeed</a> objects using the specified
                URLs, using the predefined constants within the <a class="ulink" href="zend.gdata.youtube.html" target="_top">Zend_Gdata_YouTube</a> class
                (Zend_Gdata_YouTube::STANDARD_TOP_RATED_URI for example) or
                using the predefined helper methods (see code listing below).
            </p>
<p>
                To retrieve the top rated videos using the helper method:
            </p>
<div class="example">
<a name="zend.gdata.youtube.videos.standard.example-1"></a><p class="title"><b>例 24.4. Retrieving a standard video feed</b></p>
<div class="example-contents"><pre class="code">
$yt = new Zend_Gdata_YouTube();
$videoFeed = $yt-&gt;getTopRatedVideoFeed();
</pre></div>
</div>
<br class="example-break"><p>
                There are also query parameters to specify the time period
                over which the standard feed is computed.
            </p>
<p>
                For example, to retrieve the top rated videos for today:
            </p>
<div class="example">
<a name="zend.gdata.youtube.videos.standard.example-2"></a><p class="title"><b>例 24.5. Using a Zend_Gdata_YouTube_VideoQuery to Retrieve Videos</b></p>
<div class="example-contents"><pre class="code">
$yt = new Zend_Gdata_YouTube();
$query = $yt-&gt;newVideoQuery();
$query-&gt;setTime('today');
$videoFeed = $yt-&gt;getTopRatedVideoFeed($query);
</pre></div>
</div>
<br class="example-break"><p>
                Alternatively, you could just retrieve the feed using the
                URL:
            </p>
<div class="example">
<a name="zend.gdata.youtube.videos.standard.example-3"></a><p class="title"><b>例 24.6. Retrieving a video feed by URL</b></p>
<div class="example-contents"><pre class="code">
$yt = new Zend_Gdata_YouTube();
$url = 'http://gdata.youtube.com/feeds/standardfeeds/top_rated?time=today'
$videoFeed = $yt-&gt;getVideoFeed($url);
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect3" title="24.12.3.4. Retrieving videos uploaded by a user">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.gdata.youtube.videos.user"></a>24.12.3.4. Retrieving videos uploaded by a user</h4></div></div></div>
<p>
                You can retrieve a list of videos uploaded by a particular user
                using a simple helper method. This example retrieves videos
                uploaded by the user 'liz'.
            </p>
<div class="example">
<a name="zend.gdata.youtube.videos.user.example"></a><p class="title"><b>例 24.7. Retrieving videos uploaded by a specific user</b></p>
<div class="example-contents"><pre class="code">
$yt = new Zend_Gdata_YouTube();
$videoFeed = $yt-&gt;getUserUploads('liz');
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect3" title="24.12.3.5. Retrieving videos favorited by a user">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.gdata.youtube.videos.favorites"></a>24.12.3.5. Retrieving videos favorited by a user</h4></div></div></div>
<p>
                You can retrieve a list of a user's favorite videos
                using a simple helper method. This example retrieves videos
                favorited by the user 'liz'.
            </p>
<div class="example">
<a name="zend.gdata.youtube.videos.favorites.example"></a><p class="title"><b>例 24.8. Retrieving a user's favorite videos</b></p>
<div class="example-contents"><pre class="code">
$yt = new Zend_Gdata_YouTube();
$videoFeed = $yt-&gt;getUserFavorites('liz');
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect3" title="24.12.3.6. Retrieving video responses for a video">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.gdata.youtube.videos.responses"></a>24.12.3.6. Retrieving video responses for a video</h4></div></div></div>
<p>
                You can retrieve a list of a video's video responses
                using a simple helper method. This example retrieves video
                response for a video with the ID 'abc123813abc'.
            </p>
<div class="example">
<a name="zend.gdata.youtube.videos.responses.example"></a><p class="title"><b>例 24.9. Retrieving a feed of video responses</b></p>
<div class="example-contents"><pre class="code">
$yt = new Zend_Gdata_YouTube();
$videoFeed = $yt-&gt;getVideoResponseFeed('abc123813abc');
</pre></div>
</div>
<br class="example-break">
</div>
</div>
<div class="sect2" title="24.12.4. Retrieving video comments">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.gdata.youtube.comments"></a>24.12.4. Retrieving video comments</h3></div></div></div>
<p>
            The comments for each YouTube video can be retrieved in
            several ways. To retrieve the comments for the video with
            the ID 'abc123813abc', use the following code:
        </p>
<div class="example">
<a name="zend.gdata.youtube.videos.comments.example-1"></a><p class="title"><b>例 24.10. Retrieving a feed of video comments from a video ID</b></p>
<div class="example-contents"><pre class="code">
$yt = new Zend_Gdata_YouTube();
$commentFeed = $yt-&gt;getVideoCommentFeed('abc123813abc');

foreach ($commentFeed as $commentEntry) {
    echo $commentEntry-&gt;title-&gt;text . "\n";
    echo $commentEntry-&gt;content-&gt;text . "\n\n\n";
}
</pre></div>
</div>
<br class="example-break"><p>
            Comments can also be retrieved for a video if you have
            a copy of the <a class="ulink" href="zend.gdata.youtube.html" target="_top">Zend_Gdata_YouTube_VideoEntry</a> object:
        </p>
<div class="example">
<a name="zend.gdata.youtube.videos.comments.example-2"></a><p class="title"><b>例 24.11. Retrieving a Feed of Video Comments from a Zend_Gdata_YouTube_VideoEntry</b></p>
<div class="example-contents"><pre class="code">
$yt = new Zend_Gdata_YouTube();
$videoEntry = $yt-&gt;getVideoEntry('abc123813abc');
// we don't know the video ID in this example, but we do have the URL
$commentFeed = $yt-&gt;getVideoCommentFeed(null,
                                        $videoEntry-&gt;comments-&gt;href);
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect2" title="24.12.5. Retrieving playlist feeds">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.gdata.youtube.playlists"></a>24.12.5. Retrieving playlist feeds</h3></div></div></div>
<p>
          The YouTube Data API provides information about users, including
            profiles, playlists, subscriptions, and more.
        </p>
<div class="sect3" title="24.12.5.1. Retrieving the playlists of a user">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.gdata.youtube.playlists.user"></a>24.12.5.1. Retrieving the playlists of a user</h4></div></div></div>
<p>
                The library provides a helper method to retrieve
                the playlists associated with a given user. To retrieve the
                playlists for the user 'liz':
            </p>
<div class="example">
<a name="zend.gdata.youtube.playlists.user.example"></a><p class="title"><b>例 24.12. Retrieving the playlists of a user</b></p>
<div class="example-contents"><pre class="code">
$yt = new Zend_Gdata_YouTube();
$playlistListFeed = $yt-&gt;getPlaylistListFeed('liz');

foreach ($playlistListFeed as $playlistEntry) {
    echo $playlistEntry-&gt;title-&gt;text . "\n";
    echo $playlistEntry-&gt;description-&gt;text . "\n";
    echo $playlistEntry-&gt;getPlaylistVideoFeedUrl() . "\n\n\n";
}
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect3" title="24.12.5.2. Retrieving a specific playlist">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.gdata.youtube.playlists.special"></a>24.12.5.2. Retrieving a specific playlist</h4></div></div></div>
<p>
                The library provides a helper method to retrieve
                the videos associated with a given playlist. To retrieve the
                playlists for a specific playlist entry:
            </p>
<div class="example">
<a name="zend.gdata.youtube.playlists.special.example"></a><p class="title"><b>例 24.13. Retrieving a specific playlist</b></p>
<div class="example-contents"><pre class="code">
$feedUrl = $playlistEntry-&gt;getPlaylistVideoFeedUrl();
$playlistVideoFeed = $yt-&gt;getPlaylistVideoFeed($feedUrl);
</pre></div>
</div>
<br class="example-break">
</div>
</div>
<div class="sect2" title="24.12.6. Retrieving a list of a user's subscriptions">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.gdata.youtube.subscriptions"></a>24.12.6. Retrieving a list of a user's subscriptions</h3></div></div></div>
<p>
            A user can have several types of subscriptions: channel
            subscription, tag subscription, or favorites subscription.
            A Zend_Gdata_YouTube_SubscriptionEntry is used to represent
            individual subscriptions.
        </p>
<p>
            To retrieve all subscriptions for the user 'liz':
        </p>
<div class="example">
<a name="zend.gdata.youtube.subscriptions.example"></a><p class="title"><b>例 24.14. Retrieving all subscriptions for a user</b></p>
<div class="example-contents"><pre class="code">
$yt = new Zend_Gdata_YouTube();
$subscriptionFeed = $yt-&gt;getSubscriptionFeed('liz');

foreach ($subscriptionFeed as $subscriptionEntry) {
    echo $subscriptionEntry-&gt;title-&gt;text . "\n";
}
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect2" title="24.12.7. Retrieving a user's profile">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.gdata.youtube.profile"></a>24.12.7. Retrieving a user's profile</h3></div></div></div>
<p>
            You can retrieve the public profile information
            for any YouTube user. To retrieve the profile
            for the user 'liz':
        </p>
<div class="example">
<a name="zend.gdata.youtube.profile.example"></a><p class="title"><b>例 24.15. Retrieving a user's profile</b></p>
<div class="example-contents"><pre class="code">
$yt = new Zend_Gdata_YouTube();
$userProfile = $yt-&gt;getUserProfile('liz');
echo "username: " . $userProfile-&gt;username-&gt;text . "\n";
echo "age: " . $userProfile-&gt;age-&gt;text . "\n";
echo "hometown: " . $userProfile-&gt;hometown-&gt;text . "\n";
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect2" title="24.12.8. Uploading Videos to YouTube">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.gdata.youtube.uploads"></a>24.12.8. Uploading Videos to YouTube</h3></div></div></div>
<p>
        Please make sure to review the diagrams in the
        protocol guide on code.google.com for a high-level
        overview of the upload process. Uploading videos can be done in one of
        two ways: either by uploading the video directly or by sending just the
        video meta-data and having a user upload the video through an HTML form.
      </p>
<p>
        In order to upload a video directly, you must first construct a new
        <a class="ulink" href="zend.gdata.youtube.html" target="_top">Zend_Gdata_YouTube_VideoEntry</a> object and specify some required meta-data
        The following example shows uploading the Quicktime video "mytestmovie.mov"
        to YouTube with the following properties:
      </p>
<div class="table">
<a name="zend.gdata.youtube.uploads.metadata"></a><p class="title"><b>表 24.1. Metadata used in the code-sample below</b></p>
<div class="table-contents"><table summary="Metadata used in the code-sample below" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th align="left">Property</th>
<th align="left">Value</th>
</tr></thead>
<tbody>
<tr>
<td align="left">Title</td>
<td align="left">My Test Movie</td>
</tr>
<tr>
<td align="left">Category</td>
<td align="left">Autos</td>
</tr>
<tr>
<td align="left">Keywords</td>
<td align="left">cars, funny</td>
</tr>
<tr>
<td align="left">Description</td>
<td align="left">My description</td>
</tr>
<tr>
<td align="left">Filename</td>
<td align="left">mytestmovie.mov</td>
</tr>
<tr>
<td align="left">File MIME type</td>
<td align="left">video/quicktime</td>
</tr>
<tr>
<td align="left">Video private?</td>
<td align="left">false</td>
</tr>
<tr>
<td align="left">Video location</td>
<td align="left">37, -122 (lat, long)</td>
</tr>
<tr>
<td align="left">Developer Tags</td>
<td align="left">mydevelopertag, anotherdevelopertag</td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><p>
        The code below creates a blank <a class="ulink" href="zend.gdata.youtube.html" target="_top">Zend_Gdata_YouTube_VideoEntry</a> to be uploaded.
        A Zend_Gdata_App_MediaFileSource object is then used to hold the actual video file. Under the hood, the Zend_Gdata_YouTube_Extension_MediaGroup object is used to hold all
        of the video's meta-data. Our helper methods detailed below allow you to
        just set the video meta-data without having to worry about the media group object.
        The $uploadUrl is the location where the new entry gets posted to.
        This can be specified either with the $userName of the
        currently authenticated user, or, alternatively, you can simply use the
        string 'default' to refer to the currently authenticated user.
      </p>
<div class="example">
<a name="zend.gdata.youtube.uploads.example"></a><p class="title"><b>例 24.16. Uploading a video</b></p>
<div class="example-contents"><pre class="code">
$yt = new Zend_Gdata_YouTube($httpClient);
$myVideoEntry = new Zend_Gdata_YouTube_VideoEntry();

$filesource = $yt-&gt;newMediaFileSource('mytestmovie.mov');
$filesource-&gt;setContentType('video/quicktime');
$filesource-&gt;setSlug('mytestmovie.mov');

$myVideoEntry-&gt;setMediaSource($filesource);

$myVideoEntry-&gt;setVideoTitle('My Test Movie');
$myVideoEntry-&gt;setVideoDescription('My Test Movie');
// Note that category must be a valid YouTube category !
$myVideoEntry-&gt;setVideoCategory('Comedy');

// Set keywords, note that this must be a comma separated string
// and that each keyword cannot contain whitespace
$myVideoEntry-&gt;SetVideoTags('cars, funny');

// Optionally set some developer tags
$myVideoEntry-&gt;setVideoDeveloperTags(array('mydevelopertag',
                                           'anotherdevelopertag'));

// Optionally set the video's location
$yt-&gt;registerPackage('Zend_Gdata_Geo');
$yt-&gt;registerPackage('Zend_Gdata_Geo_Extension');
$where = $yt-&gt;newGeoRssWhere();
$position = $yt-&gt;newGmlPos('37.0 -122.0');
$where-&gt;point = $yt-&gt;newGmlPoint($position);
$myVideoEntry-&gt;setWhere($where);

// Upload URI for the currently authenticated user
$uploadUrl =
    'http://uploads.gdata.youtube.com/feeds/users/default/uploads';

// Try to upload the video, catching a Zend_Gdata_App_HttpException
// if availableor just a regular Zend_Gdata_App_Exception

try {
    $newEntry = $yt-&gt;insertEntry($myVideoEntry,
                                 $uploadUrl,
                                 'Zend_Gdata_YouTube_VideoEntry');
} catch (Zend_Gdata_App_HttpException $httpException) {
    echo $httpException-&gt;getRawResponseBody();
} catch (Zend_Gdata_App_Exception $e) {
    echo $e-&gt;getMessage();
}
</pre></div>
</div>
<br class="example-break"><p>
      To upload a video as private, simply use: $myVideoEntry-&gt;setVideoPrivate(); prior to
      performing the upload. $videoEntry-&gt;isVideoPrivate() can be used to check whether a video
      entry is private or not.
    </p>
</div>
<div class="sect2" title="24.12.9. Browser-based upload">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.gdata.youtube.uploads.browser"></a>24.12.9. Browser-based upload</h3></div></div></div>
<p>
        Browser-based uploading is performed almost identically to direct uploading,
        except that you do not attach a Zend_Gdata_App_MediaFileSource object to
        the <a class="ulink" href="zend.gdata.youtube.html" target="_top">Zend_Gdata_YouTube_VideoEntry</a> you are constructing. Instead you simply
        submit all of your video's meta-data to receive back a token element
        which can be used to construct an HTML upload form.
      </p>
<div class="example">
<a name="zend.gdata.youtube.uploads.browser.example-1"></a><p class="title"><b>例 24.17. Browser-based upload</b></p>
<div class="example-contents"><pre class="code">
$yt = new Zend_Gdata_YouTube($httpClient);

$myVideoEntry= new Zend_Gdata_YouTube_VideoEntry();
$myVideoEntry-&gt;setVideoTitle('My Test Movie');
$myVideoEntry-&gt;setVideoDescription('My Test Movie');

// Note that category must be a valid YouTube category
$myVideoEntry-&gt;setVideoCategory('Comedy');
$myVideoEntry-&gt;SetVideoTags('cars, funny');

$tokenHandlerUrl = 'http://gdata.youtube.com/action/GetUploadToken';
$tokenArray = $yt-&gt;getFormUploadToken($myVideoEntry, $tokenHandlerUrl);
$tokenValue = $tokenArray['token'];
$postUrl = $tokenArray['url'];
</pre></div>
</div>
<br class="example-break"><p>
      The above code prints out a link and a token that is used to construct an
      HTML form to display in the user's browser. A simple example form is shown
      below with $tokenValue representing the content of the returned token element,
      as shown being retrieved from $myVideoEntry above. In order for the user
      to be redirected to your website after submitting the form, make sure to
      append a $nextUrl parameter to the $postUrl above, which functions in the
      same way as the $next parameter of an AuthSub link. The only difference is
      that here, instead of a single-use token, a status and an id variable are
      returned in the URL.
    </p>
<div class="example">
<a name="zend.gdata.youtube.uploads.browser.example-2"></a><p class="title"><b>例 24.18. Browser-based upload: Creating the HTML form</b></p>
<div class="example-contents"><pre class="code">
// place to redirect user after upload
$nextUrl = 'http://mysite.com/youtube_uploads';

$form = '&lt;form action="'. $postUrl .'?nexturl='. $nextUrl .
        '" method="post" enctype="multipart/form-data"&gt;'.
        '&lt;input name="file" type="file"/&gt;'.
        '&lt;input name="token" type="hidden" value="'. $tokenValue .'"/&gt;'.
        '&lt;input value="Upload Video File" type="submit" /&gt;'.
        '&lt;/form&gt;';
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect2" title="24.12.10. Checking upload status">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.gdata.youtube.uploads.status"></a>24.12.10. Checking upload status</h3></div></div></div>
<p>
        After uploading a video, it will immediately be visible in an
        authenticated user's uploads feed. However, it will not be public on
        the site until it has been processed. Videos that have been rejected or
        failed to upload successfully will also only be in the authenticated
        user's uploads feed. The following code checks the status of a
        <a class="ulink" href="zend.gdata.youtube.html" target="_top">Zend_Gdata_YouTube_VideoEntry</a> to see if it is not live yet or if it has been rejected.
      </p>
<div class="example">
<a name="zend.gdata.youtube.uploads.status.example"></a><p class="title"><b>例 24.19. Checking video upload status</b></p>
<div class="example-contents"><pre class="code">
try {
    $control = $videoEntry-&gt;getControl();
} catch (Zend_Gdata_App_Exception $e) {
    echo $e-&gt;getMessage();
}

if ($control instanceof Zend_Gdata_App_Extension_Control) {
    if ($control-&gt;getDraft() != null &amp;&amp;
        $control-&gt;getDraft()-&gt;getText() == 'yes') {
        $state = $videoEntry-&gt;getVideoState();

        if ($state instanceof Zend_Gdata_YouTube_Extension_State) {
            print 'Upload status: '
                  . $state-&gt;getName()
                  .' '. $state-&gt;getText();
        } else {
            print 'Not able to retrieve the video status information'
                  .' yet. ' . "Please try again shortly.\n";
        }
    }
}
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect2" title="24.12.11. Other Functions">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.gdata.youtube.other"></a>24.12.11. Other Functions</h3></div></div></div>
<p>
        In addition to the functionality described above, the YouTube API
        contains many other functions that allow you to modify video meta-data,
        delete video entries and use the full range of community features on the site.
        Some of the community features that can be modified through the API include:
        ratings, comments, playlists, subscriptions, user profiles, contacts and messages.
      </p>
<p>
        Please refer to the full documentation available in the
        PHP Developer's  Guide on code.google.com.
      </p>
</div>
</div>
<div class="revinfo"></div>


<!--start of htmlend-->

<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->