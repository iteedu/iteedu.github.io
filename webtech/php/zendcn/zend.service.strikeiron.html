<!--hmt-->
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end --><!--end of htmlheader-->

<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->
<!--end of htmlmiddle-->



<div class="sect1" title="47.20. Zend_Service_StrikeIron">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.service.strikeiron"></a>47.20. Zend_Service_StrikeIron</h2></div></div></div>
<p>
        <code class="classname">Zend_Service_StrikeIron</code> provides a PHP 5 client to StrikeIron
        web services. See the following sections:
    </p>
<p>
        </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="xref" href="zend.service.strikeiron.html" title="47.20. Zend_Service_StrikeIron">第 47.20 节 “Zend_Service_StrikeIron”</a></p></li></ul></div>
<p>
        </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="xref" href="zend.service.strikeiron.bundled-services.html" title="47.21. Zend_Service_StrikeIron: Bundled Services">第 47.21 节 “Zend_Service_StrikeIron: Bundled Services”</a></p></li></ul></div>
<p>
        </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="xref" href="zend.service.strikeiron.advanced-uses.html" title="47.22. Zend_Service_StrikeIron: Advanced Uses">第 47.22 节 “Zend_Service_StrikeIron: Advanced Uses”</a></p></li></ul></div>
<p>
    </p>
<div class="sect2" title="47.20.1. Overview">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.service.strikeiron.overview"></a>47.20.1. Overview</h3></div></div></div>
<p>
          StrikeIron
          offers hundreds of commercial data services ("Data as a Service")
          such as Online Sales Tax, Currency Rates, Stock Quotes, Geocodes, Global
          Address Verification, Yellow/White Pages, MapQuest Driving Directions,
          Dun &amp; Bradstreet Business Credit Checks, and much, much more.
        </p>
<p>
          Each StrikeIron web service shares a standard SOAP (and REST)
          API, making it easy to integrate and manage multiple services.
          StrikeIron also manages customer billing for all services in a single
          account, making it perfect for solution providers. Get
          started with free web services at
          http://www.strikeiron.com/sdp.
        </p>
<p>
          StrikeIron's services may be used through the
          PHP 5 SOAP extension alone.
          However, using StrikeIron this way does not give an ideal PHP-like interface.
          The <code class="classname">Zend_Service_StrikeIron</code> component provides a lightweight layer on
          top of the SOAP extension for working with StrikeIron services in a
          more convenient, PHP-like manner.
        </p>
<div class="note" title="注意"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[注意]" src="images/note.png"></td>
<th align="left">注意</th>
</tr>
<tr><td align="left" valign="top"><p>
            The PHP 5 SOAP extension must be installed and enabled to use
            <code class="classname">Zend_Service_StrikeIron</code>.
          </p></td></tr>
</table></div>
<p>
          The <code class="classname">Zend_Service_StrikeIron</code> component provides:

          </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>
                A single point for configuring your StrikeIron authentication credentials
                that can be used across many StrikeIron services.
              </p></li>
<li class="listitem"><p>
                A standard way of retrieving your StrikeIron subscription information
                such as license status and the number of hits remaining to a service.
              </p></li>
<li class="listitem"><p>
                The ability to use any StrikeIron service from its WSDL without
                creating a PHP wrapper class, and the option of creating a wrapper for
                a more convenient interface.
              </p></li>
<li class="listitem"><p>
                Wrappers for three popular StrikeIron services.
              </p></li>
</ul></div>
<p>
        </p>
</div>
<div class="sect2" title="47.20.2. Registering with StrikeIron">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.service.strikeiron.registering"></a>47.20.2. Registering with StrikeIron</h3></div></div></div>
<p>
        Before you can get started with <code class="classname">Zend_Service_StrikeIron</code>, you must first
        register for a
        StrikeIron developer account.
      </p>
<p>
        After registering, you will receive a StrikeIron username and password.
        These will be used when connecting to StrikeIron using <code class="classname">Zend_Service_StrikeIron</code>.
      </p>
<p>
        You will also need to sign up
        for StrikeIron's Super Data Pack Web Service.
      </p>
<p>
        Both registration steps are free and can be done relatively quickly through
        the StrikeIron website.
      </p>
</div>
<div class="sect2" title="47.20.3. Getting Started">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.service.strikeiron.getting-started"></a>47.20.3. Getting Started</h3></div></div></div>
<p>
        Once you have registered
        for a StrikeIron account and signed up for the
        Super Data Pack,
        you're ready to start using <code class="classname">Zend_Service_StrikeIron</code>.
      </p>
<p>
        StrikeIron consists of hundreds of different web services.
        <code class="classname">Zend_Service_StrikeIron</code> can be used with many of these services but provides supported
        wrappers for three of them:
      </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p><a class="link" href="zend.service.strikeiron.bundled-services.html#zend.service.strikeiron.bundled-services.zip-code-information" title="47.21.1. ZIP Code Information">ZIP Code Information</a></p></li>
<li class="listitem"><p><a class="link" href="zend.service.strikeiron.bundled-services.html#zend.service.strikeiron.bundled-services.us-address-verification" title="47.21.2. U.S. Address Verification">US Address Verification</a></p></li>
<li class="listitem"><p><a class="link" href="zend.service.strikeiron.bundled-services.html#zend.service.strikeiron.bundled-services.sales-use-tax-basic" title="47.21.3. Sales &amp; Use Tax Basic">Sales &amp; Use Tax Basic</a></p></li>
</ul></div>
<p>
        The class <code class="classname">Zend_Service_StrikeIron</code> provides a simple way
        of specifying your StrikeIron account information and other options in
        its constructor. It also has a factory method that will return clients
        for StrikeIron services:

        </p>
<pre class="code">
$strikeIron = new Zend_Service_StrikeIron(array('username' =&gt; 'your-username',
                                                'password' =&gt; 'your-password'));

$taxBasic = $strikeIron-&gt;getService(array('class' =&gt; 'SalesUseTaxBasic'));
</pre>
<p>
      </p>
<p>
        The <code>getService()</code> method will return a client for any
        StrikeIron service by the name of its PHP wrapper class. In this case,
        the name <code>SalesUseTaxBasic</code> refers to the wrapper class
        <code class="classname">Zend_Service_StrikeIron_SalesUseTaxBasic</code>. Wrappers are
        included for three services and described in
        <a class="link" href="zend.service.strikeiron.bundled-services.html" title="47.21. Zend_Service_StrikeIron: Bundled Services">Bundled Services</a>.
      </p>
<p>
        The <code>getService()</code> method can also return a client for
        a StrikeIron service that does not yet have a PHP wrapper. This is
        explained in
        <a class="link" href="zend.service.strikeiron.advanced-uses.html#zend.service.strikeiron.advanced-uses.services-by-wsdl" title="47.22.1. Using Services by WSDL">Using Services by WSDL</a>.
      </p>
</div>
<div class="sect2" title="47.20.4. Making Your First Query">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.service.strikeiron.making-first-query"></a>47.20.4. Making Your First Query</h3></div></div></div>
<p>
        Once you have used the <code>getService()</code> method to get a client
        for a particular StrikeIron service, you can utilize that client
        by calling methods on it just like any other PHP object.

        </p>
<pre class="code">
$strikeIron = new Zend_Service_StrikeIron(array('username' =&gt; 'your-username',
                                                'password' =&gt; 'your-password'));

// Get a client for the Sales &amp; Use Tax Basic service
$taxBasic = $strikeIron-&gt;getService(array('class' =&gt; 'SalesUseTaxBasic'));

// Query tax rate for Ontario, Canada
$rateInfo = $taxBasic-&gt;getTaxRateCanada(array('province' =&gt; 'ontario'));
echo $rateInfo-&gt;province;
echo $rateInfo-&gt;abbreviation;
echo $rateInfo-&gt;GST;
</pre>
<p>

        In the example above, the <code>getService()</code> method is used
        to return a client to the
        <a class="link" href="zend.service.strikeiron.bundled-services.html#zend.service.strikeiron.bundled-services.sales-use-tax-basic" title="47.21.3. Sales &amp; Use Tax Basic">Sales &amp; Use Tax Basic</a> service.
        The client object is stored in <code>$taxBasic</code>.
      </p>
<p>
        The <code>getTaxRateCanada()</code> method is then called on the
        service. An associative array is used to supply keyword parameters to
        the method. This is the way that all StrikeIron methods are called.
      </p>
<p>
        The result from <code>getTaxRateCanada()</code> is stored in
        <code>$rateInfo</code> and has properties like <code>province</code>
        and <code>GST</code>.
      </p>
<p>
        Many of the StrikeIron services are as simple to use as the example above. See
        <a class="link" href="zend.service.strikeiron.bundled-services.html" title="47.21. Zend_Service_StrikeIron: Bundled Services">Bundled Services</a>
        for detailed information on three StrikeIron services.
      </p>
</div>
<div class="sect2" title="47.20.5. Examining Results">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.service.strikeiron.examining-results"></a>47.20.5. Examining Results</h3></div></div></div>
<p>
        When learning or debugging the StrikeIron services, it's often useful to dump the
        result returned from a method call. The result will always be an object that is an
        instance of <code class="classname">Zend_Service_StrikeIron_Decorator</code>. This is a
        small decorator
        object that wraps the results from the method call.
      </p>
<p>
        The simplest way to examine a result from the service is to use the built-in
        PHP functions like print_r():

        </p>
<pre class="code">
&lt;?php
$strikeIron = new Zend_Service_StrikeIron(array('username' =&gt; 'your-username',
                                                'password' =&gt; 'your-password'));

$taxBasic = $strikeIron-&gt;getService(array('class' =&gt; 'SalesUseTaxBasic'));

$rateInfo = $taxBasic-&gt;getTaxRateCanada(array('province' =&gt; 'ontario'));
print_r($rateInfo);
?&gt;

Zend_Service_StrikeIron_Decorator Object
(
    [_name:protected] =&gt; GetTaxRateCanadaResult
    [_object:protected] =&gt; stdClass Object
        (
            [abbreviation] =&gt; ON
            [province] =&gt; ONTARIO
            [GST] =&gt; 0.06
            [PST] =&gt; 0.08
            [total] =&gt; 0.14
            [HST] =&gt; Y
        )
)
</pre>
<p>
      </p>
<p>
        In the output above, we see that the decorator (<code>$rateInfo</code>) wraps an object
        named <code>GetTaxRateCanadaResult</code>, the result of the call to <code>getTaxRateCanada()</code>.
      </p>
<p>
        This means that <code>$rateInfo</code> has public properties like <code>abbreviation</code>,
        <code>province</code>, and <code>GST</code>. These are accessed like <code>$rateInfo-&gt;province</code>.
      </p>
<div class="tip" title="提示"><table border="0" summary="Tip">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[提示]" src="performance.database.html"></td>
<th align="left">提示</th>
</tr>
<tr><td align="left" valign="top"><p>
          StrikeIron result properties sometimes start with an uppercase
          letter such as <code>Foo</code> or <code>Bar</code> where most PHP object
          properties normally start with a lowercase letter as in <code>foo</code> or
          <code>bar</code>. The decorator will automatically do this inflection so you
          may read a property <code>Foo</code> as <code>foo</code>.
        </p></td></tr>
</table></div>
<p>
        If you ever need to get the original object or its name out of the decorator, use the
        respective methods <code>getDecoratedObject()</code> and <code>getDecoratedObjectName()</code>.
      </p>
</div>
<div class="sect2" title="47.20.6. Handling Errors">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.service.strikeiron.handling-errors"></a>47.20.6. Handling Errors</h3></div></div></div>
<p>
        The previous examples are naive, i.e. no error handling was shown.
        It's possible that StrikeIron will return a fault during a method
        call. Events like bad account credentials or an expired subscription
        can cause StrikeIron to raise a fault.
      </p>
<p>
        An exception will be thrown when such a fault occurs. You should
        anticipate and catch these exceptions when making method calls to the
        service:

        </p>
<pre class="code">
$strikeIron = new Zend_Service_StrikeIron(array('username' =&gt; 'your-username',
                                                'password' =&gt; 'your-password'));

$taxBasic = $strikeIron-&gt;getService(array('class' =&gt; 'SalesUseTaxBasic'));

try {

  $taxBasic-&gt;getTaxRateCanada(array('province' =&gt; 'ontario'));

} catch (Zend_Service_StrikeIron_Exception $e) {

  // error handling for events like connection
  // problems or subscription errors

}
</pre>
<p>
        The exceptions thrown will always be <code class="classname">Zend_Service_StrikeIron_Exception</code>.
      </p>
<p>
        It's important to understand the difference between exceptions and
        normal failed method calls. Exceptions occur for
        <span class="emphasis"><em>exceptional</em></span> conditions, such as
        the network going down or your subscription expiring.
        Failed method calls that are a common occurrence,
        such as <code>getTaxRateCanada()</code> not finding the
        <code>province</code> you supplied, will not result an in exception.
      </p>
<div class="note" title="注意"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[注意]" src="images/note.png"></td>
<th align="left">注意</th>
</tr>
<tr><td align="left" valign="top"><p>
          Every time you make a method call to a StrikeIron service, you
          should check the response object for validity and also be
          prepared to catch an exception.
        </p></td></tr>
</table></div>
<p></p>
</div>
<div class="sect2" title="47.20.7. Checking Your Subscription">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.service.strikeiron.checking-subscription"></a>47.20.7. Checking Your Subscription</h3></div></div></div>
<p>
        StrikeIron provides many different services. Some of these are
        free, some are available on a trial basis, and some are pay subscription only.
        When using StrikeIron, it's important to be aware of your subscription
        status for the services you are using and check it regularly.
      </p>
<p>
        Each StrikeIron client returned by the <code>getService</code> method
        has the ability to check the subscription status for that service using
        the <code>getSubscriptionInfo()</code> method of the client:

        </p>
<pre class="code">
// Get a client for the Sales &amp; Use Tax Basic service
$strikeIron = new Zend_Service_StrikeIron(array('username' =&gt; 'your-username',
                                                'password' =&gt; 'your-password'));

$taxBasic = $strikeIron-&gt;getService(array('class =&gt; 'SalesUseTaxBasic'));

// Check remaining hits for the Sales &amp; Use Tax Basic service
$subscription = $taxBasic-&gt;getSubscriptionInfo();
echo $subscription-&gt;remainingHits;
</pre>
<p>
      </p>
<p>
        The <code>getSubscriptionInfo()</code> method will return an object
        that typically has a <code>remainingHits</code> property. It's
        important to check the status on each service that you are using. If
        a method call is made to StrikeIron after the remaining hits have been
        used up, an exception will occur.
      </p>
<p>
        Checking your subscription to a service does not use any remaining
        hits to the service. Each time any method call to the service is made,
        the number of hits remaining will be cached and this cached value will
        be returned by <code>getSubscriptionInfo()</code> without connecting
        to the service again. To force <code>getSubscriptionInfo()</code>
        to override its cache and query the subscription information again, use
        <code>getSubscriptionInfo(true)</code>.
      </p>
</div>
</div>
<div class="revinfo"></div>


<!--start of htmlend-->

<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->