<!--hmt-->
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end --><!--end of htmlheader-->

<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->
<!--end of htmlmiddle-->



<div class="chapter" title="第 53 章 Zend_TimeSync">
<div class="titlepage"><div><div><h2 class="title">
<a name="zend.timesync"></a>第 53 章 Zend_TimeSync</h2></div></div></div>
<div class="toc">
<p><b>目录</b></p>
<dl>
<dt><span class="sect1"><a href="zend.timesync.html#zend.timesync.introduction">53.1. Introduction</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="zend.timesync.html#zend.timesync.introduction.why">53.1.1. Why Zend_TimeSync ?</a></span></dt>
<dt><span class="sect2"><a href="zend.timesync.html#zend.timesync.introduction.ntp">53.1.2. What is NTP ?</a></span></dt>
<dt><span class="sect2"><a href="zend.timesync.html#zend.timesync.introduction.sntp">53.1.3. What is SNTP?</a></span></dt>
<dt><span class="sect2"><a href="zend.timesync.html#zend.timesync.introduction.problematic">53.1.4. Problematic usage</a></span></dt>
<dt><span class="sect2"><a href="zend.timesync.html#zend.timesync.introduction.decision">53.1.5. Decide which server to use</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="zend.timesync.working.html">53.2. Working with Zend_TimeSync</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="zend.timesync.working.html#zend.timesync.working.generic">53.2.1. Generic Time Server Request</a></span></dt>
<dt><span class="sect2"><a href="zend.timesync.working.html#zend.timesync.working.multiple">53.2.2. Multiple Time Servers</a></span></dt>
<dt><span class="sect2"><a href="zend.timesync.working.html#zend.timesync.working.protocol">53.2.3. Protocols of Time Servers</a></span></dt>
<dt><span class="sect2"><a href="zend.timesync.working.html#zend.timesync.working.ports">53.2.4. Using Ports for Time Servers</a></span></dt>
<dt><span class="sect2"><a href="zend.timesync.working.html#zend.timesync.working.options">53.2.5. Time Servers Options</a></span></dt>
<dt><span class="sect2"><a href="zend.timesync.working.html#zend.timesync.working.different">53.2.6. Using Different Time Servers</a></span></dt>
<dt><span class="sect2"><a href="zend.timesync.working.html#zend.timesync.working.informations">53.2.7. Information from Time Servers</a></span></dt>
<dt><span class="sect2"><a href="zend.timesync.working.html#zend.timesync.working.exceptions">53.2.8. Handling Exceptions</a></span></dt>
</dl></dd>
</dl>
</div>
<div class="sect1" title="53.1. Introduction">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.timesync.introduction"></a>53.1. Introduction</h2></div></div></div>
<p>
        <code class="classname">Zend_TimeSync</code> is able to receive internet or network time from a time server using
        the <span class="emphasis"><em>NTP</em></span> or <span class="emphasis"><em>SNTP</em></span> protocol.
        With <code class="classname">Zend_TimeSync</code>, Zend Framework is able to act independently from the
        time settings of the server where it is running.
    </p>
<p>
        To be independent from the actual time of the server, <code class="classname">Zend_TimeSync</code>
        works with the difference of the real time which is sent through NTP or SNTP and the internal
        server's time.
    </p>
<div class="note" title="Background"><table border="0" summary="Note: Background">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[注意]" src="images/note.png"></td>
<th align="left">Background</th>
</tr>
<tr><td align="left" valign="top"><p>
            <code class="classname">Zend_TimeSync</code> is not able to change the server's time, but it will return a
            <a class="link" href="zend.date.html#zend.date.introduction" title="14.1.  简介">Zend_Date</a> instance from which the difference
            from the server's time can be worked with.
        </p></td></tr>
</table></div>
<div class="sect2" title="53.1.1. Why Zend_TimeSync ?">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.timesync.introduction.why"></a>53.1.1. Why Zend_TimeSync ?</h3></div></div></div>
<p>
            So why would someone use <code class="classname">Zend_TimeSync</code> ?
        </p>
<p>
            Normally every server within a multi-server farm will have a service running which synchronizes
            its own time with a time server. So within a standard environment it should not be necessary to
            use <code class="classname">Zend_TimeSync</code>. But it can become handy if there is no service available and if
            you don't have the right to install such a service.
        </p>
<p>
            Here are some example use cases, for which <code class="classname">Zend_TimeSync</code> is perfect suited:
        </p>
<div class="itemizedlist"><ul class="itemizedlist" type="opencircle">
<li class="listitem" style="list-style-type: circle">
<p>
                    <span class="emphasis"><em>Server without time service</em></span>
                </p>
<p>
                    If your application is running on a server and this server does not have any time service
                    running, it may make sense to use <code class="classname">Zend_TimeSync</code> in your application.
                </p>
</li>
<li class="listitem" style="list-style-type: circle">
<p>
                    <span class="emphasis"><em>Separate database server</em></span>
                </p>
<p>
                    If your database is running on a different server and this server is not connected
                    with <span class="emphasis"><em>NTP</em></span> or <span class="emphasis"><em>SNTP</em></span>
                    to the application server, you might have problems using storing and using time stamp data.
                </p>
</li>
<li class="listitem" style="list-style-type: circle">
<p>
                    <span class="emphasis"><em>Multiple servers</em></span>
                </p>
<p>
                    If your application is running on more than one server and these servers' time bases
                    are not syncronized, you can expect problems within your application when part of
                    the application is coming from one server and another part from another server.
                </p>
</li>
<li class="listitem" style="list-style-type: circle">
<p>
                    <span class="emphasis"><em>Batch processing</em></span>
                </p>
<p>
                    If you want to work with a time service within a batch file or within a
                    command line application, <code class="classname">Zend_TimeSync</code> may be of use.
                </p>
</li>
</ul></div>
<p>
            <code class="classname">Zend_TimeSync</code> may provide a good solution in all of these cases and can be used if you are
            unable to run any services on your server.
        </p>
</div>
<div class="sect2" title="53.1.2. What is NTP ?">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.timesync.introduction.ntp"></a>53.1.2. What is NTP ?</h3></div></div></div>
<p>
            The <code>Network Time Protocol</code> (<span class="emphasis"><em>NTP</em></span>) is a protocol
            for synchronizing multiple systems' clocks over packet-switched, variable-latency data
            networks. NTP uses UDP port 123 as its transport layer. See the
            wikipedia article
            for details about this protocol.
        </p>
</div>
<div class="sect2" title="53.1.3. What is SNTP?">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.timesync.introduction.sntp"></a>53.1.3. What is SNTP?</h3></div></div></div>
<p>
            The <code>Simple Network Time Protocol</code> (<span class="emphasis"><em>SNTP</em></span>) is a
            protocol synchronizing multiple systems' clocks over packet-switched, variable-latency
            data networks. SNTP uses UDP port 37 as its transport layer. It is closely related to the
            Network Time Protocol, but simpler.
        </p>
</div>
<div class="sect2" title="53.1.4. Problematic usage">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.timesync.introduction.problematic"></a>53.1.4. Problematic usage</h3></div></div></div>
<p>
            Be warned that when you are using <code class="classname">Zend_TimeSync</code> you will have to think about some
            details related to the structure of time sync and the internet itself. Correct usage
            and best practices will be described here. Read carefully before you begin using <code class="classname">Zend_TimeSync</code>.
        </p>
</div>
<div class="sect2" title="53.1.5. Decide which server to use">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.timesync.introduction.decision"></a>53.1.5. Decide which server to use</h3></div></div></div>
<p>
            You should select the time server that you want to use very carefully according to the following criteria:
        </p>
<div class="itemizedlist"><ul class="itemizedlist" type="opencircle">
<li class="listitem" style="list-style-type: circle">
<p>
                    Distance
                </p>
<p>
                    The distance from your application server to the time server.
                    If your server is in Europe, it would make little sense to select a time server in
                    Tahiti. Always select a server which is not far away. This reduces the request time and overall network load.
                </p>
</li>
<li class="listitem" style="list-style-type: circle">
<p>
                    Speed
                </p>
<p>
                    How long it takes to receive the request is also relevant. Try different servers to get the
                    best result. If you are requesting a server which is never accessible, you will always
                    have an unnecessary delay.
                </p>
</li>
<li class="listitem" style="list-style-type: circle">
<p>
                    Splitting
                </p>
<p>
                    Do not always use the same server. All time servers will lock out requests from servers that
                    are flooding the server. If your application requires heavy use of time servers, you
                    should consider one of the pools described later.
                </p>
</li>
</ul></div>
<p>
            So where can you find a time server? Generally you can use any timeserver you can connect to. This can be
            a time server within your LAN or any public time server you have access to. If you decide to use a public
            time server, you should consider using a server pool. Server pools are public addresses from which you will get
            a random, pooled time server by requesting the time. This way you will not have to split your
            requests. There are public server pools available for many regions which you may use to avoid
            problems mentioned above.
        </p>
<p>
            See pool.ntp.org to find your nearest
            server pool. For example, if your server is located within Germany you can connect to
            <code>0.europe.pool.ntp.org</code>.
        </p>
</div>
</div>
</div>
<div class="revinfo"></div>


<!--start of htmlend-->

<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->