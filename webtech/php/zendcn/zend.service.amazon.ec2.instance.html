<!--hmt-->
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end --><!--end of htmlheader-->

<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->
<!--end of htmlmiddle-->



<div class="sect1" title="47.5. Zend_Service_Amazon_Ec2: Instances">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.service.amazon.ec2.instance"></a>47.5. Zend_Service_Amazon_Ec2: Instances</h2></div></div></div>
<div class="sect2" title="47.5.1. Instance Types">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.service.amazon.ec2.instance.types"></a>47.5.1. Instance Types</h3></div></div></div>
<p>
            Amazon EC2 instances are grouped into two families: standard and
            High-CPU. Standard instances have memory to CPU ratios suitable
            for most general purpose applications; High-CPU instances have
            proportionally more CPU resources than memory (RAM) and are well
            suited for compute-intensive applications. When selecting instance
            types, you might want to use less powerful instance types for your
            web server instances and more powerful instance types for your
            database instances. Additionally, you might want to run CPU instance
            types for CPU-intensive data processing tasks.
        </p>
<p>
            One of the advantages of EC2 is that you pay by the instance hour,
            which makes it convenient and inexpensive to test the performance of
            your application on different instance families and types. One good
            way to determine the most appropriate instance family and instance
            type is to launch test instances and benchmark your application.
        </p>
<div class="note" title="Instance Types"><table border="0" summary="Note: Instance Types">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[注意]" src="images/note.png"></td>
<th align="left">Instance Types</th>
</tr>
<tr><td align="left" valign="top"><p>
                The instance types are defined as constants in the code. Column eight
                in the table is the defined constant name
            </p></td></tr>
</table></div>
<div class="table">
<a name="zend.service.amazon.ec2.instance.types-table"></a><p class="title"><b>表 47.10. Available Instance Types</b></p>
<div class="table-contents"><table summary="Available Instance Types" border="1">
<colgroup>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>Type</th>
<th>CPU</th>
<th>Memory</th>
<th>Storage</th>
<th>Platform</th>
<th>I/O</th>
<th>Name</th>
<th>Constant Name</th>
</tr></thead>
<tbody>
<tr>
<td><code>Small</code></td>
<td><p>
                            1 EC2 Compute Unit (1 virtual core with 1 EC2
                            Compute Unit)
                        </p></td>
<td><p>
                            1.7 GB
                        </p></td>
<td><p>
                            160 GB instance storage (150 GB plus 10 GB root
                            partition)
                        </p></td>
<td><p>
                            32-bit
                        </p></td>
<td><p>
                            Moderate
                        </p></td>
<td><p>
                            m1.small
                        </p></td>
<td><code class="classname">Zend_Service_Amazon_Ec2_Instance::SMALL</code></td>
</tr>
<tr>
<td><code>Large</code></td>
<td><p>
                            4 EC2 Compute Units (2 virtual cores with 2 EC2
                            Compute Units each)
                        </p></td>
<td><p>
                            7.5 GB
                        </p></td>
<td><p>
                            850 GB instance storage (2 x 420 GB plus 10
                            GB root partition)
                        </p></td>
<td><p>
                            64-bit
                        </p></td>
<td><p>
                            High
                        </p></td>
<td><p>
                            m1.large
                        </p></td>
<td><code class="classname">Zend_Service_Amazon_Ec2_Instance::LARGE</code></td>
</tr>
<tr>
<td><code>Extra Large</code></td>
<td><p>
                            8 EC2 Compute Units (4 virtual cores with 2 EC2
                            Compute Units each)
                        </p></td>
<td><p>
                            15 GB
                        </p></td>
<td><p>
                            1,690 GB instance storage (4 x 420 GB plus 10
                            GB root partition)
                        </p></td>
<td><p>
                            64-bit
                        </p></td>
<td><p>
                            High
                        </p></td>
<td><p>
                            m1.xlarge
                        </p></td>
<td><code class="classname">Zend_Service_Amazon_Ec2_Instance::XLARGE</code></td>
</tr>
<tr>
<td><code>High-CPU Medium</code></td>
<td><p>
                            5 EC2 Compute Units (2 virtual cores with 2.5 EC2
                            Compute Units each)
                        </p></td>
<td><p>
                            1.7 GB
                        </p></td>
<td><p>
                            350 GB instance storage (340 GB plus 10
                            GB root partition)
                        </p></td>
<td><p>
                            32-bit
                        </p></td>
<td><p>
                            Moderate
                        </p></td>
<td><p>
                            c1.medium
                        </p></td>
<td><code class="classname">Zend_Service_Amazon_Ec2_Instance::HCPU_MEDIUM</code></td>
</tr>
<tr>
<td><code>High-CPU Extra Large</code></td>
<td><p>
                            20 EC2 Compute Units (8 virtual cores with 2.5 EC2
                            Compute Units each)
                        </p></td>
<td><p>
                            7 GB
                        </p></td>
<td><p>
                            1,690 GB instance storage (4 x 420 GB plus 10
                            GB root partition)
                        </p></td>
<td><p>
                            64-bit
                        </p></td>
<td><p>
                            High
                        </p></td>
<td><p>
                            c1.xlarge
                        </p></td>
<td><code class="classname">Zend_Service_Amazon_Ec2_Instance::HCPU_XLARGE</code></td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break">
</div>
<div class="sect2" title="47.5.2. Running Amazon EC2 Instances">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.service.amazon.ec2.instance.operations"></a>47.5.2. Running Amazon EC2 Instances</h3></div></div></div>
<p>
            This section describes the operation methods for maintaining Amazon EC2 Instances.
        </p>
<div class="example">
<a name="zend.service.amazon.ec2.instance.operations.run"></a><p class="title"><b>例 47.13. Starting New Ec2 Instances</b></p>
<div class="example-contents">
<p>
                <code>run</code> will launch a specified number of EC2 Instances.
                <code>run</code> takes an array of parameters to start, below is a table
                containing the valid values.
            </p>
<p>
            </p>
<div class="table">
<a name="zend.service.amazon.ec2.instance.operations.run-table"></a><p class="title"><b>表 47.11. Valid Run Options</b></p>
<div class="table-contents"><table summary="Valid Run Options" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>Name</th>
<th>Description</th>
<th>Required</th>
</tr></thead>
<tbody>
<tr>
<td><code>imageId</code></td>
<td><p>
                                ID of the AMI with which to launch instances.
                            </p></td>
<td><p>Yes</p></td>
</tr>
<tr>
<td><code>minCount</code></td>
<td><p>
                                Minimum number of instances to launch. Default: 1
                            </p></td>
<td><p>No</p></td>
</tr>
<tr>
<td><code>maxCount</code></td>
<td><p>
                                Maximum number of instances to launch. Default: 1
                            </p></td>
<td><p>No</p></td>
</tr>
<tr>
<td><code>keyName</code></td>
<td><p>
                                Name of the key pair with which to launch instances.
                                If you do not provide a key, all instances will
                                be inaccessible.
                            </p></td>
<td><p>No</p></td>
</tr>
<tr>
<td><code>securityGroup</code></td>
<td><p>
                                Names of the security groups with which to associate
                                the instances.
                            </p></td>
<td><p>No</p></td>
</tr>
<tr>
<td><code>userData</code></td>
<td><p>
                                The user data available to the launched instances.
                                This should not be Base64 encoded.
                            </p></td>
<td><p>No</p></td>
</tr>
<tr>
<td><code>instanceType</code></td>
<td><p>
                                Specifies the instance type. Default: m1.small
                            </p></td>
<td><p>No</p></td>
</tr>
<tr>
<td><code>placement</code></td>
<td><p>
                                Specifies the availability zone in which to
                                launch the instance(s). By default, Amazon
                                EC2 selects an availability zone for you.
                            </p></td>
<td><p>No</p></td>
</tr>
<tr>
<td><code>kernelId</code></td>
<td><p>
                                The ID of the kernel with which to launch
                                the instance.
                            </p></td>
<td><p>No</p></td>
</tr>
<tr>
<td><code>ramdiskId</code></td>
<td><p>
                                The ID of the RAM disk with which to launch
                                the instance.
                            </p></td>
<td><p>No</p></td>
</tr>
<tr>
<td><code>blockDeviceVirtualName</code></td>
<td><p>
                                Specifies the virtual name to map to the
                                corresponding device name. For example:
                                instancestore0
                            </p></td>
<td><p>No</p></td>
</tr>
<tr>
<td><code>blockDeviceName</code></td>
<td><p>
                                 Specifies the device to which you are
                                 mapping a virtual name. For example: sdb
                            </p></td>
<td><p>No</p></td>
</tr>
<tr>
<td><code>monitor</code></td>
<td><p>
                                 Turn on AWS CloudWatch Instance Monitoring
                            </p></td>
<td><p>No</p></td>
</tr>
</tbody>
</table></div>
</div>
<p><br class="table-break">
            </p>
<p>
                <code>run</code> will return information about each instance
                that is starting up.
            </p>
<pre class="code">
$ec2_instance = new Zend_Service_Amazon_Ec2_Instance('aws_key',
                                                     'aws_secret_key');
$return = $ec2_instance-&gt;run(array('imageId' =&gt; 'ami-509320',
                                   'keyName' =&gt; 'myKey',
                                   'securityGroup' =&gt; array('web',
                                                            'default')));
</pre>
</div>
</div>
<br class="example-break"><div class="example">
<a name="zend.service.amazon.ec2.instance.operations.reboot"></a><p class="title"><b>例 47.14. Rebooting an Ec2 Instances</b></p>
<div class="example-contents">
<p>
                <code>reboot</code> will reboot one or more instances.
            </p>
<p>
                This operation is asynchronous; it only queues a request to
                reboot the specified instance(s). The operation will succeed
                if the instances are valid and belong to the user. Requests
                to reboot terminated instances are ignored.
            </p>
<p>
                <code>reboot</code> returns boolean true or false
            </p>
<pre class="code">
$ec2_instance = new Zend_Service_Amazon_Ec2_Instance('aws_key',
                                                     'aws_secret_key');
$return = $ec2_instance-&gt;reboot('instanceId');
</pre>
</div>
</div>
<br class="example-break"><div class="example">
<a name="zend.service.amazon.ec2.instance.operations.terminate"></a><p class="title"><b>例 47.15. Terminating an Ec2 Instances</b></p>
<div class="example-contents">
<p>
                <code>terminate</code> shuts down one or more instances. This
                operation is idempotent; if you terminate an instance more
                than once, each call will succeed.
            </p>
<p>
                <code>terminate</code> returns boolean true or false
            </p>
<pre class="code">
$ec2_instance = new Zend_Service_Amazon_Ec2_Instance('aws_key',
                                                     'aws_secret_key');
$return = $ec2_instance-&gt;terminate('instanceId');
</pre>
</div>
</div>
<br class="example-break"><div class="note" title="Terminated Instances"><table border="0" summary="Note: Terminated Instances">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[注意]" src="images/note.png"></td>
<th align="left">Terminated Instances</th>
</tr>
<tr><td align="left" valign="top"><p>Terminated instances will remain visible after termination
            (approximately one hour).</p></td></tr>
</table></div>
</div>
<div class="sect2" title="47.5.3. Amazon Instance Utilities">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.service.amazon.ec2.instance.utility"></a>47.5.3. Amazon Instance Utilities</h3></div></div></div>
<p>
            In this section you will find out how to retreive information, the console
            output and see if an instance contains a product code.
        </p>
<div class="example">
<a name="zend.service.amazon.ec2.instance.utility.describe"></a><p class="title"><b>例 47.16. Describing Instances</b></p>
<div class="example-contents">
<p>
                <code>describe</code> returns information about instances that you own.
            </p>
<p>
                If you specify one or more instance IDs, Amazon EC2 returns information
                for those instances. If you do not specify instance IDs, Amazon EC2
                returns information for all relevant instances. If you specify an invalid
                instance ID, a fault is returned. If you specify an instance that you do
                not own, it will not be included in the returned results.
            </p>
<p>
                <code>describe</code> will return an array containing information on the
                instance.
            </p>
<pre class="code">
$ec2_instance = new Zend_Service_Amazon_Ec2_Instance('aws_key',
                                                     'aws_secret_key');
$return = $ec2_instance-&gt;describe('instanceId');
</pre>
</div>
</div>
<br class="example-break"><div class="note" title="Terminated Instances"><table border="0" summary="Note: Terminated Instances">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[注意]" src="images/note.png"></td>
<th align="left">Terminated Instances</th>
</tr>
<tr><td align="left" valign="top"><p>Recently terminated instances might appear in the returned results.
                This interval is usually less than one hour. If you do not want terminated
                instances to be returned, pass in a second variable of boolean true to
                <code>describe</code> and the terminated instances will be ignored.</p></td></tr>
</table></div>
<div class="example">
<a name="zend.service.amazon.ec2.instance.utility.describebyimageid"></a><p class="title"><b>例 47.17. Describing Instances By Image Id</b></p>
<div class="example-contents">
<p>
                <code>describeByImageId</code> is functionally the same as <code>describe</code>
                but it will only return the instances that are using the provided imageId.
            </p>
<p>
                <code>describeByImageId</code> will return an array containing information on the
                instances thare were started by the passed in imageId
            </p>
<pre class="code">
$ec2_instance = new Zend_Service_Amazon_Ec2_Instance('aws_key',
                                                     'aws_secret_key');
$return = $ec2_instance-&gt;describeByImageId('imageId');
</pre>
</div>
</div>
<br class="example-break"><div class="note" title="Terminated Instances"><table border="0" summary="Note: Terminated Instances">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[注意]" src="images/note.png"></td>
<th align="left">Terminated Instances</th>
</tr>
<tr><td align="left" valign="top"><p>Recently terminated instances might appear in the returned results.
                This interval is usually less than one hour. If you do not want terminated
                instances to be returned, pass in a second variable of boolean true to
                <code>describe</code> and the terminated instances will be ignored.</p></td></tr>
</table></div>
<div class="example">
<a name="zend.service.amazon.ec2.instance.utility.consoleOutput"></a><p class="title"><b>例 47.18. Retreiving Console Output</b></p>
<div class="example-contents">
<p>
                <code>consoleOutput</code> retrieves console output for the specified
                instance.
            </p>
<p>
                Instance console output is buffered and posted shortly after instance
                boot, reboot, and termination. Amazon EC2 preserves the most recent
                64 KB output which will be available for at least one hour after the
                most recent post.
            </p>
<p>
                <code>consoleOutput</code> returns an array containing the
                <code>instanceId</code>, <code>timestamp</code> from the last output
                and the <code>output</code> from the console.
            </p>
<pre class="code">
$ec2_instance = new Zend_Service_Amazon_Ec2_Instance('aws_key',
                                                     'aws_secret_key');
$return = $ec2_instance-&gt;consoleOutput('instanceId');
</pre>
</div>
</div>
<br class="example-break"><div class="example">
<a name="zend.service.amazon.ec2.instance.utility.confirmproduct"></a><p class="title"><b>例 47.19. Confirm Product Code on an Instance</b></p>
<div class="example-contents">
<p>
                <code>confirmProduct</code> returns true if the specified product code
                is attached to the specified instance. The operation returns false if
                the product code is not attached to the instance.
            </p>
<p>
                The <code>confirmProduct</code> operation can only be executed by the
                owner of the AMI. This feature is useful when an AMI owner is providing
                support and wants to verify whether a user's instance is eligible.
            </p>
<pre class="code">
$ec2_instance = new Zend_Service_Amazon_Ec2_Instance('aws_key',
                                                     'aws_secret_key');
$return = $ec2_instance-&gt;confirmProduct('productCode', 'instanceId');
</pre>
</div>
</div>
<br class="example-break"><div class="example">
<a name="zend.service.amazon.ec2.instance.utility.monitor"></a><p class="title"><b>例 47.20. Turn on CloudWatch Monitoring on an Instance(s)</b></p>
<div class="example-contents">
<p>
                <code>monitor</code> returns the list of instances and their
				current state of the CloudWatch Monitoring.  If the instance
				does not currently have Monitoring enabled it will be turned on.
            </p>
<pre class="code">
$ec2_instance = new Zend_Service_Amazon_Ec2_Instance('aws_key',
                                                     'aws_secret_key');
$return = $ec2_instance-&gt;monitor('instanceId');
</pre>
</div>
</div>
<br class="example-break"><div class="example">
<a name="zend.service.amazon.ec2.instance.utility.unmonitor"></a><p class="title"><b>例 47.21. Turn off CloudWatch Monitoring on an Instance(s)</b></p>
<div class="example-contents">
<p>
                <code>monitor</code> returns the list of instances and their
				current state of the CloudWatch Monitoring.  If the instance
				currently has Monitoring enabled it will be turned off.
            </p>
<pre class="code">
$ec2_instance = new Zend_Service_Amazon_Ec2_Instance('aws_key',
                                                     'aws_secret_key');
$return = $ec2_instance-&gt;unmonitor('instanceId');
</pre>
</div>
</div>
<br class="example-break">
</div>
</div>
<div class="revinfo"></div>


<!--start of htmlend-->

<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->