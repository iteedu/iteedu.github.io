<!--hmt-->
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end --><!--end of htmlheader-->

<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->
<!--end of htmlmiddle-->



<div class="chapter" title="第 25 章 Zend_Http">
<div class="titlepage"><div><div><h2 class="title">
<a name="zend.http"></a>第 25 章 Zend_Http</h2></div></div></div>
<div class="toc">
<p><b>目录</b></p>
<dl>
<dt><span class="sect1"><a href="zend.http.html#zend.http.client">25.1. Zend_Http_Client - 介绍</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="zend.http.html#zend.http.client.introduction">25.1.1. 介绍</a></span></dt>
<dt><span class="sect2"><a href="zend.http.html#zend.http.client.configuration">25.1.2. 配置参数</a></span></dt>
<dt><span class="sect2"><a href="zend.http.html#zend.http.client.basic-requests">25.1.3. 执行基本 HTTP 请求</a></span></dt>
<dt><span class="sect2"><a href="zend.http.html#zend.http.client.parameters">25.1.4. 添加 GET 和 POST 参数 </a></span></dt>
<dt><span class="sect2"><a href="zend.http.html#zend.http.client.accessing_last">25.1.5. 访问最后一次的请求和响应</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="zend.http.client.advanced.html">25.2. Zend_Http_Client - Advanced Usage</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="zend.http.client.advanced.html#zend.http.client.redirections">25.2.1. HTTP Redirections</a></span></dt>
<dt><span class="sect2"><a href="zend.http.client.advanced.html#zend.http.client.cookies">25.2.2. Adding Cookies and Using Cookie Persistence</a></span></dt>
<dt><span class="sect2"><a href="zend.http.client.advanced.html#zend.http.client.custom_headers">25.2.3. Setting Custom Request Headers</a></span></dt>
<dt><span class="sect2"><a href="zend.http.client.advanced.html#zend.http.client.file_uploads">25.2.4. File Uploads</a></span></dt>
<dt><span class="sect2"><a href="zend.http.client.advanced.html#zend.http.client.raw_post_data">25.2.5. Sending Raw POST Data</a></span></dt>
<dt><span class="sect2"><a href="zend.http.client.advanced.html#zend.http.client.http_authentication">25.2.6. HTTP Authentication</a></span></dt>
<dt><span class="sect2"><a href="zend.http.client.advanced.html#zend.http.client.multiple_requests">25.2.7. Sending Multiple Requests With the Same Client</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="zend.http.client.adapters.html">25.3. Zend_Http_Client - Connection Adapters</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="zend.http.client.adapters.html#zend.http.client.adapters.overview">25.3.1. Overview</a></span></dt>
<dt><span class="sect2"><a href="zend.http.client.adapters.html#zend.http.client.adapters.socket">25.3.2. The Socket Adapter</a></span></dt>
<dt><span class="sect2"><a href="zend.http.client.adapters.html#zend.http.client.adapters.proxy">25.3.3. The Proxy Adapter</a></span></dt>
<dt><span class="sect2"><a href="zend.http.client.adapters.html#zend.http.client.adapters.test">25.3.4. The Test Adapter</a></span></dt>
<dt><span class="sect2"><a href="zend.http.client.adapters.html#zend.http.client.adapters.curl">25.3.5. The cURL Adapter</a></span></dt>
<dt><span class="sect2"><a href="zend.http.client.adapters.html#zend.http.client.adapters.extending">25.3.6. Creating your own connection adapters</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="zend.http.cookies.html">25.4. Zend_Http_Cookie and Zend_Http_CookieJar</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="zend.http.cookies.html#zend.http.cookies.introduction">25.4.1. Introduction</a></span></dt>
<dt><span class="sect2"><a href="zend.http.cookies.html#zend.http.cookies.cookie.instantiating">25.4.2. Instantiating Zend_Http_Cookie Objects</a></span></dt>
<dt><span class="sect2"><a href="zend.http.cookies.html#zend.http.cookies.cookie.accessors">25.4.3. Zend_Http_Cookie getter methods</a></span></dt>
<dt><span class="sect2"><a href="zend.http.cookies.html#zend.http.cookies.cookie.matching">25.4.4. Zend_Http_Cookie: Matching against a scenario</a></span></dt>
<dt><span class="sect2"><a href="zend.http.cookies.html#zend.http.cookies.cookiejar">25.4.5. The Zend_Http_CookieJar Class: Instantiation</a></span></dt>
<dt><span class="sect2"><a href="zend.http.cookies.html#zend.http.cookies.cookiejar.adding_cookies">25.4.6. Adding Cookies to a Zend_Http_CookieJar object</a></span></dt>
<dt><span class="sect2"><a href="zend.http.cookies.html#zend.http.cookies.cookiejar.getting_cookies">25.4.7. Retrieving Cookies From a Zend_Http_CookieJar object</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="zend.http.response.html">25.5. Zend_Http_Response</a></span></dt>
<dd><dl><dt><span class="sect2"><a href="zend.http.response.html#zend.http.response.introduction">25.5.1. 简介</a></span></dt></dl></dd>
</dl>
</div>
<div class="sect1" title="25.1. Zend_Http_Client - 介绍">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.http.client"></a>25.1. Zend_Http_Client - 介绍</h2></div></div></div>
<div class="sect2" title="25.1.1. 介绍">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.http.client.introduction"></a>25.1.1. 介绍</h3></div></div></div>
<p>
            Zend_Http_Client 提供了一个简单的界面来执行HTTP请求。Zend_Http_Client 支持
            作为一个 HTTP 客户端应有的大多数简单功能，也包括象HTTP认证和文件上传等更加
            复杂的功能。成功的请求和大多数失败的请求将返回一个 Zend_Http_Response 对象，
            该对象提供了对响应的头部信息和主体信息的访问。
            （见<a class="xref" href="zend.http.response.html" title="25.5. Zend_Http_Response">第 25.5 节 “Zend_Http_Response”</a>）
        </p>
<p>
            构造器类可选的第一个参数可以是一个URL（字符串或者 Zend_Uri_Http 对象），
            第二个可选参数是一个包含配置参数的数组。这两个参数也可以全空，之后由
            setUri()和setConfig()方法提供。
            </p>
<div class="example">
<a name="zend.http.client.introduction.example-1"></a><p class="title"><b>例 25.1. 初始化一个 Zend_Http_Client 对象</b></p>
<div class="example-contents"><pre class="code">
$client = new Zend_Http_Client('http://example.org', array(
    'maxredirects' =&gt; 0,
    'timeout'      =&gt; 30));

// 上述代码和下面的代码是两种不同的写法
$client = new Zend_Http_Client();
$client-&gt;setUri('http://example.org');
$client-&gt;setConfig(array(
    'maxredirects' =&gt; 0,
    'timeout'      =&gt; 30));

                </pre></div>
</div>
<p><br class="example-break">
        </p>
</div>
<div class="sect2" title="25.1.2. 配置参数">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.http.client.configuration"></a>25.1.2. 配置参数</h3></div></div></div>
<p>
            构造器和 setConfig() 方法接受一个复合的配置参数数组，因为这些配置参数
            有一个缺省值，所以是否配置这些参数都是可选的。
            </p>
<div class="table">
<a name="zend.http.client.configuration.table"></a><p class="title"><b>表 25.1. Zend_Http_Client 配置参数</b></p>
<div class="table-contents"><table summary="Zend_Http_Client 配置参数" border="1">
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>参数</th>
<th>描述</th>
<th>值的类型</th>
<th>缺省值</th>
</tr></thead>
<tbody>
<tr>
<td>maxredirects</td>
<td>随后的重定向的最大值 (0 = none)</td>
<td>整数</td>
<td>5</td>
</tr>
<tr>
<td>strict</td>
<td>是否执行头部名称的确认，当设置为 False 时，将忽略确认，通常情况下不应改变这个参数的值。</td>
<td>布尔值</td>
<td>true</td>
</tr>
<tr>
<td>strictredirects</td>
<td>重定向时是否严格遵守 RFC (见 <a class="xref" href="zend.http.client.advanced.html#zend.http.client.redirections" title="25.2.1. HTTP Redirections">第 25.2.1 节 “HTTP Redirections”</a>)</td>
<td>布尔值</td>
<td>false</td>
</tr>
<tr>
<td>useragent</td>
<td>用户代理的识别字符串（含在请求的头部信息内）</td>
<td>字符串</td>
<td>'Zend_Http_Client'</td>
</tr>
<tr>
<td>timeout</td>
<td>连接超时 (单位是秒)</td>
<td>整数</td>
<td>10</td>
</tr>
<tr>
<td>httpversion</td>
<td>HTTP 协议版本 (通常是 '1.1' 或 '1.0')</td>
<td>字符串</td>
<td>'1.1'</td>
</tr>
<tr>
<td>adapter</td>
<td>连接适配器类时使用（见 <a class="xref" href="zend.http.client.adapters.html" title="25.3. Zend_Http_Client - Connection Adapters">第 25.3 节 “Zend_Http_Client - Connection Adapters”</a>）</td>
<td>多种类型</td>
<td>'Zend_Http_Client_Adapter_Socket'</td>
</tr>
<tr>
<td>keepalive</td>
<td>是否允许与服务器之间的 keep-alive 连接。如果在同一台服务器上
                            执行几个互相关联的请求时，keep-alive 连接是有用的而且有可能提高性能。</td>
<td>布尔值</td>
<td>false</td>
</tr>
<tr>
<td>storeresponse</td>
<td>是否保存上次的响应结果，以备今后使用getLastResponse()重新获取。如果设置为 false，getLastResponse() 将返回空。</td>
<td>布尔值</td>
<td>true</td>
</tr>
</tbody>
</table></div>
</div>
<p><br class="table-break">
        </p>
</div>
<div class="sect2" title="25.1.3. 执行基本 HTTP 请求">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.http.client.basic-requests"></a>25.1.3. 执行基本 HTTP 请求</h3></div></div></div>
<p>
            使用 request() 方法执行简单 HTTP 请求是件非常容易的事情，3行代码即可搞定：
            </p>
<div class="example">
<a name="zend.http.client.basic-requests.example-1"></a><p class="title"><b>例 25.2. 执行一个简单的 GET 请求</b></p>
<div class="example-contents"><pre class="code">
$client = new Zend_Http_Client('http://example.org');
$response = $client-&gt;request();

                </pre></div>
</div>
<p><br class="example-break">
            request() 带一个可选的参数 - 请求方法，它可以是 GET, POST, PUT, HEAD,
            DELETE, TRACE, OPTIONS 或 CONNECT 等由 HTTP 协议定义的方法。
            <sup>[<a name="id4910431" href="#ftn.id4910431" class="footnote">1</a>]</sup>.
            为了方便起见，这些都被定义为类的常量：即
            Zend_Http_Request::GET, Zend_Http_Request::POST 等等。
        </p>
<p>
            如果没有指定请求方法，则使用最后一次 setMethod() 设定的请求方法。
            如果从未使用 setMethod()，那么缺省的请求方法是 GET（见上述的例子）。
            </p>
<div class="example">
<a name="zend.http.client.basic-requests.example-2"></a><p class="title"><b>例 25.3. 使用 GET 以外的请求方法</b></p>
<div class="example-contents"><pre class="code">
// 执行一个 POST 请求
$response = $client-&gt;request('POST');

// 另外一种执行 POST 请求的方式
$client-&gt;setMethod(Zend_Http_Client::POST);
$response = $client-&gt;request();

                </pre></div>
</div>
<p><br class="example-break">
        </p>
</div>
<div class="sect2" title="25.1.4. 添加 GET 和 POST 参数">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.http.client.parameters"></a>25.1.4. 添加 GET 和 POST 参数 </h3></div></div></div>
<p>
            在一个HTTP请求中添加GET参数是非常简单的，既可以通过把参数指定为
            URL的一部分，也可以通过使用 setParameterGet() 方法来添加。这个方
            法把把GET参数的名称作为它的第一个参数，把GET参数的值作为它的第二
            个参数。为了方便起见，setParameterGet() 方法也能接受单个复合数组
            （名称 =&gt; 值）的 GET 参数，这种方式对于需要设置几个 GET 参数时更
            加方便。
            </p>
<div class="example">
<a name="zend.http.client.parameters.example-1"></a><p class="title"><b>例 25.4. 设置 GET 参数</b></p>
<div class="example-contents"><pre class="code">
// 使用 setParameterGet 方法设置一个 GET 参数
$client-&gt;setParameterGet('knight', 'lancelot');

// 设置 URL 的等效方法
$client-&gt;setUri('http://example.com/index.html?knight=lancelot');

// 一次添加几个参数
$client-&gt;setParameterGet(array(
    'first_name'  =&gt; 'Bender',
    'middle_name' =&gt; 'Bending'
    'made_in'     =&gt; 'Mexico',
));

                </pre></div>
</div>
<p><br class="example-break">
        </p>
<p>
            虽然 GET 参数可以和任何请求方法一起发送，但 POST 参数只能在 POST
            请求内发送。给一个请求添加 POST 参数与添加 GET 参数非常类似，是由
            setParameterPost() 方法完成的，该方法在结构上与 setParameterGet()
            方法很相似。
            </p>
<div class="example">
<a name="zend.http.client.parameters.example-2"></a><p class="title"><b>例 25.5. 设置 POST 参数</b></p>
<div class="example-contents"><pre class="code">
// 设置一个 POST 参数
$client-&gt;setParameterPost('language', 'fr');

// 设置几个 POST 参数，其中的一个参数有几个值
$client-&gt;setParameterPost(array(
    'language'  =&gt; 'es',
    'country'   =&gt; 'ar',
    'selection' =&gt; array(45, 32, 80)
));

                </pre></div>
</div>
<p><br class="example-break">
            需要注意的是，当发送 POST 请求时，即可设置GET参数，也可设置POST参数。
            另一方面，如果针对一个非 POST 请求设置 POST 参数，将不会被触发或给出
            报错，因为它是没有用的。除非请求是一个 POST 请求，POST 参数都会被简
            单地忽略掉。
        </p>
</div>
<div class="sect2" title="25.1.5. 访问最后一次的请求和响应">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.http.client.accessing_last"></a>25.1.5. 访问最后一次的请求和响应</h3></div></div></div>
<p>
            Zend_Http_Client 提供了访问客户端最后一次发送的请求和访问客户端最后
            一次接收到的响应的方法。
            <code>Zend_Http_Client-&gt;getLastRequest()</code> 不需要设置参数，同时
            返回最后一次客户端发送的HTTP请求字符串。同样，
            <code>Zend_Http_Client-&gt;getLastResponse()</code> 返回客户端接收到的
            最后一次<a class="link" href="zend.http.response.html" title="25.5. Zend_Http_Response">Zend_Http_Response</a> 对象。
        </p>
</div>
</div>
<div class="footnotes">
<br><hr width="100" align="left">
<div class="footnote"><p><sup>[<a name="ftn.id4910431" href="#id4910431" class="para">1</a>] </sup>
                见 RFC 2616 - http://www.w3.org/Protocols/rfc2616/rfc2616.html.
              </p></div>
</div>
</div>
<div class="revinfo"></div>


<!--start of htmlend-->

<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->