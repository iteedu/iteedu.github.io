<!--hmt-->
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end --><!--end of htmlheader-->

<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->
<!--end of htmlmiddle-->



<div class="sect1" title="21.4. Migrating from previous versions">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.file.transfer.migration"></a>21.4. Migrating from previous versions</h2></div></div></div>
<p>
        The API of <code class="classname">Zend_File_Transfer</code> has changed from time to time.
        If you started to use <code class="classname">Zend_File_Transfer</code> and it's subcomponents
        in earlier versions follow the guidelines below to migrate your scripts to
        use the new API.
    </p>
<div class="sect2" title="21.4.1. Migrating from 1.6 to 1.7 or newer">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.file.transfer.migration.fromonesixtooneseven"></a>21.4.1. Migrating from 1.6 to 1.7 or newer</h3></div></div></div>
<div class="sect3" title="21.4.1.1. Changes when using filters and validators">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.file.transfer.migration.fromonesixtooneseven.validators"></a>21.4.1.1. Changes when using filters and validators</h4></div></div></div>
<p>
                As noted by users, the validators from <code class="classname">Zend_File_Transfer</code>
                do not work in conjunction with <code class="classname">Zend_Config</code> due to the fact
                that they have not used named arrays.
            </p>
<p>
                Therefor, all filters and validators for <code class="classname">Zend_File_Transfer</code>
                have been reworked. While the old signatures continue to work,
                they have been marked as deprecated, and will emit a PHP notice
                asking you to fix them.
            </p>
<p>
                The following list shows you the changes you will have to do for proper
                usage of the parameters.
            </p>
<div class="sect4" title="21.4.1.1.1. Filter: Rename">
<div class="titlepage"><div><div><h5 class="title">
<a name="zend.file.transfer.migration.fromonesixtooneseven.validators.rename"></a>21.4.1.1.1. Filter: Rename</h5></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>
                        Old method API: <code class="classname">Zend_Filter_File_Rename($oldfile, $newfile,
                            $overwrite)</code>
                    </p></li>
<li class="listitem"><p>
                        New method API: <code class="classname">Zend_Filter_File_Rename($options)</code>
                        where $options accepts the following array keys:
                        <span class="emphasis"><em>source</em></span> equals to $oldfile,
                        <span class="emphasis"><em>target</em></span> equals to $newfile,
                        <span class="emphasis"><em>overwrite</em></span> equals to $overwrite
                    </p></li>
</ul></div>
<div class="example">
<a name="zend.file.transfer.migration.fromonesixonetooneseven.validators.rename.example"></a><p class="title"><b>例 21.33. Changes for the rename filter from 1.6 to 1.7</b></p>
<div class="example-contents"><pre class="code">
// Example for 1.6
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addFilter('Rename',
                   array('/path/to/oldfile', '/path/to/newfile', true));

// Same example for 1.7
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addFilter('Rename',
                   array('source' =&gt; '/path/to/oldfile',
                         'target' =&gt; '/path/to/newfile',
                         'overwrite' =&gt; true));
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect4" title="21.4.1.1.2. Validator: Count">
<div class="titlepage"><div><div><h5 class="title">
<a name="zend.file.transfer.migration.fromonesixtooneseven.validators.count"></a>21.4.1.1.2. Validator: Count</h5></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>
                        Old method API: <code class="classname">Zend_Validate_File_Count($min, $max)</code>
                    </p></li>
<li class="listitem"><p>
                        New method API: <code class="classname">Zend_Validate_File_Count($options)</code>
                        where $options accepts the following array keys:
                        <span class="emphasis"><em>min</em></span> equals to $min,
                        <span class="emphasis"><em>max</em></span> equals to $max,
                    </p></li>
</ul></div>
<div class="example">
<a name="zend.file.transfer.migration.fromonesixonetooneseven.validators.count.example"></a><p class="title"><b>例 21.34. Changes for the count validator from 1.6 to 1.7</b></p>
<div class="example-contents"><pre class="code">
// Example for 1.6
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('Count',
                      array(2, 3));

// Same example for 1.7
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('Count',
                      false,
                      array('min' =&gt; 2,
                            'max' =&gt; 3));
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect4" title="21.4.1.1.3. Validator:Extension">
<div class="titlepage"><div><div><h5 class="title">
<a name="zend.file.transfer.migration.fromonesixtooneseven.validators.extension"></a>21.4.1.1.3. Validator:Extension</h5></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>
                        Old method API: <code class="classname">Zend_Validate_File_Extension($extension,
                            $case)</code>
                    </p></li>
<li class="listitem"><p>
                        New method API:
                        <code class="classname">Zend_Validate_File_Extension($options)</code> where $options
                        accepts the following array keys:
                        <span class="emphasis"><em>*</em></span> equals to $extension and can have any other key,
                        <span class="emphasis"><em>case</em></span> equals to $case,
                    </p></li>
</ul></div>
<div class="example">
<a name="zend.file.transfer.migration.fromonesixonetooneseven.validators.extension.example"></a><p class="title"><b>例 21.35. Changes for the extension validator from 1.6 to 1.7</b></p>
<div class="example-contents"><pre class="code">
// Example for 1.6
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('Extension',
                      array('jpg,gif,bmp', true));

// Same example for 1.7
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('Extension',
                      false,
                      array('extension1' =&gt; 'jpg,gif,bmp',
                            'case' =&gt; true));
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect4" title="21.4.1.1.4. Validator: FilesSize">
<div class="titlepage"><div><div><h5 class="title">
<a name="zend.file.transfer.migration.fromonesixtooneseven.validators.filessize"></a>21.4.1.1.4. Validator: FilesSize</h5></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>
                        Old method API: <code class="classname">Zend_Validate_File_FilesSize($min, $max,
                            $bytestring)</code>
                    </p></li>
<li class="listitem"><p>
                        New method API:
                        <code class="classname">Zend_Validate_File_FilesSize($options)</code> where $options
                        accepts the following array keys:
                        <span class="emphasis"><em>min</em></span> equals to $min,
                        <span class="emphasis"><em>max</em></span> equals to $max,
                        <span class="emphasis"><em>bytestring</em></span> equals to $bytestring
                    </p></li>
</ul></div>
<p>
                    Additionally, the <code>useByteString()</code> method
                    signature has changed. It can only be used to test if the
                    validator is expecting to use byte strings in generated
                    messages. To set the value of the flag, use the
                    <code>setUseByteString()</code> method.
                </p>
<div class="example">
<a name="zend.file.transfer.migration.fromonesixonetooneseven.validators.filessize.example"></a><p class="title"><b>例 21.36. Changes for the filessize validator from 1.6 to 1.7</b></p>
<div class="example-contents"><pre class="code">
// Example for 1.6
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('FilesSize',
                   array(100, 10000, true));

// Same example for 1.7
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('FilesSize',
                      false,
                      array('min' =&gt; 100,
                            'max' =&gt; 10000,
                            'bytestring' =&gt; true));

// Example for 1.6
$upload-&gt;useByteString(true); // set flag

// Same example for 1.7
$upload-&gt;setUseByteSting(true); // set flag
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect4" title="21.4.1.1.5. Validator: Hash">
<div class="titlepage"><div><div><h5 class="title">
<a name="zend.file.transfer.migration.fromonesixtooneseven.validators.hash"></a>21.4.1.1.5. Validator: Hash</h5></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>
                        Old method API: <code class="classname">Zend_Validate_File_Hash($hash,
                            $algorithm)</code>
                    </p></li>
<li class="listitem"><p>
                        New method API: <code class="classname">Zend_Validate_File_Hash($options)</code>
                        where $options accepts the following array keys:
                        <span class="emphasis"><em>*</em></span> equals to $hash and can have any other key,
                        <span class="emphasis"><em>algorithm</em></span> equals to $algorithm,
                    </p></li>
</ul></div>
<div class="example">
<a name="zend.file.transfer.migration.fromonesixonetooneseven.validators.hash.example"></a><p class="title"><b>例 21.37. Changes for the hash validator from 1.6 to 1.7</b></p>
<div class="example-contents"><pre class="code">
// Example for 1.6
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('Hash',
                   array('12345', 'md5'));

// Same example for 1.7
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('Hash',
                      false,
                      array('hash1' =&gt; '12345',
                            'algorithm' =&gt; 'md5'));
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect4" title="21.4.1.1.6. Validator: ImageSize">
<div class="titlepage"><div><div><h5 class="title">
<a name="zend.file.transfer.migration.fromonesixtooneseven.validators.imagesize"></a>21.4.1.1.6. Validator: ImageSize</h5></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>
                        Old method API: <code class="classname">Zend_Validate_File_ImageSize($minwidth,
                            $minheight, $maxwidth, $maxheight)</code>
                    </p></li>
<li class="listitem"><p>
                        New method API:
                        <code class="classname">Zend_Validate_File_FilesSize($options)</code> where $options
                        accepts the following array keys: <span class="emphasis"><em>minwidth</em></span> equals to
                        $minwidth, <span class="emphasis"><em>maxwidth</em></span> equals to $maxwidth,
                        <span class="emphasis"><em>minheight</em></span> equals to $minheight,
                        <span class="emphasis"><em>maxheight</em></span> equals to $maxheight,
                    </p></li>
</ul></div>
<div class="example">
<a name="zend.file.transfer.migration.fromonesixonetooneseven.validators.imagesize.example"></a><p class="title"><b>例 21.38. Changes for the imagesize validator from 1.6 to 1.7</b></p>
<div class="example-contents"><pre class="code">
// Example for 1.6
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('ImageSize',
                      array(10, 10, 100, 100));

// Same example for 1.7
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('ImageSize',
                      false,
                      array('minwidth' =&gt; 10,
                            'minheight' =&gt; 10,
                            'maxwidth' =&gt; 100,
                            'maxheight' =&gt; 100));
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect4" title="21.4.1.1.7. Validator: Size">
<div class="titlepage"><div><div><h5 class="title">
<a name="zend.file.transfer.migration.fromonesixtooneseven.validators.size"></a>21.4.1.1.7. Validator: Size</h5></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>
                        Old method API: <code class="classname">Zend_Validate_File_Size($min, $max,
                            $bytestring)</code>
                    </p></li>
<li class="listitem"><p>
                        New method API: <code class="classname">Zend_Validate_File_Size($options)</code>
                        where $options accepts the following array keys:
                        <span class="emphasis"><em>min</em></span> equals to $min,
                        <span class="emphasis"><em>max</em></span> equals to $max,
                        <span class="emphasis"><em>bytestring</em></span> equals to $bytestring
                    </p></li>
</ul></div>
<div class="example">
<a name="zend.file.transfer.migration.fromonesixonetooneseven.validators.size.example"></a><p class="title"><b>例 21.39. Changes for the size validator from 1.6 to 1.7</b></p>
<div class="example-contents"><pre class="code">
// Example for 1.6
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('Size',
                      array(100, 10000, true));

// Same example for 1.7
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('Size',
                      false,
                      array('min' =&gt; 100,
                            'max' =&gt; 10000,
                            'bytestring' =&gt; true));
</pre></div>
</div>
<br class="example-break">
</div>
</div>
</div>
<div class="sect2" title="21.4.2. Migrating from 1.6.1 to 1.6.2 or newer">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.file.transfer.migration.fromonesixonetoonesixtwo"></a>21.4.2. Migrating from 1.6.1 to 1.6.2 or newer</h3></div></div></div>
<div class="sect3" title="21.4.2.1. Changes when using validators">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.file.transfer.migration.fromonesixonetoonesixtwo.validators"></a>21.4.2.1. Changes when using validators</h4></div></div></div>
<p>
                As noted by users, the validators from <code class="classname">Zend_File_Transfer</code>
                do not work the same way like the default ones from
                <code class="classname">Zend_Form</code>. <code class="classname">Zend_Form</code> allows the usage
                of a <code>breakChainOnFailure</code> parameter which breaks the validation for all
                further validators when an validation error has occurred.
            </p>
<p>
                So we added this parameter also to all existing validators from
                <code class="classname">Zend_File_Transfer</code>.
            </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>
                    Old method API: <code>addValidator($validator, $options, $files)</code>.
                </p></li>
<li class="listitem"><p>
                    New method API: <code>addValidator($validator, $breakChainOnFailure, $options,
                        $files)</code>.
                </p></li>
</ul></div>
<p>
                To migrate your scripts to the new API, simply add a <code class="constant">FALSE</code>
                after defining the wished validator.
            </p>
<div class="example">
<a name="zend.file.transfer.migration.fromonesixonetoonesixtwo.example"></a><p class="title"><b>例 21.40. How to change your file validators from 1.6.1 to 1.6.2</b></p>
<div class="example-contents"><pre class="code">
// Example for 1.6.1
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('FilesSize', array('1B', '100kB'));

// Same example for 1.6.2 and newer
// Note the added boolean false
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('FilesSize', false, array('1B', '100kB'));
</pre></div>
</div>
<br class="example-break">
</div>
</div>
</div>
<div class="revinfo"></div>


<!--start of htmlend-->

<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->