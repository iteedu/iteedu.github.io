<!--hmt-->
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end --><!--end of htmlheader-->

<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->
<!--end of htmlmiddle-->




      
        
        
        
        	<a href="index.html">目  录</a> |
        	<a href="chapter02.html">下一章 </a> |
        
     


  
    
    
    
<h1  >第一章：介绍Django</h1>
<p>本书所讲的是Django：一个可以使Web开发工作愉快并且高效的Web开发框架。 使用Django，使你能够以最小的代价构建和维护高质量的Web应用。</p>
<p>从好的方面来看，Web 开发激动人心且富于创造性；从另一面来看，它却是份繁琐而令人生厌的工作。 通过减少重复的代码，Django 使你能够专注于 web 应用上有 趣的关键性的东西。</p>
<p>为了达到这个目标，Django 提供了通用Web开发模式的高度抽象，提供了频繁进行的编程作业的快速解决方法，以及为“如何解决问题”提供了清晰明了的约定。 同时，Django 尝试留下一些方法，来让你根据需要在framework之外来开发。</p>
<p>本书的目的是将你培养成Django专家。 主要侧重于两方面：</p>
<p>第一，我们深度解释 Django 到底做了哪些工作以及如何用她构建Web应用；
<p>第二，我们将会在适当的地方讨论更高级的概念，并解释如何 在自己的项目中高效的使用这些工具。 </p>
<p>通过阅读此书，你将学会快速开发功能强大网站的技巧，并且你的代码将会十分 清晰，易于维护。 本书的代码清晰，易维护，通过学习，可以快速开发功能强大的网站。</p>

<h2  >框架是什麼?</h2>
<p>Django 在新一代的 <em>Web框架</em> 中非常出色，为什么这么说呢？</p>
<p>为回答该问题，让我们考虑一下<em>不使用</em>框架设计 Python 网页应用程序的情形。 贯穿整本书，我们多次展示不使用框架实现网站基本功能的方法，让读者认识到框架开发的方便。 （不使用框架，更多情况是没有合适的框架可用。 注意，框架开发会使你成为一个优秀的web开发者。）</p>
<p>使用python开发web，最简单，原始和直接的办法是使用cgi标准，在1998年这种方式很流行。 现在从应用角度解释它是如何工作： 首先做一个python脚本，输出HTML代码，然后保存成.cgi扩展名的文件，通过浏览器访问此文件。 就是这样。</p>
<p>如下示例，用python cgi脚本显示数据库中最新出版的10本书： 不用关心语法细节；仅仅感觉一下基本实现的方法：</p>
<pre class="code">
#!/usr/bin/env python

import MySQLdb

print &quot;Content-Type: text/html\n&quot;
print &quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;Books&lt;/title&gt;&lt;/head&gt;&quot;
print &quot;&lt;body&gt;&quot;
print &quot;&lt;h1&gt;Books&lt;/h1&gt;&quot;
print &quot;&lt;ul&gt;&quot;

connection = MySQLdb.connect(user='me', passwd='letmein', db='my_db')
cursor = connection.cursor()
cursor.execute(&quot;SELECT name FROM books ORDER BY pub_date DESC LIMIT 10&quot;)

for row in cursor.fetchall():
    print &quot;&lt;li&gt;%s&lt;/li&gt;&quot; % row[0]

print &quot;&lt;/ul&gt;&quot;
print &quot;&lt;/body&gt;&lt;/html&gt;&quot;

connection.close()
</pre>
<p>首先，用户请求cgi，脚本代码打印Content-Type行，后面跟着换行。 再接下 来是一些HTML的起始标签，然后连接数据库并执行一些查询操作，获取最新的十本书。
在遍历这些书的同时，生成一个书名的HTML列表项。 最后，输出HTML的结束标签并且关闭数据库连接。</p>
<p>像这样的一次性的动态页面，从头写起的方法并非一定不好。 其中一点： 这些代码简单易懂，就算是一个初起步的 开发者都能读明白这16行的Python的代码，而且这些代码从头到尾做了什么都能了解得一清二楚。
不需要学习额外 的背景知识，没有额外的代码需要去了解。 同样，也易于部署这16行代码，只需要将它保存为一个 <tt >latestbooks.cgi</tt> 的 文件，上传到网络服务器上，通过浏览器访问即可。</p>
<p>尽管实现很简单，还是暴露了一些问题和不便的地方。 问你自己这几个问题：</p>
<ul >
<li  ><p>应用中有多处需要连接数据库会怎样呢？ 每个独立的cgi脚本，不应该重复写数据库连接的代码。 比较实用的办法是写一个共享函数，可被多个代码调用。</p>
</li>
</ul>
<ul >
<li  ><p>一个开发人员 <em>确实</em> 需要去关注如何输出Content-Type以及完成所有操作后去关闭数据 库么？ 此类问题只会降低开发人员的工作效率，增加犯错误的几率。 那些初始化和释放 相关的工作应该交给一些通用的框架来完成。</p>
</li>
</ul>
<ul >
<li  ><p>如果这样的代码被重用到一个复合的环境中会发生什么？ 每个页面都分别对应独立的数据库和密码吗？</p>
</li>
</ul>
<ul >
<li  ><p>如果一个Web设计师，完全没有Python开发经验，但是又需要重新设计页面的话，又将 发生什么呢？ 一个字符写错了，可能导致整个应用崩溃 理想的情况是，页面显示的逻辑与从数据库中读取书本记录分隔开，这样 Web设计师的重新设计不会影响到之前的业务逻辑。</p>
</li>
</ul>
<p>以上正是Web框架致力于解决的问题。 Web框架为应用程序提供了一套程序框架， 这样你可以专注于编写清晰、易维护的代码，而无需从头做起。 简单来说，这就是Django所能做的。</p>


<h2  >MVC 设计模式</h2>
<p>让我们来研究一个简单的例子，通过该实例，你可以分辨出，通过Web框架来实现的功能与之前的方式有何不同。 下面就是通过使用Django来完成以上功能的例子： 首先，我们分成4个python的文件，(<tt >models.py</tt> , <tt >views.py</tt> , <tt >urls.py</tt> ) 和html模板文件 (<tt >latest_books.html</tt> )</p>
<pre class="code">
# models.py (the database tables)

from django.db import models

class Book(models.Model):
    name = models.CharField(max_length=50)
    pub_date = models.DateField()


# views.py (the business logic)

from django.shortcuts import render_to_response
from models import Book

def latest_books(request):
    book_list = Book.objects.order_by('-pub_date')[:10]
    return render_to_response('latest_books.html', {'book_list': book_list})


# urls.py (the URL configuration)

from django.conf.urls.defaults import *
import views

urlpatterns = patterns('',
    (r'^latest/$', views.latest_books),
)


# latest_books.html (the template)

&lt;html&gt;&lt;head&gt;&lt;title&gt;Books&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Books&lt;/h1&gt;
&lt;ul&gt;
{% for book in book_list %}
&lt;li&gt;{{ book.name }}&lt;/li&gt;
{% endfor %}
&lt;/ul&gt;
&lt;/body&gt;&lt;/html&gt;
</pre>
<p>然后，不用关心语法细节；只要用心感觉整体的设计。 这里只关注分割后的几个文件：</p>
<ul >
<li  ><p><tt >models.py</tt> 文件主要用一个 Python 类来描述数据表。 称为 <em>模型(model)</em> 。 运用这个类，你可以通过简单的 Python 的代码来创建、检索、更新、删除 数据库中的记录而无需写一条又一条的SQL语句。</p>
</li>
</ul>
<ul >
<li  ><p>views.py文件包含了页面的业务逻辑。 <tt >latest_books()</tt>函数叫做<em>视图</em>。</p>
</li>
</ul>
<ul >
<li  ><p><tt >urls.py</tt> 指出了什么样的 URL 调用什么的视图。 在这个例子中 <tt >/latest/</tt> URL 将会调用 <tt >latest_books()</tt> 这个函数。 换句话说，如果你的域名是example.com，任何人浏览网址<a  href="http://example.com/latest/">http://example.com/latest/</a>将会调用<tt >latest_books()</tt>这个函数。</p>
</li>
</ul>
<ul >
<li  ><p><tt >latest_books.html</tt> 是 html 模板，它描述了这个页面的设计是如何的。 使用带基本逻辑声明的模板语言，如<tt >{% for book in book_list %}</tt></p>
</li>
</ul>
<p>结合起来，这些部分松散遵循的模式称为模型-视图-控制器(MVC)。 简单的说， MVC 是一种软件开发的方法，它把代码的定义和数据访问的方法（模型）与请求逻辑 （控制器）还有用户接口（视图）分开来。 我们将在第5章更深入地讨论MVC。</p>
<p>这种设计模式关键的优势在于各种组件都是 <em>松散结合</em> 的。这样，每个由 Django驱动 的Web应用都有着明确的目的，并且可独立更改而不影响到其它的部分。
比如，开发者 更改一个应用程序中的 URL 而不用影响到这个程序底层的实现。 设计师可以改变 HTML 页面 的样式而不用接触 Python 代码。 数据库管理员可以重新命名数据表并且只需更改一个地方，无需从一大堆文件中进行查找和替换。</p>
<p>本书中，每个组件都有它自己的一个章节。 比如，第三章涵盖了视图，第四章是模板， 而第五章是模型。</p>


<h2  >django 历史</h2>
<p>在我们讨论代码之前我们需要先了解一下 Django 的历史。 从上面我们注意到：我们将向你展示如何不使用捷径来完成工作，以便能更好的理解捷径的原理 同样，理解django产生的背景，历史有助于理解django的实现方式。</p>
<p>如果你曾编写过网络应用程序。 那么你很有可能熟悉之前我们的 CGI 例子。</p>
<ol >
<li  ><p>从头开始编写网络应用程序。</p>
</li>
</ol>
<ol  start="2">
<li  ><p>从头编写另一个网络应用程序。</p>
</li>
</ol>
<ol  start="3">
<li  ><p>从第一步中总结（找出其中通用的代码），并运用在第二步中。</p>
</li>
</ol>
<ol  start="4">
<li  ><p>重构代码使得能在第 2 个程序中使用第 1 个程序中的通用代码。</p>
</li>
</ol>
<ol  start="5">
<li  ><p>重复 2-4 步骤若干次。</p>
</li>
</ol>
<ol  start="6">
<li  ><p>意识到你发明了一个框架。</p>
</li>
</ol>
<p>这正是为什么 Django 建立的原因！</p>
<p>Django 是从真实世界的应用中成长起来的，它是由 堪萨斯（Kansas）州 Lawrence 城中的一个 网络开发小组编写的。 它诞生于 2003 年秋天，那时 <em>Lawrence Journal-World</em> 报纸的 程序员 Adrian Holovaty 和 Simon Willison 开始用 Python 来编写程序。</p>
<p>当时他们的 World Online 小组制作并维护当地的几个新闻站点, 并在以新闻界特有的快节奏开发环境中逐渐发展。 这些站点包括有 LJWorld.com、Lawrence.com 和 KUsports.com， 记者（或管理层） 要求增加的特征或整个程序都能在计划时间内快速的被建立，这些时间通常只有几天 或几个小时。 因此，Adrian 和 Simon 开发了一种节省时间的网络程序开发框架， 这是在截止时间前能完成程序的唯一途径。</p>
<p>2005 年的夏天，当这个框架开发完成时，它已经用来制作了很多个 World Online 的站点。
当时 World Online 小组中的 Jacob Kaplan-Moss 决定把这个框架发布为一个开源软件。</p>
<p>从今往后数年，Django是一个有着数以万计的用户和贡献者，在世界广泛传播的完善开源项目。 原来的World Online的两个开发者（Adrian and Jacob）仍然掌握着django，但是其发展方向受社区团队的影响更大。</p>
<p>这些历史都是相关联的，因为她们帮助解释了很重要的两点。 第一，Django最可爱的地方 django新闻网站的背景，她提供很多特性（如第6章会说到的管理后台），非常适合内容类的网站，如Amazon.com,
craigslist.org和washingtonpost.com，都是动态的，数据库驱动的信息类网站。 （不要看到这就感到沮丧，尽管Django擅长于动态内容管理系统， 但并不表示Django主要的目的就是用来创建动态内容的网站。
某些方面 * 特别高效* 与其他方面 * 不高效*  是有区别的, django在其他方面也同样高效）</p>
<p>第二，Django的起源造就她的开源社区，因为Django来自于真实世界中的代码，而不是 来自于一个科研项目或者商业产品，她主要集中力量来解决Web开发中遇到的问题，同样 也是Django的开发者经常遇到的问题。 这样，Django每天在现有的基础上进步。 框架的 开发者对于为开发人员节省开发时间具有极大的兴趣，编写更加容易维护的程序，同时 保证程序运行的效率。 开发人员自我激励，尽量的节省时间和享受他们的工作(To put it bluntly, they eat their own dog food.) 无他，开发者动力来源于自己的目标：节省时间，快乐工作。 （坦率地讲，他们使用了自己公司的产品。）</p>


<h2  >如何阅读本书</h2>
<p>在编写本书时，我们努力尝试在可读性和参考性间做一个平衡，当然本书会偏向于可 读性。 本书的目标，之前也提过，是要将你培养成一名Django专家，我们相信，最好 的方式就是文章和充足的实例，而不是提供一堆详尽却乏味的关于Django特色的手册。 （曾经有人说过，如果仅仅教字母表是无法教会别人说话的。</p>
<p>按照这种思路，我们推荐按顺序阅读第 1-12 章。
这些章节构成了如何使用 Django 的基础；读过之后，你就可以搭建由 Django 支撑的网站了。 1-7章是核心课程，8-11章讲述django的高级应用，12章讲述部署相关的知识。 剩下的13-20章，讲述django特有的特点，可以任意顺序阅读。</p>
<p>附录部分用作参考资料。 要回忆语法或查阅 Django 某部分的功能概要时，你偶尔可能会回来翻翻这些资料以及 <a  href="http://www.djangoproject.com/">http://www.djangoproject.com/</a> 上的免费文档。</p>

<h3  >所需编程知识</h3>
<p>本书读者需要理解基本的面向过程和面向对象编程： 流程控制（ <tt >if</tt> ， <tt >while</tt> 和 <tt >for</tt> ），数据结构（列表，哈希表/字典），变量，类和对象。</p>
<p>Web开发经验，正如你所想的，也是非常有帮助的，但是对于阅读本书，并不是必须的。 通过本书，我们尽量给缺乏经验的开发人员提供在Web开发中最好的实践。</p>


<h3  >python所需知识</h3>
<p>本质上来说， Django 只不过是用 Python 编写的一组类库。 用 Django 开发站点就是使用这些类库编写 Python 代码。 因此，学习 Django 的关键就是学习如何进行 Python 编程并理解 Django 类库的运作方式。</p>
<p>如果你有Python开发经验，在学习过程中应该不会有任何问题，基本上,Django的代码并 没有使用一些黑色魔法（例如代码中的欺骗行为，某个实现解释或者理解起来十分困难）。 对你来说，学习Django就是学习她的命名规则和API。 对你而言，学习django就是学习django的格式和api</p>
<p>如果你没有使用 Python 编程的经验，你一定会学到很多东西。 它是非常易学易用的。 虽然这本书没有包括一个完整的 Python 教程， 但也算是一个恰当的介绍了 Python特征和 功能的集锦。 当然，我们推荐你读一下官方的 Python 教程，它可 以从 <a  href="http://docs.python.org/tut/">http://docs.python.org/tut/</a> 在线获得。 另外我们也推荐 Mark Pilgrims的 书 <em>Dive Into Python</em> （ <a  href="http://www.diveintopython.org/">http://www.diveintopython.org/</a> ）</p>


<h3  >Django版本支持</h3>
<p>此书内容对django 1.1兼容。</p>
<p>Django的开发者保证主要版本号向后兼容。 这意味着，你用Django 1.1写的应用，可以用于1.2，1.3，1.9等所有以1开头的版本</p>
<p>如果Django到了2.0，你的应用可能不再兼容，需要重写，但是，2.0是很遥远的事情。 对此，可以参考一下1.0的开发周期，整整3年的时间。 （这与python语言的兼容策略非常像： 在python 2.0下写的代码可以在python 2.6下运行，但不一定能在python3.0下运行</p>
<p>所以，此书覆盖1.1版本，可以使用很长时间。</p>


<h3  >获取帮助</h3>
<p>django的最大的益处是,有一群乐于助人的人在django社区上。
你可以毫无约束的提各种 问题在上面如:从django的安装,app 设计,db 设计,发布。</p>
<ul >
<li  ><p>django邮件列表是很多django用户提出问题、回答问题的地方。 可以通过<a  href="http://www.djangoproject.com/r/django-users">http://www.djangoproject.com/r/django-users</a> 来免费注册。</p>
</li>
</ul>
<ul >
<li  ><p>django irc channel如果django用户遇到什么棘手的问题希望的及时地回复是可以使用它。 在freenode IRC network加入#django</p>
</li>
</ul>


<h3  >下一章</h3>
<p>在 <a  href="../chapter02/">下一章</a>，我们将开始使用django，内容将包括安装和初始化配置。</p>




    
    
  



        
    	<a href="index.html">目  录</a> |
    	<a href="chapter02.html">下一章 </a> |










<!--start of htmlend-->

<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->