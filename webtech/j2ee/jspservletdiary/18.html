<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end -->
<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->


  <div class="lpindex"><a href="index.html">首页</a><a href="17.html"> 上一页</a><a href="19.html"> 下一页</a></div>
  <h1>JSP/Servlet: session (1)</h1>
  <p>session&#38544;含&#23545;象在&#36716;&#25442;&#20026;Servlet之后，&#23545;&#24212;于 javax.servlet.http.HttpSession型 &#24577;之&#23545;象， HttpSession&#36127;&#36131;管理客&#25143;端在&#27983;&#35272;网站期&#38388;的&#36827;程（session）信息，也就是每&#20010;操作流程&#38388;的&#29366;&#24577;&#32500;&#25252;，您&#26080;需知道&#36827;程追&#36394;的&#32454;&#33410;，就可以 &#35753;使用者在&#25968;&#20010;&#39029;面之&#38388;&#27983;&#35272;而又能保留相&#20851;的&#36827;程信息，例如在几&#20010;&#39029;面之&#38388;挑&#36873;商品并放入&#36141;物&#36710;，在最后&#36827;行&#32467;&#24080;工作。</p>
  <p> 之前在 Cookie 中介&#32461;&#36807;&#36827;程追&#36394;的三种作法，其适用与不适用的&#22330;合各不相同。您可以&#23558;何&#26102;使用何种技&#26415;&#36825;&#20010;工作交&#32473;session（HttpSession）&#23545;象&#26469;&#36127;&#36131;，相&#20851;的&#23454;作&#32454;&#33410;并不太需要您&#26469;注意（&#24403;然您愿意的&#35805;，建&#35758;您&#36824;是了解一下&#20250;更好）。</p>
  <p> &#20030;&#20010;例&#26469;&#35828;，session（HttpSession）&#20250;&#39044;&#35774;使用Cookie&#26469;追&#36394;&#36827;程，如果不行（例如使用者&#20851;&#38381;Cookie的使用），&#21017;您可以&#35797;&#30528; 使用URL rewriting，或&#35768;服&#21153;器&#20250;保留一些信息在服&#21153;器的&#20869;存或&#25968;据&#24211;甚至&#26723;案中，而只&#20256;送session id&#32473;客&#25143;端，之后&#27983;&#35272;器在每&#20010;&#35831;求中包括&#36825;&#20010;id，以&#35753;服&#21153;器取出&#23545;&#24212;的信息，具体的作法依各家容器的&#23454;作而不同。</p>
  <p> &#24635;而言之，您可以使用session（HttpSession）&#26469;&#21327;助您作&#36827;程追&#36394;，而不用&#25285;心信息在伺服端是如何保留的，而session id又是如何&#20135;生的。</p>
  下面&#31616;&#21333;的示范session的使用方式，&#23454;作一&#20010;&#31616;&#21333;的登入网&#39029;，您可以大致了解session的使用方式，首先您必&#39035;先制作一&#20010;&#31616;&#21333;的HTML窗体，它&#23558;用&#26469;&#36755;入使用者名&#31216;与密&#30721;：
  </p>
  form.html
  <pre class="code">&lt;html> 
&lt;head>&lt;title>登入页面&lt;/title>&lt;/head> 
&lt;body> 
输入密码登入：&lt;br> 
&lt;form action="login.jsp" method="POST"> 
名称：&lt;input type="text" name="user"> &lt;br> 
密码：&lt;input type="password" name="password"> &lt;br> 
&lt;input type="submit" value="登入"> 
&lt;/form> 
&lt;/body> 
&lt;/html> </pre>
  接下&#26469;撰&#20889;登入&#39564;&#35777;&#39029;面login.jsp：
  </p>
  login.jsp
  <pre class="code">&lt;%@page contentType="text/html;charset=Big5"%> 
&lt;% 
String user = request.getParameter("user"); 
String password = request.getParameter("password"); 
String memberURL = 
"http://localhost:8080/myjsp/member.jsp"; 
String loginFormURL = 
"http://localhost:8080/myjsp/form.html"; 
if(user == null || password == null) { 
response.setHeader("Refresh", "0; " + loginFormURL); 
} 
else if(user.equals("justin") && password.equals("1234")) { 
session.setAttribute("user", user); 
response.setHeader("Refresh", "3; " + memberURL); 
out.println(user + "欢迎登入！3秒后进入会员页面！"); 
} 
else { 
response.setHeader("Refresh", "3; " + loginFormURL); 
out.println(
"使用者或密码错误，请重新登入（3秒后回到登入窗体）"); 
} 
%> </pre>
  <p> 上面&#36825;&#20010;&#39029;面在&#39564;&#35777;使用者名&#31216;与密&#30721;&#26080;&#35823;之后，使用setAttribute()方法，&#23558;使用者名&#31216;存入session （HttpSession）&#23545;象中，setAttribute()可以存入任何的Java&#23545;象，在&#36825;&#36793;存入的&#23646;性名&#31216;&#20026;&quot;user&quot;，存入的&#23545;象&#20026; String&#23545;象，&#20869;容&#20026;登入者的名&#31216;，也就是&quot;justin&quot;，然后&#23558;客&#25143;端重&#23548;至&#20250;&#21592;&#39029;面，如果&#39564;&#35777;的&#32467;果不正确，就&#23558;客&#25143;端重&#23548;至登入窗体；接下&#26469; 撰&#20889;&#20250;&#21592;&#39029;面member.jsp： </p>
  member.jsp
  <pre class="code">&lt;%@page contentType="text/html;charset=Big5"%> 
&lt;% 
String loginFormURL = 
"http://localhost:8080/myjsp/form.html"; 
String user = (String) session.getAttribute("user"); 
if(user == null) { 
response.setHeader("Refresh", "3; " + loginFormURL); 
out.println(
"喔喔！您还没登入！不能偷看喔！3秒后进入登入页面");
} 
else { 
out.println("嗨！" + user + "！"); 
out.println("会员好康在这边。。。。"); 
// 立即注销 
session.invalidate(); 
} 
%> </pre>
  <p> getAttribute()可以指定&#23646;性名&#31216;取得存在session（HttpSession）中的&#23545;象，取回的型&#24577;是 Object，&#20026;了能&#22815;使用，您必&#39035;&#23558;之&#36716;&#25442;&#20026;相&#23545;&#24212;的型&#24577;，在&#36825;&#36793;&#21017;是String型&#24577;，如果之前login.jsp中&#39564;&#35777;通&#36807;的&#35805;，在&#36825;&#20010; member.jsp中就可以取得&#20648;存在session中的&#23646;性&#23545;象，如果取回的是null，表示之前&#27809;有&#35774;定&#36807;user&#23646;性，也就是在 login.jsp中&#27809;有通&#36807;&#39564;&#35777;，我&#20204;必&#39035;&#23558;之送回登入&#39029;面以重新&#36827;行登入；invalidate()可以&#35753;目前的session&#23545;象失效，我&#20204;在 member.jsp中&#25191;行&#36825;&#20010;方法，以&#23454;作注&#38144;的功能（其&#23454;也是&#20026;了&#27979;&#35797;的方便而&#35753;使用者立即注&#38144;）。</p>
  <p> 上面&#36825;&#20010;例子中，完全&#27809;有&#29301;涉到&#36827;程追&#36394;的&#23454;作&#32454;&#33410;（cookie或是URL rewriting等），一切都是交由session&#23545;象&#26469;&#36127;&#36131;，而由于session可以&#20648;存&#23545;象信息，使得&#36827;程追&#36394;所&#20851;&#32852;的信息更&#20026;丰富，但&#21364;不用增 加您&#23454;作&#36827;程追&#36394;的困&#38590;，不&#36807;上面&#36825;&#20010;例子是在&#27983;&#35272;器的Cookie功能有打&#24320;的情&#20917;下才能正常&#36816;作，如果Cookie&#27809;有&#24320;&#21551;，&#21017;我&#20204;需要作一些&#39069;外的 &#21160;作，&#36825;在下一&#20010;主&#39064;中&#35752;&#35770;。</p>
  <p> 要注意的是，session并不是&#25191;行&#32490;安全的，由于session&#20250;在客&#25143;端&#23545;&#35805;期&#38388;存在，所以&#24403;有多&#20010;&#25191;行&#32490;&#20250;存取session&#26102;，必&#39035;注意到&#25191;行&#32490;安全&#38382;&#39064;。</p>
  <div class="rpindex"><a href="19.html"> 下一页</a><a href="17.html"> 上一页</a><a href="index.html">首页</a></div>


<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->
