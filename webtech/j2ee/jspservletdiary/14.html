<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end -->
<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->


  <div class="lpindex"><a href="index.html">首页</a><a href="13.html"> 上一页</a><a href="15.html"> 下一页</a></div>
  <h1>SP/Servlet: response</h1>
  <p>JSP的response&#38544;含&#23545;象在&#36716;&#25442;&#20026;Servlet之后，&#23545;&#24212;于javax.servlet.http.HttpServletResponse型 &#24577;&#23545;象， HttpServletResponse&#23545;象是有&#20851;于&#23545;客&#25143;端&#35831;求之&#21709;&#24212;，您可以利用它&#26469;&#35774;定一些要&#21709;&#24212;的&#35759;息，例如&#26631;&#39064;&#35759;息、&#21709;&#24212;&#29366;&#24577;&#30721;等，必要的&#35805;， 您也可以由HttpServletResponse取得PrintWriter&#23545;象，由它&#26469;&#21709;&#24212;客&#25143;端，以&#33719;得PrintWriter的好&#22788;，而不是使用 JSP&#39044;&#35774;的out（JSPWriter）&#26469;&#24212;答客&#25143;端。</p>
  <p> 首先介&#32461;几&#20010; response（HttpServletResponse）&#35774;定&#26631;&#22836;（Header）的方法，要使用&#36825;些&#26631;&#22836;，您必&#39035;&#23545;HTTP&#21327;&#35758;先有些了解，&#36825;&#35831;自行查&#38405;相&#20851;&#20070;籍，&#36825;&#36793;假&#35774;您已&#32463;了解&#26631;&#22836;的意&#20041;。</p>
  下面是如何&#35774;定&quot;Refresh&quot;&#26631;&#22836;，在指定的&#26102;&#38388;后刷新网&#39029;，或加&#36733;指定的网&#39029;：
  </p>
  headerDemo.jsp
  <pre class="code"">&lt;%! int reloadCount = 0; %> 
&lt;% 
response.setHeader("Refresh", "3"); 
out.println("realod: " + reloadCount); 
reloadCount++; 
%> </pre>
  setHeader()方法是一&#20010;通用的&#26631;&#22836;&#35774;定方法，您可以用它&#26469;&#35774;定任何「名&#31216;/值」的&#26631;&#22836;，上面&#36825;&#20010;例子&#20250;每三秒&#38047;自&#21160;加&#36733;网&#39029;，您可以由网&#39029;上不 &#26029;&#36882;增的&#25968;字看到重新加&#36733;的次&#25968;，如果&#26631;&#22836;&#35774;定的是一&#20010;整&#25968;值，&#21017;您也可以直接使用setIntHeader()，它是&#19987;&#38376;用&#26469;&#35774;定整&#25968;值&#26631;&#22836;的版本，
  </p>
  <p>例 如：</p>
  <pre class="code">response.setIntHeader("Refresh", 3); </pre>
  使用setHeader()的好&#22788;是，您可以像以下&#36825;么&#35774;定&#26631;&#22836;：
  </p>
  <pre class="code">response.setHeader("Refresh", 
"3; URL=http://caterpillar.onlyfun.net/");</pre>
  <p> 上面的&#35774;定&#20250;在加&#36733;网&#39029;，在3秒之后重新加&#36733;指定的网&#39029;；注意&#26631;&#22836;的&#35774;定必&#39035;在送出任何网&#39029;本体（Body）之前&#35774;定好，如果网&#39029;本体（例如HTML&#20869;容）已&#32463;送出，&#21017;&#35774;定&#26631;&#22836;的&#21160;作是&#26080;用的。 </p>
  如果您想要&#27983;&#35272;器不要快取网&#39029;，由于HTTP/1.0与HTTP1.1的&#35774;定方式不同，您可以使用先判定&#21327;&#35758;种&#31867;以&#35774;定不同的&#26631;&#22836;，例如：
  </p>
  headerDemo.jsp
  <pre class="code">&lt;% 
// HTTP/1.0的话 
if(request.getProtocol().equals("HTTP/1.0")) { 
response.setHeader("Pragma", "no-cache"); 
} 
else if(request.getProtocol().equals("HTTP/1.1")) { 
response.setHeader("Cache-Control", "no-cache"); 
} 
response.setDateHeader("Expires", 0); 
%> </pre>
  <p> setDateHeader()是setHeader()的Date&#35774;定版本，第二&#20010;&#21442;&#25968;是&#35774;定Date的Long&#25968;值，0表示GMT 1970/1/1 00:00。</p>
  setHeader()、setIntHeader()与setDateHeader()方法&#20250;直接覆&#30422;&#26631;&#22836;&#35774;定，如果您要&#23545;同一&#20010;&#26631;&#22836;&#36827;行多值&#35774;定，可以使用add&#24320;&#22836;的方法，例如：
  </p>
  headerDemo.jsp
  <pre class="code">&lt;%@page contentType="text/html;charset=Big5"%> 
&lt;% 
response.setHeader("Refresh", "3"); 
response.addHeader("Refresh",
"URL=http://caterpillar.onlyfun.net/"); 
out.println("三秒后重新加载指定网页"); 
%> </pre>
  &#36825;&#20010;例子中先&#35774;定&#26631;&#22836;Refresh&#20026;3，然后加入URL信息，新的信息并不&#20250;覆&#30422;之前的&#26631;&#22836;&#35774;定，其作用相&#24403;于：
  </p>
  <pre class="code">&response.setHeader("Refresh", 
"3; URL=http://caterpillar.onlyfun.net/"); </pre>
  <p> 同&#26679;的，以add&#20026;&#24320;&#22836;&#26469;&#35774;定&#26631;&#22836;的方法也有Int与Date版本。</p>
  response（HttpServletResponse）的setStatus()方法是用&#26469;&#35774;定回&#24212;的&#29366;&#24577;&#30721;，例如404 Not Found，HttpServletResponse&#31867;中提供了一些助&#24518;常&#25968;&#35774;定，例如SC_NOT_FOUND就是表示404&#29366;&#24577;&#30721;（您可以在 Servlet API文件中查&#35810;相&#20851;的助&#24518;常&#25968;），使用setStatus()必&#39035;自行&#22788;理&#21709;&#24212;方式，如果是&#38169;&#35823;相&#20851;网&#39029;，您可以使用sendError()方法，&#36825;&#20010;方法&#20250;根据服&#21153;器的&#39044;&#35774;&#38169;&#35823;网&#39029;回&#25253;方式&#26174;示&#38169;&#35823;&#35759;息，例如：
  </p>
  errorDemo.jsp
  <pre class="code">&lt;%@page contentType="text/html;charset=Big5"%> 
&lt;% 
response.sendError(response.SC_NOT_FOUND, "找不到档案");
%> </pre>
  &#23545;Tomcat&#26469;&#35828;，&#20250;&#26174;示以下的&#35759;息：
  </p>
  <p>HTTP Status 404 - 找不到&#26723;案</p>
  type Status
  <p> report</p>
  <p> message 找不到&#26723;案</p>
  description
  <p> The requested resource (找不到&#26723;案) is not available.</p>
  .....
  </p>
  使用setStatus()必&#39035;自行&#22788;理&#21709;&#24212;方式，下面是一&#20010;例子，它可以&#35753;&#27983;&#35272;器直接&#23548;向至指定的网&#39029;：
  </p>
  statusDemo.jsp
  <pre class="code">&lt;% 
response.setStatus(response.SC_MOVED_TEMPORARILY); 
response.setHeader("Location", 
"http://caterpillar.onlyfun.net/"); 
%> </pre>
  事&#23454;上，上面的程序只要使用sendRedirect()方法就可以了，例如：
  </p>
  redirectDemo.jsp
  <pre class="code">&lt;% 
response.sendRedirect("http://caterpillar.onlyfun.net/"); 
%> </pre>
  response是HttpServletResponse型&#24577;的&#23545;象，在Servlet的&#23454;作中，是&#20174; HttpServletResponse&#23545;象取得PrintWriter&#23545;象，由它&#26469;&#20889;出&#21709;&#24212;至服&#21153;器的本体信息，在JSP中也可以取得 PrintWriter&#23545;象，例如您可以用PrintWriter&#26469;&#26174;示例外的堆&#26632;追&#36394;：
  </p>
  exceptionDemo.jsp
  <pre class="code">&lt;%@page contentType="text/html;charset=Big5" 
isErrorPage="true"%> 
&lt;html> 
&lt;head>&lt;title>错误处理页面&lt;/title>&lt;/head> 
&lt;body> 
&lt;H1>网页发生错误：&lt;/H1>&lt;%=exception%> 
&lt;H2>显示例外堆栈追踪：&lt;/H2> 
&lt;% 
exception.printStackTrace(response.getWriter()); 
%> 
&lt;/body> 
&lt;/html> </pre>
  <div class="rpindex"><a href="15.html"> 下一页</a><a href="13.html"> 上一页</a><a href="index.html">首页</a></div>


<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->
