<!--hmt-->
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end --><!--end of htmlheader-->

<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->
<!--end of htmlmiddle-->


<table border="0" width="100%" cellspacing="4"><!--HEADER SEPARATOR--><tr><!--LEFT SIDE NAVIGATION--><td width="20%" valign="top" nowrap="true"><p><strong>链接</strong></p><ul><li><a href="index.html" tppabs="http://tomcat.jaxwiki.org/index.html">文档首页</a></li></ul><p><strong>用户手册</strong></p><ul><li><a href="introduction.html" tppabs="http://tomcat.jaxwiki.org/introduction.html">1) 介绍</a></li><li><a href="setup.html" tppabs="http://tomcat.jaxwiki.org/setup.html">2) 安装</a></li><li><a href="appdev/index.html" tppabs="http://tomcat.jaxwiki.org/appdev/index.html">3) 第一个web应用</a></li><li><a href="deployer-howto.html" tppabs="http://tomcat.jaxwiki.org/deployer-howto.html">4) 部署</a></li><li><a href="manager-howto.html" tppabs="http://tomcat.jaxwiki.org/manager-howto.html">5) 管理</a></li><li><a href="realm-howto.html" tppabs="http://tomcat.jaxwiki.org/realm-howto.html">6) 权限管理 - 域(Realms)</a></li><li><a href="security-manager-howto.html" tppabs="http://tomcat.jaxwiki.org/security-manager-howto.html">7) 安全管理器</a></li><li><a href="jndi-resources-howto.html" tppabs="http://tomcat.jaxwiki.org/jndi-resources-howto.html">8) JNDI 资源</a></li><li><a href="jndi-datasource-examples-howto.html" tppabs="http://tomcat.jaxwiki.org/jndi-datasource-examples-howto.html">9) JDBC 数据源</a></li><li><a href="class-loader-howto.html" tppabs="http://tomcat.jaxwiki.org/class-loader-howto.html">10) 类加载</a></li><li><a href="jasper-howto.html" tppabs="http://tomcat.jaxwiki.org/jasper-howto.html">11) JSPs</a></li><li><a href="ssl-howto.html" tppabs="http://tomcat.jaxwiki.org/ssl-howto.html">12) SSL</a></li><li><a href="ssi-howto.html" tppabs="http://tomcat.jaxwiki.org/ssi-howto.html">13) SSI</a></li><li><a href="cgi-howto.html" tppabs="http://tomcat.jaxwiki.org/cgi-howto.html">14) CGI</a></li><li><a href="proxy-howto.html" tppabs="http://tomcat.jaxwiki.org/proxy-howto.html">15) 与代理器整合</a></li><li><a href="mbeans-descriptor-howto.html" tppabs="http://tomcat.jaxwiki.org/mbeans-descriptor-howto.html">16) MBean 描述</a></li><li><a href="default-servlet.html" tppabs="http://tomcat.jaxwiki.org/default-servlet.html">17) 默认 Servlet</a></li><li><a href="cluster-howto.html" tppabs="http://tomcat.jaxwiki.org/cluster-howto.html">18) 集群</a></li><li><a href="balancer-howto.html" tppabs="http://tomcat.jaxwiki.org/balancer-howto.html">19) 负载均衡</a></li><li><a href="connectors.html" tppabs="http://tomcat.jaxwiki.org/connectors.html">20) 连接器</a></li><li><a href="monitoring.html" tppabs="http://tomcat.jaxwiki.org/monitoring.html">21) 监控 与 管理</a></li><li><a href="logging.html" tppabs="http://tomcat.jaxwiki.org/logging.html">22) 日志</a></li><li><a href="apr.html" tppabs="http://tomcat.jaxwiki.org/apr.html">23) APR</a></li></ul><p><strong>参考</strong></p><ul><li><a href="config/index.html" tppabs="http://tomcat.jaxwiki.org/config/index.html">Apache Tomcat 配置</a></li></ul><p><strong>Apache Tomcat 开发</strong></p><ul><li><a href="building.html" tppabs="http://tomcat.jaxwiki.org/building.html">构建</a></li><li><a href="balancer-howto.html" tppabs="http://tomcat.jaxwiki.org/changelog.html">修订记录</a></li><li><a href="status.html" tppabs="http://tomcat.jaxwiki.org/status.html">状态</a></li><li><a href="developers.html" tppabs="http://tomcat.jaxwiki.org/developers.html">开发者</a></li><li><a href="catalina/funcspecs/index.html" tppabs="http://tomcat.jaxwiki.org/catalina/funcspecs/index.html">性能说明.</a></li><li><a href="catalina/docs/api/index.html" tppabs="http://tomcat.jaxwiki.org/catalina/docs/api/index.html">Apache Tomcat Javadocs</a></li><li><a href="jasper/docs/api/index.html" tppabs="http://tomcat.jaxwiki.org/jasper/docs/api/index.html">Apache Jasper Javadocs</a></li><li><a href="architecture/index.html" tppabs="http://tomcat.jaxwiki.org/architecture/index.html">体系架构</a></li></ul></td><!--RIGHT SIDE MAIN BODY--><td width="80%" valign="top" align="left"><table border="0" width="100%" cellspacing="4"><tr><td align="left" valign="top"><h1>Apache Tomcat 5.5 Servlet/JSP 容器</h1><h2>SSI How To</h2></td></tr></table><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff" face="arial,helvetica.sanserif"><a name="%E7%AE%80%E4%BB%8B"><strong>简介</strong></a></font></td></tr><tr><td><blockquote>

<p>SSI (Server Side Includes)是放置在HTML页面里的指令(directives)，在HTML页面被使用的
同时在服务器上被评估。这样可以让你把新产生的内容添加到现存的HTML页面上，而不需要同过CGI程序，
或其他动态的技术来产生整个页面。</p>

<p>当你使用Tomcat作为你的HTTP服务器，并要求有SSI支持，你可以把SSI支持添加到Tomcat里面。
通常在你不想要运行一个象Apache的web服务器的开发过程中它就被完成了。</p>

<p>Tomcat SSI 支持实施与Apache相同的指令。关于使用SSI指令的信息，
请参看<a href="" tppabs="http://httpd.apache.org/docs/howto/ssi.html#basicssidirectives">
Apache Introduction to SSI</a> 。</p>

<p>Tomcat里面SSI的支持是通过使用Servlet或过滤器来完成的。你必须选择其中一个来支持你的SSI，
而不能同时使用两个。</p>

<p>基于Servlet的SSI是通过实现
<code>org.apache.catalina.ssi.SSIServlet</code>来完成的。按照SSI的习惯，这个Servlet 
然后被映射成以 "*.shtml" 结尾的 URL。</p>

<p>基于过滤器的 SSI 是通过实现
<code>org.apache.catalina.ssi.SSIFilter</code>来完成的。  按规矩, 这个过滤器过滤所有
以"*.shtml"结尾的 URL，你也可以用 "*" 映射，让它过滤所有URL，但它会根据 不同的文件种类
（mime types）来决定是否启用SSI。使用初始值 contentType 可以让你决定是否要用 SSI 来处理 
JSP， Javascript 或其他内容的网页。</p>

<p>在缺省情况下设置是 Tomcat 不自动启用 SSI。</p>
</blockquote></td></tr></table><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff" face="arial,helvetica.sanserif"><a name="%E5%AE%89%E8%A3%85"><strong>安装</strong></a></font></td></tr><tr><td><blockquote>

<p><strong>警告</strong>——SSI指令可以用于执行Tomcat JVM外部的程序。如果你在使用
 Java SecurityManager，它可以绕过你的<code>catalina.policy</code>里的安全政策配置。</p>

<p>把$CATALINA_BASE/server/lib/servlets-ssi.renametojar 改名为
 $CATALINA_BASE/server/lib/servlets-ssi.jar 。</p>

<p>如果选择使用基于Servlet的SSI，请把<code>$CATALINA_BASE/conf/web.xml</code>里面被
注释掉的关于SSI 的 servlet 和 servlet-mapping 定义重新激活。</p>

<p>如果选择基于过滤器的 SSI， 清激活 <code>$CATALINA_BASE/conf/web.xml</code> 关于
SSI 的 filter 和 filter-mapping的设置。
.</p>

</blockquote></td></tr></table><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff" face="arial,helvetica.sanserif"><a name="Servlet %E8%AE%BE%E7%BD%AE"><strong>Servlet 设置</strong></a></font></td></tr><tr><td><blockquote>

<p>有几个servlet起始参数可以用来配置SSI servlet的行为。<ul>
<li><strong>buffered</strong> - 这个servlet的输出是不是应该被缓冲？(0=false, 1=true) 默认是 0 (false).</li>
<li><strong>debug</strong> - 由这个servlet日志的排错消息的详细程度。默认是0。</li>
<li><strong>expires</strong> - 带有SSI指令的页面失效之前的秒数。默认行为是对于每一个请求都要评估所用的SSI指令。</li>
<li><strong>isVirtualWebappRelative</strong> - &ldquo;虚拟&rdquo;SSI指令路径是否应该被解释为
相对于context root，而不是server root。 (0=false, 1=true) 默认是 0 (false)。</li>
<li><strong>inputEncoding</strong> - 如果无法决定所调用资源的文字编码，SSI应该使用的编码。
缺省数值是系统的文字编码。</li>
<li><strong>outputEncoding</strong> - 输出结果的文字编码，缺省值是 UTF-8。</li>
</ul>
</p>

</blockquote></td></tr></table><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff" face="arial,helvetica.sanserif"><a name="%E8%BF%87%E6%BB%A4%E5%99%A8%E8%AE%BE%E7%BD%AE"><strong>过滤器设置</strong></a></font></td></tr><tr><td><blockquote>

<p>过滤器的性能可通过修改几个不同的初始值来调整。
<ul>
<li><strong>contentType</strong> - 用一个正则表达式来就定那种网页类型应该调用 SSI。在
决定正则表达式时，不要忘记在网页内容种类的定义里可以有文字编码的选项，
它的标准是："mime/type; charset=set"，其中 charset=set 是选择项。
contentType的缺省值是："text/x-server-parsed-html(;.*)?".</li>
<li><strong>debug</strong> - 由这个servlet日志的排错消息的详细程度。默认是0。</li>
<li><strong>expires</strong> - 带有SSI指令的页面失效之前的秒数。默认行为是对于每一个请求都要评估所有的SSI指令。</li>
<li><strong>isVirtualWebappRelative</strong> - &ldquo;虚拟&rdquo;SSI指令路径是不是应该被解释为相对于
context root相关，还是相对于server root (0=false, 1=true) 默认是 0 (false)。</li>
</ul>
</p>

</blockquote></td></tr></table><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff" face="arial,helvetica.sanserif"><a name="Tomcat %E5%85%81%E8%AE%B8 SSI %E6%8C%87%E4%BB%A4"><strong>Tomcat 允许 SSI 指令</strong></a></font></td></tr><tr><td><blockquote>
<p>SSI是通过 嵌入在 HTML的指令来完成的实现动态网页的。这些指令在HTML里面如同HTML的注释，在
运行Tomcat会把它替换为响应的内容。这些指令的标准格式是：
</p>
<p> <code>&lt;!--#directive [parm=value] --&gt;</code></p>
<p>有效指令有：
<ul>
<li>
<strong>config</strong> - <code>&lt;!--#config timefmt="%B %Y" --&gt;</code>
用来指定SSI输出的时间日期或其他内容的格式
</li>
<li>
<strong>echo</strong> -   <code>&lt;!--#echo var="VARIABLE_NAME" --&gt;</code>
替换所指定的数值
</li>
<li>
<strong>exec</strong> -  运行所在系统的命令
</li>
<li>
<strong>include</strong> -  <code>&lt;!--#include virtual="file-name" --&gt;</code>
插入内容
</li>
<li>
<strong>flastmod</strong> - <code>&lt;!--#flastmod file="filename.shtml" --&gt;</code>
文件最后修改时间
</li>
<li>
<strong>fsize</strong> - <code>&lt;!--#fsize file="filename.shtml" --&gt;</code>
文件大小
</li>
<li>
<strong>printenv</strong> - <code>&lt;!--#printenv --&gt;</code>
打印所有环境变量
</li>
<li>
<strong>set</strong> - <code>&lt;!--#set var="foo" value="Bar" --&gt;</code>
用来为用户定义变量赋值
</li>
<li>
<strong>if elif endif else</strong> - 用于条件判断，例如：</li>
<code>&lt;!--#config timefmt="%A" --&gt;<br>
  &lt;!--#if expr="$DATE_LOCAL = /Monday/" --&gt;<br>
  &lt;p&gt;Meeting at 10:00 on Mondays&lt;/p&gt;<br>
  &lt;!--#elif expr="$DATE_LOCAL = /Friday/" --&gt;<br>
  &lt;p&gt;Turn in your time card&lt;/p&gt;<br>
  &lt;!--#else --&gt;<br>
  &lt;p&gt;Yoga class at noon.&lt;/p&gt;<br>
  &lt;!--#endif --&gt;</code>
 </ul>
</p>
阅读更多SSI相关内容：
<p> <a href="" tppabs="http://httpd.apache.org/docs/howto/ssi.html#basicssidirectives">
Apache SSI入门</a></p>
</blockquote></td></tr></table><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff" face="arial,helvetica.sanserif"><a name="Variables"><strong>Variables</strong></a></font></td></tr><tr><td><blockquote>
<p>SSI Servlet 现在支持下列变量：
</p>
<table border="1">
<tr>
<th>变量名称</th>
<th>描述</th>
</tr>

<tr>
<td>AUTH_TYPE</td>
<td>
  用来验证用户的方法，可以是：BASIC, FORM, 等</td>
</tr>

<tr>
<td>CONTENT_LENGTH</td>
<td>
  从FORM传来的数据长度，单位是 bytes 或字符的个数</td>
</tr>

<tr>
<td>CONTENT_TYPE</td>
<td>
  MIME种类, 例如 "text/html"</td>
</tr>

<tr>
<td>DATE_GMT</td>
<td>
现在的国际标准时间 GMT</td>
</tr>

<tr>
<td>DATE_LOCAL</td>
<td>
当地时间</td>
</tr>
<tr>
<td>DOCUMENT_NAME</td>
<td>
调用的文件名</td>
</tr>
<tr>
<td>DOCUMENT_URI</td>
<td>
文件的虚拟路径</td>
</tr>

<tr>
<td>GATEWAY_INTERFACE</td>
<td>
  服务器如果激活了 CGI 的话，显示支持的 CGI 版本，如 "CGI/1.1"</td>
</tr>

<tr>
<td>HTTP_ACCEPT</td>
<td>
  所有允许的 MIME 种类</td>
</tr>

<tr>
<td>HTTP_ACCEPT_ENCODING</td>
<td>
  列出所有客户端允许的压缩方式</td>
</tr>

<tr>
<td>HTTP_ACCEPT_LANGUAGE</td>
<td>
  列出所有客户端接受的语言</td>
</tr>
<tr>
<td>HTTP_CONNECTION</td>
<td>
  客户端接受的连接管理方法，如
  "Close" or "Keep-Alive"</td>
</tr>
<tr>
<td>HTTP_HOST</td>
<td>
  用户请求访问的网站</td>
</tr>
<tr>
<td>HTTP_REFERER</td>
<td>
  连接到本网页的网页地址，用户来自于的网页网页</td>
</tr>
<tr>
<td>HTTP_USER_AGENT</td>
<td>
  浏览器的名称</td>
</tr>
<tr>
<td>LAST_MODIFIED</td>
<td>
当前文件的最后修改时间</td>
</tr>
<tr>
<td>PATH_INFO</td>
<td>
  传给服务器的路径信息</td>
</tr>
<tr>
<td>PATH_TRANSLATED</td>
<td>
    经过转换的 PATH_INFO 路径
   </td>
</tr>
<tr>
<td>QUERY_STRING</td>
<td>
浏览器地址栏里 "?" 之后的值
</td>
</tr>
<tr>
<td>QUERY_STRING_UNESCAPED</td>
<td>
Undecoded query string with all shell metacharacters escaped 
with "\"</td>
</tr>
<tr>
<td>REMOTE_ADDR</td>
<td>
  用户的IP地址</td>
</tr>
<tr>
<td>REMOTE_HOST</td>
<td>
  用户的网址</td>
</tr>
<tr>
<td>REMOTE_PORT</td>
<td>
  用户所用的端口号码</td>
</tr>
<tr>
<td>REMOTE_USER</td>
<td>
  经确认的用户名字</td>
</tr>
<tr>
<td>REQUEST_METHOD</td>
<td>
  用户请求访问所使用的方法，如 "GET", "POST" 等</td>
</tr>
<tr>
<td>REQUEST_URI</td>
<td>
  用户所要求访问的网址</td>
</tr>
<tr>
<td>SCRIPT_FILENAME</td>
<td>
  目前用户实际访问的网页在服务器上的文件名</td>
</tr>
<tr>
<td>SCRIPT_NAME</td>
<td>
  网页的文件名</td>
</tr>
<tr>
<td>SERVER_ADDR</td>
<td>
  服务器的IP地址</td>
</tr>
<tr>
<td>SERVER_NAME</td>
<td>
  服务器电脑的名称或IP</td>
</tr>
<tr>
<td>SERVER_PORT</td>
<td>
  服务器等待用户访问的端口</td>
</tr>
<tr>
<td>SERVER_PROTOCOL</td>
<td>
  服务器使用的协议，如： "HTTP/1.1"</td>
</tr>
<tr>
<td>SERVER_SOFTWARE</td>
<td>
  服务器所使用的软件名称和版本数</td>
</tr>
<tr>
<td>UNIQUE_ID</td>
<td>
  服务器与用户目前如果开始会话的特有ID</td>
</tr>
</table>
</blockquote></td></tr></table></td></tr><!--FOOTER SEPARATOR--><!--PAGE FOOTER--><tr><td colspan="2"><div align="center"><font color="#525D76" size="-1"><em>
        
        </em></font></div></td></tr></table>

<!--start of htmlend-->

<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->