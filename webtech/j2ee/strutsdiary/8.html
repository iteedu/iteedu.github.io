<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end -->
<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->
  
    <div class="lpindex"><a href="index.html">首页</a><a href="7.html"> 上一页</a><a href="9.html"> 下一页</a></div>
    <h1><a href="index.html">Struts Gossip: 使用 ActionForm</a></h1>
    ActionForm是窗体的对象化表示，它本身设计为JavaBean，您要继承<span style="font-weight: bold;">org.apache.struts.action.ActionForm</span>来设计一个窗体对象，并提供标准的getter与setter方法，必要时可以使用继承下来的reset()、validate()等方法供 Struts 组件呼叫。<br>
    <br>
    当客户请求交给了 <a href="3.html">RequestProcessor</a> 后，RequestProcessor会从 <a href="4.html">ActionMapping</a> 中得知所使用的ActionForm对象，这是在struts-config.xml中设定的，如果所需的ActionForm还不存在就生成一个，之后一直使用它，ActionMapping与ActionForm对象会被当作参数传递给 <a href="5.html">Action</a>。<br>
    <br>
    在Struts
    1.1中，ActionForm生成之后，会执行RequestProcessor的processPopulate()方法，首先它会呼叫
    ActionForm的reset()方法，您可以在当中作一些重清ActionForm属性的动作，然后窗体的参数值会与ActionForm的
    setter进行比对，如果有名称符合的就将窗体的参数值设定给对应的属性。<br>
    <br>
    透过继承ActionForm类别来使用它，下面是一个简单的例子：<br>
<h5>UserForm.java</h5>
    <pre class="code">package onlyfun.caterpillar; <br> <br>import javax.servlet.http.*; <br>import org.apache.struts.action.*; <br> <br>public class UserForm extends ActionForm {<br>    private String username; <br>    private String password;<br>     <br>    public void setUsername(String username) { <br>        this.username = username; <br>    } <br>    <br>    public void setPassword(String password) { <br>        this.password = password; <br>    } <br>    <br>    public String getUsername() { <br>        return username; <br>    }<br>    <br>    public String getPassword() {<br>        return password;<br>    } <br>    <br>    public void reset(ActionMapping mapping,<br>                      HttpServletRequest request) {<br>        username = null;<br>        password = null;<br>    } <br>}</pre>
    必须在struts-config.xml中定义Action对象使用哪一个ActionForm对象：<br>
<h5>struts-config.xml</h5>
    <pre class="code">&lt;?xml version="1.0" encoding="ISO-8859-1" ?&gt;<br><br>&lt;!DOCTYPE struts-config PUBLIC<br>"-//Apache Software Foundation//DTD Struts Configuration 1.2//EN"<br>"http://jakarta.apache.org/struts/dtds/struts-config_1_2.dtd"&gt;<br><br>&lt;struts-config&gt;<br>&nbsp;&nbsp;&nbsp; &lt;form-beans&gt; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;form-bean <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name="userForm" <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; type="onlyfun.caterpillar.UserForm"/&gt; <br>&nbsp;&nbsp;&nbsp; &lt;/form-beans&gt;<br><br>&nbsp;&nbsp;&nbsp; &lt;action-mappings&gt; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;action <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; path="/login" <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; type="onlyfun.caterpillar.LoginAction"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name="userForm"&gt; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;forward<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name="helloUser" <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; path="/WEB-INF/pages/hello.jsp"/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;forward<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name="loginFail" <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; path="/WEB-INF/pages/fail.jsp"/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/action&gt; <br>&nbsp;&nbsp;&nbsp; &lt;/action-mappings&gt; <br>&lt;/struts-config&gt;&nbsp;</pre>
     <br>
    在这个例子中，&lt;form-bean&gt;卷标定义了所使用的ActionForm对象及其名称userForm，而在&lt;
    action&gt;标签的设定中，LoginAction指定了userForm作为其所使用的ActionForm，
    LoginAction类别如下：<br>
<h5>LoginAction.java</h5>
    <pre class="code">package onlyfun.caterpillar;<br><br>import javax.servlet.http.*; <br>import org.apache.struts.action.*; <br><br>public class LoginAction extends Action {<br>    public ActionForward execute(<br>                             ActionMapping mapping,<br>                             ActionForm form,<br>                             HttpServletRequest request, <br>                             HttpServletResponse response) <br>                                    throws Exception { <br>        String username = ((UserForm) form).getUsername(); <br>        String password = ((UserForm) form).getPassword(); <br>        <br>        request.setAttribute("username", username);<br>        <br>        if(username.equals("caterpillar") &amp;&amp; <br>                  password.equals("1234")) {<br>            return mapping.findForward("helloUser"); <br>        }<br>        <br>        return mapping.findForward("loginFail"); <br>    } <br>}</pre>
    ActionForm被作为参数传递至execute()方法，在验证使用者的名称与密码无误后，查找helloUser的 ActionForward对象并传回，这会使得RequestProcessor将请求转发至hello.jsp：<br>
<h5>hello.jsp</h5>
    <pre class="code">&lt;html&gt; <br>&lt;head&gt; <br>&lt;title&gt;Hello, ${username} !&lt;/title&gt; <br>&lt;/head&gt; <br>&lt;body&gt;<br>     &lt;H1&gt;Hello, ${username} !&lt;/H1&gt;<br>     &lt;H1&gt;This is your secret gift!!&lt;/H1&gt;<br>&lt;/body&gt; <br>&lt;/html&gt;</pre>
    如果验证失败，则查找loginFail的ActionForward对象并传回，也就是fail.jsp： <br>
<h5>fail.jsp</h5>
    <pre class="code">&lt;html&gt; <br>&lt;head&gt; <br>&lt;title&gt;Sorry!&lt;/title&gt; <br>&lt;/head&gt; <br>&lt;body&gt;<br>    &lt;H1&gt;Sorry, ${username} !&lt;/H1&gt; <br>    &lt;H1&gt;You must provide correct login information!!&lt;/H1&gt;<br>    &lt;p&gt;<br>    &lt;a href='/strutsapp/html/form.htm'&gt;Login&lt;/a&gt;<br>&lt;/body&gt; <br>&lt;/html&gt;</pre>
    <br>
    最后是一个简单的登入窗体，这是个静态HTML，放在/strutsapp/html下就可以了：<br>
<h5>form.htm</h5>
    <pre class="code">&lt;html&gt; <br>&lt;head&gt;&lt;title&gt;Login&lt;/title&gt;&lt;/head&gt; <br>&lt;body&gt; <br>&nbsp;&nbsp; Please login：&lt;p&gt; <br>&nbsp;&nbsp;&nbsp; &lt;form name="userForm" action="/strutsapp/login.do" method="post"&gt; <br>&nbsp;&nbsp; username &lt;input type="text" name="username"/&gt;&lt;br&gt; <br>&nbsp;&nbsp; password &lt;input type="password" name="password"/&gt;&lt;p&gt; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input type="submit"/&gt; <br>&nbsp;&nbsp;&nbsp; &lt;/form&gt;<br>&lt;/body&gt; <br>&lt;/html&gt;</pre>
    ActionForm在Struts中是属于View组件的一部份，它是对象化的窗体，窗体的参数会自动设定给
    ActionForm，无法对应的就加以忽略，在ActionForm中您可以填入窗体值，作一些适当的值转换，进行基本的数据验证，
    ActionForm可以作为窗体数据发送至应用程序前的缓冲区，在某些程度上，它是应用程序的防火墙，您可以在ActionForm中避免不正确或不安
    全的数据进入应用程序。<br>
    <br>
    综合一下，ActionForm担任以下的几个职责：<br>
    <ul>
      <li>填写窗体字段至窗体对象属性中</li>
      <li>客户数据的缓冲区</li>
      <li>进行数据完整性、格式验证</li>
      <li>进行属性值的转换</li>
      <li>进行数据安全性验证，阻止恶意数据进入应用程序</li>
    </ul>
    <br>
    <div class="rpindex"><a href="9.html"> 下一页</a><a href="7.html"> 上一页</a><a href="index.html">首页</a></div>
<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->
