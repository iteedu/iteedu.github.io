<!--hmt-->
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end --><!--end of htmlheader-->

<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->
<!--end of htmlmiddle-->


<div class="section" lang="zh-cn">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="mvc-localeresolver"></a>13.6.&#160;本地化解析器</h2></div></div></div>
<p>Spring架构的绝大部分都支持国际化，Spring的web MVC框架也不例外。
      <code class="classname">DispatcherServlet</code> 允许使用客户端本地化信息自动解析消息。
      这个工作由<code class="interfacename">LocaleResolver</code>对象完成。
      </p>
<p>当收到请求时，<code class="classname">DispatcherServlet</code>查找一个本地化解析器，如果找到，就使用它设置本地化信息。
      通过<code class="literal">RequestContext.getLocale()</code>方法，总可以获取由本地化解析器解析的客户端的本地化信息。
      </p>
<p>除自动的本地化解析以外，还可以将一个拦截器置于处理器映射中（参考 <a href="ch13s04.html#mvc-handlermapping-interceptor" title="13.4.3.&#160;拦截器（HandlerInterceptor）">第&#160;13.4.3&#160;节 “拦截器（<code class="interfacename">HandlerInterceptor</code>）”</a>），
      以便在某种环境下可以改变本地化信息，例如，可以基于请求中的参数变更本地化信息。
      </p>
<p>本地化解析器和拦截器都定义在<code class="literal">org.springframework.web.servlet.i18n</code>包中，
      可以在应用的上下文中配置它们。下文介绍了一些Spring提供的本地化解析器。
      </p>
<div class="section" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="mvc-localeresolver-acceptheader"></a>13.6.1.&#160;<code class="classname">AcceptHeaderLocaleResolver</code></h3></div></div></div>
<p>这个本地化解析器检查请求中客户端浏览器发送的<code class="literal">accept-language</code>头信息，
        通常这个HTTP Header包含客户端操作系统的本地化信息。
	  </p>
</div>
<div class="section" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="mvc-localeresolver-cookie"></a>13.6.2.&#160;<code class="classname">CookieLocaleResolver</code></h3></div></div></div>
<p>这个本地化解析器检查客户端中的<code class="classname">Cookie</code>是否包含本地化信息。
        如果有的话，就使用。当配置这个解析器的时候，可以指定cookie名，以及cookie的最长生存期（Max Age）。 
        下面这个例子定义了一个<code class="classname">CookieLocaleResolver</code>。
        </p>
<pre class="code">&lt;bean id="localeResolver" class="org.springframework.web.servlet.i18n.CookieLocaleResolver"&gt;

    &lt;property name="cookieName" value="clientlanguage"/&gt;
    
    <em class="lineannotation"><span class="lineannotation">&lt;!-- in seconds. If set to <code class="literal">-1</code>, the cookie is not persisted (deleted when browser shuts down) --&gt;</span></em>
    &lt;property name="cookieMaxAge" value="100000"&gt;

&lt;/bean&gt;</pre>
<div class="table">
<a name="mvc-cookie-locale-resolver-props-tbl"></a><p class="title"><b>表&#160;13.5.&#160;<code class="classname">CookieLocaleResolver</code>的属性</b></p>
<div class="table-contents"><table summary="CookieLocaleResolver的属性" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>属性</th>
<th>缺省值</th>
<th>描述</th>
</tr></thead>
<tbody>
<tr>
<td>cookieName</td>
<td>classname + LOCALE</td>
<td>cookie的名字</td>
</tr>
<tr>
<td>cookieMaxAge</td>
<td>Integer.MAX_INT</td>
<td>
              cookie在客户端存在的最长时间。如果该值是-1，这个cookie只被保留在内存中，当客户关闭浏览器时，这个cookie就不存在了</td>
</tr>
<tr>
<td>cookiePath</td>
<td>/</td>
<td>
              通过这个参数，可以将该cookie的作用限制在一部分特定的。
              具体地说，只有该目录(cookiePath)及其子目录下的页面可以使用这个cookie</td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break">
</div>
<div class="section" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="mvc-localeresolver-session"></a>13.6.3.&#160;<code class="classname">SessionLocaleResolver</code></h3></div></div></div>
<p><code class="classname">SessionLocaleResolver</code>允许从用户请求相关的session中获取本地化信息。</p>
</div>
<div class="section" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="mvc-localeresolver-interceptor"></a>13.6.4.&#160;<code class="classname">LocaleChangeInterceptor</code></h3></div></div></div>
<p>可以使用<code class="classname">LocaleChangeInterceptor</code>修改本地化信息。
        这个拦截器需要被添加到处理器映射中（参考<a href="ch13s04.html" title="13.4.&#160;处理器映射（handler mapping）">第&#160;13.4&#160;节 “处理器映射（handler mapping）”</a>）。
        它可以侦测请求中某个特定的参数，然后调用上下文中的LocaleResolver中的 setLocale()方法，相应地修改本地化信息。
	  </p>
<pre class="code">&lt;bean id="localeChangeInterceptor"
      class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor"&gt;
    &lt;property name="paramName" value="siteLanguage"/&gt;
&lt;/bean&gt;

&lt;bean id="localeResolver"
      class="org.springframework.web.servlet.i18n.CookieLocaleResolver"/&gt;

&lt;bean id="urlMapping"
      class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping"&gt;
    &lt;property name="interceptors"&gt;
        &lt;list&gt;
            &lt;ref bean="localeChangeInterceptor"/&gt;
        &lt;/list&gt;
    &lt;/property&gt;
    &lt;property name="mappings"&gt;
        &lt;value&gt;/**/*.view=someController&lt;/value&gt;
    &lt;/property&gt;
&lt;/bean&gt;</pre>
<p>在上面这个例子中，所有对<code class="literal">*.view</code>资源的请求，只要包含参数<code class="literal">siteLanguage</code>，
        都会改变本地化信息。比如下面这个请求<code class="literal">http://www.sf.net/home.view?siteLanguage=nl</code>会将网站语言修改为荷兰语。
        </p>
</div>
</div>

<!--start of htmlend-->

<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->