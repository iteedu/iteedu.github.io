<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end -->
<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->


<div class="lpindex"><a href="index.html">首页</a><a href="61.html"> 上一页</a><a href="63.html"> 下一页</a></div>
<h2>7．8 数据抽象与信息隐藏
  </p>
</h2>
<p>
     类通常对类的客户隐藏其实现细节，即所谓的信息隐藏。下列以堆栈数据结构作为信息隐藏的例子。</p><p>
     
可以把堆栈看成一堆盘子。将盘子放在堆中时，总是放在顶部(压入堆栈)，从堆中取下盘子时，总是从顶上取(称为弹出堆栈)。堆栈是后进先出(last-in，first-out；LIFO)的数据结构，最后放进堆栈的项目最先从堆栈中取出。</p><p>
     
程序员可以生成堆栈类，对客户隐藏实现细节。堆栈可以方便地用数组实现(或用第15章“数据结构”中的链表)。堆栈类的客户不需要知道堆栈如何实现，只要求数据项目按后进先出的方式处理即可。描述类的功能而不管其实现细节称为数据抽象(data   abstraction)，C++的类定义了抽象数据类型(abstract data   types，ADT)。尽管用户可能知道类的实现细节，但编码时不能依赖于这些实现细节。只要该类的public接口不变，类的实现细节(如堆栈的实现和“压入”“弹出”的操作)可能改变而不影响系统其余部分。</p><p>
     
高级语言的任务是生成便于程序员使用的视图。由于没有一个标准视图，因此编程语言种类很多。C++中的面向对象编程显示了另一种视图。</p><p>
     
大多数编程语言都强调操作。在这些语言中，数据的存在只是为了支持程序所需的操作。数据比操作更不重要，数据是原始的，只有几个内部数据类型，程序员很难生成自己的新数据类型。</p><p>
     
C++和面向对象编程中改变了这些观点。C++提高了数据的重要性。C++中的主要活动就是生成自己的新数据类型(即类)和表达这些数据类型之间的相互作用。</p><p>
     
要转向这个方向，编程语言组织要规范数据的一些概念。我们考虑的规范化就是抽象数据类型。抽象数据类型就像十多年前的结构化编程一样备受关注，抽象数据类型并不能代替结构化编程，只是提供了其他规范，可以进一步改善程序开发过程。</p><p>
     
什么是抽象数据类型呢考虑内部类型int，我们看到它是数学中的整数，但int在计算机中并不完全是数学中的整数，计算机中的int长度是很有限的。例如，32位机器上的int只限于-20亿到20亿之间。如果计算结果超出这个范围，则会发生溢出错误，机器会以机器相关的方式响应，可能悄悄地产生错误结果，而数学中的整数则没有这个问题。因此，计算机中的int概念实际上只是实际整数的一个近似，float也是这样。</p><p>
     
char同样是个近似，char值通常是8位模式的0和1，这些模式与所表示的字符(如z、小写z、美元号$、数字5等等)完全不同。char类型的值在大多数计算机上都是很有限的。7位ASCII字符集只提供128个不同字符值。这显然不足以表达中文、日文等需要成千上万个字符的语言。</p><p>
     
由此可见．即使C++之类的编程语言提供的内部数据类型，实际上也只是实际生活中概念和</p><p>
行为的近似或模型。前面我们一直理所当然地使用int，现在则有了全新的概念。int、float、char之类的类型都是抽象数据类型，实际上是在计算机系统中一定程度地近似表示实际中的概念。</p><p>
     
抽象数据类型实际上包含两个概念，即数据表达(data   representation)和该数据允许的操作(operation)。例如，int的概念定义了C++中的加、减、乘、除、求模操作，但除数为0时则未定义，这种操作与机器参数有关，如计算机系统的定长字长度。另一个例子是负整数的概念，其运算和数据表达是可应用的，但负整数的平方根则没有定义。C++中程序员用类实现抽象数据类型。我们将在第]2章“模板”中生成自己的堆栈类，并在第20章“标准模板库(STL)”中介绍标准库stack类。</p>
<h3>
  7.8.1 范例：数组抽象数据类型</h3>
<p>
     
第4章曾介绍过数组。数组就是一个指针和一些内存空间。如果程序员小心谨慎，则利用这些原始功能就可以进行数组操作。数组还有许多精彩的操作，但C++中没有提供。利用C++类，程序员可以开发比“原始”数组更精彩的数组ADT。数组类可以提供许多有用的功能，例如：</p><p>
     
●下标范围检查。</p><p>
   
●任章范围下标而不一定从0开始。</p><p>
   
●数组赋值。</p><p>
   
●数组比较。</p><p>
     
●数组输入/输出。</p><p>
   
●已知长度数组。</p><p>
     
我们将在第8章“运算符重载”中生成自己的数组类，并在第20章“标准模板库(STL)”中介绍标准库vector类。</p><p>
C++有少量内部类型，类可以扩展这个基础编程语言。</p>
<h5>
  
  软件工程视点7．15</h5>
<p>
     
程序员可以通过类机制生成新类型。这些新类型可以方便地像内部类型一样使用。这样，C++是个可扩展的语言。尽管这个语言可以方便地用新类型扩展，但基础语言本身不能改变。</p><p>
     
C++环境中生成的新类可以专属一个人、一个小组或一个公司。类也可以放进标准类库中，以便推广使用。这不一定能上升为标准，但事实上标准正在出现。C++的全部价值只有在充实而标准化的类库得到广泛应用时才能完全体现。在美国，ANSI(美国国家标准协会)正在进行这种标准化。ANSI和ISO(国际标准化组织)正在开发C++的标准版本。学习C++和面向对象编程的读者可以利用丰富的库实现快速的面向组件的软件开发。</p>
<h3>
  7.8.2 范例：字符串抽象数据类型</h3>
<p>
     
C++-是一种定义简练的语言，只向程序虽提供了建立各种系统的原始功能。这个语言保证了最小编程负担。C++适合应用编程和系统编程，后者对程序的性能有更高要求。当然，C++内部数据类型中也可以包括字符串数据类型，但这个语言设计成包括通过类生成和实现字符串抽象数据类型的机制。</p><p>
我们将在第8章开发自己的字符串ADT。ANSI/ISO草案标准中有一个由string类，将在第19章详细介绍。</p>
<h3>
  7.8.3 范例：队列抽象数据类型</h3>
<p>
     
我们经常遇到排队，等待的队称为队列(queue)。我们排队在超市结账，排队换煤气，排队上公共汽车，排队在高速公路上交费，学生注册时和到食堂买饭时都要排队。计算机系统内部也使用许多排队，因此，我们需要编写一个模拟排队的程序。</p><p>
     
队列是个抽象数据类型的范例。队列向客户提供了明确的行为。客户一次一件地将东西放进队列中，称为进队(enqueue)，然后从队列中一次一件地取出东西，称为出队(dequeue)。理论上，队列可以无限长，但真正的队列是有限的。队列中的项目按先进先出(first-in．first-out；FIFO)顺序出列，第一个插入队列的项目第一个离开队列。</p><p>
     
队列隐藏了内部数据表示，跟踪队列中的当前项目，为客户提供一组操作，如入队和出队。客户并不关心队列的实现，只要求队列正常操作。客户让一个新项目入队时，队列应接受这个项目，并放在某种先进先出的数据结构中。客户要从队列中取一个项目时，应从内部表示中删除这个项目，并将该项目按先进先出的顺序传递给外界(即队列的客户)，下一次出队的项目应是队列中等待时间最长的项目。</p><p>
     
队列ADT保证内部数据结构的完整性。客户不能直接操作这个数据结构，只有队列ADT能访问其内部数据。客户只能对数据表达进行允许的操作，ADT的public接口中不提供的操作将由ADT以适当方式拒绝，例如发一个错误消息、终止执行或忽略操作请求。</p><p>
     
第15章“数据结构”中将建立自己的队列类，第20章将介绍标准库queue类。</p>
<h2>
  <a name="7.9" id="7.9"></a>7．9 容器类与迭代</h2>
<p>
   
最常见的类型包括容器类(container   class)，也称集合类(collection   class)，是保存一组对象集合的类。容器类通常提供插入、删除、查找、排序和测试类成员项目等操作。数组、堆栈、队列、树和链表都是容器类，第4章介绍了数组，第11章和20章将介绍其他数据结构。</p><p>
     
容器类经常与迭代对象(iterator   object；或简称迭代器，aerator)相关联。迭代对象返回集合中的下一个项目(或对集合中的下一个项目进行某种操作)。编写类的迭代器之后，要取得类中的下一个元素很简单，迭代器通常指定为类的友元，以提高性能，使迭代器能通过迭代直接访问private数据。就像几个人共读的书中可以插好几个标签一样，可以有同时操作几个迭代器的容器类，每个迭代器包含自己的位置信息。第20章“标准模板库(STL)”中将详细介绍容器和迭代器。</p>
<h2>
  <a name="7.10" id="7.10"></a>7.10 代理类</h2>
<p>
     
通过隐藏类的实现细节可以防止访问类中的专属信息(包括private数据)和专属程序逻辑。向客户提供代理类(proxy   class)，代理类只能访问类的public接口，这样就可以让客户使用类的服务而不必让客户访问类的实现细节。</p><p>
     
实现代理类需要几个步骤(如图7.10)。首先，我们生成要隐藏private数据的类的类定义和实现文件。我们的例子使用Implementation类、代理类Interface和测试程序，并输出了结果。</p><p>
     
Implementation类提供一个private数据成员value(这是要对客户隐藏的数据)、一个初始化value的构造函数以及函数setValue和getValue。</p>
<pre class="code">
 // Fig. 7.10: implementation.h
 // Header file for class Implementation
 class Implementation {
   public:
     Implementation( int v ) { value = v; }
     void setValue( int v ) { value = v; }
     int getValue() const { return value; }
   private:
     int value;
 };
 // Fig. 7.10: interface.h
 // Header file for interface.cpp
 class Implementation;  // forward class declaration
 class Interface {
   public:
     Interface( int );
     void setValue( int );  // same public interface as
      int getValue() const;  // class Implementation
   private:
     Implementation *ptr;  // requires previous
                        // forward declaration
 };
 // Fig. 7.10: interface.cpp
 // Definition of class Interface
 #include "interface.h"
 #include "implementation.h"
 Interface::Interface( int v )
   : ptr ( new Implementation( v ) ) { }
 // call Implementation's setValue function
 void Interface::setValue( int v ) { ptr->setValue( v ); }
 // call Implementation's getValue function
 int Interface::getValue() const { return ptr->getValue(); }
 // Fig. 7.10: fig0710.cpp
 // Hiding a class's private data with a proxy class.
 #include < iostream.h>
 #include "interface.h"
 int main()
 {
   Interface i( 5 );
   cout << "Interface contains: "<< i.getValue()
        << "before setValue" << endl;      
   i.setValue( 10 );
   cout << "Interface contains: "<< i.getValue()
       << "after setValue" << endl;
   return 0;
 }
</pre>
<p>
输出结果：</p><p>
Interface contains: 5 before   setVal</p><p>
Interface contains: 10 after   setVal</p>
<h5>
  
  图 7．10 实现代理类</h5>
<p>
     
我们用Implementation类的同一个public接口生成代理类的定义。代理类的惟一private成员是Implementation类对象的指针。利用指针可以隐藏Implementation类的实现细节。</p><p>
     
图7．10的Interface类是lmplementation类的代理类。注意Interface类中提到lmplementation类时只有第23行的指针声明。类定义(如Interface类)只使用另一个类(如Implementation类)的指针时，另一个类的头文件&lt;通常显示该类的private数据)不需要用#include包含在内。只要在文件中使用该类型之前用提前类声明(forward   class declaration)将另外的这个类声明为一种数据类型即可(见第15行)。</p><p>
     
实现文件包含代理类Interface的成员函数，这是惟一包含Implementation类所在头文件implementation.h的文件。文件interface.cpp以预编译对象文件形式和头文件interface.h一起提供给客户，该头文件包含代理类提供服务的函数原型。由于文件interface.cpp只以已编译对象文件形式提供给客户，因此客户无法看到代理类与专属类之间的交互。</p><p>
     
图7．10的程序测试Interface类。注意，main中只包含Interface类的头文件，而没有提到lmplemention类。因此，客户根本不知道Implementation类的private数据。
</p>
<div class="rpindex"><a href="63.html"> 下一页</a><a href="61.html"> 上一页</a><a href="index.html">首页</a></div>


<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->
