<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end -->
<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->


  <p>
  <div class="lpindex"><a href="index.html">首页</a><a href="41.html"> 上一页</a><a href="43.html"> 下一页</a></div>
  <h2>5．8 指针与数组的关系
    </p>
  </h2>
  <p> C++中指针与数组关系密切，几乎可以互换使用。数组名可以看成常量指针，指针可以进行任何有关数组下标的操作。</p>
  <h5>编程技巧5.   4 </h5>
  <p>操作数组时用数组符号而用指针符号。尽管程序编译时间可能稍长一些．但程序更加清晰。 </p>
  <p>假设声明了整数数组b[ 5   ]和整数指针变量bPtr。由于数组名(不带下标)是数组第一个元素的指针．因此可以用下列语句将bPtr设置为b数组第一个元素的地址： </p>
  <p>bPtr =   b； </p>
  <p> 这等于取数组第一个元素的地址，如下所示：</p>
  <p>bPtr=  &amp;b[ O ]；</p>
  <p>数组元素b[3]也可以用指针表达式引用： </p>
  <p>*( bPtr + 3   ) </p>
  <p> 上述表达式中的3是指针的偏移量(offset)。指针指向数组开头时，偏移量表示要引用的数组元素，偏移量值等于数组下标。上述符号称为指针/偏移量符号(pointer／offset   notation)。括号是必需的，因为*的优先顺序高于+的优先顺序。如果没有括号，则上述表达式将表达式*bPtr的值加上3(即3加到b[0]中，假设bPtr指向数组开头)。就像数组元素可以用指针表达式引用一样，下列地址：</p>
  <p> &amp;b[ 3 ]</p>
  <p> 可以写成指针表达式：</p>
  <p>bPtr + 3 </p>
  <p>数组本身可以当作指针并在指针算法中使用。例如，下列表达式： </p>
  <p>*( b + 3) </p>
  <p>同样引用数组元素b[3]。一般来说，所有带下标的数组表达式都可以写成指针加偏移量，这时使   用指针／偏移量符号，用数组名作为指针。注意，上述语句不修改数组名，b还是指向数组中第一个元素指针和数组一样可以加下标。例如，下列表达式： </p>
  <p>bPtr[ 1 ] </p>
  <p>指数组元素b[1]．这个表达式称为指针／下标符号(pointer／subscript notation)。 </p>
  <p>记住，数组名实际上是个常量指针，总是指向数组开头。因此下列表达式： </p>
  <p>b += 3 </p>
  <p>是无效的，因为该表达式试图用指针算法修改数组名的值。 </p>
  <h5>常见编程错误5．14 </h5>
  <p>尽管数组是指向数组开头的S针，而指针可以在算术表达式中修改，但数组名不可以在算术表达式中修改，囚为数组名实际上是个常量指针。 </p>
  <p>图5.   20的程序用我们介绍的四种方法引用数组元素(数组下标、用数组名作为指针的指针／偏移量符号、指针下标和指针的指针／偏移量符号，打印数组的的4个元素)。 </p>
  <p>要演示数组和指针的互换性，还可以看看程序5．21中的两个字符串复制函数copy1和copy2。 </p>
  <p>这两个函数都是将字符串复制到字符数组中。比较copy1和copy2的函数原型可以发现，函数基本相同(由于数组和指针具有互换性)。这些函数完成相同的任务，但用不同方法实现。 </p>
  <pre class="code"> // Fig. 5.20: f~g05_20.cpp
 // Using subscripting and pointer notations with arrays
 #include < iostream.h>
 int main()
{
   int b[] = { 10, 20, 30, 40 } ;
   int *bPtr = b;  // set bPtr to point to array b
   cout << "Array b printed with:\n"
       << "Array subscript notation\n";
  for(int i = 0; i < 4; i++ ),
     cou << "b[ " << i <<  "] = << b[ i ] << '\n';
   cout << "\nPointer/offset notation where\n"
       << "the pointer is the array name\n";
   for (int offset = 0; offset < 4; offset++ )
      cout << "* (b +" << offset << ") ="
           << *( b + offset ) << '\n';
   cout << "\nPointer subscript notation\n";
   for ( i = 0; i < 4; i++ )
     cout << "bPtr[" << i << "] =" << bPtr[ i ] << '\n';
   cout << "\nPointer/offset notation\n";
   for ( offset = 0; offset < 4; offset++ )
     cout << "*(bPtr + "<< offset << ") ="
          << * ( bPtr + offset ) << '\ n';
   return 0;
 
</pre>
  <p> 输出结果：</p>
  <p> Array b Printed with:</p>
  <p> Array subscript   notation</p>
  <p> Pointer/offset notation where</p>
  <p> the pointer is the array name</p>
  <p> *   (b + 0) = 10</p>
  <p> * (b + 1) = 20</p>
  <p> * (b + 2) = 30</p>
  * (b + 3) = 40
  <p>Pointer subscript notation</p>
  <p> bPtr[ 0 ] = 10</p>
  <p> bPtr[ 1 ] =   20</p>
  <p> bPtr[ 2 ] = 30</p>
  bPtr{ 3 ] = 40
  <p>Pointer/offset notation</p>
  <p> *(bPtr + 0) = 10</p>
  <p> *(bPtr + 1) =   20</p>
  <p> *(bPtr + 2) = 30</p>
  *(bPtr + 2) = 40 <br />
  <p> 图5．20 用我们介绍的四种方法引用数组元素</p>
  <pre class="code"> // Fig. 5.21: figOS_21.cpp
 // Copying a string using array notation
 // and pointer notation.
 #include <iostream.h>
 void copy1( char *, const char * );
 void copy2( char *, const char * );
  int main()
 {
       string3[ 10 ], string4[] = "Good Bye";
   copy1( string1, string2 );
   cout << "string1 =" << string1 << endl;
   copy2( string3, string4 );
   cout << "string3 = "<< string3 << endl';
   return 0;
 }
 // copy s2 to sl using array notation
 void copy1( char *s1, const char *s2 )
 {
   for ( int i = 0; ( s1[ i ] = s2[ i ] ) != '\0'; i++ )
     ;  // do nothing in body
 }
 // copy s2 to sl using pointer notation
 void copy2( char *s1, const char *s2 )
 {
   for ( ; ( *s1 = *s2 ) != '\0'; s1++, s2++ )
      ;  // do nothing in body
 }
</pre>
  <p> 输出结果:</p>
  <p> string1 = Hello</p>
  string3 = Good   Bye <br />
  <p> 图5．21   使用数组和指针符号复制字符串</p>
  <p>函数copy1用数组下标符号将s2中的字符串复制到字符数组s1中。函数声明一个作为数组下标的整型计数器变量i。for结构的首部进行整个复制操作，而for结构体本身是个空结构。首部中指定i初始化为0，并在每次循环时加1。for的条件“(s1[i]=s2[i])!='\0',从s2向s1一次一个字符地进行复制操作。遇到s2中的null终止符时，将其赋给s1，循环终止，因为null终止符等于'\0'。 </p>
  <p>记住．赋值语句的值是赋给左边参数的值。 </p>
  <p>函数copy2用指针和指针算法将s2中的字符串复制到s1字符数组。同样是在for结构的首部进行整个复制操作．首部没有任何变量初始化。和copy1中一样，条件(*s1=*s1)!='\0'进行复制操作。 </p>
  <p> 复引用指针s2，产生的字符赋给复引用的指针s1。进行条件中的赋值之后，指针分别移到指向s1数组的下一个元素和字符串s2的下一个字符。遇到s2中的null终止符时，将其赋给s1，循环终止。</p>
  注意copy1和copy2的第一个参数应当是足够大的数组，应能放下第二个参数中的字符串，否则可能会在写人数组边界以外的内存地址时发生错误。另外，注意每个函数中的第二个参数声明为const   char*(常量字符串)。在两个函数中，第二个参数都复制到第一个参数，一次一个地从第二个参数复制字符，但不对字符做任何修改。因此，第二个参数声明为常量值的指针，实施最低权限原则。两个函数都不需要修改第二个参数，因此不向这两个函数提供修改第二个参数的功能。 <br />
  <h2> <a name="5.9" id="5.9"></a>5．9 指针数组</h2>
  <p> 数组可以包含指针，这种数据结构的常见用法是构成字符串数组，通常称为字符串数组(stringarray)。字符串数组中的每项都是字符串，但在C++中，字符串实际上是第一个字符的指针。因此，字符串数组中的每项实际上是字符串中第一个字符的指针。下列字符串数组suit的声明可以表示一副牌：</p>
  <p> char‘*suit[ 4 ] = {   &quot;Hearts&quot;，&quot;Diamonds&quot;，&quot;Clubs&quot;，&quot;Spades&quot;}；</p>
  <p> 声明的suit[4]部分表示4个元素的数组。声明的char*部分表示数组suit的每个元素是char类型的指针。数组中的4个值为”Hearts'’、”Diamonds”、”Clubs”和”Spades”。每个值在内存中存放成比引号中的字符数多一个字符的null终上字符串。4个字符串长度分别为7、9、6、7。尽管这些字符串好像是放在suil数组中，其实数组中只存放指针(如图5．22)。每个指针指向对应字符串中的第一个字符。这样，尽管：suit数组是定长的，但可以访问任意长度的字符串，这是C++强大的数据结构功能所带来的灵活性。</p>
  <p ><img src="images/200351916243658651.jpg"/></p>
  <h5>图5. 22   suit数组的图形表示 </h5>
  <p>suit字符串可以放在双下标数组中，每一行表示一个suit，每一列表示suit名的第一个字符、这种数据结构每一行应有固定列数，能够放下最长的字符串。因此，存放大量字符串而大部分字符串长度均比最长字符串短许多时，可能浪费很多内存空间。我们将在下一节用字符串数组帮助整理一副牌。 </p>
  <div class="rpindex"><a href="43.html"> 下一页</a><a href="41.html"> 上一页</a><a href="index.html">首页</a></div>


<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->
