<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end -->
<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->


  <div  class="lpindex"><a href="index.html">目录</a> <a href="6-31.html">上一页</a> <a href="6-33.html">下一页</a> </div>
  <p>我尽量使每个程序都有富于趣味性的输出，不知大家对这个程序的输出结果是否有兴趣。这个程序给我们提出了两个问题：第一，为什么这一串文字是倾斜的？第二，为什么paradise一词中第二个字母a 是一个蓝方块？</p>
  <p> 答案十分简单：首先指令stosw可以让DI寄存器自动加2，因此当我们给DI加上80的时候，DI寄存器的实际增量是82，所以DI指向了下一行的下一列。大家可以修改程序给DI加上78，想想输出结果会是什么样子，然后运行程序看看实际输出和想象中是否一致。至于那个字母&quot;a&quot;的去向就更不用多说，我们每显示一个字符就将属性值加1，显示字符&quot;a&quot;时属性值恰好是11H，所以字符&quot;a&quot;和背影融为一体了。</p>
  <p> 这个程序十分简单，不过它很形象地说明了每个字符行与显示缓存中的80个字节的对应关系。下面这个程序稍微复杂一些，其中的子过程outchar可以接收字符的行号与列号，由它自行算出偏移量。</p>
  <h5>PARADISE.ASM</h5>
  <pre class="code">        data  segment
              assume    ds:data	；定义一个字符串
         msg  db        'Enter	into the paradise.',0	；保存当前的显示模式
        mode  db        ?
        data  ends
        code  segment
              assume    cs:code
        main  proc      far
              mov       ax,data	；初始化DS寄存器
              mov       ds,ax
			
              mov       ah,0fh	；取得当前的显示模式
              int       10h
              mov       mode,al	；保存当前的显示模式
			
              mov       ax,0001h	；设置新的显示模式为01H
              int       10h
			
              mov       dx,0	；设置第一个字符的起始位置
              mov       cx,2	；每次显示2个字符
              mov       ah,1	；设置第第一个字符的属性
              mov       si,offset msg	；SI寄存器指向字符串MSG
    dispmsg:
              lodsb     ；取得一个字符
              or        al,al	；已经到字符串结尾了吗？
              jz        exit	；已到结尾，转EXIT结束
              call      outchar	；显示AX寄存器中的字符及属性
              inc       ah	；属性字节加1
              inc       dh	；下一个字符的行、列号加1
              inc       dl
              jmp       dispmsg	；显示下一个字符
			
       exit:  mov       ah,0	；等待键盘输入
              int       16h
			
              mov       ah,0	；恢复显示模式
              mov       al,mode
              int       10h
			
              mov       ah,4ch	；结束进程
              int       21h
        main  endp
			
     outchar  proc      near	；OUTCHAR子过程
              push      es	；保存将要使用的寄存器
              push      di
              push      bx
              push      cx
              push      dx
              push      ax
			
              mov       ax,0b800h	；设置ES寄存器指向显示缓冲区
              mov       es,ax
              mov       al,dh	；字符所在行号送入AL寄存器
              mov       bh,80
              mul       bh	；计算"行号 80"
              mov       di,ax	；"行号 80"的结果送入DI寄存器
              shl       dl,1	；计算"列号 2"
              mov       dh,0
              add       di,dx	；偏移量=行号 80+列号 2
			
              pop       ax	；从堆栈中取出字符及属性
              rep       stosw	；送入显示缓冲区
			
              pop       dx	；恢复寄存器
              pop       cx
              pop       bx
              pop       di
              pop       es
              ret       ；返回
     outchar  endp
        code  ends
              end       main
</pre>
  <p>助记符：MUL（Multiple）<br />
    用　途：将两个数相乘<br />
    格　式：MUL  寄存器<br />
    MUL  存储单元<br />
    执　行：指定寄存器或存储单元中的数据与累加器中的数据相乘，16位的结果</p>
  <p> 保存在累加器AX中，32位的结果由DX寄存器与AX共同保存，AX保存结<br />
    果的低16位，DX保存高16位。</p>
  <div  class="rpindex"><a href="6-33.html">下一页</a><a href="6-31.html">上一页</a><a href="index.html">目录</a> </div>


<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->
