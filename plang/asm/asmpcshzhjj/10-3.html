<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end -->
<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->


  <div  class="lpindex">
    <!导航条>
    <a href="index.html">目录</a> <a href="10-2.html">上一页</a> <a href="10-4.html">下一页</a> </div>
  <h2>10．3 条件转移指令</h2>
  <p>　条件转移指令在8086/88汇编语言中占据着重要的地位，它是CPU实现&quot;判断&quot;的基础。通过前面一段的学习我们已经知道，条件转移指令的条件实际上都来自于标志寄存器。所以原则上说除了TF、IF、DF等用于控制CPU工作状态的几个标志位没有对应的条件转移指令外，其那些反映运算后果的标志位都应该有相应的条件转移指令。</p>
  <p> 原则上讲的确应该有这样的规律，不过有个特例--AF标志没有相应的条件转移指令。除AF外，SF、ZF、PF、CF、OF都有对应的条件转移指令。另外有一些条件转移指令要根据几个标志位的情况进行转移，比如前面我们讨论过的指令&quot;JA&quot;，还有其它的一些。在本节里我们将总结所有的条件转移指令以及它们所判断的条件。</p>
  <p> 在总结之前还要先解决一个前面遗留下来的问题，就是指令JA/JB与指令JG/JL的区别。前面已经提到过如果要对符号不同的两个数进行比较，应该使用JG/JL指令判断结果。下面先进行一个实验，实验过程中请注意观察符号标志位SF与溢出标志位OF：</p>
  <pre class="code"> C:\ASM\&gt;DEBUG[Enter] 
    -a[Enter]
    0F6A:0100 mov al,5 
    0F6A:0102 cmp al,3 
    0F6A:0104 cmp al,-1 
    0F6A:0106 cmp al,80 
    0F6A:0108 [Enter] 

-g=100 102[Enter]
AX=0005 BX=0000 CX=0000 DX=0000 SP=FFEE BP=0000 SI=002A DI=0000
DS=0F6A ES=0F6A SS=0F6A CS=0F6A IP=0102 NV UP EI PL NZ NA PO NC
0F6A:0102 3C03 CMP AL,03
</pre>
  <p>注意在进行数据比较之前SF与OF标志都为0，且CF标志也为0。</p>
  <pre class="code">-p[Enter]
AX=0005 BX=0000 CX=0000 DX=0000 SP=FFEE BP=0000 SI=002A DI=0000
DS=0F6A ES=0F6A SS=0F6A CS=0F6A IP=0104 NV UP EI PL NZ NA PO NC
0F6A:0104 3CFF CMP AL,FF
</pre>
  <p>第一次我们将+5与+3相比较，各标志位都没有变化。如果单从CF与ZF标志来看是可以说明5&gt;3的，因为此次比较即没有产生借位且结果也不是0。指令JA就是依靠这两个标志位进行判断的。</p>
  <pre class="code">-p[Enter]
AX=0005 BX=0000 CX=0000 DX=0000 SP=FFEE BP=0000 SI=002A DI=0000
DS=0F6A ES=0F6A SS=0F6A CS=0F6A IP=0106 NV UP EI PL NZ AC PE CY
0F6A:0106 3C80 CMP AL,80
</pre>
  <p>　第二次将+5与-1相比较，标志寄存器产生了变化。如果此时仍然通过CF标志对比较结果进行判断，就会有+5&lt;-1的结果，只有小数减大数才会产生借位。由此可以得出这样的结论：CPU在设置CF标志位的时候是不考虑参加运算的数是否有符号的。换句话说，CPU把参加运算的数都看做无符号数。这就是指令JA/JB只适用于无符号数相比较的原因。</p>
  <p> 那么符号究竟从哪里体现呢？现在我们可以想到的只有符号标志SF位。而且有一个事实是我们每个人都知道的，就是当一个小的数减一个大的数的时候，无论这两个数是否有符号，它们相减的结果必然是负数。也就是说这样两个数相减之后，SF标志应该是1（NG）。</p>
  <p> 从跟踪的结果来看+5与-1相比较之后SF标志位仍然是0（PL），这说明了+5并不小于-1。由此看来判断带符号数的比较结果应该通过SF标志而不是CF标志。 </p>
  <pre class="code">-p[Enter]
AX=0005 BX=0000 CX=0000 DX=0000 SP=FFEE BP=0000 SI=002A DI=0000
DS=0F6A ES=0F6A SS=0F6A CS=0F6A IP=0108 OV UP EI NG NZ NA PO CY
0F6A:0108 5F POP DI
</pre>
  <p>是否仅仅通过SF标志就能正确判断带符号数的大小呢？将+5与-128相比较之后我们可以看到SF标志为1（NG）。如果按刚才的推论来看+5应该小于-128，这当然不对。问题出在哪儿？</p>
  <p> 实际上+5减-128应该得+133，但是+133是大于+127的，所以这样的一次运算其实已经导致了溢出。注意观察OF标志，它悄悄地从&quot;NV&quot;变成了&quot;OV&quot;。所以我们又可以得出一个推论：如果比较之后符号标志SF为1同时溢出标志OF也为1，则仍然说明前一个数不小于后一个数。</p>
  <p> 综合上面的实验结果，就可以推测出相比较的两个带符号数如果是&quot;前不小于后&quot;的关系，那么符号标志SF与溢出标志OF必然是同为0（+5比+3、+5比-1）或同为1（+5比-128）。再进一步推断，如果这两个数是&quot;前小于后&quot;的关系，那么SF与OF之中必有一个是1，而另一个是0。即要么是结果为负而无溢出，要么是结果为正而有溢出。</p>
  <p> 究竟是不是这样？多做一些实验就能知道。比如用+3减去+5就能看到结果为负而无溢出的情况。而用-40减去+100就能看到结果为正而有溢出的情况了。总之前面推出的结论是完全正确的。由此我们得出了指令&quot;JL&quot;所判断的条件，把这个条件写成表达式的形式就是&quot;SF XOR OF=1&quot;。</p>
  <p> 同时指令JG判断的条件也就自然得出，应该是&quot;（SF XOR OF）OR ZF=0&quot;，要注意排除两个数相等的情况（ZF=1）。如果不排除两个数相等的情况，即只考虑&quot;SF XOR OF=0&quot;，那么相应的指令就应该是&quot;JGE&quot;，这个指令在前面讨论画线时应用过。那么指令&quot;JLE&quot;判断的条件又是什么呢？没错，是&quot;（SF XOR OF）OR ZF=1&quot;。</p>
  <p> 表10-2给出了所有条件转移指令的说明，其中有一些是我们前面没有讨论过的。</p>
  <div  class="rpindex"><a href="10-4.html">下一页</a><a href="10-2.html">上一页</a> <a href="index.html">目录</a> </div>


<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->
