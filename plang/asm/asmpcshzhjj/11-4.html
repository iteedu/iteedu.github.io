<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end -->
<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->


  <div  class="lpindex"><a href="index.html">目录</a> <a href="11-33.html">上一页</a> <a href="11-41.html">下一页</a> </div>
  <h2>11．4 模块化程序设计</h2>
  <h4>11.4导航：<a href="11-4.html">第一页</a> <a href="11-41.html">第二页</a></h4>
  <p>早期的计算机运算速度很慢而且内存也很小，象最早的个人电脑Altair只有4KB的内存。所以早期的程序设计者所追求的目标是代码越短越好，算法越快越好。他们往往要一个字节一个字节的精心编码，而且喜爱在程序中使用很离奇的算法。这样做虽然使程序能高效运行，但是程序员的源程序恐怕只有他们自己才能读懂，经验不多的人是难于改进这些程序的。</p>
  <p> 随着电子技术的发展，计算机的速度越来越快，内存也越来越大，这使得现代的软件设计理论也就有了很大的变化。流行的观念认为好的程序首先应该是逻辑清晰，结构严谨，能够适应于不同水平的程序设计者对其加以维护，其次才考虑空间与时间问题。因此把一个软件分解成多个具有独立功能的模块分别设计，最终在组合起来的程序设计技术已经为人们所接受。</p>
  <p>另外，编写程序是一件十分费心费力的工作，特别是汇编程序。对于一些小型的软件如果由一个人单独编写还可以接受，可如果是开发象WINDOWS这样的大型操作系统，那可就要由很多人合作才行了。</p>
  <p>由于上述原因所以今天的软件设计主要采用&quot;模块化&quot;程序设计技术。所谓&quot;模块化&quot;指得是把一个程序分解成多个具有独立功能的部分，分给多个程序员同时编写，最后再把这些部分连接在一起形成完整的程序。<br />
    下面给出的这个程序例就是应用了模块化程序设计技术，程序本身有些老掉牙了，只不过是将键盘上输入字符的扫描码与ASCII码显示在屏幕上而已： </p>
  <h5>TEST1.ASM</h5>
  <pre class="code">       EXTRN  hex2asc:	far	；告之LINK程序HEX2ASC是位于另一个
			；源程序中的过程，且为FAR属性
        data  segment   PARA PUBLIC 'DATSEG'
              assume    ds:data
         msg  db        'Module program demonst	ration',0dh,0ah
              db        'Press any key,I will t	ell you ',0dh,0ah
              db        'the scan-code and ASCI	I.',0dh,0ah,24h
        data  ends
			
        code  segment   PARA PUBLIC 'CODE'
              assume    cs:code
        main  proc      far
              push      ds	；初始化堆栈
              sub       ax,ax
              push      ax
              mov       ax,data	；初始化DS寄存器
              mov       ds,ax
			
              mov       dx,offset msg	；输出字符串MSG
              mov       ah,9
              int       21h
       next:
              mov       ah,0	；等待键盘输入
              int       16h
			
              call      hex2asc	；调用HEX2ASC输出扫描码及ASCII码
			
              cmp       al,1bh	；是ESC键吗？
              jnz       next	；若不是ESC键，转NEXT继续接收按键
			
              ret       ；若是ESC键则结束进程
        main  endp
        code  ends
              end       main
TEST2.ASM			
      PUBLIC  hex2asc		；告之编译程序过程HEX2ASC
			；用于被外部的过程调用
        data  segment   PARA PUBLIC 'DATSEG'
              assume    ds:data
       ascii  db        '0123456789ABCDEF'
        data  ends
			
        code  segment   PARA PUBLIC 'CODE'
              assume    cs:code
     hex2asc  proc      far	；HEX2ASC是一个具有FAR属性的过程
              push      ax	；保存寄存器
              push      bx
              push      cx
			
              mov       bx,offset ascii	；BX寄存器指向ASCII码表
              mov       cx,4	；显示4位十六进制数
      loop1:
              push      cx	；CX寄存器压入堆栈暂存
              mov       cl,4	；准备处理4个Bit
              rol       ax,cl	；将AX寄存器的高4位移至低4位
              push      ax	；暂存移位后的结果
              and       ax,000fh	；保留AX寄存器低4位
              xlat      ；从ASCII码表中取得字符
              mov       ah,0eh	；并调用10H中断的0EH功能输出
              int       10h
              pop       ax	；从堆栈中取回移位后的结果
              pop       cx	；和CX寄存器中的计数值
              loop      loop1	；继续处理下4位
			
              mov       ax,0e0dh	；输出回车、换行符
              int       10h
              mov       al,0ah
              int       10h
			
              pop       cx	；恢复寄存器
              pop       bx
              pop       ax
              ret       ；返回主过程
     hex2asc  endp
        code  ends
              end       hex2asc
</pre>
  <p>给出的两个源程序其实是一个程序的两个部分，这两个部分编译之后要连接到一起。具体方法很简单，首先将两个文件分别编译成两个OBJ目标文件，然后按下述方法应用LINK.EXE程序进行连接： </p>
  <p><img src="figures/F11_6.gif"  height="190" /></p>
  <p>连接程序LINK.EXE会把TEST1.OBJ和TEST2.OBJ组合在一起，生成的可执行文件默认的文件名是第一个OBJ文件的名字，本例是TEST1.EXE。其实这才是LINK程序真正的用途，以前使用LINK程序将单独一个OBJ文件转换为可执行文件只是走走形式而已。</p>
  <p> 如果使用TLINK程序，则操作会更简单一些：</p>
  <pre class="code">    C:\ASM\&gt;tlink   test1 test2[Enter]</pre>
  <p>通过这个实例，我们可以看出构成程序的两个模块其实就是两个完整的程序，而实现模 块之间的组合主要依靠几个新的伪操作。再讨论新的伪指令之前，我们先将以前讲过的&quot;SEGMENT&quot;伪指令更深入地挖掘一下。</p>
  <div  class="rpindex"><a href="11-41.html">下一页</a><a href="11-33.html">上一页</a> <a href="index.html">目录</a> </div>


<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->
