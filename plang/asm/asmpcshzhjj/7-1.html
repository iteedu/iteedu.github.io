<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end -->
<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->


  <!导航条>
  <div class="lpindex"><a href="index.html">目录</a> <a href="6-53.html">上一页</a> <a href="7-2.html">下一页</a> </div>
  <h1 >第7章 文件控制块</h1>
  <p> 　　无论学习什么样的程序设计语言，文件操作都是一项十分重要的内容，那些经过程序处理的数据最终总是要保存到磁盘文件中去。所以我们可以这样认为，只有掌握了如何应用所学的语言操作文件，那么所学的语言才算真正具有了实用价值，才能切实应用到实践当中去。所以在这一章里，我们将共同学习应用汇编语言操作文件基本方法，并且分别讨论DOS和BIOS所采用的几种磁盘存取方式。 </p>
  <h2>7．1 文件操作基础</h2>
  <h3>7．1．1 文件的概念</h3>
  <p>　外存储器（诸如软盘、硬盘及磁带等）可以存放数以&quot;兆&quot;计的数据，如果这些数据是杂乱无章的存放，那么我们就很不好管理它们，所以我们把相关的数据分在一组中并为不同的数据组起了名字，于是就形成了文件。所以说所谓文件，其实就是存放在外存储器中的一组组的数据。</p>
  <h3>7．1．2 操作系统</h3>
  <p>什么样的软件可以称为操作系统？笔者认为一个软件如果可称为操作系统，那么它必须具备这样两个功能：设备管理和文件管理。这是一个操作系统所应具备的两个最为基本的功能，缺了其中任何一个都不能算是操作系统。我们所使用的DOS刚好具备这两个基本功能，它可以管理显示、存储等各种基本设备，还可以通过安装设备驱动程序管理诸如CD－ROM之类扩充设备，它也具有文件与目录的管理功能，所以我们说DOS是一个&quot;最简&quot;型的操作系统。这种&quot;最简&quot;的特性使DOS具有内核小巧、速度快等优点，这使得它可以广泛应用于PC机上。 </p>
  <h3>7．1．3 处理的对象</h3>
  <p>　在这一章中我们要处理的对象究竟是什么？大家可能会不加思索地回答：&quot;当然是文件了。&quot;这个回答没有错误，但它不全面。要知道，存在于磁盘上的不仅有文件，而且还有子目录和卷标，这些都是我们要处理的对象。即使是文件相互之间也是有区别的，有关内容我们后面会谈到。</p>
  <h3>7．1．4 两种方法</h3>
  <p>DOS的文件管理功能像个大杂烩，它给用户提供了两种完全不同的处理文件的方法。一种方法取自老祖先--CP/M-86，我们称其为&quot;文件控制块&quot;法，简称FCB法；另一种方法取自UNIX操作系统，我们称其为&quot;文件句柄&quot;法。这种方法是在DOS 2.0版中引进的，在以后的版本中得到了发展，而FCB法只是为了&quot;兼容&quot;而设，所以MicroSoft推荐使用&quot;文件句柄&quot;法。不过通过后面的学习你会发现，其实这两种方法各有优势，它们都不能取代对方。</p>
  <h3>7．1．5 文本与二进制</h3>
  <p>文件之间是有区别的，有些文件中包含的都是具有实际意义的ASCII字符，如文字、标点、制表符以及回车换行等等，这种文件称为&quot;文本文件&quot;。我们前面编写的所有&quot;源程序文件&quot;其实都是文本文件。</p>
  <p> 　　还有一些文件中包含的都是些无规律的数据，这些数据可能是指令的机器码或者具有其它什么含义，这样的一些文件就称为&quot;二进制文件&quot;。最常见的就是那些EXE和COM类的文件。这两种文件很好区分，文本文件可以用&quot;TYPE&quot;命令显示在屏幕上，而二进制文件则只能列出一些杂乱的字符。</p>
  <p> 值得注意的是一些高级语言将这两种文件分别处理，比如C语言，甚至DOS的COPY命令也要区分文本与二进制。不过对于汇编语言来说这两种文件没有区别，&quot;文本&quot;不过是&quot;二进制&quot;的一个&quot;子集&quot;而已。 </p>
  <h3>7．1．6 文件的处理步骤</h3>
  <p>我们在处理现实中的文件是采用什么步骤呢？举个例子，假如现在有一份文件摆在我们面前，我们要处理这个文件，那么第一步我们要打开这个文件，这是我们能够处理文件（至少是能够看到文件内容）的先决条件。第二步我们就要读出文件的内容，或者是修改其中的内容，也可能要加入新内容，这才是真正的处理过程。最后我们要合上这个文件表示我们的处理工作结束而且新的文件内容被确定。现实中的工作无非如此。</p>
  <p> 　　程序处理文件时也是这样做的，无论采用什么方法处理文件，程序的第一步也是&quot;打开&quot;文件，注意这里&quot;打开&quot;的含义是通知操作系统找到这个文件并取得这个文件的特征信息，比如文件的长度，建立或最后修改的日期以及文件在磁盘中的位置等等。经过这一步之后操作系统就和这个文件建立的联系，以后我们就可以利用系统功能对这个文件进行操作。第二步我们就可以正式处理这个文件了，我们可以&quot;读出&quot;文件内容，也可以&quot;写入&quot;新的内容。这些工作和我们现实中的处理是一样的。最后我们还要&quot;关闭&quot;这个文件，这是为了通知操作系统将处理后的内容存入文件并取消和这个文件的关联。</p>
  <p> 注意有些时候我们还要做建立新文件的工作，现实中的处理方法是&quot;给文件起个名字，并且要注明文件的性质--一般或者保密&quot;，文件建立后也随之被打开了，我们即可马上写入新内容。</p>
  <p> 程序也是这样建立磁盘文件的，一般的步骤是&quot;给出文件名和属性，调用系统功能建立文件，写入新内容，关闭文件&quot;。看来计算机处理文件和我们人类的工作方式没什么区别，无非我们人类用双手和大脑工作而计算机使用&quot;系统功能&quot;完成工作而已。</p>
  <p> 有了以上这些基础知识，我们对文件处理也就有了一些大概的了解，下面我们就可以详细地讨论如何编制程序处理磁盘文件了。 s</p>
  <div class="rpindex"> <a href="7-2.html">下一页 </a><a href="6-53.html">上一页</a><a href="index.html">目录</a> </div>


<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->
