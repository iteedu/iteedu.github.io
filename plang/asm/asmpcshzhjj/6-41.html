<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end -->
<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->


  <div  class="lpindex"><a href="index.html">目录</a> <a href="6-4.html">上一页</a> <a href="6-42.html">下一页</a> </div>
  <p>① CRTC10-CRTC11是光标控制寄存器，这两个寄存器用于控制光标的显示特性。寄存器的结构如图6-8所示：<br />
    CRTC10=X00XXXXX：不闪烁。X01XXXXX：无光标。<br />
    X10XXXXX：光标闪烁频率控制为场频的1/16。<br />
    X11XXXXX：光标闪烁频率控制为场频的1/32。</p>
  <p><img src="figures/F6_8.gif"  height="80" /></p>
  <h4><br />
    图6-8 CRTC10-CRTC11寄存器的结构</h4>
  <p>CRTC10的低5位（Bit0-Bit4）用于控制光标的起始线位置，至于其它3个位CGA卡与EGA/VGA的定义不同。对于CGA卡而言，Bit5-Bit6用于控制光标的闪烁情况，Bit7位未使用；而在EGA卡上Bit5-Bit7位都未使用；VGA卡则使用Bit5位控制光标的有无。大家可以自行查阅这方面的资料，在此不再多说。<br />
    CRTC11的低5位用于控制光标的终止线位置，它的其余3个位CGA卡未使用，EGA和VGA卡使用Bit5-Bit6两位控制光标的偏移。下面的示例程序演示了通过这两个寄存器控制光标的形状的方法。</p>
  <pre class="code">C:\ASM\&gt;DEBUG[Enter] 
-a100[Enter]
0BE2:0100	JMP	115		；跳过数据区
0BE2:0102	DB	'Press any key...',0d,0a,24	
0BE2:0115	MOV	DX,0102	
0BE2:0118	MOV	AH,09	；显示字符串"Press any key..."
0BE2:011A	INT	21	
0BE2:011C	MOV	CX,0F0F	
0BE2:011F	MOV	DX,03D4	；起始线、终止线装入CH、CL寄存器
0BE2:0122	MOV	AL,0A	；DX指向索引寄存器
0BE2:0124	OUT	DX,AL	；选择CRTC10寄存器
0BE2:0125	INC	DX		；输出索引号
0BE2:0126	MOV	AL,CH	；DX指向数据寄存器
0BE2:0128	OUT	DX,AL	；取得起始线
0BE2:0129	DEC	DX		；输出起始地址至CRTC10
0BE2:012A	MOV	AL,0B	；DX指向索引寄存器
0BE2:012C	OUT	DX,AL	；选择CRTC11寄存器
0BE2:012D	INC	DX		；输出索引号
0BE2:012E	MOV	AL,CL	；DX指向数据寄存器
0BE2:0130	OUT	DX,AL	；取得终止线
0BE2:0131	MOV	AH,00	；输出终止地址至CRTC11
0BE2:0133	INT	16		；等待键盘输入
0BE2:0135	DEC	CH	
0BE2:0137	JNZ	011F	；光标起始地址减1
0BE2:0139	MOV	AH,4C	；若起始地址未减至0则转011F继续
0BE2:013B	INT	21		；结束程序
0BE2:013D 	[Enter] 		
</pre >
  <p>因为这些程序没有良好的可移植性，因此利用DEBUG做些试验就可以了。</p>
  <p> ② CRTC12－CRTC13寄存器是显示起始地址寄存器，这两个寄存器其实是用于控制显示内存分页的。我们在前面讨论&quot;直接写屏&quot;时并未研究分页的情况，只是简单地说了计算偏移量的标准形式应该是&quot;显示页号×每页的字节数＋页内偏移量&quot;。因此，第二个显示页在整个16KB显存中的偏移位置应该是0B800H:1000H。对于我们设计程序而言，将数据写入相应的内存地址处就算完成了写屏的工作，这些数据能否以字符形式出现在屏幕上，就要由显示卡上的控制电路负责转换。那么卡上的电路究竟从显存的哪个地址起始处理数据呢？这个地址就是由CRTC12和CRTC13这两个寄存器的值所决定。通过改变这两个寄存器的内容，我们可以控制卡上的电路从显存的任意位置处开始处理数据。这两个寄存器的结构如图6-9：</p>
  <h4><img src="figures/F6_9.gif"  height="77" /><br />
    图6-9 CRTC12-CRTC13寄存器的结构</h4>
  <p>有一点必须注意，我们往往习惯于以字节为单位规定显示页的大小，但是显示卡上的控制电路却是以&quot;字&quot;为单位。所以我们在设定CRTC寄存器时应将字节偏移量转换成字偏移量。比如第二个显示页的偏移地址是1000H（字节），我们现在需要让第二个显示页出现在显示器上，就应该设定CRTC13为00H，而设定CRTC12为08H。请看下面的实验： </p>
  <pre class="code">C:\ASM\&gt;DEBUG[Enter] 
 -a100[Enter] 
0A9B:0100	MOV	AX,B800	；初始化ES寄存器指向显示缓冲区
0A9B:0103	MOV	ES,AX	
0A9B:0105	MOV	DI,1000	；DI寄存器指向第一个显示页偏移地址
0A9B:0108	MOV	AX,0241	；AX寄存器装入"绿色"的字符"A"
0A9B:010B	MOV	CX,0800	；写入一个显示页的数据
0A9B:010E	REPZ STOSW	
0A9B:0110	MOV	DX,03D4	；DX指向索引寄存器
0A9B:0113	MOV	AL,0C	；选择CRTC12寄存器
0A9B:0115	OUT	DX,AL	；输出索引号
0A9B:0116	INC	DX		；DX指向数据寄存器
0A9B:0117	MOV	AL,08	；输出第1显示页偏移地址高字节
0A9B:0119	OUT	DX,AL	
0A9B:011A	MOV	AH,00	；等待键盘输入
0A9B:011C	INT	16	
0A9B:011E	DEC	DX		；DX指向索引寄存器
0A9B:011F	MOV	AL,0C	；选择CRTC12寄存器
0A9B:0121	OUT	DX,AL	；输出索引号
0A9B:0122	INC	DX		；DX指向数据寄存器
0A9B:0123	MOV	AL,00	；输出第0显示页偏移地址的高字节
0A9B:0125	OUT	DX,AL	
0A9B:0126	INT	20		；结束程序

</pre>
  <p>键入命令&quot;G=100 110&quot;后屏幕上无任何反映，继续键入&quot;G=110&quot;后屏幕上出现了一片绿色的大写字母&quot;A&quot;，此时按下任意键屏幕上重新出现第一个显示页的内容。</p>
  <div  class="rpindex"><a href="6-42.html">下一页</a><a href="6-4.html">上一页</a><a href="index.html">目录</a> </div>


<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->
