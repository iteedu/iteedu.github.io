<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end -->
<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->


  <div  class="lpindex"><a href="index.html">目录</a> <a href="4-1.html">上一页</a> <a href="4-12.html">下一页</a> </div>
  <p> 有一点必须说明，定时器具有多种工作状态，并非每种工作状态都能产生声音，所以当我们想通过定时器产生声音时，我们应首先&quot;初始化&quot;定时器，为其建立正确的工作状态。初始 化定时器并不复杂，向端口43H输出数据0B6H即可。这个数据的二进制形式是10110110，有些书籍把这个数称为&quot;幻数&quot;（MAGIC   BYTE）。用这样一个数的原因笔者不作过多讨论，大家可以查阅别的参考书。</p>
  <pre class="code">C:\ASM\>DEBUG[Enter]
-O61 3[Enter]
-O42 0[Enter]
-O42 3[Enter]</pre>
  <p>有了上面介绍的这些知识，我们就可以编程控制定时器发出给定频率的声音。程序PROG6可以使喇叭发出1000Hz的声音，这个程序中有一个新的逻辑操作指令： </p>
  <p>助记符：OR（or）<br />
    用　途：将两个数据作&quot;或&quot;逻辑操作<br />
    格　式：OR 寄存器，立即数<br />
    OR 寄存器，寄存器<br />
    OR   寄存器，存储器<br />
    OR 存储单元，寄存器<br />
    OR 存储单元，立即数</p>
  <p> 执　行：两个操作数进行&quot;或&quot;计算，结果保存在左边的寄存器或存储单元中 </p>
  <h5>PROG6</h5>
  <pre class="code">-a100[Enter]
0A3E:0100 MOV AL,B6		；AL寄存器装入定时器初始化设置码
0A3E:0102 OUT 43,AL		；将设置码输出到43H端口
0A3E:0104 MOV AX,04A9	；AX寄存器置入N值
0A3E:0107 OUT 42,AL		；将N值分两次输出到42H端口
0A3E:0109 MOV AL,AH		
0A3E:010B OUT 42,AL	
0A3E:010D IN AL,61		；取得61H端口的当前状态
0A3E:010F PUSH AX		；在堆栈中保存61H端口的当前状态
0A3E:0110 OR AL,03		；准备将03H输出到61H端口
0A3E:0112 OUT 61,AL		；打开定时器及电子开关
0A3E:0114 MOV AH,01		；选择DOS API的01H功能
0A3E:0116 INT 21		；调用21H中断等待键盘输入
0A3E:0118 POP AX		；从堆栈中取回61H端口的原状态
0A3E:0119 OUT 61,AL		；恢复61H端口的原状态
0A3E:011B RET	        ；结束程序运行
0A3E:011C 	
</pre>
  <h3>4．1．2 编制源程序</h3>
  <p>我们已经用DEBUG编制了一些程序，相信大家对DEBUG已有了较深的了解。DEBUG虽然小巧，但它存在很多弱点。最明显的，当我们用&quot;JMP&quot;指令向高地址方向转移时，我们无法知道目的地址究竟是多少，只能先假设一个地址，等到全部程序输入完后在修改转移指令的目的地址。这个问题在DEBUG中无法解决，毕竟它不是一个真正的编译系统。那么如何应用汇编语言的编译系统？这就是我们现在要讨论的问题。先来看这样一个程序——PROG7.ASM： </p>
  <h5>PROG7.ASM</h5>
  <pre class="code">CODE	SEGMENT		；定义代码段
	ORG	100H			；设定偏移地址为0100H
MAIN	PROC	NEAR	；定义主过程开始
	MOV	AL,10110110B	；AL寄存器置入定时器初始化设置码
	OUT	43H,AL			；初始化定时器
	MOV	AX,4A9H			；设置N值为04A9H
	OUT	42H,AL			；输出N值
	MOV	AL,AH	
	OUT	42H,AL	
	 IN	AL,61H			；取得61H端口当前状态
	PUSH	AX			；将61H端口的当前状态存入堆栈
			
			
	OR	AL,3			；将61H端口的低2位改为1
	OUT	61H,AL			；打开定时器及与门
	MOV	AH,1			；选择DOS API的01号功能
	INT	21H				；调用21H中断等待键盘输入
	POP	AX				；取回61H端口的原状态
	OUT	61H,AL		；关闭定时器及与门
	 RET		
MAIN ENDP				；主过程结束
CODE ENDS				；代码段结束
	END 	MAIN 		；进程结束 
</pre>
  <p>这个程序看上去很眼熟吧，它就是PROG6的源程序形式，不过和PROG6相比，它有点面目全非了。我们先来讨论一个简单的问题：源程序中的数。</p>
  <p> 采用DEBUG编程时所用的数都是16进制的，如果需要使用其它进制的数，程序员就必须自己将其转换为16进制。而编制汇编源程序则没有这个烦琐的问题，我们可以在源程序中使用任意进制的数，只需在数的末尾给出进制标识即可。 </p>
  <div class="rpindex"><a href="4-12.html">下一页</a><a href="4-1.html">上一页</a><a href="index.html">目录</a> </div>


<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->
