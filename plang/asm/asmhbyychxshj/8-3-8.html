<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end -->
<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->


<div class="lpindex"><a href="index.html">首页</a><a href="8-3-7.html"> 上一页</a><a href="8-3-9.html"> 下一页</a></div>
<h5>5、屏幕输出的举例 </h5>
<h5> 例8.2 用直接写屏方式在屏幕第5行、第10列以黄色(0EH)显示字符串&quot;Hello&quot;。 </h5>
<p> 解：在文本显示方式下，每行显示80个字符，每个字符占2个字节，所以，显示一行需要160个字节。若在第m行、第n列位置显示字符，则该位置所对应存储单元的偏移量为：m×160 + n×2。 </p>
<pre class="code">

.MODEL SMALL

.DATA

Yellow　EQU　0EH

MSG1　DB　"Welcome..."

Count　EQU　$-MSG1

.CODE

.STARTUP

MOV AX, 0B800H

MOV ES, AX ;彩色显示器的显示缓冲区段地址 

MOV DI, 5

IMUL DI, 160 ;5行所跳过的显示存储单元 

MOV CX, 10

SHL CX, 1 ;10列所跳过的显示存储单元 

ADD DI, CX ;第5行、第10列之前所跳过的所有显示单元 

MOV CX, Count

LEA SI, MSG1 ;CX:字符个数，SI:显示字符首地址 

MOV AH, Yellow ;设置显示属性，即显示颜色 

.REPEAT

LODSB ;取显示字符 

STOSW ;向显示缓冲区设置显示字符和属性 

.UNTILCXZ

.EXIT　0

END</pre >
<p> 例8.3 用“霓虹灯”的显示方式显示字符串&quot;Hello&quot;，按ESC键时结束程序的运行。 </p>
<p> 解：</p>
<pre  class="code">.MODEL        SMALL, C
.DATA
　KBEsc　EQU　1BH 
　BUFF　DB　"H", 15, "e", 15, "l", 15, "l", 15, "o", 15 
.CODE
       Clear  PROC      Near Uses AX BX CX DX   ;清屏幕，并保护所用寄存器
              MOV       CL, 0
              MOV       CH, 0
              MOV       DL, 79
              MOV       DH, 24      ;(0,0)-(24,79)是屏幕的左上角和右下角
              MOV       BH, 7
              MOV       AL, 0
              MOV       AH, 6
              INT       10H
              RET
       Clear  ENDP
.STARTUP 
              CALL      Clear
              MOV       AX, DS
              MOV       ES, AX
              MOV       SI, 9
      again:
              MOV       BUFF[SI], 15            ;把前一次的红色还原
              ADD       SI, 2
.IF           SI > 9
　　MOV　SI, 1
.ENDIF
              MOV       BUFF[SI], 12            ;把当前字符以红色显示
              MOV       BH, 0
              MOV       CX, 5
              MOV       DH, 5
              MOV       DL, 20      ;显示位置从(5, 20)开始
              LEA       BP, BUFF
              MOV       AL, 2
              MOV       AH, 13H
              INT       10H         ;调用中断10H之功能13H
              MOV       AH, 1
              INT       16H         ;检查是否有按键
              JZ        again       ;若无字符可读，则继续循环
              MOV       AH, 0
              INT       16H
              CMP       AL, KBEsc
              JNZ       again       ;若按键不是Escape，则继续循环
.EXIT　0 
              END
</pre>
<p> 例8.4 编写一个输入密码的程序，该程序的具体要求如下： </p>
<p> 1、每输入一个字符，显示字符&quot;#&quot;表示之； </p>
<p> 2、密码最多只有10个字符，多余的按键被丢弃； </p>
<p> 3、若输入的字符串为&quot;HELLO&quot;，则以蓝色显示&quot;Welcome…&quot;，否则，以闪烁、亮红色在显示&quot;Invalid Password&quot;。 </p>
<p> 解：</p>
<pre class="code">             
.MODEL        SMALL
.DATA
　CR　　　EQU　0DH
　MSG1　DB　"Welcome..."
　MSG2　DB　"Invalid Password"
　PSW1　DB　"HELLO"
　BUFF　DB　10 DUP(?) 
.CODE
 .STARTUP 
              MOV       AX, DS
              MOV       ES, AX
              XOR       BX, BX
      again:
              MOV       AH, 0H
              INT       16H         ;从键盘接受字符输入
              CMP       AL, CR
              JZ        next        ;若按“回车“键，则结束密码输入
              CMP       BX, 10
              JZ        again       ;若已接受了10个字符，则丢弃随后的字符
.IF           AL>='a' && AL<=’z’
　　SUB　 AL, 20H
.ENDIF
              MOV       BUFF[BX], AL
              INC       BX          ;保存当前输入，并移动有关指针
              MOV       DL, '#'
              MOV       AH, 2
              INT       21H         ;在屏幕上显示字符”#”
              JMP       again
       next:
              CALL      Clear       ;清屏幕，见例8.2中的过程定义
              CMP       BX, 5
              JNZ       error       ;若输入的字符串长度不为5，则密码错误
              LEA       SI, PSW1
              LEA       DI, BUFF
              MOV       CX, BX
              CLD
              REPE      CMPSB       ;比较字符串PSW1和BUFF
.IF           ZERO?       ;若字符串的相应字符相同
　　MOV　BP, OFFSET MSG1 ;显示字符串首地址 
　　MOV　BL, 09H ;显示字符颜色：蓝色 
　　MOV　CX, 0AH ;显示字符串长度：10 
.ELSE
　　MOV　BP, OFFSET MSG2 ;显示字符串首地址 
　　MOV　BL, 8CH ;显示字符颜色：闪烁、亮红色 
　　MOV　CX, 10H ;显示字符串长度：16 
.ENDIF
              MOV       AL, 0
              MOV       BH, 0
              MOV       DH, 5
              MOV       DL, 20      ;在位置(5,20)的位置开始显示字符串
              MOV       AH, 13H
              INT       10H         ;使用中断10H之功能13H来显示字符串
.EXIT　0 
              END
</pre>
<p> 例8.5  在256色320×200的图形显示模式下，从屏幕最左边向最右边，依次画竖线(从顶到底)，线的颜色从1依次加1。要求用中断调用的方法来画线。 </p>
<p> 解：</p>
<pre class="code">.MODEL        SMALL
.DATA
　 mode　DB　?　　　　　;保存当前显示模式
.CODE
       VLine  PROC      Near USES AX BX DX      ;画一条竖线，CX—竖线所在的列，AL—线的颜色
              MOV       DX, 0
              MOV       BH, 0
              MOV       AH, 0CH
       draw:
       VLine  INT       10H
              INC       DX
              CMP       DX, 200
              JL        draw
              RET
              ENDP
 .STARTUP 
              MOV       AH, 0FH
              INT       10H
              MOV       mode, AL    ;保存当前显示模式，在程序结束前恢复之
              MOV       AH, 0
              MOV       AL, 13H
              INT       10H         ;设置256色320×200的图形显示模式
              MOV       CX, 0
              MOV       AL, 01H     ;CX＝线所在列，AL＝线的颜色
       draw:
              CALL      VLine
              INC       AL
              INC       CX
              CMP       CX, 320
              JL        draw        ;从左到右画320条竖线
              MOV       AH, 0
              INT       16H         ;等待一个按键
              MOV       AL, mode
              MOV       AH, 0
              INT       10H         ;恢复原来的屏幕显示模式
.EXIT　0 
              END
</pre>
<p> 例8.6  在256色320×200的图形显示模式下，从屏幕顶到屏幕底依次画横线(从最左边到最右边)，线的颜色从1依次加1。要求用直接操作显示缓冲区的方法来画线。 </p>
<p>解： </p>
<pre class="code">.MODEL        SMALL
.DATA
　 mode　DB　?　　　　　　　　　　;保存当前显示模式
.CODE
       HLine  PROC      Near USES CX DI         ;画一条横线，DI—横线所在行，AL—线的颜色
              IMUL      DI, 320     ;跳过前面横所对应的字节，每行320个字节
              MOV       CX, 320
              REP       STOSB       ;重复设置AL的值
              RET
       HLine  ENDP
 .STARTUP 
              MOV       AH, 0FH
              INT       10H
              MOV       mode, AL    ;保存当前显示模式，在程序结束前恢复之
              MOV       AH, 0
              MOV       AL, 13H
              INT       10H         ;设置256色320×200的图形显示模式
              MOV       AX, 0A000H
              MOV       ES, AX      ;图形模式的段地址为0A000H
              CLD
              MOV       DI, 0
              MOV       AL, 01H     ;CX＝线所在列，AL＝线的颜色
       draw:
              CALL      HLine
              INC       AL
              INC       DI
              CMP       DI, 200
              JL        draw        ;从上到下画200条横线
              MOV       AH, 0
              INT       16H         ;等待一个按键
              MOV       AL, mode
              MOV       AH, 0
              INT       10H         ;恢复原来的屏幕显示模式
.EXIT　0 
              END
</pre>
<div class="rpindex"><a href="8-3-9.html"> 下一页</a><a href="8-3-7.html"> 上一页</a><a href="index.html">首页</a></div>


<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->
