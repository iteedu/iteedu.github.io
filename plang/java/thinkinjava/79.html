<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end -->
<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->


  <div class="lpindex"><a href="index.html">首页</a><a href="78.html"> 上一页</a><a href="80.html"> 下一页</a></div>
  <h2>10.2 增添属性和有用的接口</h2>
  利用层次化对象动态和透明地添加单个对象的能力的做法叫作“装饰器”（Decorator）方案——“方案”属于本书第16章的主题（注释①）。装饰器方案规定封装于初始化对象中的所有对象都拥有相同的接口，以便利用装饰器的“透明”性质——我们将相同的消息发给一个对象，无论它是否已被“装饰”。这正是在Java
  IO库里存在“过滤器”（Filter）类的原因：抽象的“过滤器”类是所有装饰器的基础类（装饰器必须拥有与它装饰的那个对象相同的接口，但装饰器亦可对接口作出扩展，这种情况见诸于几个特殊的“过滤器”类中）。子类处理要求大量子类对每种可能的组合提供支持时，便经常会用到装饰器——由于组合形式太多，造成子类处理变得不切实际。Java 
  IO库要求许多不同的特性组合方案，这正是装饰器方案显得特别有用的原因。但是，装饰器方案也有自己的一个缺点。在我们写一个程序的时候，装饰器为我们提供了大得多的灵活性（因为可以方便地混合与匹配属性），但它们也使自己的代码变得更加复杂。原因在于Java
  IO库操作不便，我们必须创建许多类—“核心”IO类型加上所有装饰器——才能得到自己希望的单个IO对象。
  <p>FilterInputStream和FilterOutputStream（这两个名字不十分直观）提供了相应的装饰器接口，用于控制一个特定的输入流（InputStream）或者输出流（OutputStream）。它们分别是从InputStream和OutputStream衍生出来的。此外，它们都属于抽象类，在理论上为我们与一个流的不同通信手段都提供了一个通用的接口。事实上，FilterInputStream和FilterOutputStream只是简单地模仿了自己的基础类，它们是一个装饰器的基本要求。</p>
  <h3>10.2.1 通过FilterInputStream从InputStream里读入数据</h3>
  <p>FilterInputStream类要完成两件全然不同的事情。其中，DataInputStream允许我们读取不同的基本类型数据以及String对象（所有方法都以“read”开头，比如readByte()，readFloat()等等）。伴随对应的DataOutputStream，我们可通过数据“流”将基本类型的数据从一个地方搬到另一个地方。这些“地方”是由表10.1总结的那些类决定的。若读取块内的数据，并自己进行解析，就不需要用到DataInputStream。但在其他许多情况下，我们一般都想用它对自己读入的数据进行自动格式化。</p>
  <p>剩下的类用于修改InputStream的内部行为方式：是否进行缓冲，是否跟踪自己读入的数据行，以及是否能够推回一个字符等等。后两种类看起来特别象提供对构建一个编译器的支持（换言之，添加它们为了支持Java编译器的构建），所以在常规编程中一般都用不着它们。</p>
  <p>也许几乎每次都要缓冲自己的输入，无论连接的是哪个IO设备。所以IO库最明智的做法就是将未缓冲输入作为一种特殊情况处理，同时将缓冲输入接纳为标准做法。</p>
  <h5>表10.3 FilterInputStream的类型</h5>
  <table>
    <tr>
      <td> Class</td>
      <td> Function</td>
      <td>Constructor 
        Arguments</td>
      <td> How to use it</td>
    </tr>
    <tr>
      <td><b>Data-InputStream</b></td>
      <td>Used in concert with <b>DataOutputStream</b>, so you can read primitives (int, char, long, etc.) from 
        a stream in a portable fashion.</td>
      <td><b>InputStream</b></td>
      <td>Contains a full interface to allow 
        you to read primitive types.</td>
    </tr>
    <tr>
      <td><b>Buffered-InputStream</b></td>
      <td>Use this to prevent a physical read
        every time you want more data. You&#8217;re saying &#8220;Use a 
        buffer.&#8221;</td>
      <td><b>InputStream</b>, with optional 
        buffer size.</td>
      <td>This doesn&#8217;t provide an
        interface <i>per se</i>, just a requirement that a buffer be used. Attach an 
        interface object.</td>
    </tr>
    <tr>
      <td><b>LineNumber-InputStream</b></td>
      <td>Keeps track of line numbers in the 
        input stream; you can call <b>getLineNumber(&#160;)</b> and <b>setLineNumber(int)</b>.</td>
      <td><b>InputStream</b></td>
      <td>This just adds line numbering, so 
        you&#8217;ll probably attach an interface object.</td>
    </tr>
    <tr>
      <td><b>Pushback-InputStream</b></td>
      <td>Has a one byte push-back buffer so 
        that you can push back the last character read.</td>
      <td><b>InputStream</b></td>
      <td>Generally used in the scanner for a
        compiler and probably included because the Java compiler needed it. You probably 
        won&#8217;t use this.</td>
    </tr>
  </table>
  <p>类 功能 构建器参数／如何使用</p>
  DataInputStream 与DataOutputStream联合使用，使自己能以机动方式读取一个流中的基本数据类型（int，char，long等等）
  <p>InputStream/包含了一个完整的接口，以便读取基本数据类型</p>
  BufferedInputStream 
  避免每次想要更多数据时都进行物理性的读取，告诉它“请先在缓冲区里找”
  <p>InputStream，没有可选的缓冲区大小／本身并不能提供一个接口，只是发出使用缓冲区的要求。要求同一个接口对象连接到一起</p>
  LineNumberInputStream 跟踪输入流中的行号；可调用getLineNumber()以及setLineNumber(int)
  <p>只是添加对数据行编号的能力，所以可能需要同一个真正的接口对象连接</p>
  PushbackInputStream
  <p>有一个字节的后推缓冲区，以便后推读入的上一个字符 InputStream／通常由编译器在扫描器中使用，因为Java编译器需要它。一般不在自己的代码中使用</p>
  <h3>10.2.2 通过FilterOutputStream向OutputStream里写入数据</h3>
  <p>与DataInputStream对应的是DataOutputStream，后者对各个基本数据类型以及String对象进行格式化，并将其置入一个数据“流”中，以便任何机器上的DataInputStream都能正常地读取它们。所有方法都以“wirte”开头，例如writeByte()，writeFloat()等等。</p>
  <p>若想进行一些真正的格式化输出，比如输出到控制台，请使用PrintStream。利用它可以打印出所有基本数据类型以及String对象，并可采用一种易于查看的格式。这与DataOutputStream正好相反，后者的目标是将那些数据置入一个数据流中，以便DataInputStream能够方便地重新构造它们。System.out静态对象是一个PrintStream。</p>
  <p>PrintStream内两个重要的方法是print()和println()。它们已进行了覆盖处理，可打印出所有数据类型。print()和println()之间的差异是后者在操作完毕后会自动添加一个新行。</p>
  <p>BufferedOutputStream属于一种“修改器”，用于指示数据流使用缓冲技术，使自己不必每次都向流内物理性地写入数据。通常都应将它应用于文件处理和控制器IO。</p>
  <h5>表10.4 FilterOutputStream的类型</h5>
  <table>
    <tr>
      <th> Class</th>
      <th> Function</th>
      <th> Constructor Arguments </th>
      <th> How to use it</th>
    </tr>
    <tr>
      <td><b>Data-OutputStream</b></td>
      <td>Used in concert with <b>DataInputStream</b> so you can write primitives (int, char, long, etc.) to a 
        stream in a portable fashion.</td>
      <td><b>OutputStream</b></td>
      <td>Contains full interface to allow 
        you to write primitive types.</td>
    </tr>
    <tr>
      <td><b>PrintStream</b></td>
      <td>For producing formatted output. 
        While <b>DataOutputStream</b> handles the <i>storage</i> of data, <b>PrintStream</b> handles <i>display</i>.</td>
      <td><b>OutputStream</b>, with optional
        boolean indicating that the buffer is flushed with every 
        newline.</td>
      <td>Should be the &#8220;final&#8221;
        wrapping for your <b>OutputStream</b> object. You&#8217;ll probably use this a 
        lot.</td>
    </tr>
    <tr>
      <td><b>Buffered-OutputStream</b></td>
      <td>Use this to prevent a physical
        write every time you send a piece of data. You&#8217;re saying &#8220;Use a
        buffer.&#8221; You can call <b>flush(&#160;)</b> to flush the 
        buffer.</td>
      <td><b>OutputStream</b>, with optional 
        buffer size.</td>
      <td>This doesn&#8217;t provide an
        interface <i>per se</i>, just a requirement that a buffer is used. Attach an 
        interface object.</td>
    </tr>
  </table>
  <p>类 功能 构建器参数／如何使用</p>
  DataOutputStream 与DataInputStream配合使用，以便采用方便的形式将基本数据类型（int，char，long等）写入一个数据流
  <p>OutputStream／包含了完整接口，以便我们写入基本数据类型</p>
  PrintStream 用于产生格式化输出。DataOutputStream控制的是数据的“存储”，而PrintStream控制的是“显示”
  <p>OutputStream，可选一个布尔参数，指示缓冲区是否与每个新行一同刷新／对于自己的OutputStream对象，应该用“final”将其封闭在内。可能经常都要用到它</p>
  BufferedOutputStream 
  用它避免每次发出数据的时候都要进行物理性的写入，要求它“请先在缓冲区里找”。可调用flush()，对缓冲区进行刷新
  <p>OutputStream，可选缓冲区大小／本身并不能提供一个接口，只是发出使用缓冲区的要求。需要同一个接口对象连接到一起</p>
  <div class="rpindex"><a href="80.html"> 下一页</a><a href="78.html"> 上一页</a><a href="index.html">首页</a></div>


<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->
