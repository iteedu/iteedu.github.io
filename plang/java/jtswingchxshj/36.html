<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end -->
<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->


  <div class="lpindex"><a href="index.html">首页</a><a href="35.html"> 上一页</a><a href="37.html"> 下一页</a></div>
  <h2>8-2:TableModel</h2>
  <p> TableModel类本身是一个interface,在这个interface里面定义了若干的方法:包括了存取表格字段(cell)的内容、计算表格的列数等等
    的基本存取操作，让设计者可以简单地利用TableModel来实作他所想要的表格。TableModel界面是放在javax.swing.table package中，这
    个package定义了许多JTable会用到的各种Model,读者可利用java api文件找到这个package,并由此package找到各类或界面所定义的方法
    。 </p>
  <h5>TableModel方法： </h5>
  <pre>void             addTableModelListener(TableModelListener l):使表格具有处理TableModelEvent的能力。当表格的Table Model有所
                                            变化时，会发出TableModel Event事件信息.
Class            getColumnClass(int columnIndex):返回字段数据类型的类名称.
int              getColumnCount():返回字段(行)数量.
String           getColumnName(int columnIndex):返回字段名称.
int              getRowCount():返回数据列数量.
Object           getValueAt(int rowIndex,int columnIndex):返回数据某个cell中的值.
boolean          isCellEditable(int rowIndex,int columnIndex):返回cell是否可编辑,true的话为可编辑.
void             removeTableModelListener(TableModelListener l):从TableModelListener中移除一个listener.
void             setValueAt(Object aValue,int rowIndex,int columnIndex):设置某个cell(rowIndex,columnIndex)的值;</pre>
  <p>由于TableModel本身是一个Interface,因此若要直接实现此界面来建立表格并不是件轻松的事.幸好java提供了两个类分别实现了这个
    界面,一个是AbstractTableModel抽象类,一个是DefaultTableModel实体类.前者实现了大部份的TableModel方法,让用户可以很有弹性地构
    造自己的表格模式;后者继承前者类,是java默认的表格模式.这三者的关系如下所示: </p>
  <p>TableModel---implements--->AbstractTableModel-----extends--->DefaultTableModel </p>
  <h2><a name="a" id="a"></a>8-3:AbstractTableModel: </h2>
  <p>java提供的AbstractTableModel是一个抽象类,这个类帮我们实现大部份的TableModel方法,除了getRowCount(),getColumnCount(),
    getValueAt()这三个方法外.因此我们的主要任务就是去实现这三个方法.利用这个抽象类就可以设计出不同格式的表格.我们来看看它所
    提供的方法: </p>
  <h5>AbstractTableModel方法: </h5>
  <ul>
    <li>void   addTableModelListener(TableModelListener l):使表格具有处理TableModelEvent的能力.当表格的Table Model有所变化时,会发
      出TableModelEvent事件信息. </li>
    <li>int    findColumn(String columnName):寻找在行名称中是否含有columnName这个项目.若有,则返回其所在行的位置;反之则返回-1表示
      未找到.
      void   fireTableCellUpdated(int row, int column):通知所有的Listener在这个表格中的(row,column)字段的内容已经改变了.</li>
    <li> void   fireTableChanged(TableModelEvent e):将所收的事件通知传送给所有在这个table model中注册过的TableModelListeners.</li>
    <li> void   fireTableDataChanged():通知所有的listener在这个表格中列的内容已经改变了.列的数目可能已经改变了,因此JTable可能需要
      重新显示此表格的结构. </li>
    <li>void   fireTableRowsDeleted(int firstRow, int lastRow):通知所有的listener在这个表格中第firstrow行至lastrow列已经被删除了. </li>
    <li>void   fireTableRowsUpdated(int firstRow, int lastRow)
      :通知所有的listener在这个表格中第firstrow行至lastrow列已经被修改了. </li>
    <li>void   fireTableRowsInserted(int firstRow, int lastRow):通知所有的listener在这个表格中第firstrow行至lastrow列已经被加入了
      . </li>
    <li>void   fireTableStructureChanged():通知所有的listener在这个表格的结构已经改变了.行的数目,名称以及数据类型都可能已经改变了
      . </li>
    <li>Class  getColumnClass(int columnIndex):返回字段数据类型的类名称. </li>
    <li>String getColumnName(int column):若没有设置列标题则返回默认值,依次为A,B,C,...Z,AA,AB,..;若无此column,则返回一个空的String
      . </li>
    <li>Public EventListener[] getListeners(Class listenerType):返回所有在这个table model所建立的listener中符合listenerType的
      listener,并以数组形式返回. </li>
    <li>boolean	isCellEditable(int rowIndex, int columnIndex)
      :返回所有在这个table model所建立的listener中符合listenerType形式的
      listener,并以数组形式返回. </li>
    <li>void	removeTableModelListener(TableModelListener l):从TableModelListener中移除一个listener. </li>
    <li>void	setValueAt(Object aValue, int rowIndex, int columnIndex)
      :设置某个cell(rowIndex,columnIndex)的值. </li>
  </ul>
  <p>若你仔细比较TableModel所定义的方法与上述AbstractTableModel所提供的方法,你可以发现,AbstractTableModel抽象类并没有实现
    getRowCount(),getColumnCount(),getValueAt()这三个方法,这也就是为什么我们要去实现这三个方法的原因.下面我们来看如何使用
    AbstractTableModel来实作出自己想要的表格模式.</p>
  <h5> 范例:TableModel1.java </h5>
  <pre class="code">import javax.swing.table.AbstractTableModel;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class TableModel1 {
	public TableModel1() {
		JFrame f = new JFrame();
		MyTable mt = new MyTable();
		JTable t = new JTable(mt);
		t.setPreferredScrollableViewportSize(new Dimension(550, 30));
		JScrollPane s = new JScrollPane(t);
		f.getContentPane().add(s, BorderLayout.CENTER);
		f.setTitle("JTable1");
		f.pack();
		f.setVisible(true);
		f.addWindowListener(new WindowAdapter() {
			public void windowClosing(WindowEvent e) {
				System.exit(0);
			}
		});
	}

	public static void main(String args[]) {

		new TableModel1();
	}
}

class MyTable extends AbstractTableModel {
	Object[][] p = {
			{ "阿呆", new Integer(66), new Integer(32), new Integer(98),
					new Boolean(false), new Boolean(false) },
			{ "阿瓜", new Integer(85), new Integer(69), new Integer(154),
					new Boolean(true), new Boolean(false) }, };
	String[] n = { "姓名", "语文", "数学", "总分", "及格", "作弊" };

	public int getColumnCount() {
		return n.length;
	}

	public int getRowCount() {
		return p.length;
	}

	public String getColumnName(int col) {
		return n[col];
	}

	public Object getValueAt(int row, int col) {
		return p[row][col];
	}

	public Class getColumnClass(int c) {
		return getValueAt(0, c).getClass();
	}
}</pre>
  <p>上例中表格内的数据类型不论是String,int或是Boolean类型,都均以string的类型显示.例如在及格的字段中,原本的数据是以Boolean
    类型来表示,但显示在JTable上时便转换成字符串形式,若想要使表格能显示出不同的数据类型,我们要在MyTable中Override写getColumnCl
    ass()方法,这个方法可以让我们分辨出表格中每一行的数据类型,并将此类型作适当的显示: </p>
  <pre class="code">public Class getColumnClass(int c) {
     return getValueAt(0, c).getClass();
     }</pre>
  <p>这样"作弊"会以Check Box显示,数据类型一律靠右显示,String类型一律靠左显示.</p>
  <h5> TableModel2.java </h5>
  <pre class="code">import javax.swing.table.AbstractTableModel;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class TableModel2 implements ActionListener {

	JTable t = null;

	public TableModel2() {

		JFrame f = new JFrame("DataModel");
		JButton b1 = new JButton("数学老师");
		b1.addActionListener(this);
		JButton b2 = new JButton("学生阿呆");
		b2.addActionListener(this);
		JPanel panel = new JPanel();
		panel.add(b1);
		panel.add(b2);

		t = new JTable(new MyTable(1));
		t.setPreferredScrollableViewportSize(new Dimension(550, 30));
		JScrollPane s = new JScrollPane(t);

		f.getContentPane().add(panel, BorderLayout.NORTH);
		f.getContentPane().add(s, BorderLayout.CENTER);
		f.pack();
		f.setVisible(true);

		f.addWindowListener(new WindowAdapter() {
			public void windowClosing(WindowEvent e) {
				System.exit(0);
			}
		});
	}

	public void actionPerformed(ActionEvent e) {
		if (e.getActionCommand().equals("学生阿呆"))
			t.setModel(new MyTable(1));
		if (e.getActionCommand().equals("数学老师"))
			t.setModel(new MyTable(2));
		t.revalidate();
	}

	public static void main(String args[]) {

		new TableModel2();
	}
}

class MyTable extends AbstractTableModel {

	Object[][] p1 = { { "阿呆", "1234", new Integer(66), new Integer(50),
			new Integer(116), new Boolean(false), new Boolean(false) } };

	String[] n1 = { "姓名", "学号", "语文", "数学", "总分", "及格", "作弊" };

	Object[][] p2 = {
			{ "阿呆", "1234", new Integer(50), new Boolean(false),
					new Boolean(false), "01234" },
			{ "阿瓜", "1235", new Integer(75), new Boolean(true),
					new Boolean(false), "05678" } };

	String[] n2 = { "姓名", "学号", "数学", "及格", "作弊", "电话" };

	int model = 1;

	public MyTable(int i) {
		model = i;
	}

	public int getColumnCount() {
		if (model == 1)
			return n1.length;
		else
			return n2.length;
	}

	public int getRowCount() {
		if (model == 1)
			return p1.length;
		else
			return p2.length;
	}

	public String getColumnName(int col) {
		if (model == 1)
			return n1[col];
		else
			return n2[col];
	}

	public Object getValueAt(int row, int col) {
		if (model == 1)
			return p1[row][col];
		else
			return p2[row][col];
	}

	public Class getColumnClass(int c) {
		return getValueAt(0, c).getClass();
	}
}</pre>
  <div class="rpindex"><a href="37.html"> 下一页</a><a href="35.html"> 上一页</a><a href="index.html">首页</a></div>


<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->
