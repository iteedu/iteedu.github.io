<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end -->
<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->


<div class="lpindex"><a href="index.html">首页</a><a href="52.html"> 上一页</a><a href="54.html"> 下一页</a></div>
<h1>Java Gossip:&nbsp;&#20869;部&#31867;&#21035;（Inner class）</h1>
<p>在&#31867;&#21035;中您&#36824;可以定&#20041;&#31867;&#21035;，&#31216;之&#20026;&#20869;部&#31867;&#21035;（Inner class）或「巢&#29366;&#31867;&#21035;」（Nested class）。非&quot;static&quot;的&#20869;部&#31867;&#21035;可以分&#20026;三种：成&#21592;&#20869;部&#31867;&#21035;（Member inner class）、&#21306;域&#20869;部&#31867;&#21035;（Local inner class）与匿名&#20869;部&#31867;&#21035;（Anonymous inner class）。<br />
<br />
使用&#20869;部&#31867;&#21035;的好&#22788;在于可以直接存取外部&#31867;&#21035;的私用（private）成&#21592;，&#20030;&#20010;例子&#26469;&#35828;，在窗口程序中，您可以使用&#20869;部&#31867;&#21035;&#26469;&#23454;作一&#20010;事件&#20542;听者&#31867;&#21035;，&#36825;&#20010;窗口&#20542;听者&#31867;&#21035;可以直接存取窗口&#32452;件，而不用透&#36807;&#21442;&#25968;&#20256;&#36882;。<br />
<br />
另一&#20010;好&#22788;是，&#24403;某&#20010;Slave&#31867;&#21035;完全只服&#21153;于一&#20010;Master&#31867;&#21035;&#26102;，我&#20204;可以&#23558;之&#35774;定&#20026;&#20869;部&#31867;&#21035;，如此使用Master&#31867;&#21035;的人就不用知道 Slave的存在。<br />
<br />
成&#21592;&#20869;部&#31867;&#21035;是直接宣告&#31867;&#21035;&#20026;成&#21592;，例如：</p>
<pre class="code">public class OuterClass {
	// ....
	// 内部类别
	private class InnerClass {
		// ....
	}
}</pre>
<p>&#20869;部&#31867;&#21035;同&#26679;也可以使用&quot;public&quot;、&quot;protected&quot;或&quot;private&quot;&#26469;修&#39280;，通常宣告&#20026;&quot;private&quot;的情&#20917;&#36739;多，下面&#36825;&#20010;程序&#31616;&#21333;示范成&#21592;&#20869;部&#31867;&#21035;的使用：</p>
<h5>OutClass.java </h5>
<pre class="code">
public class OutClass {
	// 内部类别
	private class Point {
		private int x, y;
		public Point() {
			x = 0; y = 0;
		}
		public void setPoint(int x, int y) {
			this.x = x;
			this.y = y;
		}
		public int getX() {
			return x;
		}
		public int getY() {
			return y;
		}
	}
	private Point[] points;
	public OutClass(int length) {
		points = new Point[length];
		for(int i = 0; i < points.length; i++) {
			points[i] = new Point();
			points[i].setPoint(i*5, i*5);
		}
	}
	public void showPoints() {
		for(int i = 0; i < points.length; i++) {
			System.out.printf("Point[%d]: x = %d, y = %d%n",
			i, points[i].getX(), points[i].getY());
		}
	}
}</pre>
<p><br />
上面的程序假&#35774;Point&#31867;&#21035;只服&#21153;于OutClass&#31867;&#21035;，所以使用OutClass&#26102;，不必知道Point&#31867;&#21035;的存在，例如：</p>
<h5>UseInnerClass.java </h5>
<pre class="code">
public class UseInnerClass {
	public static void main(String[] args) {
		OutClass out = new OutClass(10);
		out.showPoints();
	}
}</pre>
<p>&#21306;域&#20869;部&#31867;&#21035;的使用与成&#21592;&#20869;部&#31867;&#21035;&#31867;似，&#21306;域&#20869;部&#31867;&#21035;定&#20041;于一&#20010;方法中，&#31867;&#21035;的可&#35270;范&#22260;与生成之&#23545;象&#20165;止于&#35813;方法之中，&#21306;域&#20869;部&#31867;&#21035;的&#24212;用一般&#36739;&#20026;少&#35265;。<br />
<br />
&#20869;部匿名&#31867;&#21035;可以不宣告&#31867;&#21035;名&#31216;，而使用new直接&#20135;生一&#20010;&#23545;象，&#35813;&#23545;象可以是&#32487;承某&#20010;&#31867;&#21035;或是&#23454;作某&#20010;接口，&#20869;部匿名&#31867;&#21035;的宣告方式如下：</p>
<pre class="code">new [类别或接口()] {
	// 实作
}</pre>
<p> 一&#20010;使用&#20869;部匿名&#31867;&#21035;的例子如下所示，您直接&#32487;承Object&#31867;&#21035;&#26469;生成一&#20010;&#23545;象，并改&#20889;其toString()方法：</p>
<h5>UseInnerClass.java </h5>
<pre class="code">
public class UseInnerClass {
	public static void main(String[] args) {
		Object obj = new Object() {
			public String toString() {
				return "匿名类别对象";
			}
		};
		System.out.println(obj.toString());
	}
}</pre>
<p>&#25191;行&#32467;果：</p>
<pre class="code">匿名&#31867;&#21035;&#23545;象</pre>
<p> 注意如果要在&#20869;部匿名&#31867;&#21035;中使用某&#20010;方法中的&#21464;量，它必&#39035;宣告&#20026;&quot;final&quot;，例如下面是&#26080;法通&#36807;&#32534;&#35793;的：</p>
<pre class="code">....
public void someMethod() {
	int x = 10;
	Object obj = new Object() {
		public String toString() {
			return "" + x;
		}
	};
	System.out.println(obj.toString());
}</pre>
<p>&#32534;&#35793;器&#20250;回&#25253;以下的&#38169;&#35823;：</p>
<pre class="code">local variable x is accessed from within inner class; needs to be declared final</pre>
<p> 您要在 x 宣告&#26102;加上final才可以通&#36807;&#32534;&#35793;：</p>
<pre class="code">....
public void someMethod() {
	final int x = 10;
	Object obj = new Object() {
		public String toString() {
			return "" + x;
		}
	};
	System.out.println(obj.toString());
}</pre>
<p> 究其原因，在于 &#21306;域&#21464;量 x 并不是真正被拿&#26469;于&#20869;部匿名&#31867;&#21035;中使用，而是在&#20869;部匿名&#31867;&#21035;中复制一份，作&#20026;field成&#21592;&#26469;使用，由于是复本，即便您在&#20869;部匿名&#31867;&#21035;中&#23545; x 作了修改，&#20250;不&#20250;影&#21709;真正的&#21306;域&#21464;量 x，事&#23454;上您也通不&#36807;&#32534;&#35793;器的&#26816;查，因&#20026;&#32534;&#35793;器要求您加上&quot;final&quot;&#20851;&#38190;&#35789;，&#36825;&#26679;您就知道您不能在&#20869;部匿名&#31867;&#21035;中改&#21464; x 的值。<br />
<br />
&#20869;部&#31867;&#21035;&#36824;可以被宣告&#20026;&quot;static&quot;，不&#36807;由于是&quot;static&quot;，它不能存取外部&#31867;&#21035;的方法，而必&#39035;透&#36807;外部&#31867;&#21035;所生成的&#23545;象&#26469;&#36827;行呼叫，一般&#26469;&#35828;&#36739;少使 用，一种情&#20917;是在main()中要使用某&#20010;&#20869;部&#31867;&#21035;&#26102;，例如：</p>
<h5>UseInnerClass.java </h5>
<pre class="code">
public class UseInnerClass {
	private static class Point {
		private int x, y;
		public Point(int x, int y) {
			this.x = x;
			this.y = y;
		}
		public int getX() {
			return x;
		}
		public int getY() {
			return y;
		}
	}
	public static void main(String[] args) {
		Point p = new Point(10, 20);
		System.out.printf("x = %d, y = %d%n",
		p.getX(), p.getY());
	}
}</pre>
<p> 由于main()方法是&quot;static&quot;，&#20026;了要能使用Point&#31867;&#21035;，&#35813;&#31867;&#21035;也必&#39035;被宣告&#20026;&quot;static&quot;。<br />
<br />
被宣告&#20026;static的&#20869;部&#31867;&#21035;，事&#23454;上也可以看作是另一种名&#31216;空&#38388;的管理方式，例如：</p>
<pre class="code">public class Outer {
	public static class Inner {
		....
	}
	....
}</pre>
<p> 您可以如以下的方式&#26469;使用Inner&#31867;&#21035;：</p>
<pre class="code">Outer.Inner inner = new Outer.Inner();</pre>
<p> 在&#26723;案管理方面，&#20869;部&#31867;&#21035;在&#32534;&#35793;完成之后，所&#20135;生的文件名&#31216;&#20026;「外部&#31867;&#21035;名&#31216;$&#20869;部&#31867;&#21035;名&#31216;.class」，而&#20869;部匿名&#31867;&#21035;&#21017;在&#32534;&#35793;完成之后&#20135;生「外部&#31867;&#21035;名&#31216;$&#32534;&#21495;.class」，&#32534;&#21495;&#20026;1、2、3.....，看它是外部&#31867;&#21035;中的第几&#20010;匿名&#31867;&#21035;。</p>
<div class="rpindex"><a href="54.html"> 下一页</a><a href="52.html"> 上一页</a><a href="index.html">首页</a></div>



<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->
