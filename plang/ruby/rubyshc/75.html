<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end -->
<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->


<div class="lpindex"><a href="index.html">首页</a><a href="74.html"> 上一页</a><a href="76.html"> 下一页</a></div>

<H1>字面值<!-- RDLabel: "字面值" --></H1>
<UL>
<LI>数值字面值 
<LI>字符串字面值 
<UL>
<LI>反斜线表示法 
<LI>展开式 </LI></UL>
<LI>命令输出 
<LI>集成字符串(here document) 
<LI>正则表达式字面值 
<LI>数组表达式 
<LI>哈希表表达式 
<LI>范围对象 
<LI>符号 
<LI>%表示法 </LI></UL>
<P>我们把形如数字1或字符串“hello world”这样可以直接写入Ruby程序中的值叫做字面值。</P>
<H2>数值字面值<!-- RDLabel: "数值字面值" --></H2>

<h5>123
  <!-- RDLabel: "123" --> 
</h5>
<h5>0d123 ruby 1.7 特性</h5>
<p>整数</p>
<h5>-123
  <!-- RDLabel: "-123" --> 
</h5>
<P>有符号整数 trap::Numeric</P>
<h5>123.45
  <!-- RDLabel: "123.45" --> 
  
</h5>
<P>浮点数 ruby 1.8 特性: 不能把0.1写成".1"，而只能完整地写为0.1。</P>
<h5>1.2e-3
  <!-- RDLabel: "1.2e-3" --> 
  
</h5>
<P>浮点数</P>
<h5>0xffff
  <!-- RDLabel: "0xffff" --> 
  
</h5>
<P>16进制整数</P>
<h5>0b1011
  <!-- RDLabel: "0b1011" --> 
  
</h5>
<P>2进制整数</P>
<h5>0377
  <!-- RDLabel: "0377" --> 
  0o377 ruby 1.7 特性
  <!-- RDLabel: "0o377           ruby 1.7 特性" --> 
  
</h5>
<P>8进制整数</P>
<h5>?a
  <!-- RDLabel: "?a" --> 
  
</h5>
<P>字符a的代码(97)</P>
<P>ruby 1.7 特性: 用在空白类字符上时，必须写成这样，?\s、?\t等。</P>
<h5>?\C-a
  <!-- RDLabel: "?\C-a" --> 
  
</h5>
<P>Control a 的代码(1)</P>
<h5>?\M-a
  <!-- RDLabel: "?\M-a" --> 
  
</h5>
<P>Meta a 的代码(225)</P>
<h5>?\M-\C-a
  <!-- RDLabel: "?\M-\C-a" --> 
  
</h5>
<P>Meta-Control a 的代码(129)</P>
<P>在?句中，所有的反斜线表示法都是有效的。</P>
<P>您可以在除了字符代码以外的数值字面值中插入“_”。Ruby解释器会忽视“_”而不作处理。当数值位数非常多时，使用“_”会让您快速看清其位数。但是不能在字面值的前面或后面插入“_”(若在字面值前面(包括(+,-)号与字面值间的位置)插入_时，它会被误认成局部变量或方法调用)。</P><pre class="code">1_000_000_000  =&gt; 1000000000
0xffff_ffff  =&gt; 0xffffffff
</PRE>
<H2><a name="a" id="a"></a>字符串字面值<!-- RDLabel: "字符串字面值" --></H2>
<P>例:</P><pre class="code">"this is a string expression\n"
'this is a string expression\n'
%q!I said, "You said, 'She said it.'"!
%!I said, "You said, 'She said it.'"!
%Q('This is it.'\n)
</PRE>
<P>字符串被双引号或单引号包围着。在被双引号中括起来的字符串中，反斜线表示法和展开式(后面详述)都是有效的。在被单引号括起来的字符串中，除了\\(反斜线本身)、\'(单引号)和行尾的\(忽略换行)以外，不会对字符串内容作任何处理。</P>
<P>中间留有空白的字符串在编译时会被当作1个字符串字面值来处理。</P><pre class="code">p "foo" "bar"
=&gt; "foobar"
</PRE>
<P>还有其他一些使用%表示法的字符串项目。</P>
<P>每次对字符串表达式进行计算时都会生成新的字符串对象。</P>
<H3>反斜线表示法<!-- RDLabel: "反斜线表示法" --></H3>

  <h5>\t
    <!-- RDLabel: "\t" --> 
    
  </h5>
  <P>Tab(0x09)</P>
  <h5>\n
    <!-- RDLabel: "\n" --> 
    
  </h5>
  <P>换行(0x0a)</P>
  <h5>\r
    <!-- RDLabel: "\r" --> 
    
  </h5>
  <P>回车(0x0d)</P>
  <h5>\f
    <!-- RDLabel: "\f" --> 
    
  </h5>
  <P>换页(0x0c)</P>
  <h5>\b
    <!-- RDLabel: "\b" --> 
    
  </h5>
  <P>BackSpace(0x08)</P>
  <h5>\a
    <!-- RDLabel: "\a" --> 
    
  </h5>
  <P>Bell (0x07)</P>
  <h5>\e
    <!-- RDLabel: "\e" --> 
    
  </h5>
  <P>Escape(0x1b)</P>
  <h5>\s
    <!-- RDLabel: "\s" --> 
    </h5>
  <P>空白(0x20)</P>
  <h5>\nnn
    <!-- RDLabel: "\nnn" --> 
    </h5>
  <P>8 进制数表示 (n 为 0-7)</P>
  <h5>\xnn
    <!-- RDLabel: "\xnn" --> 
    
  </h5>
  <P>16 进制数表示 (n 为 0-9,a-f)</P>
  <h5>\cx
    <!-- RDLabel: "\cx" --> 
    \C-x
  <!-- RDLabel: "\C-x" --> 
    
  </h5>
  <P>Control字符 (x 为 ASCII 字符)</P>
  <h5>\M-x
    <!-- RDLabel: "\M-x" --> 
    </h5>
  <P>Meta x (c | 0x80)</P>
  <h5>\M-\C-x
    <!-- RDLabel: "\M-\C-x" --> 
    
  </h5>
  <P>Meta Control x</P>
  <h5>\x
    <!-- RDLabel: "\x" --> 
    
  </h5>
  <P>字符 x 本身</P>
<H3>展开式<!-- RDLabel: "展开式" --></H3>
<P>例:</P><pre class="code">(假设$ruby = "RUBY")

   "my name is #{$ruby}" #=&gt; "my name is RUBY"
   'my name is #{$ruby}' #=&gt; "my name is #{$ruby}"
</PRE>
<P>在以双引号(")括起来的字符串表达式、命令字符串以及正则表达式中，可以使用“#{表达式}”把表达式的内容(以字符串的形式)嵌入其中。若表达式是以($,@)开始的变量的话，则可以省略{}部分，只使用“#变量名”的形式即可。如果在字符#后出现的是“{,$,@”以外的其他字符的话，字符#仍代表"#"本身。若想显式地阻止展开式的话，在#前添加反斜线即可。</P>
<P>展开式中可以包括双引号和其他的Ruby表达式。注释也可以纳入其中。</P><pre class="code">p "#{ "string" # comment }"   # =&gt; "string"
</PRE>
<P>ruby 1.7 特性: 在version 1.7中，展开式中的注释内容开始于“#”终止在行尾，而非“}”。因此，上例应该写成</P><pre class="code">p "#{ "string" # comment
  }"                          # =&gt; "string"
</PRE>
<P>这个样子。</P>
<H2><a name="b" id="b"></a>命令输出<!-- RDLabel: "命令输出" --></H2>
<P>例:</P><pre class="code">`date`
%x{ date }
</PRE>
<P>被后引号(`)括起来的字符串与被双引号括起来的字符串是一样的。首先会处理其中的反斜线表示法和展开式，然后才会执行该命令。命令的标准输出是字符串。每次计算命令时都会把它执行一次。若想得到命令的结束status，请参考$?。</P>
<P>还有其他一些使用%表示法的命令输出。</P>
<H2><a name="c" id="c"></a>here document - 集成字符串 (多行字符串的字面值)</H2>
<P>语法:</P><pre class="code">&lt;&lt;[-]["'`]标识符["'`]
   ...
标识符
</PRE>
<P>普通的字符串字面值是指使用分隔符(", ', ` 等)括起来的字符串部分。集成字符串是指，把从包含“&lt;&lt;标识符”的行的下一行开始，到只包含“标识符”的行的行首之间的内容封装起来之后得到的多行字符串(的字面值)。例如</P><pre class="code">print &lt;&lt;EOS      # (从这里开始)直到标识符 EOS 之前的部分就是字面值
  the string
  next line
EOS
</PRE>
<P>等同于下例</P><pre class="code">print "  the string\n  next line\n"
</PRE>
<P>集成字符串中的开始标签“&lt;&lt;标识符”具有非常重要的语法意义。您可以使用开始标签，将集成字符串的内容传递给某参数，或者把集成字符串本身当作被调(receiver)使用。</P><pre class="code"># 在表达式中加入开始标签
# 把集成字符串的内容传递给method的第2个参数
method(arg1, &lt;&lt;LABEL, arg2)
    集成字符串的具体内容
LABEL

# 将集成字符串用作被调
p  &lt;&lt;LABEL.upcase
the lower case string
LABEL

# =&gt; "THE LOWER CASE STRING"
</PRE>
<P>开始标签的下一行通常是集成字符串的具体内容。例如，下面的写法是错误的。</P><pre class="code">printf('%s%d',
       &lt;&lt;EOS,
       3055 * 2 / 5)   # &lt;- 该行已经混入集成字符串的内部
This line is a here document.
EOS
</PRE>
<P>若把开始标签写成“&lt;&lt;-标识符”的话，表示集成字符串的最后一行将使用缩进格式。除此以外，您不能在最后一行中加入空白或是注释。</P><pre class="code">if need_define_foo
  eval &lt;&lt;-EOS   # 使用'&lt;&lt;-'后 
    def foo
      print "foo\n"
    end
  EOS
  #↑最后一行使用了缩进格式。
end
</PRE>
<P>您还可以在同一行中使用多个集成字符串。</P><pre class="code">print &lt;&lt;FIRST, &lt;&lt;SECOND
   这里是第一个集成字符串的内容。
   这里也是。
FIRST
   从该行开始第二个集成字符串的内容。
   第二个集成字符串将在本行后面结束。
SECOND
</PRE>
<P>您可以使用引号(""、''或``)将开始标签“&lt;&lt;标识符”中的标识符括起来。这时，集成字符串的性质将取决于您所选择的引号的种类。请参考下列，当您选择双引号时，其效果与不使用任何引号时的效果相同。</P><pre class="code"># 反斜线表示法和展开式都是有效的
print &lt;&lt;"EOS"
The price is #{$price}.
EOS

# 效果同上
print &lt;&lt;EOS
The price is #{$price}.
EOS

# 展开式无法工作
print &lt;&lt;'EOS'
The price is #{$price}.
EOS

# 执行命令
print &lt;&lt;`EOC`
date
diff test.c.org test.c
EOC
</PRE>
<P>请参考 字符串字面值、 展开式、 反斜线表示法、 命令输出 来了解字符串字面值的性质</P>
<H2><a name="d" id="d"></a>正则表达式字面值<!-- RDLabel: "正则表达式字面值" --></H2>
<P>例:</P><pre class="code">/^Ruby the OOPL/
/Ruby/i
/my name is #{myname}/o
%r|Ruby|
</PRE>
<P>被/括起来的部分就是正则表达式。关于正则表达式中元字符的用法问题，请参考正则表达式。</P>
<P>尾部/后面的字符是正则表达式中使用的选项。具体内容如下。</P>

<h5>i
  <!-- RDLabel: "i" --> 
  
</h5>
<P>匹配时不区分字母大小写</P>
<h5>o
  <!-- RDLabel: "o" --> 
  
</h5>
<P>开始计算正则表达式时只处理一次展开式</P>
<h5>x
  <!-- RDLabel: "x" --> 
  
</h5>
<P>正则表达式中的空白(包括换行)将被忽视。同时，从"#"到行尾的部分将被当作注释处理(请注意，若注释中包含／则会引起语法解析错误)。</P>
<pre class="code">/foo        # 注释
 bar/x
</PRE>
<P>等同于 /foobar/。</P>
<P>若想包含空白，可以像\一样使用转义。</P>
<h5>m
  <!-- RDLabel: "m" --> 
  
</h5>
<P>多行模式。正则表达式 "."将会匹配换行。</P>
<P>因为Ruby的日语化做得比较好，您可以设定$KCODE使其能够正确处理日语字符。若$KCODE =“n”时，Ruby将不会识别任何日语字符，而把它们当作字节串处理，这是默认状态。</P>
<P>您还可以摆脱$KCODE的束缚，分别为每个正则表达式指定n, e, s, u中的任意一个选项来确定该正则表达式的字符代码。</P>
<P>您还可以使用%表示法来指定其他形式的正则表达式。</P>
<P>在正则表达式中，反斜线表示法和 展开式也是有效的。</P>
<P>若正则表达式字面值中不含展开式的话，则对其进行计算时始终返回同一个正则表达式对象。若含有展开式的话，则每次(以展开式的结果为基础)进行计算时都会编译正则表达式并生成正则表达式对象(但是，若指定了上述的o选项的话，则返回同一个正则表达式对象)。</P>
<H2><a name="e" id="e"></a>数组表达式<!-- RDLabel: "数组表达式" --></H2>
<P>例:</P><pre class="code">[1, 2, 3]
%w(a b c)
%W(a b c)             ((&lt;ruby 1.7 特性&gt;))
</PRE>
<P>语法:</P><pre class="code">`[' 表达式`,' ... `]'
</PRE>
<P>分别计算每个表达式的值，然后返回由这些值构成的数组。数组是Array类的实例。</P>
<P>当数组元素都是字符串字面值时，可以使用%表示法将数组写成其他形式。</P>
<P>每次对数组表达式进行计算时都会返回一个新的数组对象。</P>
<H2><a name="f" id="f"></a>哈希表表达式<!-- RDLabel: "哈希表表达式" --></H2>
<P>例:</P><pre class="code">{1=&gt;2, 2=&gt;4, 3=&gt;6}
</PRE>
<P>语法:</P><pre class="code">`{' 表达式 `=&gt;' 表达式 `,' ... `}'
`{' 表达式 `,' 表达式 `,' ... `}'
</PRE>
<P>分别计算每个表达式的值，然后返回由索引和值构成的哈希表对象。所谓哈希表是指将任意对象当作索引而构成的数组，它是Hash类的实例。</P>
<P>当向某方法的参数尾部传递哈希表，且该哈希表中的元素超过1个时，可以省略{,}。但是，在形如obj[...]的方法调用以及数组表达式中，当所有元素都是哈希表时，才可以省略{,}。</P>
<P>例:</P><pre class="code">method(1,2,3=&gt;4)      # method(1,2,{3=&gt;4})
obj[1=&gt;2,3=&gt;4]        # obj[{1=&gt;2,3=&gt;4}]
[1=&gt;2,3=&gt;4]           # [{1=&gt;2, 3=&gt;4}]
</PRE>
<P>每次对哈希表表达式进行计算时都会生成一个新的哈希表对象。</P>
<H2><a name="g" id="g"></a>范围对象<!-- RDLabel: "范围对象" --></H2>
<P>请参考范围表达式</P>
<P>若范围表达式两端都是数值字面值时，每次计算都将返回同一个对象。除此以外，每次计算时都会返回新的范围对象。</P>
<H2>符号<!-- RDLabel: "符号" --></H2>
<P>例:</P><pre class="code">(符号的例子)

      :class
      :lvar
      :method!
      :andthisis?
      :$gvar
      :@ivar
      :@@cvar
      :+
</PRE>
<P>语法:</P><pre class="code">`:' 标识符
`:' 变量名
`:' 操作符
</PRE>
<P>Symbol类的实例。字符串与Symbol对象是一一对应的。</P>
<P>指定给Symbol字面值的操作符，必须是那些可以作为方法进行再定义的操作符。请参考操作符表达式。</P>
<P>ruby 1.7 特性: 在1.7中，也可以这样</P><pre class="code">p :'foo-bar' #=&gt; :"foo-bar"
p :"foo-bar" #=&gt; :"foo-bar"
p %s{foo-bar} #=&gt; :"foo-bar"
</PRE>
<P>在这种表示法中，可以定义任意的符号(但不能包含“\0”)。</P>
<P>在:"..." 中，反斜线表示法和 展开式都是有效的。</P>
<P>通常符号是一种很专一的对象，计算时(就算包含展开式也好，只要其结果是同一字符串的话)总是返回同一对象。</P>
<H2><a name="h" id="h"></a>%表示法<!-- RDLabel: "%表示法" --></H2>
<P>在字符串字面值、 命令输出、 正则表达式字面值、 数组表达式、 符号 中，可以使用这种以％开头的表达法。特别是当字符串或正则表达式中包含双引号(")、斜线(/)等(切分字面值时使用的字符)要素时，它可以减少反斜线(\)在代码中出现的次数。另外，它还可以方便地表示字符串数组。详细内容如下。</P>
<UL>
<LI>%!STRING! : 双引号中的字符串 
<LI>%Q!STRING! : 同上 
<LI>%q!STRING! : 单引号中的字符串 
<LI>%x!STRING! : 命令输出 
<LI>%r!STRING! : 正则表达式 
<LI>%w!STRING! : 字符串数组(以空白字符切分各元素) 
<LI>%W!STRING! : 字符串数组(以空白字符切分各元素)。展开式、反斜线表示法都有效(ruby 1.7 特性) 
<LI>%s!STRING! : 符号。展开式、反斜线表示法都无效(ruby 1.7 特性) </LI></UL>
<P>!部分可以使用任何非字母非数字的字符，包括换行。若起始切分字符是括号("(","[","{","&lt;")的话，则终止切分字符就是与其对应的括号。若以括号作为切分字符的话，只要对应部分使用了对应的括号，就可以在其中的元素中使用与切分字符一样的括号。</P><pre class="code">%(()) =&gt; "()"
</PRE>
<P>若在数组表达式中使用%表示法的话，相当于使用空白字符将数组中以单引号括起来的字符串元素分隔开来。例如，</P><pre class="code">%w(foo bar baz)
</PRE>
<P>与['foo', 'bar', 'baz']是一样。</P>
<P>还可以使用反斜线将空白字符纳入数组元素。</P><pre class="code">%w(foo\ bar baz)

=&gt; ["foo bar", "baz"]
</PRE>
<P>ruby 1.7 特性:%W与%w相同，就如同双引号中的字符串一样，可以使用展开式和反斜线表示法。但使用空白字符进行切分的过程要早于展开式的计算过程。</P><pre class="code">v = "c d"
%W(a\ b #{v}e\sf #{})

=&gt; ["a b", "c de f", ""]
</PRE>


<div class="rpindex"><a href="76.html"> 下一页</a><a href="74.html"> 上一页</a><a href="index.html">首页</a></div>



<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->
