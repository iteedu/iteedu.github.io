<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end -->
<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->


<div class="lpindex"><a href="index.html">首页</a><a href="73.html"> 上一页</a><a href="75.html"> 下一页</a></div>

<H1>变量和常数<!-- RDLabel: "变量和常数" --></H1>
<UL>
<LI>局部变量 
<LI>实例变量 
<LI>类变量 
<LI>全局变量 
<LI>伪变量 
<LI>常数 </LI>
<LI>引用常数的优先顺序 </LI>
</UL>
<P>您可以通过区分Ruby变量名的首位字符来确定它是局部变量、实例变量、类变量、全局变量还是常数。通常情况下，变量名的第二位字符以后是数字、字母或下划线，但有的内部变量名比较特殊，如“'$'+1个符号”(请参考内部变量)。变量名长度只受内存大小的限制。</P>
<H2>局部变量<!-- RDLabel: "局部变量" --></H2>
<P>例:</P><pre class="code">foobar
</PRE>
<P>若标识符首位是小写字母或“_”，则该标识符就是局部变量或方法调用。在局部变量的作用域(类、模块、方法的定义部分)内，若对一个首位是小写字母的标识符进行首次赋值的话，也就意味着声明了一个属于该作用域的局部变量。若引用尚未被声明的标识符的话，就会被解释成一个无参数的方法调用。</P>
<P>局部变量的作用域起始于声明处，结束于该声明所在的块、方法定义、类／模块定义的结尾。随着块的消亡，局部变量也将寿终正寝(顶层局部变量则一直持续到程序终结)，但也有例外。若块已经变成过程对象的话，则局部变量将一直持续到该过程对象终结为止。若多个过程对象引用同一个作用域的话，局部变量将被这些对象所共享。</P><pre class="code"># (A)的部分位于作用域之外
2.times {
  p defined?(v)    # (A)
  v = 1            # 从(开始声明)起
  p v              # 到(块的终结)是 v 的作用域
}

# =&gt; nil
     1
     nil           &lt;- 请注意这里是 nil
     1
</PRE>
<P>即使声明部分未被执行仍将有效。</P><pre class="code">v = 1 if false # 虽未赋值，但声明有效
p defined?(v)  # =&gt; "local-variable"
p v            # =&gt; nil
</PRE>
<P>若使用了 -K 选项的话就可以使用日语标识符，日语标识符被当作局部变量处理。实际上，我们并不推荐您这样做。</P>
<H2><a name="a" id="a"></a>实例变量<!-- RDLabel: "实例变量" --></H2>
<P>例：</P><pre class="code">@foobar
</PRE>
<P>以@开始的变量是实例变量，它属于特定的对象。可以在类或子类的方法中引用实例变量。若引用尚未被初始化的实例变量的话，其值为nil。</P>
<H2><a name="b" id="b"></a>类变量<!-- RDLabel: "类变量" --></H2>
<P>例：</P><pre class="code">class Foo
  @@foo = 1
  def bar
    puts @@foo
  end
end
</PRE>
<P>以@@开始的变量是类变量。在类的定义中定义类变量，可以在类的特殊方法、实例方法等处对类变量进行引用／赋值。</P>
<P>类变量与常数的区别如下。</P>
<UL>
<LI>可以重复赋值(常数则会发出警告) 
<LI>不能在类的外部直接引用(在继承类中则可以引用／赋值) </LI></UL>
<P>类变量与类的实例变量的区别如下。</P>
<UL>
<LI>可在子类中引用／赋值 
<LI>可在实例方法中引用／赋值 </LI></UL>
<P>可以把类变量看作一种被类、子类以及它们的实例所共享的全局变量。</P><pre class="code">class Foo
  @@foo = 1
end
class Bar &lt; Foo
  p @@foo += 1          # =&gt; 2
end
class Baz &lt; Bar
  p @@foo += 1          # =&gt; 3
end
</PRE>
<P>模块中定义的类变量(模块变量)被所有包含该模块的类所共享。</P><pre class="code">module Foo
  @@foo = 1
end
class Bar
  include Foo
  p @@foo += 1          # =&gt; 2
end
class Baz
  include Foo
  p @@foo += 1          # =&gt; 3
end
</PRE>
<H2><a name="c" id="c"></a>全局变量<!-- RDLabel: "全局变量" --></H2>
<P>例：</P><pre class="code">$foobar
$/
</PRE>
<P>以$开始的变量是全局变量，可以在程序的任何地方加以引用(因此需要特别留意)。全局变量无需变量声明。引用尚未初始化的全局变量时，其值为 nil。</P>
<H2><a name="d" id="d"></a>伪变量<!-- RDLabel: "伪变量" --></H2>
<P>除普通的变量之外，还有一种叫做伪变量的特殊变量。</P>

self<!-- RDLabel: "self" --> 

<P>当前方法的执行主体</P>
nil<!-- RDLabel: "nil" --> 

<P>NilClass类的唯一实例</P>
true<!-- RDLabel: "true" --> 

<P>TrueClass类的唯一实例</P>
false<!-- RDLabel: "false" --> 

<P>FalseClass类的唯一实例。nil 和 false 表示“伪”。</P>
__FILE__<!-- RDLabel: "__FILE__" --> 

<P>当前源文件名</P>
__LINE__<!-- RDLabel: "__LINE__" --> 

<P>当前源文件中的行号</P>
<P>伪变量的值不可改变，若对伪变量赋值将引发语法错误。</P>
<H2><a name="e" id="e"></a>常数<!-- RDLabel: "常数" --></H2>
<P>例：</P><pre class="code">FOOBAR
</PRE>
<P>以大写字母([A-Z])开始的标识符是常数.常数的定义(和初始化)由赋值过程完成.不能在方法中对常数进行定义.若对已定义的常数进行赋值的话,会出现警告信息.若引用未定义的常数的话,则会引发NameError异常.</P>
<P>可以在下列地方引用常数,如,定义常数的类/模块的定义句(也包括方法正文以及嵌套类/模块的定义句)中,继承该类的子类中,以及包含模块的类/模块中等等.在类定义之外(顶层)定义的常数属于Object.</P>
<P>例：</P><pre class="code">class Foo
  FOO = 'FOO'       # 定义Foo类的常数FOO(Foo::FOO)
end

class Bar &lt; Foo
  BAR = 'BAR'       # 定义Bar类的常数BAR(Bar::BAR)

  # 可直接引用父类的常数
  p FOO             # =&gt; "FOO"
  class Baz

    # 虽然嵌套类与该类间不存在继承关系
    # 但还是可以直接引用嵌套外部的常数
    p BAR           # =&gt; "BAR"
  end
end
</PRE>
<P>另外,在类定义表达式生成类对象的同时,还会将类对象赋值给一个与该类同名的常数.从语法上讲,引用类名也就是引用该常数.</P><pre class="code">class C
end
p C    # =&gt; C
</PRE>
<P>若想在外部访问类或模块中的常数时,要使用"::"操作符.若想准确地访问Object类中的常数(顶层的常数)时,也需要也使用"::"操作符,但操作符左边为空.另外,不能使用该操作符对常数进行赋值.</P>
<P>ruby 1.8 特性: 可以使用"::"对常数进行赋值.</P>
<P>例：</P><pre class="code">module M
  I = 35
  class C
  end
end
p M::I   #=&gt; 35
p M::C   #=&gt; M::C
p ::M    #=&gt; M

M::NewConst = 777   # error--&gt; parse error
</PRE>
<H3>引用常数的优先顺序<!-- RDLabel: "引用常数的优先顺序" --></H3>
<P>若在父类和嵌套外侧存在同名常数时,会先引用嵌套外侧的常数.也就是说,引用常数时会先搜索嵌套关系的外侧,然后才会按照继承关系向上搜索.</P>
<P>例：</P><pre class="code">class Foo
  CONST = 'Foo'
end

class Bar
  CONST = 'Bar'
  class Baz &lt; Foo
    p CONST             # =&gt; "Bar"      外侧的常数
    # 此时,若不显式地指定父类中的常数的话,则无法找到该常数
    p Foo::CONST        # =&gt; "Foo"
  end
end
</PRE>
<P>一般认为顶层常数定义并不是位于嵌套外侧,所以在搜索了继承关系之后才能找到它.可见顶层常数的优先度很低.</P>
<P>例：</P><pre class="code">class Foo
  CONST = 'Foo'
end

CONST = 'Object'

class Bar &lt; Foo
  p CONST               # =&gt; "Foo"
end

# 若能明显看出是嵌套关系的话,按规则来说
# 首先搜索到的是Object的常数(位于嵌套外侧)
class Object
  class Bar &lt; Foo
    p CONST             # =&gt; "Object"
  end
end
</PRE>
<P>若对与父类常数同名的常数进行赋值的话,则意味着在该类中定义一个新常数,而并不会对父类常数进行赋值.</P>
<P>例：</P><pre class="code">class Foo
  CONST = 'Foo'
end
class Bar &lt; Foo
  p CONST               # =&gt; "Foo"
  CONST = 'Bar'         # *定义*Bar的常数CONST
  p CONST               # =&gt; "Bar"  (Foo::CONST 被屏蔽了)
  p Foo::CONST          # =&gt; "Foo"  (若使用:: 的话就可以了)
end
</PRE>


<div class="rpindex"><a href="75.html"> 下一页</a><a href="73.html"> 上一页</a><a href="index.html">首页</a></div>



<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->
