<!--hmt-->
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end --><!--end of htmlheader-->


<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->

<!--end of htmlmiddle-->

<h1>通过剖析部分文档来提升效率</h1>
<p>Beautiful Soup turns every element of a document into a Python
  object and connects it to a bunch of other Python objects. If you only
  need a subset of the document, this is really slow. But you can pass
  in a <a href="strainers.html"><code>SoupStrainer</code></a> as the <code>parseOnlyThese</code> argument to the soup constructor. Beautiful Soup
  checks each element against the <code>SoupStrainer</code>, and only if it matches
  is the element turned into a <code>Tag</code> or <code>NavigableText</code>, and added to
  the tree. <br/>
  Beautiful Soup 将一个文档的每个元素都转换为Python对象并将文档转换为一些Python对象的集合。
  如果你只需要这个文档的子集，全部转换确实非常慢。
  但是你可以传递<a href="strainers.html"><code>SoupStrainer</code></a>作为<code>parseOnlyThese</code>参数的值给
  soup的构造器。Beautiful Soup检查每一个元素是否满足<code>SoupStrainer</code>条件，
只有那些满足条件的元素会转换为<code>Tag</code>标签或<code>NavigableText</code>，并被添加到剖析树中。 </p>
<p>If an element is added to to the tree, then so are its
  children—even if they wouldn't have matched the <code>SoupStrainer</code> on their own. This lets you parse only the chunks of a document that
  contain the data you want. <br/>
  如果一个元素被加到剖析树中，那么的子元素即使不满足<code>SoupStrainer</code>也会被加入到树中。
  这可以让你只剖析文档中那些你想要的数据块。 </p>
<p>Here's a pretty varied document: <br/>
  看看下面这个有意思的例子： </p>
<pre class="code">doc = '''Bob reports &lt;a href=&quot;http://www.bob.com/&quot;&gt;success&lt;/a&gt;
with his plasma breeding &lt;a
href=&quot;http://www.bob.com/plasma&quot;&gt;experiments&lt;/a&gt;. &lt;i&gt;Don't get any on
us, Bob!&lt;/i&gt;

&lt;br&gt;&lt;br&gt;Ever hear of annular fusion? The folks at &lt;a
href=&quot;http://www.boogabooga.net/&quot;&gt;BoogaBooga&lt;/a&gt; sure seem obsessed
with it. Secret project, or &lt;b&gt;WEB MADNESS?&lt;/b&gt; You decide!'''
</pre>
<p>Here are several different ways of parsing the document into soup,
  depending on which parts you want. All of these are faster and use
  less memory than parsing the whole document and then using the same <code>SoupStrainer</code> to pick out the parts you want. <br/>
  有几种不同的方法可以根据你的需求来剖析部分文档.比起剖析全部文档，他们都更快并占用更少的内存，他们都是使用相同的 <code>SoupStrainer</code>来挑选文档中你想要的部分。 </p>
<pre class="code">from BeautifulSoup import BeautifulSoup, SoupStrainer
import re

links = SoupStrainer('a')
[tag for tag in BeautifulSoup(doc, parseOnlyThese=links)]
# <samp>[&lt;a href=&quot;http://www.bob.com/&quot;&gt;success&lt;/a&gt;, </samp>
# <samp> &lt;a href=&quot;http://www.bob.com/plasma&quot;&gt;experiments&lt;/a&gt;, </samp>
# <samp> &lt;a href=&quot;http://www.boogabooga.net/&quot;&gt;BoogaBooga&lt;/a&gt;]</samp>

linksToBob = SoupStrainer('a', href=re.compile('bob.com/'))
[tag for tag in BeautifulSoup(doc, parseOnlyThese=linksToBob)]
# <samp>[&lt;a href=&quot;http://www.bob.com/&quot;&gt;success&lt;/a&gt;, </samp>
# <samp> &lt;a href=&quot;http://www.bob.com/plasma&quot;&gt;experiments&lt;/a&gt;]</samp>

mentionsOfBob = SoupStrainer(text=re.compile(&quot;Bob&quot;))
[text for text in BeautifulSoup(doc, parseOnlyThese=mentionsOfBob)]
# <samp>[u'Bob reports ', u&quot;Don't get any on\nus, Bob!&quot;]</samp>

allCaps = SoupStrainer(text=lambda(t):t.upper()==t)
[text for text in BeautifulSoup(doc, parseOnlyThese=allCaps)]
# <samp>[u'. ', u'\n', u'WEB MADNESS?']</samp>
</pre>
<p>There is one major difference between the <code>SoupStrainer</code> you pass
  into a search method and the one you pass into a soup
  constructor. Recall that the <code>name</code> argument can take a function whose argument is a <code>Tag</code> object. You can't do this for a <code>SoupStrainer</code>'s <code>name</code>, because
  the <code>SoupStrainer</code> is used to decide whether or not a <code>Tag</code> object
  should be created in the first place. You can pass in a function for a <code>SoupStrainer</code>'s <code>name</code>, but it can't take a <code>Tag</code> object: it can only
  take the tag name and a map of arguments. <br/>
  把<code>SoupStrainer</code>传递给搜索方法和soup构造器有一个很大的不同。
  回忆一下，<code>name</code>参数可以使用以<code>Tag</code>对象为参数的函数。
  但是你不能对<code>SoupStrainer</code>的<code>name</code>使用这招，因为<code>SoupStrainer</code>被用于决定
  一个<code>Tag</code>对象是否可以在第一个地方被创建。
  你可以传递一个函数给<code>SoupStrainer</code>的<code>name</code>，但是不能是使用<code>Tag</code>对象的函数：
  只能使用tag的名字和一个参数映射。 </p>
<pre class="code">shortWithNoAttrs = SoupStrainer(lambda name, attrs: \
                                len(name) == 1 and not attrs)
[tag for tag in BeautifulSoup(doc, parseOnlyThese=shortWithNoAttrs)]
# <samp>[&lt;i&gt;Don't get any on us, Bob!&lt;/i&gt;, </samp>
# <samp> &lt;b&gt;WEB MADNESS?&lt;/b&gt;]</samp>
</pre>
<p>&nbsp;</p>


<!--start of htmlend-->
<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->