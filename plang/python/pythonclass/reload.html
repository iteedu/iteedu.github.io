<!--hmt-->
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end --><!--end of htmlheader-->

<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->
<!--end of htmlmiddle-->



<h1>Python运算符重载
</h1>
<table>
  <tr>
    <td>Method        	        	</td>
    <td>Overloads</td>
    <td>Call for</td>
  </tr>
  <tr>
    <td> __init__                	</td>
    <td>构造函数</td>
    <td>X=Class()</td>
  </tr>
  <tr>
    <td>__del__        	        	</td>
    <td>析构函数</td>
    <td>对象销毁</td>
  </tr>
  <tr>
    <td>__repr__</td>
    <td>打印转换</td>
    <td> print X，repr(X)</td>
  </tr>
  <tr>
    <td>__str__</td>
    <td>打印转换</td>
    <td> print  X，str(X)</td>
  </tr>
  <tr>
    <td>__call__                	</td>
    <td>调用函数</td>
    <td>X()</td>
  </tr>
  <tr>
    <td>__getattr_            	</td>
    <td> 限制</td>
    <td>X.undefine</td>
  </tr>
  <tr>
    <td> __setattr__    	            	</td>
    <td>取值</td>
    <td>X.any=value</td>
  </tr>
  <tr>
    <td>__getitem__</td>
    <td>索引</td>
    <td> X[key]，For If</td>
  </tr>
  <tr>
    <td>__setitem__</td>
    <td>索引</td>
    <td> X[key]=value</td>
  </tr>
  <tr>
    <td>__len__        	             	</td>
    <td>长度</td>
    <td>len(X)</td>
  </tr>
  <tr>
    <td>__iter__                     	 </td>
    <td>迭代</td>
    <td><p>For In</p></td>
  </tr>
  <tr>
    <td> __add__ </td>
    <td>+ </td>
    <td>X+Y,X+=Y</td>
  </tr>
  <tr>
    <td>__sub__</td>
    <td>-</td>
    <td>X-Y,X-=Y</td>
  </tr>
  <tr>
    <td>__mul__</td>
    <td>*</td>
    <td>X*Y</td>
  </tr>
  <tr>
    <td>__radd__ </td>
    <td>右加+ </td>
    <td> +X</td>
  </tr>
  <tr>
    <td>__iadd__ </td>
    <td>+=</td>
    <td>X+=Y</td>
  </tr>
  <tr>
    <td>__or__ </td>
    <td> |</td>
    <td>X|Y,X|=Y</td>
  </tr>
  <tr>
    <td> __cmp__ </td>
    <td>比较 ==</td>
    <td>X==Y,X&lt;Y</td>
  </tr>
  <tr>
    <td>__lt__ </td>
    <td>小于&lt;</td>
    <td>X&lt;Y</td>
  </tr>
  <tr>
    <td>__eq__ </td>
    <td>等于=</td>
    <td>X=Y</td>
  </tr>
</table>
<h2>减法重载</h2>
<p>重载&quot;-&quot; 不同对象的减法处理</p>
<pre class="code">class Number:
    def __init__(self,start):
        self.data=start
    def __sub__(self,other):
         return Number(self.data-other)
number=Number(20)
y=number-10
print number.data, y.data</pre>
<p>重载&quot;-&quot; 相同对象的减法处理</p>
<pre class="code">class Big :
     def __init__(self,a,b):
         self.a=a
         self.b=b
     def __sub__(self,other):#other不用事先制定类型,可以直接当做一个Big来用
        return Big(self.a-other.a,self.b-other.b)
i=Big(20,12);
j=Big(23,4);
k=i-j;
print k.a ,k.b</pre>
<h2>重载&quot;+&quot; </h2>
<pre class="code">class AddOperator :
     def __init__(self,a,b):
         self.a=a
         self.b=b
     def __add__(self,other):#other不用事先制定类型,可以直接当做一个Big来用
        return Big(self.a+other.a,self.b+other.b)
i=AddOperator(20,12);
j=AddOperator(23,4);
k=i+j;
print k.a ,k.b</pre>
<h2>重载&quot;+=&quot; </h2>
<pre class="code">class AddOperator :
     def __init__(self,a,b):
         self.a=a
         self.b=b
     def __iadd__(self,other):#other不用事先制定类型,可以直接当做一个Big来用
        return Big(self.a+other.a,self.b+other.b)
i=AddOperator(20,12);
j=AddOperator(23,4);
i+=j;
print i.a ,i.b</pre>
<h2>重载乘法</h2>
<p>不同对象的乘法：</p>
<pre class="code">class MulOperator:
    def __init__(self,a,b):
        self.a=a
        self.b=b
    def __mul__(self,n):
        return MulOperator(self.a*n,self.b*n)
i=MulOperator(20,5)
j=i*4.5
print j.a,j.b</pre>
<p>重载乘法：两个对象的相乘似乎也有用，如矩阵的相乘，3D中几个变换矩阵的相乘。<br />
  两个4*4矩阵相乘<br />
矩阵 的列数必须等于矩阵 的行数，矩阵   与矩阵 才能相乘，第一个矩阵由4个横向排列的四维向量组成，第二个矩阵由4个纵向排列的四维向量组成，</p>
<pre class="code">class Vector4: 
    def __init__(self,a,b,c,d):
       (self.a1,self.a2,self.a3,self.a4)=(a,b,c,d)
    def __mul__(self,other):
         return (self.a1*other.a1+self.a2*other.a2+self.a3*other.a3+self.a4*other.a4)
    def PrintVector(self):
        print self.a1,self.a2,self.a3,self.a4
class Matrix :
    def __init__(self,a,b,c,d):
        (self.a1,self.a2,self.a3,self.a4)=(a,b,c,d)
        #(self.a1,self.a2,self.a3,self.a4)=(a,b,c,d)
    def __mul__(self,other):
        x1=Vector4(other.a1.a1,other.a2.a1,other.a3.a1,other.a4.a1)
        x2=Vector4(other.a1.a2,other.a2.a2,other.a3.a2,other.a4.a2)
        x3=Vector4(other.a1.a3,other.a2.a3,other.a3.a3,other.a4.a3)
        x4=Vector4(other.a1.a4,other.a2.a4,other.a3.a4,other.a4.a4)
        a=Vector4(self.a1*x1,self.a1*x2,self.a1*x3,self.a1*x4)
        b=Vector4(self.a2*x1,self.a2*x2,self.a2*x3,self.a2*x4)
        c=Vector4(self.a3*x1,self.a3*x2,self.a3*x3,self.a3*x4)
        d=Vector4(self.a4*x1,self.a4*x2,self.a4*x3,self.a4*x4)
        return Matrix(a,b,c,d)
    def PrintMatrix(self):
         self.a1.PrintVector()
         self.a2.PrintVector()
         self.a3.PrintVector()
         self.a4.PrintVector()
i1=Vector4(1,4,1,4)
i2=Vector4(2,1,6,7)
k=i1*i2
#测试向量点乘
print k
i3=Vector4(1,1,1,1)
i4=Vector4(1,2,4,5)
j1=Vector4(1,2,3,4)
j2=Vector4(2,1,1,1)
j3=Vector4(1,3,21,2)
j4=Vector4(2,4,3,7)
a=Matrix(i1,i2,i3,i4)
b=Matrix(j1,j2,j3,j4)
c=a*b
c.PrintMatrix()</pre>
<h2>索引重载</h2>
<pre class="code">class indexer:    
    def __getitem__(self, index): #iter override    
        return index ** 2  
X = indexer()    
X[2]    
for i in range(5):    
    print X[i]   

     

class indexer:    
    def __setitem__(self, key,value): #iter override    
          self.mydict[key] = value 
        return self.mydict 
X = indexer()   

X[2] = 'test'  它等于调用 X.__setitem__(2, 'test') 
</pre>
<h2>打印重载 </h2>
<pre class="code">class adder :
    def __init__(self,value=0):
           self.data=value
    def __add__(self,other):
           self.data+=other
class addrepr(adder):
    def __repr__(self):
          return "addrepr(%d)"% self.data #%d ,%s都可以 
x=addrepr(2)
x+1
print x ,repr(x)
i=3;
print "%s---%d"% (i, i)</pre>
<h2>调用重载，__call__相当与 X()</h2>
<pre class="code">class Prod:    
    def __init__(self, value):    
        self.value = value    
    def __call__(self, other):    
        return self.value * other    
   
p = Prod(2) #call __init__    
print p(1) #call __call__    
print p(2)</pre>
<h2>析构重载 __del__</h2>
<pre class="code">class Life:    
    def __init__(self, name='name'):    
        print 'Hello', name    
        self.name = name    
    def __del__(self):    
        print 'Goodby', self.name    
   
brain = Life('Brain') #call __init__    
brain = 'loretta'    # call __del__</pre>
<h2>重载&quot;|&quot;</h2>
<pre class="code">
class Mat :
    def __init__(self,value):
       self.age=value
    def __or__(self,other):
        return self.age!=0 and other.age!=0
a=Mat(10)
b=Mat(21)
c=Mat(0)
print a|b ,a|c
</pre>
<h2>打印转换重载</h2>
<pre class="code">class PrintOperator:
    def __init__(self,a):
        self.a=a
    def __str__(self,b=50):
       return "I am %s years old!" % self.a
i=PrintOperator(10)
print i, str(i)</pre>
<h2>长度重载</h2>
<pre class="code">class lenOperator:
    def __init__(self,a,b,c):
         (self.a,self.b,self.c)=(a,b,c)
    def __len__(self):
        return 3
a=lenOperator(0,2,4)
print len(a)</pre>
<h2>cmp重载</h2>
<pre class="code">class cmpOperator:
    def __init__(self,a,b,c):
        (self.a,self.b,self.c)=(a,b,c)
    def __cmp__(self,other):
        if self.a&gt;other.a:
           return 1
        elif self.a&lt;other.a:
           return -1
        elif self.b&gt;other.b:
           return 1
        elif self.b&lt;other.b:
            return -1
        elif self.c&gt;self.c:
            return 1
        elif self.c&lt;self.c:
            return -1
        elif self.c==self.c:
           return 0    
i=cmpOperator(1,2,3)
j=cmpOperator(2,4,5)
k=cmpOperator(2,4,5)
a=cmpOperator(1,4,5)
print cmp(i,j),cmp(j,k),cmp(a,i)</pre>
<h2>delattr重载</h2>
<pre class="code">class delattrOperator(object):
     def __init__(self,a,b):
        (self.a,self.b)=(a,b)
     def __delattr__(self,name):
        print "del obj.%s" % name
        object.__delattr__(self,name)
a=delattrOperator(1,2)
print a.a,a.b
del a.a
print a.b
#print a.a 打印a会出错，a已经被删除。</pre>
<h2>getAttr/setAttr重载</h2>
<pre class="code">class empty:    
    def __getattr__(self,attrname):    
        if attrname == 'age':    
            return 40   
        else:    
            raise AttributeError,attrname    
X = empty()    
print X.age #call__getattr__    
   
class accesscontrol:    
    def __setattr__(self, attr, value):    
        if attr == 'age':    
            # Self.attrname = value loops!    
            self.__dict__[attr] = value    
        else:    
            print attr    
            raise AttributeError, attr + 'not allowed'   
   
X = accesscontrol()    
X.age = 40      #call __setattr__    
X.name = 'wang' #raise exception   </pre>


<!--start of htmlend-->

<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->