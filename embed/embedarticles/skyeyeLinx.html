<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end -->
<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->
  <h1>ubuntu系统下的skyeye的安装 </h1>
  <p><strong>站长原创，版权所有<a href="http://www.iteedu.com/index.html">ITEEDU</a>，2012-03-25</strong></p>
以前在开发板上学习了嵌入式qt开发和移植过程。板子还给学校实验室之后，就需要自己搭建模拟环境。在QMemu和skyeye中，我选择了skyeye,其配置较为简单，而且可以模拟多个arm系统，比如uCLinux、Linux、uC/OS-II等嵌入式操作系统。 
<h2 > 1.下载并安装skyeye依赖包 </h2>
  <p >执行命令： </p>
  <p >sudo&nbsp;apt-get&nbsp;install&nbsp;libgtk2.0-dev&nbsp;pkg-config&nbsp;libatk1.0-dev&nbsp;libpango1.0-dev&nbsp;libfreetype6-dev&nbsp;libglib2.0-dev&nbsp;libx11-dev&nbsp;binutils-dev&#160;libncurses5-dev&#160;libxpm-dev </p>
  <h2 > 2.安装skyeye </h2>
<p >有以下两种方式。 </p>
  <h3 > （1）利用命令 </h3>
  <p >sudo&nbsp;apt-get&nbsp;install&nbsp;skyey </p>
  <p >安装完成后运行skeye,显示如下: </p>
  <pre class="code">**************************** WARNING **********************************

If you want to run ELF image, you should use -e option to indicate

your elf-format image filename. Or you only want to run binary image,

you need to set the filename of the image and its entry in skyeye.conf.

***********************************************************************


Your elf file is little endian.

Failed to open skyeye config file skyeye.conf in the same directory

error: No such file or directory

SkyEye 1.2.5

Bug report: skyeye-developer@lists.gro.clinux.org

Usage: skyeye [options] -e program [program args]

Default mode is STANDALONE mode

------------------------------------------------------------------

Options:

-e exec-file        the (ELF executable format)kernel file name.

-l load_address,load_address_mask

                    Load ELF file to another address, not its entry.

-b          specify the data type is big endian when non "-e" option.

-d         in GDB Server mode (can be connected by GDB).

-c config-file      the skyeye configure file name.

-h                  The SkyEye command options, and ARCHs and CPUs simulated.

------------------------------------------------------------------

----------- Architectures and CPUs simulated by SkyEye-------------

-------- ARM architectures ---------

at91 

lpc 

s3c4510b 

s3c44b0x 

s3c44b0 

s3c3410x 

ep7312 

lh79520 

ep9312 

cs89712 

sa1100 

pxa_lubbock 

pxa_mainstone 

at91rm92 

s3c2410x 

s3c2440 

sharp_lh7a400 

ns9750 

-------- BlackFin architectures ----

bf533 

bf537</pre>
  <p >出现此界面说明安装成功。 </p>
  <h3 > （2）下载最新安装包并进行编译及安装 </h3>
  <p >第一步：在skyeye官方网站http://sourceforge.net/projects/skyeye/files/上下载较新版本的skyeye，我下载的是当时最新的，skyeye-1.3.4_rc1.tar.gz。 </p>
  <p >第一步：解压缩原文件，tar&nbsp;-xvf&nbsp;&nbsp;skyeye-1.3.4_rc1.tar.gz。 </p>
  <p >第二步:进入解压后的文件件。 </p>
  <p >第三步：安装。　 </p>
  <pre class="code">    sudo ./configure
　　sudo make lib
　　sudo make
　　sudo make install
　　sudo make install_lib</pre>
  <p >第四步：安装出现的问题及解决方案。 </p>
  <p >错误一、在安装过程中出现的各种错误主要是由于一些软件包未安装，我把额外需要的软件包列举出来：<br>
    termcap库文件：在终端里执行sudo&nbsp;apt-get&nbsp;install&nbsp;libncurses5-dev安装。<br>
    &#8220;XCreatePixmapFromData&#8221;错误：sudo&nbsp;aptitude&nbsp;install&nbsp;libxpm-dev&nbsp;。<br>
    &#8220;makeinfo&#8221;错误：sudo&nbsp;apt-get&nbsp;install&nbsp;texinfo。<br>
    在安装skyeye之前，可以提前把上述三个库安装，以减少莫名其妙的错误。 </p>
  <p >错误二、 </p>
  <p>utils/uart_console/uart_console.c:58:&nbsp;错误：expected&nbsp;identifier&nbsp;or&nbsp;&#8216;(&#8217;&nbsp;before&nbsp;numeric&nbsp;constant<br>
    utils/uart_console/uart_console.c:59:&nbsp;错误：expected&nbsp;identifier&nbsp;or&nbsp;&#8216;(&#8217;&nbsp;before&nbsp;numeric&nbsp;constant<br>
    utils/uart_console/uart_console.c:62:&nbsp;错误：expected&nbsp;identifier&nbsp;or&nbsp;&#8216;(&#8217;&nbsp;before&nbsp;numeric&nbsp;constant<br>
  utils/uart_console/uart_console.c:63:&nbsp;错误：expected&nbsp;identifier&nbsp;or&nbsp;&#8216;(&#8217;&nbsp;before&nbsp;numeric&nbsp;constant&nbsp; </p>
  <p >错&nbsp;误：expected&nbsp;identifier&nbsp;or&nbsp;&#8216;(&#8217;&nbsp;before&nbsp;numeric&nbsp;constant<br>
    是因为在其它头文件中已将&nbsp;POLLRDNORM那些定义，此处是已被define<br>
    解决方法，将58到63行注释<br>
    //const&nbsp;uint32_t&nbsp;POLLRDNORM&nbsp;=&nbsp;0x040;<br>
    //const&nbsp;uint32_t&nbsp;POLLRDBAND&nbsp;=&nbsp;0x080;<br>
    //const&nbsp;uint32_t&nbsp;POLLPRI&nbsp;=&nbsp;0x002;<br>
    //const&nbsp;uint32_t&nbsp;POLLOUT&nbsp;=&nbsp;0x004;<br>
    //const&nbsp;uint32_t&nbsp;POLLWRNORM&nbsp;=&nbsp;0x100;<br>
    //const&nbsp;uint32_t&nbsp;POLLWRBAND&nbsp;=&nbsp;0x200;&nbsp; </p>
  <h2 > 3.安装成功测试 </h2>
  <p >　　在终端输入skyeye，出现&#8220;无此命令&#8221;错误，终端输入： </p>
  <pre class="code" >　 sudo cd /usr/bin 
  sudo ln -s /opt/skyeye/bin/skyeye skyeye (skyeye指向/opt/skyeye/bin/skyeye) 　</pre>
<p >　　安装完后也可能出现没有lcd和触摸屏的现象，这是要修改skyeye.conf即可 </p>
  <pre class="code" >   lcd: state=on 
   uart:mod=term </pre>
<p >　　测试testsuit </p>
  <p >　　解压testsuit，进入skyeye-testsuite-1.3.0_rc1/uClinux/at91&nbsp;/uclinux_cs8900a </p>
  <pre class="code">　　 输入sudo&nbsp;skyeye&nbsp;-e&nbsp;linux </pre>
  <p >　　测试完成 </p>
  <h2 > 4.运行&nbsp;SkyEye的命令行应用程序 </h2>
  <p >　　在/opt/skyeye/testsuite/目录下有一个测试程序&#8221;arm_hello&#8220;。 </p>
  <p >　　1).进入/opt/skyeye/testsuite/; </p>
  <p >　　2).输入sudo&nbsp;skyeye&nbsp;-e&nbsp;arm_hello命令，进入skyeye命令行界面; </p>
  <p >　　3).然后运行"start"命令加载配置和初始化目标机，同时在主机上会显示一个xterm的窗口，窗口标题&nbsp;为"uart_instance"; </p>
  <p >　　4).然后我们可以输入"run&#8221;&nbsp;命令来启动helloworld的测试用例; </p>
  <p >　　5).我们输入"stop"&nbsp;命令来停止目标板; </p>
  <p >　　6).输入&nbsp;"info&nbsp;regitsters"&nbsp;查看当前的寄存器的数值; </p>
  <p >　　7).输入&nbsp;"disassemble"&nbsp;命令进行反汇编0x100004c，例如："disassemble&nbsp;0x100004c"; </p>
  <p >　　7.skyeye的终端是用term(Ubuntu是xterm)，显示特别难看，我们修改一下xterm的显示特性就可以了。 </p>
  <p >　　修改~/.Xresources就可以了(没有就自己创建一个) </p>
  <p >　　范例代码: </p>
  <p >　　xterm*locale:&nbsp;true </p>
  <p >　　xterm.utf8:&nbsp;true </p>
  <p >　　xterm*utf8Title:&nbsp;true </p>
  <p >　　xterm*faceName:&nbsp;Monaco:pixelsize=14 </p>
  <p >　　xterm*faceNameDoublesize:&nbsp;WenQuanYi&nbsp;Zen&nbsp;Hei:pixelsize=15 </p>
  <p >　　然后用命令 </p>
  <p >　　xrdb&nbsp;-load&nbsp;~/.Xresources </p>
  <p >　　重启或导入设置就可以了。 </p>
  <h2 >5.启动skyeye</h2>
  <p >在终端输入命令： </p>
  <pre class="code"> sudo skyeye -e linux  </pre>
  <p>出现：</p>
  <p>[sudo]&nbsp;password&nbsp;for&nbsp;rock:&nbsp; 
  </p>
  <p>输入用户密码。</p>
  <p>则开始启动：</p>
  <pre class="code" >Your elf file is little endian.

arch: arm

cpu info: armv3, arm7tdmi, 41007700, fff8ff00, 0 

mach info: name at91, mach_init addr 0x8060680

ethmod num=1, mac addr=0:0:0:0:0:0, hostip=10.0.0.1

uart_mod:0, desc_in:, desc_out:, converter:

SKYEYE: use arm7100 mmu ops

Loaded ROM   ./romfs.img

exec file "linux"'s format is elf32-little.

load section .init: addr = 0x01000000  size = 0x0000a000.

load section .text: addr = 0x0100a000  size = 0x000e1cd0.

load section .data: addr = 0x010ec000  size = 0x0000a434.

not load section .bss: addr = 0x010f6440  size = 0x000222c0 .

call ARMul_InitSymTable,kernel filename is linux. 

start addr is set to 0x01000000 by exec file.

Linux version 2.4.27-uc1 (skyeyeuser@debian) (gcc version 2.95.3 20010315 (release)(ColdFire patches - 20010318 from http://fiddes.net/coldfire/)(uClinux XIP and shared lib patches from http://www.snapgear.com/)) #3 Tue Aug 9 18:57:29 CST 2005

Processor: Atmel AT91M40xxx revision 0

Architecture: EB01

On node 0 totalpages: 1024

zone(0): 0 pages.

zone(1): 1024 pages.

zone(2): 0 pages.

Kernel command line: root=/dev/rom0

Calibrating delay loop... 15.82 BogoMIPS

Memory: 4MB = 4MB total

Memory: 2916KB available (903K code, 178K data, 40K init)

Dentry cache hash table entries: 512 (order: 0, 4096 bytes)

Inode cache hash table entries: 512 (order: 0, 4096 bytes)

Mount cache hash table entries: 512 (order: 0, 4096 bytes)

Buffer cache hash table entries: 1024 (order: 0, 4096 bytes)

Page-cache hash table entries: 1024 (order: 0, 4096 bytes)

POSIX conformance testing by UNIFIX

Linux NET4.0 for Linux 2.4

Based upon Swansea University Computer Society NET3.039

Initializing RT netlink socket

Starting kswapd

Atmel USART driver version 0.99

ttyS0 at 0xfffd0000 (irq = 2) is a builtin Atmel APB USART

ttyS1 at 0xfffcc000 (irq = 3) is a builtin Atmel APB USART

Blkmem copyright 1998,1999 D. Jeff Dionne

Blkmem copyright 1998 Kenneth Albanowski

Blkmem 1 disk images:

0: 1400000-1512BFF [VIRTUAL 1400000-1512BFF] (RO)

RAMDISK driver initialized: 16 RAM disks of 4096K size 1024 blocksize

Cirrus Logic CS8900A driver for Linux (V0.02)

eth0: CS8900A rev D detected

NET4: Linux TCP/IP 1.0 for NET4.0

IP Protocols: ICMP, UDP, TCP

IP: routing cache hash table of 512 buckets, 4Kbytes

TCP: Hash tables configured (established 512 bind 512)

NET4: Unix domain sockets 1.0/SMP for Linux NET4.0.

VFS: Mounted root (romfs filesystem) readonly.

Shell invoked to run file: /etc/rc

Command: hostname GDB-ARMulator

Command: /bin/expand /etc/ramfs.img /dev/ram0

Command: mount -t proc proc /proc

mount: /etc/mtab: Read-only file system

Command: mount -t ext2 /dev/ram0 /var

mount: /etc/mtab: Read-only file system

Command: mkdir /var/tmp

Command: mkdir /var/log

Command: mkdir /var/run

Command: mkdir /var/lock

Command: mkdir /var/empty

Command: cat /etc/motd

Welcome to

          ____ _  _

         /  __| ||_|                 

    _   _| |  | | _ ____  _   _  _  _ 

   | | | | |  | || |  _ \| | | |\ \/ /

   | |_| | |__| || | | | | |_| |/    \

   |  ___\____|_||_|_| |_|\____|\_/\_/

   | |

   |_|



GDB/ARMulator support by &lt;davidm@snapgear.com&gt;

For further information check:

http://www.uclinux.org/
Command: /bin/ifconfig eth0 up 10.0.0.2
Execution Finished, Exiting
Sash command shell (version 1.1.1)
/&gt;</pre>
  <h2 > ubuntu下交叉编译环境的搭建 </h2>
  <p >在安装好了硬件模拟环境之后，还需要进一步来安装交叉编译工具。我是在http://opensrc.sec.samsung.com/download.html上下载的。网速很快的。 </p>
  <p >下载完毕之后，先要修改一下子文件的内容，否则编译无法通过： </p>
  <p >vim&nbsp;arm-uclinux-tools-base-gcc3.4.0-20040713.sh, </p>
  <p >tail&nbsp;+${SKIP}&nbsp;${SCRIPT}&nbsp;|&nbsp;bunzip2&nbsp;|&nbsp;tar&nbsp;xvf&nbsp;-<br>
    修改为:<br>
    tail&nbsp;-n&nbsp;+${SKIP}&nbsp;${SCRIPT}&nbsp;|&nbsp;bunzip2&nbsp;|&nbsp;tar&nbsp;xvf&nbsp;- </p>
  <p >之后执行： </p>
  <p >sudo&nbsp;sh&nbsp;./&nbsp;arm-uclinux-tools-base-gcc3.4.0-20040713.sh </p>
  <p >注意： </p>
  <p >其默认的安装路径是/root/bin/arm-uclinux-tool,系统是无法直接找到路径的，而且即使是在/etc/environment中添加了环境变量，也只是转换成root身份时，才可以搜索到该命令。 </p>
  <p >所以，在安装完毕之后，需要以root的身份将其从/root/bin目录下拷贝到目标目录下，我是将其拷贝到/opt下，即：／opt/arm-uclinux-tool，然后在vim&nbsp;/etc/environment，在PATH环境变量后边添加&#8220;:/opt/arm-uclinux-tool/bin&#8221;，重新启动电脑，打开电脑之后，输入arm-elf(敲tab键)，会通过bash自动补全为:arm-elf-g++等。 </p>
  
<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->