<!--hmt-->
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end --><!--end of htmlheader-->

<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->

<!--end of htmlmiddle-->




<B>1  <A name="1">grub4dos初级教程－入门篇</B></A><BR><BR>

<B>1.4  <A name="14">如何使用grub4dos</A><BR><BR></B>

    对于多数没有或很少接触过linux的windows用户来说，刚开始使用grub时离不开菜单。也就是说，使用grub前，我们要准备menu.lst文件。<BR><BR>

    下面是一个menu.lst的例子。(以#开始的行，表示注释，不执行)<BR><BR>

<FONT SIZE="" COLOR="#FF00FF"># 默认延迟时间(秒)<BR>
timeout 30<BR><BR>

# 第一项为默认值<BR>
default 0<BR><BR>

# 设置图形背景文件<BR>
splashimage (hd0,0)/boot/grub/xp2008.gz<BR><BR>

# 设置中文支持的字体文件<BR>
fontfile (hd0,0)/boot/grub/fonts<BR><BR>

title 使用map启动本地硬盘上的瑞星杀毒软盘镜像文件<BR>
map (hd0,0)/boot/grub/rav.img (fd0)<BR>
map --hook<BR>
chainloader (fd0)+1<BR>
rootnoverify (fd0)<BR><BR>

title 使用memdisk启动本地 Win98 软盘镜像文件<BR>
kernel (hd0,0)/boot/grub/memdisk.gz<BR>
initrd (hd0,0)/boot/grub/win98.img<BR><BR>

title 使用memdisk启动本地硬盘上的瑞星杀毒软盘压缩镜像文件<BR>
root   (hd0,0)<BR>
kernel /boot/grub/memdisk.gz c=80 h=12 s=36 floppy<BR>
initrd /boot/rav.zip<BR><BR>

title 启动第一主分区(hd0,0)上的操作系统<BR>
rootnoverify (hd0,0)<BR>
makeactive<BR>
chainloader  +1<BR><BR>

title 启动第二主分区(hd0,1)上的操作系统<BR>
rootnoverify (hd0,1)<BR>
makeactive<BR>
chainloader  +1<BR><BR>

title 重启<BR>
reboot<BR><BR>

title 关机<BR>
halt <BR><BR></FONT>

此菜单文件的运行效果如下图。【图2】<BR><BR>
<IMG SRC="pic02.jpg" WIDTH="610" HEIGHT="441" BORDER="0" ALT="">



<BR><BR>

参考这个例子，我们就可以根据自己需要对菜单进行修改。<BR><BR>

比如从网上下载了效率源的镜像文件，文件名为XLY.IMG。我们只需把<BR>
<FONT SIZE="" COLOR="#FF00FF">title 使用memdisk启动本地 Win98 软盘镜像文件<BR>
kernel (hd0,0)/boot/grub/memdisk.gz<BR>
initrd (hd0,0)/boot/grub/win98.img<BR><BR></FONT>

改成<BR>
<FONT SIZE="" COLOR="#FF00FF">title 硬盘检测修复工具 效率源 (memdisk)<BR>
kernel (hd0,0)/boot/grub/memdisk.gz<BR>
initrd (hd0,0)/boot/grub/xly.img<BR><BR></FONT>

或者改成<BR>
<FONT SIZE="" COLOR="#FF00FF">title 硬盘检测修复工具 效率源 (map)<BR>
map (hd0,0)/boot/grub/xly.img (fd0)<BR>
map --hook<BR>
chainloader (fd0)+1<BR>
rootnoverify (fd0)<BR><BR></FONT>

同时把xly.img文件保存到第一主分区（一般是C:）的boot\grub目录下。<BR>
当然也可以保存到其它路径。<BR><BR>

比如xly.img文件保存到C:\boot下，则menu.lst文件相应改为:<BR>
<FONT SIZE="" COLOR="#FF00FF">map (hd0,0)/boot/xly.img (fd0)</FONT><BR><BR>

又如xly.img文件保存到D:\test下，则menu.lst文件相应改为:<BR>
<FONT SIZE="" COLOR="#FF00FF">map (hd0,4)/test/xly.img (fd0)</FONT><BR>
 
 (参看下面的注意d) <BR><BR>

从上面的例子可以看出，启动软盘镜象，有两种方式，即用memdisk或用map。<BR><BR> 用memdisk时，img文件可压缩；在img文件大小为非1.44MB或2.88MB标准镜像时，需要指定CHS参数。img文件的CHS参数可用winimage获得。<BR><BR>

即例子中的：<BR>

<FONT SIZE="" COLOR="#FF00FF">title 使用memdisk启动本地硬盘上的瑞星杀毒软盘压缩镜像文件<BR>
root   (hd0,0)<BR>
kernel /boot/grub/memdisk.gz c=80 h=12 s=36 floppy<BR>
initrd /boot/rav.zip<BR><BR></FONT>

另外，菜单文件中的文件路径可用相对路径（如：<FONT SIZE="" COLOR="#FF00FF">/boot/rav.zip</FONT>）或绝对路径（如：<FONT SIZE="" COLOR="#FF00FF">(hd0,0)/boot/grub/xly.img</FONT>）表示。<BR><BR>





map方式对软盘映像大小没有限制，但要求必须连续存放。改进的map --mem则无此限制。<BR><BR>
比如：<BR>

<FONT SIZE="" COLOR="#FF00FF">map --mem /boot/xxx.ima (fd0)<BR>
map --hook<BR>
chainloader (fd0)+1<BR>
rootnoverify (fd0)<BR><BR></FONT>

注意：<BR>

  a, 菜单文件中所用的memdisk.gz文件，不包括在grub4dos的发行包里，需自行准备。可从gnu grub软件包或从其它基于grub的工具（如一键ghost，本人的gghost）中获得。<BR><BR>

  b, 菜单中所用的其它文件如xp2008.gz（背景文件）、fonts（中文字体文件）及各种镜像文件等，均需拷贝到文件中指定路径。
     fontfile命令不可单独使用，需与splashimage一起使用。<BR><BR>

  c, 菜单文件中的命令全部使用小写。<BR><BR>

  d,<FONT SIZE="" COLOR=""><B> 初学者使用绝对路径时要注意GRUB对设备的命名方法。系统的第一个硬盘驱动器表示成(hd0)，其上的第一个分区表示为(hd0,0)，也就是说对于硬盘,采用(hdx,y)的形式来表示，x、y都是从0开始计数的，x表示硬盘号，y表示分区号。<BR>
  &nbsp;&nbsp;&nbsp;&nbsp;由于主分区只能有四个，所以第一硬盘的四个主分区分别用(hd0,0)~(hd0,3)来表示；逻辑分区则从(hd0,4)开始算，即第一逻辑分区用(hd0,4)，第二逻辑分区用(hd0,5)来表示，依次类推。<BR>
  &nbsp;&nbsp;&nbsp;&nbsp;一般机子的硬盘都是一个主分区，其余是逻辑分区。因此C盘用(hd0,0)，D盘用(hd0,4)来表示。 光盘用(cd)表示，第一软驱用(fd0)表示。</B></FONT><BR><BR>

    
  如我的硬盘有两个主分区，其余为逻辑分区。用(hdx,y)的方法表示如下图：<BR>
  <IMG SRC="myhd0.jpg" WIDTH="579" HEIGHT="112" BORDER="0" ALT=""><BR>
  
  <BR><BR>

下面是我现在使用的菜单效果图及menu.lst文件，供参考。【图3】<BR><BR>
<IMG SRC="pic03.jpg" WIDTH="610" HEIGHT="330" BORDER="0" ALT="">



<BR><BR>
<FONT SIZE="" COLOR="#FF00FF">color white/green yellow/green<BR>
default 1<BR>
timeout 3<BR>

#fontfile /boot/grub/fonts<BR>
#splashimage /boot/grub/bg.xpm.gz<BR>

#password --md5 $1$8$D0mfzTIQXv2Ma2b5bWH0b.<BR>

title  0, Boot from Hard Drive (hd0,0)<BR>
root (hd0,0)<BR>
chainloader +1<BR><BR>

title  1, GreenGhost  [Ghost v8.3/v11]  (MAP-HOOK)<BR>
map --mem /boot/grub/gghost.img (fd0)<BR>
map --hook<BR>
chainloader (fd0)+1<BR>
rootnoverify (fd0)<BR><BR>

title  2, GreenGhost  [Ghost v8.3/v11]  (MEMDISK)<BR>
kernel /boot/grub/memdisk.gz c=200 h=2 s=36 floppy<BR>
initrd /boot/grub/gghost.img <BR><BR>

title  3, GreenGhost  [Ghost v8.3/v11]  (MAP-HOOK) [disable a20]<BR>
map --mem /boot/grub/gghost.img (fd0)<BR>
map --hook<BR>
chainloader --disable-a20 (fd0)+1<BR>
rootnoverify (fd0)<BR><BR>

title  4, Microsoft Windows NT/2K/XP<BR>
find --set-root /ntldr<BR>
chainloader /ntldr<BR><BR>

title  5, Microsoft Windows Vista<BR>
find --set-root /bootmgr<BR>
chainloader /bootmgr<BR><BR>

title  6, Boot from Hard Drive (hd0,1)<BR>
root (hd0,1)<BR>
chainloader +1<BR><BR>

title  7, Reboot<BR>
reboot<BR><BR>

title  8, Shutdown<BR>
halt<BR><BR></FONT>





<!--start of htmlend-->
<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->