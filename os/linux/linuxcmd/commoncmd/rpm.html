<!--hmt-->
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end --><!--end of htmlheader-->

<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->

<!--end of htmlmiddle-->




<!--start of htmlend-->
<h1>RPM</h1>
<p>RPM 是 Red Hat Package Manager的缩写，本意是Red Hat 软件包管理，顾名思义是Red Hat 贡献出来的软件包管理；在Fedora 、Redhat、Mandriva、SuSE、YellowDog等主流发行版本，以及在这些版本基础上二次开发出来的发行版采用；RPM包里面都包含可 执行的二进制程序。</p>
<p> 一个RPM 包中的应用程序，有时除了自身所带的附加文件保证其正常以外，还需要其它特定版本文件，这就是软件包的依赖关系；</p>
<h2>一、RPM包管理的用途 </h2>
<ul><li> 1、可以安装、删除、升级和管理软件；当然也支持在线安装和升级软件；</li><li>  2、通过RPM包管理能知道软件包包含哪些文件，也能知道系统中的某个文件属于哪个软件包； </li><li>  3、可以在查询系统中的软件包是否安装以及其版本；</li><li>  4、作为开发者可以把自己的程序打包为RPM 包发布；</li><li>  5、软件包签名GPG和MD5的导入、验证和签名发布</li><li>  6、依赖性的检查，查看是否有软件包由于不兼容而扰乱了系统；</li>
</ul>
<h2> 二、RPM 的使用权限</h2>
<p> RPM软件的安装、删除、更新只有root权限才能使用；对于查询功能任何用户都可以操作；如果普通用户拥有安装目录的权限，也可以进行安装； </p>
<h2>三、rpm 的一点简单用法</h2>
<p> 我们除了软件包管理器以外，还能通过rpm 命令来安装；是不是所有的软件包都能通过rpm 命令来安装呢？不是的，文件以.rpm 后缀结尾的才行；有时我们在一些网站上找到file.rpm ，都要用 rpm 来安装；</p>
<h3> 一）初始化rpm 数据库</h3>
<p> 通过rpm 命令查询一个rpm 包是否安装了，也是要通过rpm 数据库来完成的；所以我们要经常用下面的两个命令来初始化rpm 数据库</p>
<pre class="code">[root@localhost beinan]# rpm --initdb
[root@localhost beinan]# rpm --rebuilddb </pre>
<p>注：这个要花好长时间；</p>
<p> 注：这两个参数是极为有用，有时rpm 系统出了问题，不能安装和查询，大多是这里出了问题； </p>
<h3>二）RPM软件包管理的查询功能</h3>
<p>命令格式 </p>
<pre class="code">rpm {-q|--query} [select-options] [query-options]</pre>
<p> RPM的查询功能是极为强大，是极为重要的功能之一；举几个常用的例子，更为详细的具体的，请参考#man rpm</p>
<h2> 1、对系统中已安装软件的查询；</h2>
<h3>1）查询系统已安装的软件；</h3>
<pre class="code">语法：rpm -q 软件名</pre>
<p> 举例： </p>
<pre class="code">[root@localhost beinan]# rpm -q gaim
gaim-1.3.0-1.fc4 </pre>
<p> -q就是 --query ，中文意思是&quot;问&quot;，此命令表示的是，是不是系统安装了gaim ；如果已安装会有信息输出；如果没有安装，会输出gaim 没有安装的信息； 查看系统中所有已经安装的包，要加 -a 参数 ；</p>
<pre class="code">[root@localhost RPMS]# rpm -qa</pre>
<p> 如果分页查看，再加一个管道 |和more命令；</p>
<pre class="code">[root@localhost RPMS]# rpm -qa |more</pre>
<p> 在所有已经安装的软件包中查找某个软件，比如说 gaim ；可以用 grep 抽取出来；</p>
<pre class="code">[root@localhost RPMS]# rpm -qa |grep gaim</pre>
<p> 上面这条的功能和 rpm -q gaim 输出的结果是一样的；</p>
<h3> 2）查询一个已经安装的文件属于哪个软件包；</h3>
<pre class="code">语法 rpm -qf 文件名</pre>
<p> 注：文件名所在的绝对路径要指出</p>
<p>举例： </p>
<pre class="code">[root@localhost RPMS]# rpm -qf /usr/lib/libacl.la
libacl-devel-2.2.23-8</pre>
<h3>3）查询已安装软件包都安装到何处 </h3>
<pre class="code">语法：rpm -ql 软件名 或 rpmquery -ql 软件名</pre>
<p>举例：</p>
<pre class="code">[root@localhost RPMS]# rpm -ql lynx
[root@localhost RPMS]# rpmquery -ql lynx </pre>
<h3>4）查询一个已安装软件包的信息</h3>
<pre class="code">语法格式： rpm -qi 软件名</pre>
<p>举例：</p>
<pre class="code">[root@localhost RPMS]# rpm -qi lynx </pre>
<h3>5）查看一下已安装软件的配置文件；</h3>
<pre class="code">语法格式：rpm -qc 软件名</pre>
<p>举例：</p>
<pre class="code">[root@localhost RPMS]# rpm -qc lynx </pre>
<h3>6）查看一个已经安装软件的文档安装位置：</h3>
<pre class="code">语法格式： rpm -qd 软件名</pre>
<p>举例：</p>
<pre class="code">[root@localhost RPMS]# rpm -qd lynx </pre>
<h3>7）查看一下已安装软件所依赖的软件包及文件；</h3>
<pre class="code">语法格式： rpm -qR 软件名</pre>
<p>举例：</p>
<pre class="code">[root@localhost beinan]# rpm -qR rpm-python</pre>
<p>查询已安装软件的总结：对于一个软件包已经安装，我们可以把一系列的参数组合起来用；比如 rpm -qil ；比如：</p>
<pre class="code">[root@localhost RPMS]# rpm -qil lynx</pre>
<h2>2、对于未安装的软件包的查看：</h2>
<h3>1）查看一个软件包的用途、版本等信息； </h3>
<pre class="code">语法： rpm -qpi file.rpm</pre>
<p>举例：</p>
<pre class="code">[root@localhost RPMS]# rpm -qpi lynx-2.8.5-23.i386.rpm</pre>
<h3>2）查看一件软件包所包含的文件； </h3>
<pre class="code">语法： rpm -qpl file.rpm</pre>
<p>举例：</p>
<pre class="code">[root@localhost RPMS]# rpm -qpl lynx-2.8.5-23.i386.rpm</pre>
<h3>3）查看软件包的文档所在的位置； </h3>
<pre class="code">语法： rpm -qpd file.rpm</pre>
<p>举例：</p>
<pre class="code">[root@localhost RPMS]# rpm -qpd lynx-2.8.5-23.i386.rpm</pre>
<h3>5）查看一个软件包的配置文件； </h3>
<pre class="code">语法： rpm -qpc file.rpm</pre>
<p>举例：</p>
<pre class="code">[root@localhost RPMS]# rpm -qpc lynx-2.8.5-23.i386.rpm</pre>
<h3>4）查看一个软件包的依赖关系 </h3>
<pre class="code">语法： rpm -qpR file.rpm</pre>
<p>举例：</p>
<pre class="code">[root@localhost archives]# rpm -qpR yumex_0.42-3.0.fc4_noarch.rpm
/bin/bash 
/usr/bin/python
config(yumex) = 0.42-3.0.fc4
pygtk2
pygtk2-libglade
rpmlib(CompressedFileNames) &lt;= 3.0.4-1 rpmlib(PayloadFilesHavePrefix) &lt;= 4.0-1 usermode yum &gt;= 2.3.2</pre>
<h2>三）软件包的安装、升级、删除等； </h2>
<h2>1、安装和升级一个rpm 包；</h2>
<pre class="code">[root@localhost beinan]#rpm -vih file.rpm</pre><p> 注：这个是用来安装一个新的rpm ；</p>
<pre class="code">[root@localhost beinan]#rpm -Uvh file.rpm </pre><p>注：这是用来升级一个rpm 包；</p>
<p>如果有依赖关系的，请解决依赖关系，其实软件包管理器能很好的解决依赖关系，请看前面的软件包管理器的介绍；如果您在软件包管理器中也找不到依赖关系的包；那只能通过编译他所依赖的包来解决依赖关系，或者强制安装； 语法结构：</p>
<pre class="code">[root@localhost beinan]# rpm -ivh file.rpm --nodeps --force</pre>
<pre class="code">[root@localhost beinan]# rpm -Uvh file.rpm --nodeps --force</pre>
<p>举例应用： </p>
<pre class="code">[root@localhost RPMS]# rpm -ivh lynx-2.8.5-23.i386.rpm
Preparing... ########################################### [100%]
1:lynx ########################################### [100%]</pre>
<pre class="code">[root@localhost RPMS]# rpm -ivh --replacepkgs lynx-2.8.5-23.i386.rpm
Preparing... ########################################### [100%]
1:lynx ########################################### [100%] </pre>
<p>注： --replacepkgs 参数是以已安装的软件再安装一次；有时没有太大的必要；</p>
<p>测试安装参数 --test ，用来检查依赖关系；并不是真正的安装；</p>
<pre class="code">[root@localhost RPMS]# rpm -ivh --test gaim-1.3.0-1.fc4.i386.rpm
Preparing... ########################################### [100%]</pre>
<p>由新版本降级为旧版本，要加 --oldpackage 参数；</p>
<pre class="code">[root@localhost RPMS]# rpm -qa gaim</p
gaim-1.5.0-1.fc4></pre>
<pre class="code">[root@localhost RPMS]# rpm -Uvh --oldpackage gaim-1.3.0-1.fc4.i386.rpm
Preparing... ########################################### [100%]
1:gaim ########################################### [100%]</pre>
<pre class="code">[root@localhost RPMS]# rpm -qa gaim
gaim-1.3.0-1.fc4</pre>
<p>为软件包指定安装目录：要加 --relocate 参数；</p>
<p>下面的举例是把gaim-1.3.0-1.fc4.i386.rpm指定安装在 /opt/gaim 目录中；</p>
<pre class="code">[root@localhost RPMS]# rpm -ivh --relocate=/opt/gaim gaim-1.3.0-1.fc4.i386.rpm
Preparing... ########################################### [100%]
1:gaim ########################################### [100%]</pre>
<pre class="code">[root@localhost RPMS]# ls /opt/
gaim </pre>
<p>为软件包指定安装目录：要加 -relocate 参数； </p>
<p>下面的举例是把lynx-2.8.5-23.i386.rpm 指定安装在 /opt/lynx 目录中；</p>
<pre class="code">[root@localhost RPMS]# rpm -ivh --relocate=/opt/lynx --badreloc lynx-2.8.5-23.i386.rpm</p>
Preparing... ########################################### [100%]
1:lynx ########################################### [100%]</pre>
<p>我们安装在指定目录中的程序如何调用呢？一般执行程序，都放在安装目录的bin或者sbin目录中；看下面的例子；如果有错误输出，就做相应的链接，用 ln -s ；</p>
<pre class="code">[root@localhost RPMS]# /opt/lynx/usr/bin/lynx
Configuration file /etc/lynx.cfg is not available.</pre>
<pre class="code">[root@localhost RPMS]# ln -s /opt/lynx/etc/lynx.cfg /etc/lynx.cfg</pre>
<pre class="code">[root@localhost RPMS]# /opt/lynx/usr/bin/lynx www.linuxsir.org</pre>
<h2>2、删除一个rpm 包；</h2>
<pre class="code">[root@localhost beinan]#rpm -e 软件包名</pre>
<p>举例：我想移除lynx 包，完整的操作应该是：</p>
<pre class="code">[root@localhost RPMS]# rpm -e lynx</pre>
<p>如果有依赖关系，您也可以用--nodeps 忽略依赖的检查来删除。但尽可能不要这么做，最好用软件包管理器 systerm-config-packages 来删除或者添加软件；</p>
<pre class="code">[root@localhost beinan]# rpm -e lynx --nodeps </pre>
<p>四、导入签名：</p>
<pre class="code">[root@localhost RPMS]# rpm --import 签名文件</pre>
<p>举例：</p>
<pre class="code">[root@localhost fc40]# rpm --import RPM-GPG-KEY</pre>
<pre class="code">[root@localhost fc40]# rpm --import RPM-GPG-KEY-fedora</pre>
<h2>五、RPM管理包管理器支持网络安装和查询； </h2>
<p>比如我们想通过 Fedora Core 4.0 的一个镜像查询、安装软件包；</p>
<p>地址：http://mirrors.kernel.org/fedora/core/4/i386/os/Fedora/RPMS/ </p>
<p>举例：</p>
<p>命令格式：rpm 参数 rpm包文件的http或者ftp的地址</p>
<pre class="code"># rpm -qpi http://mirrors.kernel.org/fedora/core/4/i386/os/Fedora/RPMS/gaim-1.3.0-1.fc4.i386.rpm</pre>
<pre class="code"># rpm -ivh http://mirrors.kernel.org/fedora/core/4/i386/os/Fedora/RPMS/gaim-1.3.0-1.fc4.i386.rpm </pre>
<h2>六、对已安装软件包查询的一点补充；</h2>
<pre class="code">[root@localhost RPMS]# updatedb</pre>
<pre class="code">[root@localhost RPMS]# locate 软件名或文件名</pre>
<p>通过updatedb，我们可以用 locate来查询一些软件安装到哪里了；系统初次安装时要执行updatedb ，每隔一段时间也要执行一次；以保持已安装软件库最新；updatedb 是slocate软件包所有；如果您没有这个命令，就得安装slocate ；</p>
<p>举例：</p>
<pre class="code">[root@localhost RPMS]# locate gaim </pre>
<h2>七、从rpm软件包抽取文件；</h2>
<pre class="code">命令格式： rpm2cpio file.rpm |cpio -div</pre>
<p>举例：</p>
<pre class="code">[root@localhost RPMS]# rpm2cpio gaim-1.3.0-1.fc4.i386.rpm |cpio -div</pre>
<p>抽取出来的文件就在当前操作目录中的 usr 和etc中；</p>
<p>其实这样抽到文件不如指定安装目录来安装软件来的方便；也一样可以抽出文件； </p>
<p>为软件包指定安装目录：要加 -relocate 参数； </p>
<p>下面的举例是把gaim-1.3.0-1.fc4.i386.rpm指定安装在 /opt/gaim 目录中；</p>
<pre class="code">[root@localhost RPMS]# rpm -ivh --relocate=/opt/gaim gaim-1.3.0-1.fc4.i386.rp
Preparing... ########################################### [100%]
1:gaim ########################################### [100%]</pre>
<pre class="code">[root@localhost RPMS]# ls /opt/<
gaim </pre>
<p>这样也能一目了然；gaim的所有文件都是安装在 /opt/gaim 中，我们只是把gaim 目录备份一下，然后卸掉gaim；这样其实也算提取文件的一点用法；</p>
<h2>八、RPM的配置文件； </h2>
<p>RPM包管理的配置文件是 rpmrc ，我们可以在自己的系统中找到；比如Fedora Core 4.0中的rpmrc 文件位于；</p>
<pre class="code">[root@localhost RPMS]# locate rpmrc
/usr/lib/rpm/rpmrc</p>
/usr/lib/rpm/redhat/rpmrc </pre>
<p>还可以通过 rpm --showrc 查看</p>
<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->