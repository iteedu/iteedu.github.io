<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end -->


<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->

  <h1>GCC	源文件安装方法详解</h1>
  <p>现在，GCC 需要 GMP 、MPFR 和MPC软件包。 因为你的宿主系统可能不包含这些软件包， 所以， 它们要和 GCC 一起编译。</p>
  <p>只要将三个软件包解压到GCC源文件目录，并将其名字改为gmp、mpfr、mpc编译时会自动编译它们的。例如，当前在GCC源文件目录，三个软件包在上一层目录，可以用以下命令：</p>
  <pre class="code">tar -jxf ../mpfr-3.0.0.tar.bz2
mv -v mpfr-3.0.0 mpfr
tar -jxf ../gmp-5.0.1.tar.bz2
mv -v gmp-5.0.1 gmp
tar -zxf ../mpc-0.8.2.tar.gz
mv -v mpc-0.8.2 mpc</pre>
<p>目前，GCC可以用来编译C/C++、FORTRAN、JAVA、OBJC、ADA等语言的程序，可根据需要选择安装支持的语言。</p>
  <p>安装之前，系统中必须要有cc或者gcc等编译器，并且是可用的，或者用环境变量CC指定系统上的编译器。如果系统上没有编译器，不能安装源代码形式的GCC。如果是这种情况，可以在网上找一个与你系统相适应的如RPM等二进制形式的GCC软件包来安装使用。本文介绍的是以源代码形式提供的GCC软件包的安装过程，软件包本身和其安装过程同样适用于其它Linux和Unix系统。</p>
  <p>系统上原来的GCC编译器可能是把gcc等命令文件、库文件、头文件等分别存放到系统中的不同目录下的。与此不同，现在GCC建议我们将一个版本的GCC安装在一个单独的目录下。这样做的好处是将来不需要它的时候可以方便地删除整个目录即可（因为GCC没有uninstall功能）；缺点是在安装完成后要做一些设置工作才能使编译器工作正常。在本文中采用这个方案安装GCC 4.1.2，并且在安装完成后，仍然能够使用原来低版本的GCC编译器，即一个系统上可以同时存在并使用多个版本的GCC编译器。</p>
  <p>按照本文提供的步骤和设置选项，即使以前没有安装过GCC，也可以在系统上安装上一个可工作的新版本的GCC编译器。</p>
  <h2>1. 下载</h2>
  <p>在GCC网站上（http://gcc.gnu.org）或者通过网上搜索可以查找到下载资源。可供下载的文件一般有两种形式(以gcc-4.1.2为例)：gcc-4.1.2.tar.gz和gcc-4.1.2.tar.bz2，只是压缩格式不一样，内容完全一致，下载其中一种即可。</p>
  <h2>2. 解压缩</h2>
  <p> 拷贝gcc-4.1.2.tar.bz2到/usr/local/src(自己可以选择)下,根据压缩格式，选择下面相应的一种方式解包（以下的&quot;%&quot;表示命令行提示符）：</p>
  <pre class="code">% tar zxvf gcc-4.1.2.tar.gz</pre>
    或者<br>
    <pre class="code">% bzcat gcc-4.1.2.tar.bz2 | tar xvf -</pre>
  <p>新生成的gcc-4.1.2这个目录被称为源目录，用${srcdir}表示它。以后在出现${srcdir}的地方，应该用真实的路径来替换它。用pwd命令可以查看当前路径。</p>
  <p>在${srcdir}/INSTALL目录下有详细的GCC安装说明，可用浏览器打开index.html阅读。</p>
  <h2>3. 建立目标目录</h2>
  <p>目标目录（用${objdir}表示）是用来存放编译结果的地方。GCC建议编译后的文件不要放在源目录${srcdir]中（虽然这样做也可以），最好单独存放在另外一个目录中，而且不能是${srcdir}的子目录。</p>
  <p>例如，可以这样建立一个叫 /usr/local/gcc-build的目标目录：</p>
  <pre class="code">% mkdir /usr/local/gcc-build
% cd gcc-build</pre>
  <p>以下的操作主要是在目标目录 ${objdir} 下进行。</p>
  <h2>4. 配置</h2>
  <p>配置的目的是决定将GCC编译器安装到什么地方（${destdir}），支持什么语言以及指定其它一些选项等。其中，${destdir}不能与${objdir}或${srcdir}目录相同。</p>
  <p>配置是通过执行${srcdir}下的configure来完成的。其命令格式为（记得用你的真实路径替换${destdir}）：</p>
  <pre class="code">% ${srcdir}/configure --prefix=${destdir} [其它选项]</pre>
  <p>例如，如果想将GCC 4.1.2安装到/usr/local/gcc-4.1.2目录下，则${destdir}就表示这个路径。</p>
  <p>在我的机器上，我是这样配置的：</p>
  <pre class="code">% ../src/gcc-4.1.2/configure \
  --prefix=/usr/local/gcc-4.1.2 \
  --enable-threads=posix\
  --disable-checking \
  --enable--long-long \
  --with-system-zlib \
  --enable-languages=c,c++,java</pre>
  <p>将GCC安装在/usr/local/gcc-4.1.2目录下，支持C/C++和JAVA语言，其它选项参见GCC提供的帮助说明。</p>
  <h2>5. 编译</h2>
  <pre class="code">% make</pre>
  <h2>6. 安装</h2>
  <p>执行下面的命令将编译好的库文件等拷贝到${destdir}目录中（根据你设定的路径，可能需要管理员的权限）：</p>
  <pre class="code">% make install</pre>
  <p>至此，GCC 4.1.2安装过程就完成了。</p>
  <h2>6. 其它设置</h2>
  <p>GCC 4.1.2的所有文件，包括命令文件（如gcc、g++）、库文件等都在${destdir}目录下分别存放，如命令文件放在bin目录下、库文件在 lib下、头文件在include下等。由于命令文件和库文件所在的目录还没有包含在相应的搜索路径内，所以必须要作适当的设置之后编译器才能顺利地找到并使用它们。</p>
  <h3>6.1 gcc、g++、gcj的设置</h3>
  <p>要想使用GCC 4.1.2的gcc等命令，简单的方法就是把它的路径${destdir}/bin放在环境变量PATH中。我不用这种方式，而是用符号连接的方式实现，这样做的好处是我仍然可以使用系统上原来的旧版本的GCC编译器。</p>
  <p>首先，查看原来的gcc所在的路径：</p>
  <pre class="code">% which gcc</pre>
  <p>在我的系统上，上述命令显示：/usr/bin/gcc。因此，原来的gcc命令在/usr/bin目录下。我们可以把GCC 4.1.2中的gcc、g++、gcj等命令在/usr/bin目录下分别做一个符号连接：</p>
  <pre class="code">% cd /usr/bin
% ln -s ${destdir}/bin/gcc gcc412
% ln -s ${destdir}/bin/g++ g++412
% ln -s ${destdir}/bin/gcj gcj412</pre>
  <p>这样，就可以分别使用gcc412、g++412、gcj412来调用GCC 4.1.2的gcc、g++、gcj完成对C、C++、JAVA程序的编译了。同时，仍然能够使用旧版本的GCC编译器中的gcc、g++等命令。</p>
  <h3>6.2 库路径的设置</h3>
  <p>将${destdir}/lib路径添加到环境变量LD_LIBRARY_PATH中，例如，如果GCC 4.1.2安装在/usr/local/gcc-4.1.2目录下，在Linux下可以直接在命令行上执行</p>
  <pre class="code"> % export LD_LIBRARY_PATH=/usr/local/gcc-4.1.2/lib</pre>
  <p>最好添加到系统的配置文件中，这样就不必要每次都设置这个环境变量了,在文件$HOME/.bash_profile中添加下面两句：</p>
  <pre class="code">LD_LIBRARY_PATH=/usr/local/gcc-4.1.2/lib:$LD_LIBRARY_PATH
export LD_LIBRARY_PATH</pre>
  <p>重启系统设置生效，或者执行命令</p>
  <pre class="code"> % source $HOME/.bash_profile</pre>
  <h2>7. 测试</h2>
  <p>用新的编译命令（gcc412、g++412等）编译你以前的C、C++程序，检验新安装的GCC编译器是否能正常工作。</p>
  <p></p>
<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->