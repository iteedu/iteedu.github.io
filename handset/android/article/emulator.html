<!--hmt-->
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end --><!--end of htmlheader-->

<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->

<!--end of htmlmiddle-->


<h1 >Android模拟器正确应用与安装方法</h1>
<p>手机从出现至今，已经逐渐的成为了人们的必备工具之一。许多厂家都在不断的改变手机的功能，提升其在生活工作中所占据的重要地位。Google公司推出了一款手机操作系统Android，可以提升手机性能，方便灵活的应用于人们的生活与工作中。在这里我们就先来了解一下这一系统中Android模拟器的相关概念。</p>
<p>要玩GPhone的Android模拟器，当然需要先去google上面下载Android的SDK，解压出来后在SDK的根目录下有一个tools文件夹，里面就是模拟器和一些非常有用的工具。</p>
<p>双击&ldquo;emulator.exe&rdquo;，直接启动模拟器，简单吧。当然，如果要对模拟器进行一些定制，还是要从命令行调用，带上参数启动。下面就来介绍一下启动是常用的几个参数：</p>
<h2>Android模拟器外观的定制：</h2>
<ol>
  <li>480x320, landscape: emulator -skin HVGA-L </li>
  <li>320x480, portrait : emulator -skin HVGA-P (default) </li>
  <li>320x240, landscape: emulator -skin QVGA-L </li>
  <li>240x320, portrait : emulator -skin QVGA-P </li>
</ol>
<h2>为Android模拟器加上SD卡：</h2>
<pre class="code">emulator -sdcard D:\sdcard.img </pre>

<p>下面我们再来说说如何创建&quot;sdcard.img&quot;文件：</p>
<p>&ldquo;tools&rdquo;目录下还有另外一个很好用的工具&ldquo;mksdcard.exe&rdquo;，一看名字就知道——make  sdcard。对，就用它来创建一个&ldquo;SD卡&rdquo;。</p>
<p>命令为：</p>
<pre class="code">mksdcard 1024M D:\sdcard.img </pre>

<p>OK,这样一个容量为1G的SD卡就创建完毕了。</p>
<h2>使用SDCard:</h2>
<p>创建:</p>
<pre class="code"> mksdcard &lt; 1024M&gt; &lt; sdcard.img&gt; 
  (bytes(default)，K，M)</pre>
<p>连接到Android模拟器:</p>
<pre class="code"> emulator -sdcard &lt; 目录/sdcard.img&gt;</pre>
<p>传文件到SDCard: </p>
<pre class="code">adb push &lt; 目录/audio.mp3&gt; &lt; /sdcard/audio.mp3&gt;</pre>
<p>玩过手机模拟器的人一般最感兴趣的当然是模拟器能做什么呢？下面一一道来：</p>
<p>GPhone的模拟器有个特有的号码：15555218135，这个就类似我们实体手机的SIM卡号码啦。要实现拨号，用手机？当然不行！</p>
<p>更简单，三步：</p>
<ol>
  <li>运行  cmd</li>
  <li>连接: telnet localhost 5554</li>
  <li>命令: gsm call 15555218135</li>
</ol>
<p>look！是不是Android模拟器上显示来电了？接听/挂断和实体手机一样。</p>
<p>发短信也一样简单，重复上面1，2两步，第三部命令改一下：</p>
<pre class="code">sms send 15555218135 Hello,this is a Message.</pre>

<p>来说说PC与模拟器文件传输的方法吧。这里需要用到另一个重要工具，也在&ldquo;tools&rdquo;目录下，&ldquo;adb.exe&rdquo;。</p>
<p>adb: adb(Android Debug Bridge)是Android 提供的一个通用的调试工具，借助这个工具，我们可以管理设备或手机 模拟器  的状态 。还可以进行以下的操作：</p>
<ol>
  <li>快速更新设备或手机模拟器中的代码，如应用或Android系统升级；</li>
  <li>在设备上运行shell命令；</li>
  <li>管理设备或Android模拟器上的预定端口；</li>
  <li>在设备或手机模拟器上复制或粘贴文件</li>
</ol>
<h2>一些常用的操作：</h2>
<p>进入Shell: </p>
<pre class="code">adb shell</pre>
<p>通过上面的命令，就可以进入设备或模拟器的shell环境中，在这个Linux Shell中，你可以执行各种Linux 的命令，另外如果只想执行一条shell命令，可以采用以下的方式： </p>
<pre class="code"> adb shell [command]</pre>
<p>如：</p>
<pre class="code">adb shell dmesg</pre>
<p>会打印出内核的调试信息。 <br />
  (Android的linux  shell做了大量精简，很多linux常用指令都不支持)</p>
<ul>
  <li>上传文件: adb push &lt; PC文件&gt; &lt; /tmp/...&gt;</li>
  <li>下载文件: adb pull &lt; /tmp/...&gt; &lt; PC文件&gt;</li>
  <li>安装程序: adb install &lt; *.apk&gt;</li>
  <li>卸载软件: adb shell rm /data/app/&lt; *.apk&gt;</li>
</ul>
<p>补充一点，通过adb安装的软件(*.apk)都在&quot;/data/app/&quot;目录下，所以安装时不必制定路径，卸载只需要简单的执行&quot;rm&quot;就行。</p>
<p>结束adb: </p>
<pre class="code">adb kill-server</pre>
<p>显示Android模拟器状态:</p>
<ol>
  <li>adb devices (端口信息) </li>
  <li>adb get-product (设备型号) </li>
  <li>adb get-serialno (序列号) </li>
</ol>
<p>等待正在运行的设备: </p>
<pre class="code">adb wait-for-device</pre>
<p>端口转发:</p>
<pre class="code"> adb forward </pre>
<p>将默认端口TCP 5555转发到1234端口上</p>
<pre class="code">adb forward tcp:5555 tcp:1234</pre>
<p>查看bug报告:</p>
<pre class="code"> adb bugreport</pre>
<p>访问数据库SQLite3</p>
<pre class="code">adb shell sqlite3</pre>
<p>记录无线通讯日志：  </p>
<pre class="code">adb shell logcat -b radio </pre>
<p>一般来说，无线通讯的日志非常多，在运行时没必要去记录，但我们还是可以通过命令，设置记录：</p>
<p>应用程序配置文件:</p>
<p>&quot;AndroidManifest.xml&quot;中 </p>
<pre class="code">&quot;&lt; category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;&quot;</pre>
<p>决定是否应用程序是否显示在Panel上</p>
<p>am指令(在shell内使用am来加载android应用):</p>
<pre class="code">am [start|instrument]   

am start [-a < ACTION>]   

[-d < DATA_URI>]  

[-t < MIME_TYPE>]   

[-c < CATEGORY> [-c < CATEGORY>] ...]   

[-e < EXTRA_KEY> < EXTRA_VALUE> [-e < EXTRA_KEY> < EXTRA_VALUE> ...]  

[-n < COMPONENT>] [-D] [< URI>]   

am instrument [-e < ARG_NAME> < ARG_VALUE>]   

[-p < PROF_FILE>]   

[-w] < COMPONENT> 
</pre>
<p>启动浏览器: </p>
<pre class="code"> am start -a android.intent.action.VIEW -d  http://www.google.cn/</pre>
<p>拨打电话: </p>
<pre class="code"> am start -a android.intent.action.CALL -d tel:10086</pre>
<p>启动google map直接定位到北京: </p>
<pre class="code"> am start -a android.intent.action.VIEW  geo:0,0?q=beijing</pre>
<p>目录：</p>
<ol>
  <li># ls </li>
  <li>ls </li>
  <li>sqlite_stmt_jou </li>
  <li>cache </li>
  <li>sdcard </li>
  <li>etc </li>
  <li>init </li>
  <li>init.goldfish.r </li>
  <li>init.rc </li>
  <li>data </li>
  <li>system </li>
  <li>proc </li>
  <li>sys </li>
  <li>sbin </li>
  <li>default.prop </li>
  <li>root </li>
  <li>dev </li>
</ol>
<p>这里要说明下，从andorid中得到的文件流的字符串的顺序是按&ldquo;类型+权限+拥有者+数组+大小+日期+名称+链接到&rdquo;顺序排列的，其中类型&ldquo;d&rdquo;表示的是文件夹，&quot;l&quot;表示的是链接,'-'表示的是文件。</p>
<p>例如d rwxrwx--- system cache 2009-01-09 11:46 cache</p>
<p>上面的目录就是通过解析ls命令返回的字符串进行解析的。</p>
<h2>数据库:</h2>
<ul>
  <li>联络人(含通话记录)数据库：</li>
<li>/data/data/com.android.providers.contacts/databases/contacts.db </li>
  
  <li>媒体库(貌似记录铃声设置等信息): </li>
<li>/data/data/com.android.providers.media/internal.db </li>
  
  <li>系统设置: </li>
<li>/data/data/com.android.providers.settings/databases/settings.db </li>
  
  <li>短信库: </li>
<li>/data/data/com.android.providers.telephony/databases/mmssms.db </li>
  
  <li>Web设置: </li>
<li>/data.data/com.android.settings/databases/webview.db </li>
  
  <li>地图搜索历史记录:</li>
<li>/data/data/com.google.android.apps.maps/databases/search_history.db </li>
  
  <li>帐号库?(内含androidId信息) : </li>
<li>/data/data/com.google.android.googleapps/databases/accounts.db </li>
  
  <li>铃声: </li>
  <li>/system/media/audio </li>
  <li>时区设置: </li>
<li>/data/property/persist.sys.timezone </li>
</ul>
<p> </p>
<h2>目前的安装模式</h2>
<p>安装前：</p>
<pre  class="code">emulator -wipe-data  
adb push busybox ./  
adb shell ./busybox tar -cf /tmp/data.tar /data  
adb pull /tmp/data.tar .  
mkdir original  
cd original  
tar -xf ../data.tar 
</pre>
<p>安装后：</p>
<pre class="code">adb shell ./busybox tar -cf /tmp/data.tar /data  
adb pull /tmp/data.tar .  
mkdir after_install  
cd after_install  
tar -xf ../data.tar 
</pre>

<p>目前来看，就是/data/app和data/data下多了两个相关文件，同时在/data/system/packages.xml中增加了安装的程序信息。似乎菜单也是从这个文件中得到是否新安装程序，以及如何显示相关信息比如名称什么的。</p>
<h2>Android模拟器和真机的不同之处：</h2>
<ol>
  <li>* 不支持呼叫和接听实际来电；但可以通过控制台模拟电话呼叫(呼入和呼出) </li>
  <li>* 不支持USB连接 </li>
  <li>* 不支持相机/视频捕捉 </li>
  <li>* 不支持音频输入(捕捉)；但支持输出(重放) </li>
  <li>* 不支持扩展耳机 </li>
  <li>* 不能确定连接状态 </li>
  <li>* 不能确定电池电量水平和交流充电状态 </li>
  <li>* 不能确定SD卡的插入/弹出 </li>
  <li>* 不支持蓝牙 </li>
</ol>
<h2>Android模拟器使用注意：</h2>
<p>平时使用emulator测试开发的网友注意应该定期清理下C:\Documents and Settings\User\Local  Settings\Temp\AndroidEmulator文件夹，由于Android模拟器每次运行时会临时生成几个.tmp后缀的临时文件，没有几个月功夫简单一看竟然占用磁盘空间高达5GB之多。这些文件网友可以安全的删除。</p>
<!--start of htmlend-->
<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->