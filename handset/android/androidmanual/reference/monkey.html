<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end --><!--end of htmlheader-->
<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->
 
  <!--end of htmlmiddle-->
  
  <h2 >UI/Application Exerciser Monkey</h2>
  <p>小顽童（Monkey）是运行在你的<a href="emulator.html">模拟器</a>或者设备上一个程序，它能产生伪随机事件，如用户点击，触摸，用户手势（译者：gestures指用户的连续动作导致屏幕的动态显示，Android上可以使用手指“拉动”屏幕的效果就是gesture）,以及一系列的系统级事件。你可以使用小顽童对你的程序进行压力测试，它可随机产生一些重复的东西。 </p>
  <h3><a name="overview" id="overview"></a>概述 </h3>
  <p>小顽童是一个命令行程序，你可以跑在模拟器或者设备上。它发送随机的用户和系统事件，可以对你开发的应用程序进行压力测试。 </p>
  <p>小顽童包含一系列的选项，但可以分解为4个主要的类别： </p>
  <p class="MsoNormal" style='margin-top:3.6pt;margin-right:0cm;margin-bottom:0cm;
margin-left:29.25pt;margin-bottom:.0001pt;text-indent:-18.0pt;line-height:120%;
mso-list:l1 level1 lfo2;tab-stops:list 36.0pt'> 
    <![if !supportLists]> 
    ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
    <![endif]> 
    基本设置选项，例如设置一些事件。 </p>
  <p class="MsoNormal" style='margin-top:3.6pt;margin-right:0cm;margin-bottom:0cm;
margin-left:29.25pt;margin-bottom:.0001pt;text-indent:-18.0pt;line-height:120%;
mso-list:l1 level1 lfo2;tab-stops:list 36.0pt'> 
    <![if !supportLists]> 
    ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
    <![endif]> 
    操作限制，如限制测试某一个单独的包。 </p>
  <p class="MsoNormal" style='margin-top:3.6pt;margin-right:0cm;margin-bottom:0cm;
margin-left:29.25pt;margin-bottom:.0001pt;text-indent:-18.0pt;line-height:120%;
mso-list:l1 level1 lfo2;tab-stops:list 36.0pt'> 
    <![if !supportLists]> 
    ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
    <![endif]> 
    事件类型以及频率。 </p>
  <p class="MsoNormal" style='margin-top:3.6pt;margin-right:0cm;margin-bottom:0cm;
margin-left:29.25pt;margin-bottom:.0001pt;text-indent:-18.0pt;line-height:120%;
mso-list:l1 level1 lfo2;tab-stops:list 36.0pt'> 
    <![if !supportLists]> 
    ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
    <![endif]> 
    调试选项。 </p>
  <p class="MsoNormal" style='margin-top:3.6pt;margin-right:0cm;margin-bottom:0cm;
margin-left:0cm;margin-bottom:.0001pt;line-height:120%'>当小顽童运行时，它产生的事件被发送给系统。它会监视正在测试系统并寻找三种情况做特殊处理： </p>
  <p class="MsoNormal" style='margin-top:3.6pt;margin-right:0cm;margin-bottom:0cm;
margin-left:29.25pt;margin-bottom:.0001pt;text-indent:-18.0pt;line-height:120%;
mso-list:l0 level1 lfo4;tab-stops:list 36.0pt'> 
    <![if !supportLists]> 
    ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
    <![endif]> 
    如果你限制小顽童在一个或者多个包里运行，如果发现程序试图使用其它包，就对其进行阻塞。 </p>
  <p class="MsoNormal" style='margin-top:3.6pt;margin-right:0cm;margin-bottom:0cm;
margin-left:29.25pt;margin-bottom:.0001pt;text-indent:-18.0pt;line-height:120%;
mso-list:l0 level1 lfo4;tab-stops:list 36.0pt'> 
    <![if !supportLists]> 
    ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
    <![endif]> 
    如果你的程序崩溃或者收到任何没有无法处理的异常，小顽童就会停止并且报告错误。 </p>
  <p class="MsoNormal" style='margin-top:3.6pt;margin-right:0cm;margin-bottom:0cm;
margin-left:29.25pt;margin-bottom:.0001pt;text-indent:-18.0pt;line-height:120%;
mso-list:l0 level1 lfo4;tab-stops:list 36.0pt'> 
    <![if !supportLists]> 
    ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
    <![endif]> 
    如果你的程序产生一个程序没有答复的错误，小顽童会停止并报告错误。 </p>
  <p>根据选项的冗长程度，你可以看到小顽童运行时候产生的报告，这个时候事件已经开始产生。</p>
  <h3><a name="basics" id="basics"></a>小顽童（Monkey）的基本用法 </h3>
  <p>你可以通过命令或者脚本启动小顽童。因为小顽童运行在模拟器/设备里。你需要在这些环境的shell里启动它，使用时，在每个命令前加上adb shell。 </p>
  <p>基本语法： </p>
  <pre>$ adb shell monkey [options] &lt;event-count&gt;</pre>
  <p >没有选项指定时，小顽童安静（没有其它复杂内容）模式启动，然后发送事件给所有安装在你目标扳上的包里。这里有一个有代表性的命令，它能启动你的程序并发送500个随见的事件给程序。 </p>
  <pre>$ adb shell monkey -p your.package.name -v 500</pre>
  <h3><a name="reference" id="reference"></a>命令选项参考</h3>
  <p >下面的表格里列出了所有包含在小顽童命令行的参数： </p>
  <table>
    <tr >
      <td><p>类别 </p></td>
      <td><p>选项 </p></td>
<td><p>描述 </p></td>
    </tr>
    <tr >
      <td rowspan="2"><p>通用 </p></td>
      <td><p>--help </p></td>
      <td><p>打印使用向导。 </p></td>
    </tr>
    <tr >
      <td><p>-v </p></td>
      <td><p>每个-v在命令里都会增加复杂级别，0级别（默认）在启动、测试结束、最终结果之外只提供很少的信息，1级别在运行时提供更详细的测试信息，例如每个发往你活动的事件。 2级别提供更加详细的设置信息，如一个活动是否选中被测试。 </p></td>
    </tr>
    <tr >
      <td rowspan="10"><p>事件 </p></td>
      <td><p>-s &lt;seed&gt; </p></td>
      <td><p>随机数字产生器的种子。如果你用同样的种子运行小顽童，它将会产生相同的事件。 </p></td>
    </tr>
    <tr >
      <td><p>--throttle
          &lt;milliseconds&gt; </p></td>
      <td><p>在事件中插入一个固定的延迟。一般使用这个命令去延缓小顽童程序。如果没有指定，小顽童产生的事件将没有延迟并尽可能快的发送。 </p></td>
    </tr>
    <tr >
      <td><p>--pct-touch &lt;percent&gt; </p></td>
      <td><p>调整触摸事件的比例。（触摸事件是一个在屏幕上单点按下的事件） </p></td>
    </tr>
    <tr >
      <td><p>--pct-motion &lt;percent&gt; </p></td>
      <td><p>调整手势事件的比例。（手势事件由一系列屏幕上的按下事件组成，一系列的伪随机移动和一个松开事件） </p></td>
    </tr>
    <tr >
      <td><p>--pct-trackball
          &lt;percent&gt; </p></td>
      <td><p>调整跟踪球事件（跟踪球由一个或多个随机移动事件组成，有时还会接一个单击事件） </p></td>
    </tr>
    <tr >
      <td><p>--pct-nav &lt;percent&gt; </p></td>
      <td><p>调整”基本”导航事件。（导航事件由上/下/左/右组成，这些事件由输入设备输入） </p></td>
    </tr>
    <tr >
      <td><p>--pct-majornav
          &lt;percent&gt; </p></td>
      <td><p>调整“主要”的导航事件的比例。（有些导航事件将会在你的UI里导致一些动作，例如在5向键里的中间，退出键，或者菜单键） </p></td>
    </tr>
    <tr >
      <td><p>--pct-syskeys &lt;percent&gt; </p></td>
      <td><p>调整“系统”事件的比例。（有些键通常是系统保留的，如 主界面, 退出，电话，结束通话，或者声音调节 ） </p></td>
    </tr>
    <tr >
      <td><p>--pct-appswitch
          &lt;percent&gt; </p></td>
      <td><p>调整活动被运行的比例。 在一些随机的间隔里，小顽童会调用一个startActivity（）的调用，以最大程序得覆盖你包里的所有的活动。 </p></td>
    </tr>
    <tr >
      <td><p>--pct-anyevent
          &lt;percent&gt; </p></td>
      <td><p>调整其他类型事件的比例。 这包含所有其他的事件，如用户按键，其他设备上不常用的的按键，等等。 </p></td>
    </tr>
    <tr >
      <td rowspan="2"><p>限制 </p></td>
      <td><p>-p
          &lt;allowed-package-name&gt; </p></td>
      <td><p>如果你指定一个或者多个包，小顽童程序仅仅允许系统访问这些包里的活动。如果你的应用程序需要进入其他包的活动（例如选择一个联系人），你也需要指定这个包。如果你不指定任何包，小顽童将允许系统运行所有包里活动。 </p>
        <p class="MsoNormal1" style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
  0cm;margin-left:0cm;margin-bottom:.0001pt;line-height:120%'>指定多个包，可以多次使用-p选项 —— 一个—每个p选项选一个包。 </p></td>
    </tr>
    <tr >
      <td><p>-c &lt;main-category&gt; </p></td>
      <td><p>如果你指定一个或多个类别（category），小顽童将仅仅允许系统访问这些指定类别里的一个活动。如果你不指定任何类别，小顽童将选择Intel.CATEGORY
          _LAUNCHER 或者 CATEGORY_MONKEY列出的活动。如果要选择多个类别，多次使用-c选项 —— 每个-c选一个类别。 </p></td>
    </tr>
    <tr >
      <td rowspan="8"><p>调试 </p></td>
      <td><p>--dbg-no-events </p></td>
      <td><p>当被指定时，小顽童将在测试活动里执行初始化运行程序，但还没有产生任何事件。 最好的是集成-v， 能使一个或多个包被限制，这样一个非0的控制能保证小顽童程序运行30秒或更长时间。这提供一个环境，你可以监视你的应用程序调用的包的所有变化。 </p></td>
    </tr>
    <tr >
      <td><p>--hprof </p></td>
      <td><p>如果设置这个选项，系统会在小顽童事件序列前后都立即产生程序分析报告。这将会产生巨大的（~5M）数据文件，所以请谨慎使用。 查看<a
  href="traceview.html" title="traceview">Traceview</a>可以得到更多的信息。 </p></td>
    </tr>
    <tr >
      <td><p>--ignore-crashes </p></td>
      <td><p>通常情况下，小顽童会因为程序崩溃或者遇到一些无法处理的异常而停止，但你指定了这个选项，小顽童会继续发事件给系统，直到事件计数器结束。 </p></td>
    </tr>
    <tr >
      <td><p>--ignore-timeouts </p></td>
      <td><p>通常情况下，小顽童会因为程序超时而停止，例如程序弹出“应用程序没有答复”的对话框。如果你指定了这个选项，小顽童会继续发事件给系统，直到事件计数器结束。 </p></td>
    </tr>
    <tr >
      <td><p>--ignore-security-exceptions </p></td>
      <td><p>通常情况下，小顽童会因为一些权限错误而停止，例如，它试图运行一个需要特殊权限的活动。 如果指定这个选项，小顽童会继续发送事件给系统，直到事件计数器结束。 </p></td>
    </tr>
    <tr >
      <td><p>--kill-process-after-error </p></td>
      <td><p>通常情况下，小顽童会因为错误停止，应用程序失败但会并停留在运行状态，当这个条件设置后，它会发消息给系统在错误发生的地方停止进程。 评注：在程序正常(成功)的完成，运行的程序不会停止，设备会收到结束事件而停留在最后的状态上。 </p></td>
    </tr>
    <tr >
      <td><p>--monitor-native-crashes </p></td>
      <td><p>监视并报告Android系统代码里的崩溃事件。如果设置了--kill-process-after-error, 系统将会停止。 </p></td>
    </tr>
    <tr >
      <td><p>--wait-dbg </p></td>
      <td><p>停止小顽童直到调试工具连接上程序。 </p></td>
    </tr>
  </table>
  <p> 
    <!-- TODO: add a section called "debugging" that covers ways to use it, 
need to clear data, use of the seed, etc. --> 
    
    <!-- TODO: add a section that lays down a contract for Monkey output so it can be
scripted safely. --> 
  </p>
  <!-- end gc-pagecontent --> 
  
  <!--start of htmlend--> 
<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->