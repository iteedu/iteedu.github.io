<!--hmt-->
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end --><!--end of htmlheader-->

<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->

<!--end of htmlmiddle-->



<h1 >CursorTreeAdapter抽象类</h1>
<h2 >一、结构</h2>
<pre class="code">public abstract class CusrorTreeAdapter 
         extends BaseExpandableListAdpater implements Filterable
 
java.lang.Object
android.widget.BaseExpandableListAdapter
         android.widget.CursorTreeAdapter</pre>
<p >直接子类 </p>
<pre class="code"> ResourceCursorTreeAdapter</pre>
<p > 间接子类</p>
<pre class="code"> SimpleCursorTreeAdapter
</pre>
<h2 >二、概述</h2>
<p > 通过该适配类可以用一连续的游标(Coursor)对象访问数据库，并将查询出来的数据展示到可伸缩的列表视图(ExpandableListView)部件上。顶层游标(Cursor)对象(在构造器中指定)显示全部组，后面的游标(Cursor)对象从getChildrenCursor(Cursor)获取并展示子元素组。其中游标携带的结果集中必须有个名为&quot;_id&quot;的列，否则这个类不起任何作用。</p>
<p ><strong>使用CursorTreeAdapter需要实现下面五个方法：</strong></p>
<p > 受保护方法</p>
<pre class="code">abstract void bindChildView(View view, Context context, Cursor cursor, boolean isLastChild)
abstract void bindGroupView(View view, Context context, Cursor cursor, boolean isExpanded)
abstract Cursor getChildrenCursor(Cursor groupCursor)
abstract View newChildView(Context context, Cursor cursor, boolean isLastChild, ViewGroup parent)
abstract View newGroupView(Context context, Cursor cursor, boolean isExpanded, ViewGroup parent)</pre>
<p > 注：关于bindChildView，bindGroupView，newChildView，newGroupView其实的机制和CursorAdapter差不多。<br />
</p>
<h2 >三、构造函数</h2>
<pre class="code"> public CursorTreeAdapter (Cursor cursor, Context context) </pre>
<p> 构造函数。每当数据库的数据发生改变时，适配器将调用requery()重新查询以显示最新的数据。</p>
<p> 参数</p>
<ol>
  <li> cursor       为组(groups)提供数据的游标(Coursor)</li>
  <li> context    应用程序上下文。</li>
</ol>
<pre class="code"> public CursorTreeAdapter (Cursor cursor, Context context, boolean autoRequery)</pre>
<p> 构造函数。</p>
<p> 参数</p>
<ol>
  <li> cursor       为组(groups)提供数据的游标(Coursor)</li>
  <li> context    应用程序上下文。</li>
  <li> autoRequery 设置为true时，每当数据库的数据发生改变时，适配器将调用requery()重新查询以显示最新的数据。</li>
</ol>
<h2> 四、公共方法</h2>
<pre class="code"> public void changeCursor (Cursor cursor)</pre>
<p> 更改相关的游标为新传入的游标。如果游标已经存在则先关闭这个已存在的游标。</p>
<p> 参数</p>
<ol>
  <li> cursor               新游标(Cursor)对象。</li>
</ol>
<pre class="code"> public CharSequence convertToString (Cursor cursor)</pre>
<p> 将cursor转换成CharSequence。子类应该重写这个方法并转换它们的结果。这个方法的默认实现是：当cursor为空时返回一个空串，否则直接返回调用cursor的toString()方法。</p>
<p> 参数</p>
<ol>
  <li> cursor               将cursor转换成CharSequence对象。 </li>
</ol>
<p> 返回值</p>
<p> 返回CharSequence类型的值（译者注：这个值是通过转换参数cursor类型而获得的。）</p>
<pre class="code"> public Cursor getChild (int groupPosition, int childPosition)</pre>
<p> 获取指定组中的指定子元素的相关数据。</p>
<p> 参数</p>
<ol>
  <li> groupPosition 组位置（该组内部含有子元素）</li>
  <li> childPosition    子元素位置（相对于其它子元素）</li>
</ol>
<p> 返回值</p>
<p> 返回指定子元素数据。</p>
<pre class="code"> public long getChildId (int groupPosition, int childPosition)</pre>
<p> 获取指定组中的指定子元素ID，这个ID在组里一定是唯一的。联合ID（参见getCombinedChildId(long, long)）在所有条目（所有组和所有元素）中也是唯一的。</p>
<p> 参数</p>
<ol>
  <li> groupPosition 组位置（该组内部含有子元素）</li>
  <li> childPosition    子元素位置（相对于其它子元素）</li>
</ol>
<p> 返回值</p>
<p> 子元素关联ID。</p>
<pre class="code"> public View getChildView (int groupPosition, int childPosition, 
		boolean isLastChild,  View convertView, ViewGroup parent) </pre>
<p> 获取一个视图对象，显示指定组中的指定子元素数据。</p>
<p> 参数</p>
<ol>
  <li> groupPosition 组位置（该组内部含有子元素）</li>
  <li> childPosition   子元素位置（决定返回哪个视图）</li>
  <li> isLastChild    子元素是否处于组中的最后一个</li>
  <li> convertView 重用已有的视图(View)对象。注意：在使用前你应该检查一下这个视图对象是否非空并且这个对象的类型是否合适。由此引伸出，如果该对象不能被转换并显示正确的数据，这个方法就会调用getChildView(int, int, boolean, View, ViewGroup)来创建一个视图(View)对象。</li>
  <li> parent            返回的视图(View)对象始终依附于的视图组。</li>
</ol>
<p> 返回值</p>
<p> 指定位置上的子元素返回的视图对象</p>
<pre class="code"> public int getChildrenCount (int groupPosition)</pre>
<p> 获取指定组中的子元素个数</p>
<p> 参数</p>
<ol>
  <li> groupPosition 组位置（决定返回哪个组的子元素个数）</li>
</ol>
<p> 返回值</p>
<p> 返回组中的子元素个数</p>
<pre class="code"> public Cursor getCursor ()</pre>
<p> 返回当前适配器绑定的Cursor对象。</p>
<p> 返回值</p>
<p> Cursor对象。</p>
<pre class="code"> public Filter getFilter ()</pre>
<p> 返回一个可以通过一种过滤模式来约束数据的过滤器。</p>
<p> 这个方法通常在Adapter类中实现。</p>
<p> 返回值</p>
<p> 返回一个用来限制数据的过滤器(Filter)对象。</p>
<pre class="code"> public FilterQueryProvider getFilterQueryProvider ()</pre>
<p> 返回一个提供过滤的查询过滤器。若过滤器为null，则不再过滤。</p>
<p> 返回值</p>
<p> 返回当前过滤器对象，如果不存在返回null。</p>
<p> 参考</p>
<p> getFilterQueryProvider()</p>
<pre class="code"> public Cursor getGroup (int groupPosition) </pre>
<p> 获取指定组中的数据</p>
<p> 参数</p>
<ol>
  <li> groupPosition 组位置</li>
</ol>
<p> 返回值</p>
<p> 返回组中的数据，也就是该组中的子元素数据。</p>
<pre class="code"> public int getGroupCount () </pre>
<p> 获取组的个数</p>
<p> 返回值</p>
<p> 组的个数</p>
<pre class="code"> public long getGroupId (int groupPosition) </pre>
<p> 获取指定组的ID，这个组ID必须是唯一的。联合ID(参见getCombinedGroupId(long))在所有条目(所有组和所有元素)中也是唯一的。</p>
<p> 参数</p>
<ol>
  <li> groupPosition  组位置</li>
</ol>
<p> 返回值</p>
<p> 返回组ID</p>
<pre class="code"> public View getGroupView (int groupPosition, boolean isExpanded,
		 View convertView, ViewGroup parent) </pre>
<p> 获取显示指定组的视图对象。这个方法仅返回关于组的视图对象，要想获取子元素的视图对象，就需要调用getChildView(int, int, boolean, View, ViewGroup)。</p>
<p> 参数</p>
<ol>
  <li> groupPosition 组位置（决定返回哪个视图）</li>
  <li> isExpanded   该组是展开状态还是伸缩状态</li>
  <li> convertView  重用已有的视图对象。注意：在使用前你应该检查一下这个视图对象是否非空并且这个对象的类型是否合适。由此引伸出，如果该对象不能被转换并显示正确的数据，这个方法就会调用getGroupView(int, boolean, View, ViewGroup)来创建一个视图(View)对象。</li>
  <li> parent            返回的视图对象始终依附于的视图组。</li>
</ol>
<p> 返回值</p>
<p> 返回指定组的视图对象</p>
<pre class="code"> public boolean hasStableIds ()</pre>
<p> 组和子元素是否持有稳定的ID,也就是底层数据的改变不会影响到它们。</p>
<p> 返回值</p>
<p> 返回一个Boolean类型的值，如果为TRUE，意味着相同的ID永远引用相同的对象。</p>
<pre class="code"> public boolean isChildSelectable (int groupPosition, int childPosition)</pre>
<p> 是否选中指定位置上的子元素。</p>
<p> 参数</p>
<ol>
  <li> groupPosition 组位置（该组内部含有子元素）</li>
  <li> childPosition  子元素位置</li>
</ol>
<p> 返回值</p>
<p> 是否选中子元素</p>
<pre class="code"> public void notifyDataSetChanged (boolean releaseCursors)</pre>
<p> 通知数据集已改变，该方法还为任何带有缓存功能的游标提供不用释放资源的可选功能。</p>
<p> 参数</p>
<ol>
  <li> releaseCursors 是否释放任何带有缓冲功能的游标资源</li>
</ol>
<pre class="code"> public void notifyDataSetChanged ()</pre>
<p> 该方法内部实现了在每个观察者上面调用onChanged事件。每当发现数据集有改变的情况，或者读取到数据的新状态时，就会调用此方法。</p>
<pre class="code"> public void notifyDataSetInvalidated ()</pre>
<p> 该方法内部实现了在每个观察者上面调用onInvalidated事件。每当发现数据集监控有改变的情况，比如该数据集不再有效，就会调用此方法。</p>
<pre class="code"> public void onGroupCollapsed (int groupPosition)</pre>
<p> 当指定组收缩状态的时候调用此方法。</p>
<p> 参数</p>
<ol>
  <li> groupPosition 指定组收缩状态</li>
</ol>
<pre class="code"> public Cursor runQueryOnBackgroundThread (CharSequence constraint)</pre>
<p> 执行含指定约束的查询。此查询依赖于适配器的过滤器。查询是由FilterQueryProvider提供。如果没有指定FilterQueryProvider，当前cursor不过滤只返回。该方法会通过changeCursor(Cursor)方法返回一个Cursor对象，并且关闭掉先前的Cursor对象。这个方法始终在后台线程执行，而不是在应用程序的主线程（或是UI线程）中运行。规定：当参数constraint为null或为空时，该方法返回原始结果。</p>
<p> 参数</p>
<ol>
  <li> constraint 当某个查询需要过滤功能，使用参数constraint作为约束条件。</li>
</ol>
<p> 返回值</p>
<p> 返回含有新的查询结果的Cursor。</p>
<p> 参考</p>
<p> getFilter()</p>
<p> getFilterQueryProvider()</p>
<p> setFilterQueryProvider(android.widget.FilterQueryProvider)</p>
<pre class="code"> public void setChildrenCursor (int groupPosition, Cursor childrenCursor) </pre>
<p> 为指定组子元素设置游标(Cursor)，并关闭已存在的游标。这个方法是非常有用的，当进行异步查询操作的时候用来避免UI发生阻塞的情况。</p>
<p> 参数</p>
<ol>
  <li> groupPosition  组位置(组中的哪个子元素要设置游标对象) </li>
  <li> childrenCursor 组子元素的游标(Cursor)</li>
</ol>
<pre class="code"> public void setFilterQueryProvider (FilterQueryProvider filterQueryProvider)</pre>
<p> 设置一个过滤器，用来过滤当前的Cursor对象。当这个适配器需要进行过滤操作时， runQuery(CharSequence)方法被调用。</p>
<p> 参数</p>
<ol>
  <li> filterQueryProvider  过滤生成器对象，设置为null时，就相当于移除了该生       成器 。</li>
</ol>
<p> 参考</p>
<p> getFilterQueryProvider()</p>
<p> runQueryOnBackgroundThread(CharSequence)</p>
<pre class="code"> public void setGroupCursor (Cursor cursor)</pre>
<p> 设置组游标对象。</p>
<p> 参数</p>
<ol>
  <li> cursor 设置组游标对象，并关闭已存在的游标对象。</li>
</ol>
<p> </p>


<!--start of htmlend-->
<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->