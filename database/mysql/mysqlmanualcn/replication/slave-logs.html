<!--hmt-->
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end --><!--end of htmlheader-->

<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->

<!--end of htmlmiddle-->



<h1> 6.3.4.&nbsp;复制传递和状态文件</h1>

          
        
      
      <p>默认情况，中继日志使用<i>host_name-relay-bin.nnnnnn</i>形式的文件名，其中<i>host_name</i>是从服务器主机名，<i>nnnnnn</i>是序列号。用连续序列号来创建连续中继日志文件，从000001开始。从服务器跟踪索引文件中目前正使用的中继日志。
        默认中继日志索引文件名为<i>host_name-relay-bin.index</i>。默认情况，在从服务器的数据目录中创建这些文件。可以用--relay-log和--relay-log-index服务器选项覆盖
        默认文件名。参见<a href="replication-options.html" title="6.8. Replication Startup Options">6.8节，“复制启动选项”</a>。</p>
      <p>中继日志与二进制日志的格式相同，并且可以用mysqlbinlog读取。SQL线程执行完中继日志中的所有事件并且不再需要之后，立即自动删除它。没有直接的删除中继日志的机制，因为SQL线程可以负责完成。然而，FLUSH 
        LOGS可以循环中继日志，当SQL线程删除日志时会有影响。</p>
      <p>在下面的条件下创建新的中继日志：</p>
      <p> ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        每次I/O线程启动时创建一个新的中继日志。</p>
      <p> ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        当日志被刷新时；例如，用FLUSH 
        LOGS或mysqladmin 
        flush-logs。</p>
      <p> ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        当当前的中继日志文件变得太大时。“太大”含义的确定方法：</p>
      <p> o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
        
        max_relay_log_size，如果max_relay_log_size 
        &gt; 0</p>
      <p> o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
        
        max_binlog_size，如果max_relay_log_size 
        = 0</p>
      <p>从属复制服务器在数据目录中另外创建两个小文件。这些<em>状态文件</em>默认名为主master.info和relay-log.info。它们包含SHOW 
        SLAVE STATUS语句的输出所显示的信息(关于该语句的描述参见<a href="replication-howto.html" title="13.6.2. SQL Statements for Controlling Slave Servers">13.6.2节，“用于控制从服务器的SQL语句”</a>)。状态文件保存在硬盘上，从服务器关闭时不会丢失。下次从服务器启动时，读取这些文件以确定它已经从主服务器读取了多少二进制日志，以及处理自己的中继日志的程度。</p>
      <p>由I/O线程更新master.info文件。文件中的行和SHOW 
        SLAVE STATUS显示的列的对应关系为：</p>
      <table border="1" cellpadding="0" id="table1">
        <tr>
          <td><p>行</td>
          <td><p>描述</td>
        </tr>
        <tr>
          <td><p>1</td>
          <td><p>文件中的行号</td>
        </tr>
        <tr>
          <td><p>2</td>
          <td><p> Master_Log_File</td>
        </tr>
        <tr>
          <td><p>3</td>
          <td><p> Read_Master_Log_Pos</td>
        </tr>
        <tr>
          <td><p>4</td>
          <td><p> Master_Host</td>
        </tr>
        <tr>
          <td><p>5</td>
          <td><p> Master_User</td>
        </tr>
        <tr>
          <td><p>6</td>
          <td><p>密码(不由SHOW 
              SLAVE STATUS显示)</td>
        </tr>
        <tr>
          <td><p>7</td>
          <td><p> Master_Port</td>
        </tr>
        <tr>
          <td><p>8</td>
          <td><p> Connect_Retry</td>
        </tr>
        <tr>
          <td><p>9</td>
          <td><p> Master_SSL_Allowed</td>
        </tr>
        <tr>
          <td><p>10</td>
          <td><p> Master_SSL_CA_File</td>
        </tr>
        <tr>
          <td><p>11</td>
          <td><p> Master_SSL_CA_Path</td>
        </tr>
        <tr>
          <td><p>12</td>
          <td><p> Master_SSL_Cert</td>
        </tr>
        <tr>
          <td><p>13</td>
          <td><p> Master_SSL_Cipher</td>
        </tr>
        <tr>
          <td><p>14</td>
          <td><p> Master_SSL_Key</td>
        </tr>
      </table>
      <p>由SQL线程更新relay-log.info文件。文件中的行和SHOW 
        SLAVE STATUS显示的列的对应关系为：</p>
      <table border="1" cellpadding="0" id="table2">
        <tr>
          <td><p>行</td>
          <td><p>描述</td>
        </tr>
        <tr>
          <td><p>1</td>
          <td><p> Relay_Log_File</td>
        </tr>
        <tr>
          <td><p>2</td>
          <td><p> Relay_Log_Pos</td>
        </tr>
        <tr>
          <td><p>3</td>
          <td><p> Relay_Master_Log_File</td>
        </tr>
        <tr>
          <td><p>4</td>
          <td><p> Exec_Master_Log_Pos</td>
        </tr>
      </table>
      <p> 当备份从服务器的数据时，你还应备份这两个小文件以及中继日志文件。它们用来在恢复从服务器的数据后继续进行复制。如果丢失了中继日志但仍然有relay-log.info文件，你可以通过检查该文件来确定SQL线程已经执行的主服务器中二进制日志的程度。然后可以用Master_Log_File和Master_LOG_POS选项执行CHANGE 
        MASTER TO来告诉从服务器重新从该点读取二进制日志。当然，要求二进制日志仍然在主服务器上。</p>
      <p>如果从服务器正复制LOAD 
        DATA INFILE语句，你应也备份该目录内从服务器用于该目的的任何SQL_LOAD-*文件。从服务器需要这些文件继续复制任何中断的LOAD 
        DATA INFILE操作。用--slave-load-tmpdir选项来指定目录的位置。如果未指定，
        默认值为tmpdir变量的值。
    
  
  
    
      
        
          


<!--start of htmlend-->
<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->