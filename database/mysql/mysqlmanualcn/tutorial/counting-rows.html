<!--hmt-->
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end --><!--end of htmlheader-->

<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->

<!--end of htmlmiddle-->



<h1> 3.3.4.8.&nbsp;计数行</h1>

            
          
        
        
      
        
          
             数据库经常用于回答这个问题，“某个类型的数据在表中出现的频度?”例如，你可能想要知道你有多少宠物，或每位主人有多少宠物，或你可能想要对你的动物进行各种类型的普查。
              <p> 计算你拥有动物的总数目与“在pet表中有多少行?”是同样的问题，因为每个宠物有一个记录。COUNT(*)函数计算行数，所以计算动物数目的查询应为：</p>
              <pre>mysql&gt; SELECT COUNT(*) FROM pet;
+----------+
| COUNT(*) |
+----------+
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 9 |
+----------+</pre>
              <p>在前面，你检索了拥有宠物的人的名字。如果你想要知道每个主人有多少宠物，你可以使用COUNT( 
                )函数：</p>
              <pre>mysql&gt; SELECT owner, COUNT(*) FROM pet GROUP BY owner;
+--------+----------+
| owner&nbsp; | COUNT(*) |
+--------+----------+
| Benny&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 |
| Diane&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 |
| Gwen&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3 |
| Harold |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 |
+--------+----------+</pre>
              <p>注意，使用GROUP 
                BY对每个owner的所有记录分组，没有它，你会得到错误消息：</p>
              <pre>mysql&gt; SELECT owner, COUNT(*) FROM pet;
ERROR 1140 (42000): Mixing of GROUP columns (MIN(),MAX(),COUNT(),...) 
with no GROUP columns is illegal if there is no GROUP BY clause</pre>
              <p>COUNT( )和GROUP 
                BY以各种方式分类你的数据。下列例子显示出进行动物普查操作的不同方式。</p>
              <p>每种动物的数量：</p>
              <pre>mysql&gt; SELECT species, COUNT(*) FROM pet GROUP BY species;
+---------+----------+
| species | COUNT(*) |
+---------+----------+
| bird&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 |
| cat&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 |
| dog&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3 |
| hamster |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |
| snake&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |
+---------+----------+</pre>
              <p>每种性别的动物数量：</p>
              <pre>mysql&gt; SELECT sex, COUNT(*) FROM pet GROUP BY sex;
+------+----------+
| sex&nbsp; | COUNT(*) |
+------+----------+
| NULL |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |
| f&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4 |
| m&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4 |
+------+----------+</pre>
              <p>（在这个输出中，NULL表示“未知性别”。）</p>
              <p>按种类和性别组合的动物数量： </p>
              <pre>mysql&gt; SELECT species, sex, COUNT(*) FROM pet GROUP BY species, sex;
+---------+------+----------+
| species | sex&nbsp; | COUNT(*) |
+---------+------+----------+
| bird&nbsp;&nbsp;&nbsp; | NULL |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |
| bird&nbsp;&nbsp;&nbsp; | f&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |
| cat&nbsp;&nbsp;&nbsp;&nbsp; | f&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |
| cat&nbsp;&nbsp;&nbsp;&nbsp; | m&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |
| dog&nbsp;&nbsp;&nbsp;&nbsp; | f&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |
| dog&nbsp;&nbsp;&nbsp;&nbsp; | m&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 |
| hamster | f&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |
| snake&nbsp;&nbsp; | m&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;1 |
+---------+------+----------+</pre>
              <p>若使用COUNT( )，你不必检索整个表。例如,
                前面的查询，当只对狗和猫进行时，应为：</p>
              <pre>mysql&gt; SELECT species, sex, COUNT(*) FROM pet
&nbsp;&nbsp;&nbsp; -&gt; WHERE species = &#39;dog&#39; OR species = &#39;cat&#39;
&nbsp;&nbsp;&nbsp; -&gt; GROUP BY species, sex;
+---------+------+----------+
| species | sex&nbsp; | COUNT(*) |
+---------+------+----------+
| cat&nbsp;&nbsp;&nbsp;&nbsp; | f&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |
| cat&nbsp;&nbsp;&nbsp;&nbsp; | m&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |
| dog&nbsp;&nbsp;&nbsp;&nbsp; | f&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |
| dog&nbsp;&nbsp;&nbsp;&nbsp; | m&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 |
+---------+------+----------+</pre>
              <p>或，如果你仅需要知道已知性别的按性别的动物数目：</p>
              <pre>mysql&gt; SELECT species, sex, COUNT(*) FROM pet
&nbsp;&nbsp;&nbsp; -&gt; WHERE sex IS NOT NULL
&nbsp;&nbsp;&nbsp; -&gt; GROUP BY species, sex;
+---------+------+----------+
| species | sex&nbsp; | COUNT(*) |
+---------+------+----------+
| bird&nbsp;&nbsp;&nbsp; | f&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |
| cat&nbsp;&nbsp;&nbsp;&nbsp; | f&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |
| cat&nbsp;&nbsp;&nbsp;&nbsp; | m&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |
| dog&nbsp;&nbsp;&nbsp; &nbsp;| f&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |
| dog&nbsp;&nbsp;&nbsp;&nbsp; | m&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 |
| hamster | f&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |
| snake&nbsp;&nbsp; | m&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |
+---------+------+----------+</pre>
              <h4 ><a name="multiple-tables"></a> 3.3.4.9.&nbsp;使用1个以上的表<br>
                &nbsp;</h4>
            
          
        
        
    
  
  
    
      
         pet表追踪你有哪个宠物。如果你想要记录其它相关信息，例如在他们一生中看兽医或何时后代出生，你需要另外的表。这张表应该像什么呢？需要：
          <p> ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            它需要包含宠物名字以便你知道每个事件属于哪个动物。</p>
          <p> ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            需要一个日期以便你知道事件是什么时候发生的。</p>
          <p> ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            需要一个描述事件的字段。</p>
          <p> ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            如果你想要对事件进行分类，则需要一个事件类型字段。</p>
          <p>综合上述因素，event表的CREATE 
            TABLE语句应为：</p>
          <pre>mysql&gt; CREATE TABLE event (name VARCHAR(20), date DATE,
&nbsp;&nbsp;&nbsp; -&gt; type VARCHAR(15), remark VARCHAR(255));</pre>
          <p>对于pet表，最容易的方法是创建包含信息的用定位符分隔的文本文件来装载初始记录：</p>
          <table border="1" cellpadding="0" id="table4">
            <tr>
              <td><p> name</td>
              <td><p> date</td>
              <td><p> type</td>
              <td><p> remark</td>
            </tr>
            <tr>
              <td><p>Fluffy</td>
              <td><p>1995-05-15</td>
              <td><p>litter</td>
              <td><p>4 kittens, 3 female, 1 
                  male</td>
            </tr>
            <tr>
              <td><p>Buffy</td>
              <td><p>1993-06-23</td>
              <td><p>litter</td>
              <td><p>5 puppies, 2 female, 3 
                  male</td>
            </tr>
            <tr>
              <td><p>Buffy</td>
              <td><p>1994-06-19</td>
              <td><p>litter</td>
              <td><p>3 puppies, 3 female</td>
            </tr>
            <tr>
              <td><p>Chirpy</td>
              <td><p>1999-03-21</td>
              <td><p>vet</td>
              <td><p>needed beak straightened</td>
            </tr>
            <tr>
              <td><p>Slim</td>
              <td><p>1997-08-03</td>
              <td><p>vet</td>
              <td><p>broken rib</td>
            </tr>
            <tr>
              <td><p>Bowser</td>
              <td><p>1991-10-12</td>
              <td><p>kennel</td>
              <td><p>&nbsp;</td>
            </tr>
            <tr>
              <td><p>Fang</td>
              <td><p>1991-10-12</td>
              <td><p>kennel</td>
              <td><p>&nbsp;</td>
            </tr>
            <tr>
              <td><p>Fang</td>
              <td><p>1998-08-28</td>
              <td><p>birthday</td>
              <td><p>Gave him a new chew toy</td>
            </tr>
            <tr>
              <td><p>Claws</td>
              <td><p>1998-03-17</td>
              <td><p>birthday</td>
              <td><p>Gave him a new flea 
                  collar</td>
            </tr>
            <tr>
              <td><p>Whistler</td>
              <td><p>1998-12-09</td>
              <td><p>birthday</td>
              <td><p>First birthday</td>
            </tr>
          </table>
          <p>采用如下方式装载记录：</p>
          <pre>mysql&gt; LOAD DATA LOCAL INFILE &#39;event.txt&#39; INTO TABLE event;</pre>
          <p>根据你从已经运行在pet表上的查询中学到的，你应该能执行对event表中记录的检索；原理是一样的。但是什么时候event表本身不能回答你可能问的问题呢？</p>
          <p>当他们有了一窝小动物时，假定你想要找出每只宠物的年龄。我们前面看到了如何通过两个日期计算年龄。event表中有母亲的生产日期，但是为了计算母亲的年龄，你需要她的出生日期，存储在pet表中。说明查询需要两个表：</p>
          <pre>mysql&gt; SELECT pet.name,
&nbsp;&nbsp;&nbsp; -&gt; (YEAR(date)-YEAR(birth)) - (RIGHT(date,5)&lt;RIGHT(birth,5)) AS age,
&nbsp;&nbsp;&nbsp; -&gt; remark
&nbsp;&nbsp;&nbsp; -&gt; FROM pet, event
&nbsp;&nbsp;&nbsp; -&gt; WHERE pet.name = event.name AND event.type = &#39;litter&#39;;
+--------+------+-----------------------------+
| name&nbsp;&nbsp; | age&nbsp; | remark&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |
+--------+------+-----------------------------+
| Fluffy |&nbsp;&nbsp;&nbsp; 2 | 4 kittens, 3 female, 1 male |
| Buffy&nbsp; |&nbsp;&nbsp;&nbsp; 4 | 5 puppies, 2 female, 3 male |
| Buffy&nbsp; |&nbsp;&nbsp;&nbsp; 5 | 3 puppies, 3 female&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |
+--------+------+-----------------------------+</pre>
          <p>关于该查询要注意的几件事情：</p>
          <ul type="disc">
            <li> FROM子句列出两个表，因为查询需要从两个表提取信息。</li>
            <li>当从多个表组合(联结)信息时，你需要指定一个表中的记录怎样能匹配其它表的记录。这很简单，因为它们都有一个name列。查询使用WHERE子句基于name值来匹配2个表中的记录。</li>
            <li>因为name列出现在两个表中，当引用列时，你一定要指定哪个表。把表名附在列名前即可以实现。</li>
          </ul>
          <p> 你不必有2个不同的表来进行联结。如果你想要将一个表的记录与同一个表的其它记录进行比较，可以将一个表联结到自身。例如，为了在你的宠物之中繁殖配偶，你可以用pet联结自身来进行相似种类的雄雌配对：</p>
          <p>&nbsp; </p>
          <pre>mysql&gt; SELECT p1.name, p1.sex, p2.name, p2.sex, p1.species
&nbsp;&nbsp;&nbsp; -&gt; FROM pet AS p1, pet AS p2
&nbsp;&nbsp;&nbsp; -&gt; WHERE p1.species = p2.species AND p1.sex = &#39;f&#39; AND p2.sex = &#39;m&#39;;
+--------+------+--------+------+---------+
| name&nbsp;&nbsp; | sex&nbsp; | name&nbsp;&nbsp; | sex&nbsp; | species |
+--------+------+--------+------+---------+
| Fluffy | f&nbsp;&nbsp;&nbsp; | Claws&nbsp; | m&nbsp;&nbsp;&nbsp; | cat&nbsp;&nbsp;&nbsp;&nbsp; |
| Buffy&nbsp; | f&nbsp;&nbsp;&nbsp; | Fang&nbsp;&nbsp; | m&nbsp;&nbsp;&nbsp; | dog&nbsp;&nbsp;&nbsp;&nbsp; |
| Buffy&nbsp; | f&nbsp;&nbsp;&nbsp; | Bowser | m&nbsp;&nbsp;&nbsp; | dog&nbsp;&nbsp;&nbsp;&nbsp; |
+--------+------+--------+------+---------+</pre>
          <p>在这个查询中，我们为表名指定别名以便能引用列并且使得每一个列引用与哪个表实例相关联更直观。</p>
          


<!--start of htmlend-->
<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->