<!--hmt-->
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end --><!--end of htmlheader-->

<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->

<!--end of htmlmiddle-->



<h1> 2.12.3.&nbsp;Solaris注意事项</h1>

          
        
      
      
        <dl>
          <dt> <a href="solaris-2-7.html"> 2.12.3.1. Solaris 2.7/2.8注意事项</a></dt>
          <dt> <a href="solaris-x86.html"> 2.12.3.2. Solaris x86注意事项</a></dt>
        </dl>
      
      
      <p>在Solaris中，甚至在解压缩MySQL分发版时，你也会遇到问题，因为Solaris
        tar不能处理长文件名。这说明解压缩MySQL分发版时会遇见错误。</p>
      <p>如果出现这种问题，必须使用GNU 
        tar(gtar)来解压缩分发版。可以从http://dev.mysql.com/downloads/os-solaris.html找到预编译的Solaris版本。</p>
      <p>Sun原生线程只在Solaris 2.5和更高版本中工作。对于版本2.4和更早版本，MySQL自动使用MIT-pthreads。请参见<a href="mit-pthreads.html" title="2.8.5. MIT-pthreads Notes">2.8.5节，“MIT-pthreads注意事项”</a>。</p>
      <p>如果你运行configure时遇到下面的错误，说明编译器安装得有问题：</p>
      <pre>checking for restartable system calls... configure: error can not
run test programs while cross compiling</pre>
      <p>在这种情况下，应当将编译器升级到较新的版本。还可以在config.cache文件中插入下面的行来解决该问题：</p>
      <pre>ac_cv_sys_restartable_syscalls=${ac_cv_sys_restartable_syscalls=&#39;no&#39;}</pre>
      <p>如果在SPARC上使用Solaris，建议使用编译器gcc 
        2.95.2或3.2。可以从http://gcc.gnu.org/下载。请注意egcs 
        1.1.1和gcc 
        2.8.1不能在SPARC上可靠地工作。</p>
      <p>当使用gcc 
        2.95.2时建议的configure行：</p>
      <pre>CC=gcc CFLAGS=&quot;-O3&quot; \
CXX=gcc CXXFLAGS=&quot;-O3 -felide-constructors -fno-exceptions -fno-rtti&quot; \
./configure --prefix=/usr/local/mysql --with-low-memory \
&nbsp;&nbsp;&nbsp; --enable-assembler</pre>
      <p>如果你使用UltraSPARC系统，在CFLAGS和CXXFLAGS环境变量中加上-mcpu=v8 
        -Wa,-xarch=v8plusa，性能可以提高4%。</p>
      <p>如果你有Sun Forte 5.0(或更新版)编译器，可以运行：</p>
      <pre>CC=cc CFLAGS=&quot;-Xa -fast -native -xstrconst -mt&quot; \
CXX=CC CXXFLAGS=&quot;-noex -mt&quot; \
./configure --prefix=/usr/local/mysql --enable-assembler</pre>
      <p>要想用Sun Forte 编译器创建64-位二进制，使用下面的配置选项：</p>
      <pre>CC=cc CFLAGS=&quot;-Xa -fast -native -xstrconst -mt -xarch=v9&quot; \
CXX=CC CXXFLAGS=&quot;-noex -mt -xarch=v9&quot; ASFLAGS=&quot;-xarch=v9&quot; \
./configure --prefix=/usr/local/mysql --enable-assembler</pre>
      <p>要想使用gcc创建64-位Solaris二进制，在CFLAGS和CXXFLAGS中增加-m64，并从configure行删掉--enable-assembler。</p>
      <p>在MySQL基准测试中，在UltraSPARC上使用32位模式的Forte 
        5.0，同使用带-mcpu标记的gcc 
        3.2比较，速度提高了4%。</p>
      <p>如果创建了64位的mysqld二进制，速度要比32-位二进制慢4%，但是可以处理更多的线程和内存。</p>
      <p>当为x86_64使用Solaris 10时,你应当安装用forcedirectio选项保存InnoDB文件的文件系统。(默认情况不用该选项来安装)。如果不这样做，当在该平台上使用InnoDB
        储存引擎时将会造成严重的性能下降。</p>
      <p>如果fdatasync或sched_yield出现问题，你可以在configure行加LIBS=-lrt修复该问题。</p>
      <p>对于早于WorkShop 5.3的编译器,你可能需要编辑configure脚本。应将该行：</p>
      <pre>#if !defined(__STDC__) || __STDC__ != 1</pre>
      <p>更该为：</p>
      <pre>#if !defined(__STDC__)</pre>
      <p>如果你用-Xc
        选项打开__STDC__，Sun
        编译器不能用Solaris 
        pthreads.h
        头文件编译。这是一个Sun 缺陷(中断的编译器或include文件)。</p>
      <p>如果运行mysqld时出现下面的错误消息，原因是你企图不启用-mt 
        multi-thread选项而用Sun编译器编译MySQL：</p>
      <p>libc internal error: _rmutex_unlock: rmutex not 
        held</p>
      <p>将-mt加到CFLAGS和CXXFLAGS上并重新编译。</p>
      <p>如果你正使用gcc的SFW版本(在Solaris 
        8安装包内)，运行configure之前你必须将/opt/sfw/lib加到环境变量LD_LIBRARY_PATH上。</p>
      <p>如果你正使用从sunfreeware.com下载的gcc，会遇到许多问题。要想避免，应当在运行机器上重新编译gcc和GNU
        
        binutils。</p>
      <p>如果你用gcc编译MySQL时遇到下面的错误，说明gcc配置不适合Solaris的版本：</p>
      <pre>shell&gt; gcc -O3 -g -O2 -DDBUG_OFF&nbsp; -o thr_alarm ...
./thr_alarm.c: In function `signal_hand&#39;:
./thr_alarm.c:556: too many arguments to function `sigwait&#39;</pre>
      <p>在这种情况下正确的做法是得到最新版本的gcc，并用你当前的gcc编译器编译。至少对于Solaris 
        2.5,几乎所有二进制版本的gcc有旧的不再使用的include文件,中断了所有使用线程的程序，也可能会中断其它程序。</p>
      <p>Solaris不提供静态版本的系统库(libpthreads和libdl)，因此你不能用--static编译MySQL。如果你试图这样做，会遇到下面的错误：</p>
      <pre>ld: fatal: library -ldl: not found
undefined reference to `dlopen&#39;
cannot find -lrt</pre>
      <p>如果你连接你自己的MySQL客户端程序，运行时会出现下面的错误：</p>
      <pre>ld.so.1: fatal: libmysqlclient.so.#:
open failed: No such file or directory</pre>
      <p>可以通过下面的方法避免该问题：</p>
      <p> ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        用-Wl,r/full/path/to/libmysqlclient.so标记而不要用-Lpath)连接客户端。</p>
      <p> ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        将libmysqclient.so复制到/usr/lib。</p>
      <p> ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        运行客户端程序前，将libmysqlclient.so目录的路径名加到LD_RUN_PATH环境变量上。</p>
      <p>如果你未安装zlib用 
        -lz连接时configure出现问题，你有两个选则：</p>
      <p> ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        如果你想要使用压缩通信协议，你需要从ftp.gnu.org获得并安装zlib。</p>
      <p> ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        构建MySQL时用--with-named-z-libs=no选项运行configure。</p>
      <p>如果你正使用gcc，向MySQL调用用户定义函数(UDF)时出现问题，尝试向UDF连接行添加-lgcc到。</p>
      <p>如果想让MySQL自动启动，可以将support-files/mysql.server复制到/etc/init.d，并创建/etc/rc3.d/S99mysql.server符号连接。</p>
      <p>如果有太多进程试图快速连接mysqld，你应当能再MySQL日志只看见错误：</p>
      <pre>Error in accept: Protocol error</pre>
      <p>可以尝试用--back_log=50选项启动服务器来解决该问题。(在MySQL 
        4以前的版本中使用-O 
        back_log=50）。 </p>
      <p>Solaris不支持setuid()
        应用程序所需的内核文件，因此如果你使用--user选项你不能从mysqld遇到内核文件。</p>
      
        
          
            
              


<!--start of htmlend-->
<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->