<!--hmt-->
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end --><!--end of htmlheader-->

<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->

<!--end of htmlmiddle-->



<h1> 2.8.2.&nbsp;典型配置选项</h1>

          
        
      
      
      <p>configure脚本给你一个很大的控制权来控制如何配置MySQL源码分发版。一般使用configure命令行的选项来进行。你也可以用某些环境变量作用于configure。请参见<a href="../environment-variables.html" title="Appendix F. Environment Variables">附录F：<i>环境变量</i></a>。要查看configure支持的选择列表，可以运行命令：</p>
      <pre>shell&gt; ./configure --help</pre>
      <ul type="disc">
        <li>如果只编译MySQL客户端库和客户端程序而不是服务器，使用--without-server选项：</li>
        <li>shell&gt; ./configure 
          --without-server</li>
      </ul>
      <p>如果你没有C++编译器，则不能编译mysql(有一个客户端程序需要C++)。在这种情况下，你可以去掉configure里面测试C++编译器的代码，然后运行带有 
        --without-server选项的./configure。编译步骤步将仍然尝试构造mysql，但是你可以忽略任何关于“mysql.cc”的警告。（如果make停止，试试make 
        -k告诉它即使出错继续剩下的构造步骤）。</p>
      <p> ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        如果你想要构建嵌入式MySQL库 
        (libmysqld.a),你应当使用--with-embedded-server选项。</p>
      <ul type="disc">
        <li>如果你不想要位于“/usr/local/var”目录下面的日志(log)文件和数据库，使用类似于下列configure命令的一个： </li>
        <li>shell&gt;./configure--prefix=/usr/local/mysql </li>
        <li>shell&gt;./configure--prefix=/usr/local – </li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; localstatedir=/usr/local/mysql/data</li>
      </ul>
      <p> 第一个命令改变安装前缀以便将所有内容安装到“/usr/local/mysql”下面而非
        默认的“/usr/local”。第二个命令保留默认安装前缀，但是覆盖了数据库目录默认目录(通常是“/usr/local/var”)并且把它改为/usr/local/mysql/data。编译完MySQL后，可以通过选项文件更改这些选项。请参见<a href="quick-install.html" title="4.3.2. Using Option Files">4.3.2节，“使用选项文件”</a>。</p>
      <ul type="disc">
        <li>如果你正在使用Unix并且你想要MySQL的套接字位于
          默认位置以外的某个地方(通常在目录“/tmp”或“/var/run”，使用象这样的configure的命令：</li>
        <li>shell&gt; ./configure\-- with-unix-socket-</li>
        <li>path=/usr/local/mysql/tmp/mysql.sock</li>
      </ul>
      <p> 注意给出的文件名必须是一个绝对路径。你还可以在以后使用MySQL选项文件更改mysql.sock的位置。请参见<a href="mysql-install-db.html" title="A.4.5. How to Protect or Change the MySQL Socket File /tmp/mysql.sock">A.4.5节，“如何保护或更改MySQL套接字文件/tmp/mysql.sock”</a>。</p>
      <ul type="disc">
        <li>如果你想编译静态链接程序(例如，制作二进制分发版、获得更快的速度或与解决与RedHat分发版的一些问题)，像这样运行configure：</li>
      </ul>
      <p> ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; shell&gt;./configure --with-client-ldflags=-all-static\</p>
      <p> ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--with-mysqld-ldflags=-all-static</p>
      <ul type="disc">
        <li>如果你正在使用gcc并且没有安装libg++或libstdc++，你可以告诉configure使用gcc作为C++编译器： </li>
        <li>shell&gt; CC=gcc&nbsp; CXX=gcc&nbsp; 
          ./configure</li>
      </ul>
      <p>当你使用gcc作为C++编译器用时，它将不试图链接libg++或libstdc++。即使你安装了这些库，这样也很好，因为过去使用MySQL时，它们的部分版本会出现一些奇怪的问题。</p>
      <p>下面列出了一些经常使用的编译器和环境变量设定值。</p>
      <p> o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
        gcc 
        2.7.2： </p>
      <pre>o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CC=gcc CXX=gcc CXXFLAGS=&quot;-O3 -felide-constructors&quot;</pre>
      <p> o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
        egcs 
        1.0.3a： </p>
      <pre>o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CC=gcc CXX=gcc CXXFLAGS=&quot;-O3 -felide-constructors \
o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -fno-exceptions -fno-rtti&quot;</pre>
      <p> o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
        gcc 
        2.95.2： </p>
      <pre>o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CFLAGS=&quot;-O3 -mpentiumpro&quot; CXX=gcc CXXFLAGS=&quot;-O3 -mpentiumpro \
o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -felide-constructors -fno-exceptions -fno-rtti&quot;</pre>
      <p> o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
        
        pgcc 
        2.90.29 或更新版：</p>
      <pre>o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CFLAGS=&quot;-O3 -mpentiumpro -mstack-align-double&quot; CXX=gcc \
o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CXXFLAGS=&quot;-O3 -mpentiumpro -mstack-align-double \
o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -felide-constructors -fno- exceptions -fno-rtti&quot;</pre>
      <p>在大多数情况，在configure行使用前面列出的选项并加入下面的选项，可以得到合理的优化的MySQL二进制：</p>
      <pre >--prefix=/usr/local/mysql --enable-assembler \
--with-mysqld-ldflags=-all-static</pre>
      <p>换句话说，对于所有最近的gcc版，整个configure行应为：</p>
      <pre >CFLAGS=&quot;-O3 -mpentiumpro&quot; CXX=gcc CXXFLAGS=&quot;-O3 -mpentiumpro \
-felide-constructors -fno- exceptions -fno-rtti&quot; ./ configure \
--prefix=/usr/local/mysql --enable-assembler \
--with-mysqld-ldflags=-all-static</pre>
      <p>我们在MySQL网址http://www.mysql.com/提供的二进制均已经编译过并进行了优化，对于大多数用户应当比较完善。请参见<a href="mysql-binaries.html" title="2.1.2.5. MySQL Binaries Compiled by MySQL AB">2.1.2.5节，“MySQL AB编译的MySQL二进制版本”</a>。其中有一些配置设定值，可以选用来构建更快的二进制，但是只适用高级用户。请参见<a href="" title="7.5.4. How Compiling and Linking Affects the Speed of MySQL">7.5.4节，“编译和链接怎样影响MySQL的速度”</a>。</p>
      <p>如果构造失败并且产生有关编译器或链接器的错误，不能创建共享库“libmysqlclient.so.#”(“#”是一个版本号),
        你可以通过为configure指定--disable-shared选项来解决此问题。在这种情况下，configure将不构造一个共享libmysqlclient.so.#库。</p>
      <ul type="disc">
        <li>默认地，MySQL使用latin1(cp1252)字符集。为了改变
          默认设置，使用--with-charset选项：</li>
        <li>shell&gt; ./configure 
          -- with-charset=<i>CHARSET</i></li>
      </ul>
      <p><i> CHARSET</i>可以是big5、cp1251、cp1257、czech、danish、dec8、dos、euc_kr、gb2312、gbk、german1、hebrew、hp8、hungarian、koi8_ru、koi8_ukr、latin1、latin2、sjis、swe7、tis620、ujis、usa7或win1251ukr。请参见<a href="" title="5.10.1. The Character Set Used for Data and Sorting">5.10.1节，“数据和排序用字符集”</a>。</p>
      <p>可以指定默认校对规则。MySQL默认使用latin1_swedish_ci校对规则。要想更改，使用--with-collation选项：</p>
      <pre >shell&gt; ./configure --with-collation=<i>COLLATION</i></pre>
      <p>要想更改字符集和校对规则，要同时使用--with-charset和--with-collation选项。
        校对规则必须是字符集的合法校对规则。(使用SHOW 
        COLLATION语句来确定每个字符集使用哪个校对规则)。</p>
      <p>如果想在服务器和客户端之间变换字符，你应该看一下SET 
        OPTION CHARACTER SET命令。请参见<a href="" title="13.5.3. SET Syntax">13.5.3节，“SET语法”</a>。</p>
      <p> 警告：如果你在创建了任何数据库表之后改变字符集，你将必须对每个表运行myisamchk 
        -r -q --set-character-set=<i>charset</i>，否则索引可能不正确地排序。（如果安装了MySQL，创建一些表，然后重新配置MySQL使用一个不同的字符集并且重新安装它，这时就可能发生这种情况。）</p>
      <p>通过configure选项--with-extra-charsets=<i>LIST</i>，你可以定义在服务器中再定义哪些字符集。<i>LIST</i> 指下面任何一项：</p>
      <p> o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
        空格间隔的一系列字符集名</p>
      <p> o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
        
        complex 
        -，以包括不能动态装载的所有字符集</p>
      <p> o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
        
        all
        –，以将所有字符集包括进二进制</p>
      <ul type="disc">
        <li>为了配置MySQL带有调试代码，使用--with-debug选项：</li>
        <li>shell&gt; ./configure 
          --with-debug</li>
      </ul>
      <p> 这导致包含一个安全的内存分配器，能发现一些错误和并提供关于正在发生的事情的输出。请参见<a href="" title="E.1. Debugging a MySQL Server">E.1节，“调试MySQL服务器”</a>。</p>
      <p> ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        如果客户端程序使用线程，还必须使用--enable-thread-safe-client配置选项来编译线程安全版的MySQL客户端库。将创建一个libmysqlclient_r库，可以用来连接应用程序线程。请参见<a href="" title="25.2.15. How to Make a Threaded Client">25.2.15节，“如何生成线程式客户端”</a>。</p>
      <p> ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        可以使用--with-big-tables选项构建支持大数据库表的MySQL。</p>
      <p>该选项使变量用来将表行数保存到unsigned 
        long long中而不是unsigned 
        long。结果是允许表有大约1.844E+19 ((2<sup>32</sup>)<sup>2</sup>)行而不是2<sup>32</sup> (~4.295E+09) 行。在以前，要完成该功能必须手动将-DBIG_TABLES传递给编译器。</p>
      属于特定系统的选项可在本章特定系统的小节里找到。请参见<a href="operating-system-specific-notes.html" title="2.12. Operating System-Specific Notes">2.12节，“具体操作系统相关的注意事项”</a>
    
      
        
          
            


<!--start of htmlend-->
<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->