<!--hmt-->
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end --><!--end of htmlheader-->

<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->

<!--end of htmlmiddle-->



<h1> A.8.1.&nbsp;MySQL中的打开事宜</h1>

          
        
      
      <p>下面列出了已知问题，更正它们具有较高的优先级：</p>
      <ul>
        <li>如果将NULL值与使用ALL/ANY/SOME的子查询进行比较，而且子查询返回空的结果，比较操作会评估NULL的非标准结果而不是TRUE或FALSE。在MySQL 
          5.1中将更正该问题。</li>
        <li>对于IN的线子查询优化不像“=”那样有效。</li>
        <li>即使使用了lower_case_table_names=2（允许MySQL记住数据库名和表名使用的大小写），对于函数DATABASE()或在各种日志内（在不区分大小写的系统上），MySQL也不会记住数据库名使用的大小写情况。</li>
        <li>在复制操作中，撤销FOREIGN 
          KEY约束不工作，这是因为约束可能在从服务器上有另一个名称。</li>
        <li>REPLACE（以及具有REPLACE选项的LOAD 
          DATA）不会触发ON DELETE CASCADE。</li>
        <li>如果未使用所有列而且仅使用DISTINCT列表中的列，在GROUP_CONCAT()中，DISTINCT不能与ORDER 
          BY一起工作。</li>
        <li>如果1位用户拥有长时间运行的事务，而且另1位用户撤销了在事务中更新的某1表，那么在表用于事务本身之前，存在较小的机会，会在二进制日志中包含DROP 
          TABLE命令。我们计划更正该问题，方法是让DROP TABLE命令等待，直至表未在任何事务中使用为止。</li>
        <li>将大的整数值（介于2<sup>63</sup>和2<sup>64</sup>–1之间）插入数值或字符串列时，它将作为负值插入，这是因为该数值是在有符号整数环境下评估的。</li>
        <li>如果服务器运行在不具备二进制日志功能的条件下，FLUSH 
          TABLES WITH READ LOCK不能屏蔽COMMIT，执行完整备份时这可能会导致问题（表间的一致性问题）。</li>
        <li>在某些情况下，作用在BDB表上的ANALYZE 
          TABLE会导致表不可用，直至重启mysqld为止。如果出现该情况，请在MySQL错误文件中查找下述形式的错误：</li>
      </ul>
      <pre>001207 22:07:56&nbsp; bdb:&nbsp; log_flush: LSN past current end-of-log</pre>
      <ul>
        <li>在所有事务完成之前，不要在BDB表（正在其上运行多语句事务）上执行ALTER 
          TABLE（可能会忽略事务）。</li>
        <li>对于正在使用INSERT 
          DELAYED的表，在其上执行ANALYZE TABLE、OPTIMIZE 
          TABLE和REPAIR TABLE时，可能会导致问题。</li>
        <li>在表上执行LOCK 
          TABLE ...和FLUSH 
          TABLES ...时，不保证没有完成一半的事务。</li>
        <li>BDB表打开的速度相对较慢。如果你在数据库上有很多BDB表，如果未使用“-A”选项或正使用再混编功能，要想在数据库上使用mysql客户端，需要花费较长的时间。当你有大的表高速缓冲时，这点尤其明显。</li>
        <li> 复制功能采用了查询级日志功能：主服务器将已执行的查询写入二进制日志。这是一种速度很快、简洁和有效的记录方法，在大多数情况下工作良好。</li>
      </ul>
      <p> 如果以特定的方式设计查询，使得数据更改是非决定性（通常不推荐，即使在复制之外也同样），主服务器和从服务器上的数据将变得不同。</p>
      <p>例如：</p>
      <blockquote>
        <ul>
          <li>将0或NULL值插入AUTO_INCREMENT列中的CREATE ... SELECT或INSERT ... 
            SELECT语句。</li>
          <li>DELETE，如果从具有ON DELETE CASCADE属性的外键的表中删除行。</li>
          <li>REPLACE ... SELECT、INSERT IGNORE ... 
            SELECT，如果在插入的数据中具有重复键。</li>
        </ul>
      </blockquote>
      <p> 当且仅当前述查询没有保证决定行顺序的ORDER 
        BY子句时。</p>
      <p>例如，对于不具有ORDER 
        BY的INSERT ... SELECT，SELECT可能会以不同的顺序返回行（它会导致具有不同等级的行，从而导致AUTO_INCREMENT列中的不同数值），具体情况取决于优化器在主服务器和从服务器上所作的选择。</p>
      <p>在主服务器和从服务器上，查询将进行不同的优化，仅当：</p>
      <blockquote>
        <ul>
          <li> 使用不同的存储引擎在主服务器上而不是从服务器上保存表。（能够在主服务器和从服务器上使用不同的存储引擎。例如，如果从服务器具有较少的可用磁盘空间，可以在主服务器上使用InnoDB，但在 
            从服务器桑使用MyISAM）。</li>
          <li>在主服务器和从服务器上，MySQL缓冲区大小是不同的（key_buffer_size等）。</li>
          <li>在主服务器和从服务器上运行不同的MySQL版本，版本间的优化器代码也不同。</li>
        </ul>
      </blockquote>
      <p>该问题也会影响使用mysqlbinlog|mysql的数据库恢复。</p>
      <p>避免该问题的最简单方法是，为前述的非决定性查询增加ORDER 
        BY子句，以确保总是以相同的顺序保存或更改行。</p>
      <p>在将来的MySQL版本中，需要时，我们将自动增加ORDER 
        BY子句。</p>
      <p>下面列出了已知的事宜，这些事宜将在恰当的时候更正：</p>
      <ul>
        <li>日志文件名基于服务器主机名（如果未使用启动选项指定文件名的话）。如果更改了主机名，你将不得不使用诸如“--log-bin=<i>old_host_name</i>-bin”等选下美国。另一种选择是重命名旧文件，以反映主机名变更情况（如果是二进制日志，需要编辑二进制日志索引文件，并更正binlog名称）。请参见<a href="" title="5.3.1. mysqld Command-Line Options">5.3.1节，“mysqld命令行选项”</a>。</li>
        <li>Mysqlbinlog不删除执行LOAD 
          DATA INFILE命令后遗留的临时文件。请参见<a href="" title="8.6. mysqlbinlog — Utility for Processing Binary Log Files">8.6节，“mysqlbinlog：用于处理二进制日志文件的实用工具”</a>。</li>
        <li>RENAME不能与TEMPORARY表一起工作，也不能与MERGE表中使用的表一起工作。</li>
        <li>由于表定义文件的保存方式，不能在表名、列名或枚举中使用字符255（CHAR(255)）。按照安排，当我们实施了新的表定义格式文件时，将在5.1版中更正该问题。</li>
        <li>使用SET 
          CHARACTER SET时，不能在数据库、表和列名中使用转换的字符。</li>
        <li>不能在LIKE ... 
          ESCAPE中与ESCAPE一起使用‘_’或‘%’。</li>
        <li>如果你有1个DECIMAL列，其中，相同的数值以不同的格式保存（例如，+01.00、1.00、01.00），GROUP 
          BY可能会将每个值当作不同的值。</li>
        <li>使用MIT-pthreads时，不能在另一个目录下创建服务器。这是因为它需要更改MIT-pthreads，我们不太会更正该问题。请参见<a title="2.8.5.&nbsp;MIT-pthreads Notes"  href="">2.8.5
          “MIT-pthreads注意事项”</a>。</li>
        <li>在GROUP BY、ORDER 
          BY或DISTINCT中，不能可靠地使用BLOB和TEXT值。在这类情况下，与BLOB值进行比较时，仅使用最前的max_sort_length字节。max_sort_length的默认值是1024，可在服务器启动时或运行时更改它。</li>
        <li>数值计算是使用BIGINT或DOUBLE（正常情况下均为64位长）进行的。你所能获得的精度取决于函数。通用规则是位函数是按BIGINT精度执行的，IF和ELT()是按BIGINT或DOUBLE精度执行的，其余的函数是按DOUBLE精度执行的。对于除位字段外的其他数，如果大于63位（9223372036854775807），应避免使用无符号长long值。</li>
        <li>在1个表中，最多能有255个ENUM和SET列。</li>
        <li>在MIN()、MAX()以及其他聚合函数中，MySQL目前会根据其字符串值比较ENUM和SET列，而不是根据字符串在集合中的相对位置。</li>
        <li>mysqld_safe会将来自mysqld的所有消息再定向到mysqld日志。与之相关的1个问题是，如果你执行mysqladmin 
          refresh关闭并再次打开日志，stdout和stderr仍会被重定向到旧的日志。如果你以广义方式使用“--log”，应编辑mysqld_safe以记录到<i>host_name</i>.err而不是<i>host_name</i>.log，以便通过删除它并执行mysqladmin 
          refresh，方便地收回为旧日志分配的空间。</li>
        <li>在UPDATE语句中，列从左向右更新。如果引用了已更新的列，你将得到更新值而不是原始值。例如，下述语句会将KEY增加2，而不是1：</li>
      </ul>
      <pre>mysql&gt; UPDATE <i>tbl_name</i> SET KEY=KEY+1,KEY=KEY+1;</pre>
      <ul>
        <li>你可以在相同查询中引用多个临时表，但不能引用任何给定的临时表1次以上。例如，下述语句不能正常工作：</li>
      </ul>
      <pre>mysql&gt; SELECT * FROM temp_table, temp_table AS t2;
错误1137：不能再次打开表：&#39;temp_table&#39;</pre>
      <ul>
        <li>当你在联合操作中使用“隐含”列时，与未使用隐含列相比，优化器将以不同的方式处理DISTINCT。在联合操作中，隐含列将作为结果的组成部份计数（即使未显示），但在正常查询中，隐含列不参与DISTINCT比较。在以后，我们可能会更改该情况，在执行DISTINCT时不比较隐含列。</li>
      </ul>
      <p>例如：</p>
      <pre>SELECT DISTINCT mp3id FROM band_downloads
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WHERE userid = 9 ORDER BY id DESC;</pre>
      <p>以及</p>
      <pre>SELECT DISTINCT band_downloads.mp3id
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FROM band_downloads,band_mp3
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WHERE band_downloads.userid = 9
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; AND band_mp3.id = band_downloads.mp3id
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ORDER BY band_downloads.id DESC;</pre>
      <p>在第2种情况下，使用MySQL服务器3.23.x，可在结果集中获得2个等同行（这是因为，隐藏ID列中的值可能不同）。</p>
      <p>注意，在结果集中，仅对不含ORDER 
        BY列的查询才会出现该情况。</p>
      <ul>
        <li>如果在返回空集的查询上执行PROCEDURE，在某些情况下，PROCEDURE不转换列。</li>
        <li>创建具有MERGE类型的表时，不检查基本表是否具有兼容的类型。</li>
        <li>如果使用ALTER 
          TABLE为MERGE表中使用的表增加了UNIQUE索引，然后在MERGE表上增加了正常索引，如果在表中存在旧的、非UNIQUE键，对于这些表，键顺序是不同的。这是因为，ALTER 
          TABLE会将UNIQUE索引放在正常索引之前，以便能尽早检测到重复的键。</li>
      </ul>
      &nbsp;
    
  


  <hr>
  <p>这是MySQL参考手册的翻译版本，关于MySQL参考手册，请访问dev.mysql.com。原始参考手册为英文版，与英文版参考手册相比，本翻译版可能不是最新的。





<!--start of htmlend-->
<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->