<!--hmt-->
<!-- header-start -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="/include/js/jquery.min.js" language="javascript"></script>
<script src="/include/js/jquery-ui.min.js" language="javascript"></script>
<link href="/include/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="/include/css/main.css" rel="stylesheet" type="text/css" />

<SCRIPT>
	$(document).ready(function() {
		$( "#menu" ).menu({ position: { my: "left top", at: "right-100 top+35" } });
	});
</SCRIPT>

<!-- header-end --><!--end of htmlheader-->

<!-- middle-start -->
﻿
<base target="_blank" />
</head>
<body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- topmenu-start -->
<header>
    <section id="global-nav">
        <nav>
            <ul class="projects">
                    <li><a href="/">ITeedu.com</a></li>
            </ul>
            <ul class="links">
                    <li><a>快捷导航</a>
                        <ul>
                            <li><a href="/plang/">编程语言</a></li>
                            <li><a href="/webtech/">WEB开发</a></li>
                            <li><a href="/handset/">手机开发</a></li>
                            <li><a href="/database/">数据库</a></li>
                            <li><a href="/os/">操作系统</a></li>
                            <li><a href="/embed/">嵌入式</a></li>
                            <li><a href="/opensource/">开源软件</a></li>
                            <li><a href="/works/">作品</a></li>

                        </ul>
                    </li>
                    <li><a href="/plang/asm/">编辑语言</a>
                        <ul>
                                <li><a href="/plang/asm/">汇编</a></li>
                                <li><a href="/plang/ccpp/">C/C++</a> </li>
                                <li><a href="/plang/java/">JAVA</a> </li>
                                <li><a href="/plang/python/">Python</a> </li>
                                <li><a href="/plang/ruby/">Ruby</a></li>
                        </ul>
                    </li>
                    <li><a href="/webtech/">WEB开发</a>
                        <ul>
                            <li><a href="/webtech/javascript/">javascript</a> </li>
                            <li><a href="/webtech/j2ee/">J2EE</a> </li>
                            <li><a href="/webtech/php/">PHP</a> </li>
                            <li><a href="/webtech/python/djangocn2/">Django</a> </li>
                        </ul>
                    </li>
					<li><a href="/me/contactme.htm">关于</a></li>
            </ul>
        </nav>
    </section>
</header>
<!-- topmenu-end -->

<div id="container" style="margin: 35px 120px 0px 120px;">
	<div id="logo-wapper">
		<div style="float:left;width:150px;" ><h1 class="logo">ITEEDU</h1></div>
		<div style="float:right;width:760px">

		</div>
		<div style="clear:both;"></div>
	</div>
<nav id="main-nav">
<!-- menunav-start -->
<div id="menu">
    <li><a href="/plang/">编程语言</a>
        <ul>
            <LI><a href="/plang/asm/">汇编</a></LI>
            <LI><a href="/plang/ccpp/">C/C++</a> </LI>
            <LI><a href="/plang/java/">JAVA</a> </LI>
            <LI><a href="/plang/python/">Python</a> </LI>
            <LI><a href="/plang/ruby/">Ruby</a></LI>
        </ul>
    </li>
    <li><a href="/webtech/index.php">WEB开发</a>
        <ul>
            <LI><a href="/webtech/j2ee/">J2EE</a></LI>
            <LI><a href="/webtech/php/">PHP</a> </LI>
            <LI><a href="/webtech/python/djangocn2/">djangocn2</a> </LI>
        </ul>
    </li>
    <li><a href="/handset/index.php">手机开发</a>
        <ul>
            <LI><a href="/handset/android/">android</a></LI>
            <LI><a href="/handset/iphone/">iphone</a> </LI>
        </ul>
    </li>
    <li><a href="/database/index.php">数据库</a>
        <ul>
            <LI><a href="/database/mysql/">MYSQL</a></LI>
            <LI><a href="/database/sqlite/">sqlite</a></LI>
    	</ul>
    </li>
    <li><a href="/os/">操作系统</a>
        <ul>
        	<LI><a href="/os/linux/">Linux</a></LI>
        	<LI><a href="/os/grub/">GRUB</a></LI>
    	</ul>
     </li>
     <li><a href="/embed/">嵌入式</a></li>
     <li><a href="/opensource/">开源软件</a></li>
</div>
<!-- menunav-end -->
</nav>
<div id="content-wrapper">
<div id="file-wrapper">


<!-- middle-end -->

<!--end of htmlmiddle-->



<h1> 12.7.5.&nbsp;微调MySQL全文搜索</h1>

          
        
      
      <p> MySQL的全文搜索容量几乎不具有用户调节参数。假如你拥有一个 
        MySQL源分布，你就能对全文搜索性能行使更多控制，原因是一些变化需要源代码修改。请参见<a href="" title="2.8. MySQL Installation Using a Source Distribution">2.8节，“使用源码分发版安装MySQL”</a>。</p>
      <p> 注意，为了更加有效，需要对全文搜索谨慎调节。实际上，在大多数情况下修改默认性能只能降低其性能。<i> 除非你知道自己在做什么，否则不要改变 MySQL源。&nbsp; </i></p>
      <p> 下述的大多数全文变量必须在服务器启动时被设置。为了改变它们，还要重新启动服务器；在服务器正在运行期间，他们不会被改变。&nbsp; </p>
      <p> 一些变量的改变需要你重建表中的 
        FULLTEXT 索引。本章结尾部分给出了其有关操作说明。 </p>
      <ul type="disc">
        <li> ft_min_word_len and ft_max_word_len系统自变量规定了被编入索引单词的最小长度和最大长度。(见<a href="fulltext-fine-tuning.html" title="5.3.3. Server System Variables">5.3.3节，“服务器系统变量”</a>.)
          默认的最小值为四个字符；默认的最大值取决于使用的 MySQL 
          版本。假如你改变任意一个值，那么你必须重建你的 FULLTEXT索引。 
          例如，若你希望一个3字符的单词变为可查找项，则可以通过将以下行移动到一个供选择文件里，从而设置 
          ft_min_word_len 变量：</li>
      </ul>
      <p> ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        
        [mysqld]</p>
      <p> ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        
        
        ft_min_word_len=3</p>
      <p> 然后重新启动服务器，重建你的 
        FULLTEXT索引。同时还要特别注意该表后面的说明中的关于myisamchk的注释。 </p>
      <ul type="disc">
        <li> 若要覆盖默认停止字，则可设置 
          ft_stopword_file 系统变量。 (见<a href="fulltext-fine-tuning.html" title="5.3.3. Server System Variables">5.3.3节，“服务器系统变量”</a>）。
          变量值应为包含停止字的文件路径名, 
          或是用来截止禁用词过滤的空字符串。在改变了这个变量的值或禁用词文件的内容后, 
          重建你的 FULLTEXT索引。 </li>
      </ul>
      <p> 停止字是自由形态的，换言之，你可使用任何诸如newline、 
        space或comma这样的非字母数字字符来分隔禁用词。 下划线字符(_)
        和被视为单词的一部分的单引号 (&#39;)例外。停止字字符集为服务器默认字符集；见<a href="" title="10.3.1. Server Character Set and Collation">10.3.1节，“服务器字符集和校对”</a>. </p>
      <ul type="disc">
        <li> &nbsp;自然语言查询的50%阈值由所选择的特别权衡方案所决定。若要阻止它，myisam/ftdefs.h
          中寻找以下行： </li>
      </ul>
      <p> ·&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        
        #define 
        GWS_IN_USE GWS_PROB</p>
      <p> 将该行改为： </p>
      <p> #define 
        GWS_IN_USE GWS_FREQ</p>
      <p> 然后重新编译 
        MySQL。此时不需要重建索引。注释：这样做你会<i>严重的</i>By
        降低 MySQL为MATCH()函数提供合适的相关值得能力。假如你争得需要搜索这样的普通词，而使用IN 
        BOOLEAN MODE代替的效果更好，因为它不遵循 50% 阈值。 </p>
      <ul type="disc">
        <li> 要改变用于布尔全文搜索的操作符，设置 ft_boolean_syntax 
          系统变量。 这个变量也可以在服务器运行时被改变，但你必须有SUPER 
          特权才能这么做。在这种情况下不需要重建索引。 见<a href="fulltext-fine-tuning.html" title="5.3.3. Server System Variables">5.3.3节，“服务器系统变量”</a>,
          它向我们说明了怎样使用这个变量的规则。 </li>
      </ul>
      <p> 假如你改变了影响索引的全文变量 
        (ft_min_word_len、 ft_max_word_len或ft_stopword_file),或假如你改变了禁用词文件本身，则你必须在改变和重新启动服务器后重建你的 
        FULLTEXT索引。这时，要重建索引， 只需进行一个 QUICK 
        修理操作：&nbsp; </p>
      <p> mysql&gt;  REPAIR TABLE <i>tbl_name</i> QUICK;</p>
      <p> 注意，假如你使用&nbsp; myisamchk 来执行一项修改表索引的操作 (诸如修理或分析 
        ), 则使用最小单词长度和最大单词长度以及停止字的默认全文参数值重建FULLTEXT索引，除非你已另外指定。这会导致问询失败。 </p>
      <p> 发生这个问题的原因是只有服务器认识这些参数。它们的存储位置不在&nbsp; MyISAM 
        索引文件中。若你已经修改了最小单词长度或最大单词长度或服务器中的停止字，为避免这个问题，为你对mysqld所使用的myisamchk 指定同样的 ft_min_word_len、 
        ft_max_word_len和ft_stopword_file值。例如，假如你已经将最小单词长度设置为 
        3, 则你可以这样修改一个带有myisamchk的表：</p>
      <p> shell&gt;  myisamchk --recover --ft_min_word_len=3 <i>tbl_name</i>.MYI</p>
      <p> 为保证  myisamchk 及服务器对全文参数使用相同的值， 可将每一项都放在供选文件中的 [mysqld]和 
        [myisamchk] 部分：</p>
      <p> [mysqld]</p>
      <p> ft_min_word_len=3</p>
      <p>&nbsp; </p>
      <p> [myisamchk]</p>
      <p> ft_min_word_len=3</p>
      <p> 使用 
        REPAIR TABLE、 ANALYZE TABLE、OPTIMIZE 
        TABLE或ALTER TABLE来代替使用  myisamchk 。这些语句通过服务器来执行，服务器知道使用哪个全文参数值更加合适。 
    
  
  
    
      
        
          


<!--start of htmlend-->
<!-- tail-start -->
﻿
<div style="clear:both;"></div>

</div>
<!--end of file-wrpper-->
</div>
<!--end of content-wrapper-->
</div>
<!--end of container-->


<footer>
<p class="copyright">版权所有 2014 <a href="http://www.iteedu.com">ITEEDU</a>, 京ICP备16069454号</p>
</footer>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<!--百度统计js-->
<p style="display:none">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fa5213b08a76d4fc6b8a80eb382490e0b' type='text/javascript'%3E%3C/script%3E"));
</script>
</p>

</body>

</html>


<!-- tail-end -->